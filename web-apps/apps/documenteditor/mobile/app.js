/*
 * Copyright (C) Ascensio System SIA 2012-2019. All rights reserved
 *
 * https://www.onlyoffice.com/ 
 *
 * Version: 5.4.2 (build:46)
 */
if(function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},t=e._,i=Array.prototype,a=Object.prototype,n="undefined"!=typeof Symbol?Symbol.prototype:null,o=i.push,s=i.slice,r=a.toString,l=a.hasOwnProperty,c=Array.isArray,d=Object.keys,p=Object.create,u=function(){},m=function(e){return e instanceof m?e:this instanceof m?void(this._wrapped=e):new m(e)};"undefined"==typeof exports||exports.nodeType?e._=m:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=m),exports._=m),m.VERSION="1.8.3";var h,g=function(e,t,i){if(void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case null:case 3:return function(i,a,n){return e.call(t,i,a,n)};case 4:return function(i,a,n,o){return e.call(t,i,a,n,o)}}return function(){return e.apply(t,arguments)}},v=function(e,t,i){return m.iteratee!==h?m.iteratee(e,t):null==e?m.identity:m.isFunction(e)?g(e,t,i):m.isObject(e)&&!m.isArray(e)?m.matcher(e):m.property(e)};m.iteratee=h=function(e,t){return v(e,t,1/0)};var f=function(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),a=Array(i),n=0;n<i;n++)a[n]=arguments[n+t];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,arguments[0],a);case 2:return e.call(this,arguments[0],arguments[1],a)}var o=Array(t+1);for(n=0;n<t;n++)o[n]=arguments[n];return o[t]=a,e.apply(this,o)}},b=function(e){if(!m.isObject(e))return{};if(p)return p(e);u.prototype=e;var t=new u;return u.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},w=function(e,t){for(var i=t.length,a=0;a<i;a++){if(null==e)return;e=e[t[a]]}return i?e:void 0},y=Math.pow(2,53)-1,x=C("length"),k=function(e){var t=x(e);return"number"==typeof t&&t>=0&&t<=y};m.each=m.forEach=function(e,t,i){t=g(t,i);var a,n;if(k(e))for(a=0,n=e.length;a<n;a++)t(e[a],a,e);else{var o=m.keys(e);for(a=0,n=o.length;a<n;a++)t(e[o[a]],o[a],e)}return e},m.map=m.collect=function(e,t,i){t=v(t,i);for(var a=!k(e)&&m.keys(e),n=(a||e).length,o=Array(n),s=0;s<n;s++){var r=a?a[s]:s;o[s]=t(e[r],r,e)}return o};var T=function(e){var t=function(t,i,a,n){var o=!k(t)&&m.keys(t),s=(o||t).length,r=e>0?0:s-1;for(n||(a=t[o?o[r]:r],r+=e);r>=0&&r<s;r+=e){var l=o?o[r]:r;a=i(a,t[l],l,t)}return a};return function(e,i,a,n){var o=arguments.length>=3;return t(e,g(i,n,4),a,o)}};m.reduce=m.foldl=m.inject=T(1),m.reduceRight=m.foldr=T(-1),m.find=m.detect=function(e,t,i){var a=k(e)?m.findIndex:m.findKey,n=a(e,t,i);if(void 0!==n&&-1!==n)return e[n]},m.filter=m.select=function(e,t,i){var a=[];return t=v(t,i),m.each(e,function(e,i,n){t(e,i,n)&&a.push(e)}),a},m.reject=function(e,t,i){return m.filter(e,m.negate(v(t)),i)},m.every=m.all=function(e,t,i){t=v(t,i);for(var a=!k(e)&&m.keys(e),n=(a||e).length,o=0;o<n;o++){var s=a?a[o]:o;if(!t(e[s],s,e))return!1}return!0},m.some=m.any=function(e,t,i){t=v(t,i);for(var a=!k(e)&&m.keys(e),n=(a||e).length,o=0;o<n;o++){var s=a?a[o]:o;if(t(e[s],s,e))return!0}return!1},m.contains=m.includes=m.include=function(e,t,i,a){return k(e)||(e=m.values(e)),("number"!=typeof i||a)&&(i=0),m.indexOf(e,t,i)>=0},m.invoke=f(function(e,t,i){var a,n;return m.isFunction(t)?n=t:m.isArray(t)&&(a=t.slice(0,-1),t=t[t.length-1]),m.map(e,function(e){var o=n;if(!o){if(a&&a.length&&(e=w(e,a)),null==e)return;o=e[t]}return null==o?o:o.apply(e,i)})}),m.pluck=function(e,t){return m.map(e,m.property(t))},m.where=function(e,t){return m.filter(e,m.matcher(t))},m.findWhere=function(e,t){return m.find(e,m.matcher(t))},m.max=function(e,t,i){var a,n,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=k(e)?e:m.values(e);for(var r=0,l=e.length;r<l;r++)null!=(a=e[r])&&a>o&&(o=a)}else t=v(t,i),m.each(e,function(e,i,a){((n=t(e,i,a))>s||n===-1/0&&o===-1/0)&&(o=e,s=n)});return o},m.min=function(e,t,i){var a,n,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=k(e)?e:m.values(e);for(var r=0,l=e.length;r<l;r++)null!=(a=e[r])&&a<o&&(o=a)}else t=v(t,i),m.each(e,function(e,i,a){((n=t(e,i,a))<s||n===1/0&&o===1/0)&&(o=e,s=n)});return o},m.shuffle=function(e){return m.sample(e,1/0)},m.sample=function(e,t,i){if(null==t||i)return k(e)||(e=m.values(e)),e[m.random(e.length-1)];var a=k(e)?m.clone(e):m.values(e),n=x(a);t=Math.max(Math.min(t,n),0);for(var o=n-1,s=0;s<t;s++){var r=m.random(s,o),l=a[s];a[s]=a[r],a[r]=l}return a.slice(0,t)},m.sortBy=function(e,t,i){var a=0;return t=v(t,i),m.pluck(m.map(e,function(e,i,n){return{value:e,index:a++,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,a=t.criteria;if(i!==a){if(i>a||void 0===i)return 1;if(i<a||void 0===a)return-1}return e.index-t.index}),"value")};var S=function(e,t){return function(i,a,n){var o=t?[[],[]]:{};return a=v(a,n),m.each(i,function(t,n){var s=a(t,n,i);e(o,t,s)}),o}};m.groupBy=S(function(e,t,i){m.has(e,i)?e[i].push(t):e[i]=[t]}),m.indexBy=S(function(e,t,i){e[i]=t}),m.countBy=S(function(e,t,i){m.has(e,i)?e[i]++:e[i]=1});var _=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(e){return e?m.isArray(e)?s.call(e):m.isString(e)?e.match(_):k(e)?m.map(e,m.identity):m.values(e):[]},m.size=function(e){return null==e?0:k(e)?e.length:m.keys(e).length},m.partition=S(function(e,t,i){e[i?0:1].push(t)},!0),m.first=m.head=m.take=function(e,t,i){if(!(null==e||e.length<1))return null==t||i?e[0]:m.initial(e,e.length-t)},m.initial=function(e,t,i){return s.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},m.last=function(e,t,i){if(!(null==e||e.length<1))return null==t||i?e[e.length-1]:m.rest(e,Math.max(0,e.length-t))},m.rest=m.tail=m.drop=function(e,t,i){return s.call(e,null==t||i?1:t)},m.compact=function(e){return m.filter(e,Boolean)};var A=function(e,t,i,a){a=a||[];for(var n=a.length,o=0,s=x(e);o<s;o++){var r=e[o];if(k(r)&&(m.isArray(r)||m.isArguments(r)))if(t)for(var l=0,c=r.length;l<c;)a[n++]=r[l++];else A(r,t,i,a),n=a.length;else i||(a[n++]=r)}return a};m.flatten=function(e,t){return A(e,t,!1)},m.without=f(function(e,t){return m.difference(e,t)}),m.uniq=m.unique=function(e,t,i,a){m.isBoolean(t)||(a=i,i=t,t=!1),null!=i&&(i=v(i,a));for(var n=[],o=[],s=0,r=x(e);s<r;s++){var l=e[s],c=i?i(l,s,e):l;t?(s&&o===c||n.push(l),o=c):i?m.contains(o,c)||(o.push(c),n.push(l)):m.contains(n,l)||n.push(l)}return n},m.union=f(function(e){return m.uniq(A(e,!0,!0))}),m.intersection=function(e){for(var t=[],i=arguments.length,a=0,n=x(e);a<n;a++){var o=e[a];if(!m.contains(t,o)){var s;for(s=1;s<i&&m.contains(arguments[s],o);s++);s===i&&t.push(o)}}return t},m.difference=f(function(e,t){return t=A(t,!0,!0),m.filter(e,function(e){return!m.contains(t,e)})}),m.unzip=function(e){for(var t=e&&m.max(e,x).length||0,i=Array(t),a=0;a<t;a++)i[a]=m.pluck(e,a);return i},m.zip=f(m.unzip),m.object=function(e,t){for(var i={},a=0,n=x(e);a<n;a++)t?i[e[a]]=t[a]:i[e[a][0]]=e[a][1];return i};var E=function(e){return function(t,i,a){i=v(i,a);for(var n=x(t),o=e>0?0:n-1;o>=0&&o<n;o+=e)if(i(t[o],o,t))return o;return-1}};m.findIndex=E(1),m.findLastIndex=E(-1),m.sortedIndex=function(e,t,i,a){i=v(i,a,1);for(var n=i(t),o=0,s=x(e);o<s;){var r=Math.floor((o+s)/2);i(e[r])<n?o=r+1:s=r}return o};var P=function(e,t,i){return function(a,n,o){var r=0,l=x(a);if("number"==typeof o)e>0?r=o>=0?o:Math.max(o+l,r):l=o>=0?Math.min(o+1,l):o+l+1;else if(i&&o&&l)return o=i(a,n),a[o]===n?o:-1;if(n!==n)return o=t(s.call(a,r,l),m.isNaN),o>=0?o+r:-1;for(o=e>0?r:l-1;o>=0&&o<l;o+=e)if(a[o]===n)return o;return-1}};m.indexOf=P(1,m.findIndex,m.sortedIndex),m.lastIndexOf=P(-1,m.findLastIndex),m.range=function(e,t,i){null==t&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),n=Array(a),o=0;o<a;o++,e+=i)n[o]=e;return n},m.chunk=function(e,t){if(null==t||t<1)return[];for(var i=[],a=0,n=e.length;a<n;)i.push(s.call(e,a,a+=t));return i};var M=function(e,t,i,a,n){if(!(a instanceof t))return e.apply(i,n);var o=b(e.prototype),s=e.apply(o,n);return m.isObject(s)?s:o};m.bind=f(function(e,t,i){if(!m.isFunction(e))throw new TypeError("Bind must be called on a function");var a=f(function(n){return M(e,a,t,this,i.concat(n))});return a}),m.partial=f(function(e,t){var i=m.partial.placeholder,a=function(){for(var n=0,o=t.length,s=Array(o),r=0;r<o;r++)s[r]=t[r]===i?arguments[n++]:t[r];for(;n<arguments.length;)s.push(arguments[n++]);return M(e,a,this,this,s)};return a}),m.partial.placeholder=m,m.bindAll=f(function(e,t){t=A(t,!1,!1);var i=t.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var a=t[i];e[a]=m.bind(e[a],e)}}),m.memoize=function(e,t){var i=function(a){var n=i.cache,o=""+(t?t.apply(this,arguments):a);return m.has(n,o)||(n[o]=e.apply(this,arguments)),n[o]};return i.cache={},i},m.delay=f(function(e,t,i){return setTimeout(function(){return e.apply(null,i)},t)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(e,t,i){var a,n,o,s,r=0;i||(i={});var l=function(){r=!1===i.leading?0:m.now(),a=null,s=e.apply(n,o),a||(n=o=null)},c=function(){var c=m.now();r||!1!==i.leading||(r=c);var d=t-(c-r);return n=this,o=arguments,d<=0||d>t?(a&&(clearTimeout(a),a=null),r=c,s=e.apply(n,o),a||(n=o=null)):a||!1===i.trailing||(a=setTimeout(l,d)),s};return c.cancel=function(){clearTimeout(a),r=0,a=n=o=null},c},m.debounce=function(e,t,i){var a,n,o=function(t,i){a=null,i&&(n=e.apply(t,i))},s=f(function(s){if(a&&clearTimeout(a),i){var r=!a;a=setTimeout(o,t),r&&(n=e.apply(this,s))}else a=m.delay(o,t,this,s);return n});return s.cancel=function(){clearTimeout(a),a=null},s},m.wrap=function(e,t){return m.partial(t,e)},m.negate=function(e){return function(){return!e.apply(this,arguments)}},m.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,a=e[t].apply(this,arguments);i--;)a=e[i].call(this,a);return a}},m.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},m.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},m.once=m.partial(m.before,2),m.restArgs=f;var I=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(e,t){var i=D.length,n=e.constructor,o=m.isFunction(n)&&n.prototype||a,s="constructor";for(m.has(e,s)&&!m.contains(t,s)&&t.push(s);i--;)(s=D[i])in e&&e[s]!==o[s]&&!m.contains(t,s)&&t.push(s)};m.keys=function(e){if(!m.isObject(e))return[];if(d)return d(e);var t=[];for(var i in e)m.has(e,i)&&t.push(i);return I&&L(e,t),t},m.allKeys=function(e){if(!m.isObject(e))return[];var t=[];for(var i in e)t.push(i);return I&&L(e,t),t},m.values=function(e){for(var t=m.keys(e),i=t.length,a=Array(i),n=0;n<i;n++)a[n]=e[t[n]];return a},m.mapObject=function(e,t,i){t=v(t,i);for(var a=m.keys(e),n=a.length,o={},s=0;s<n;s++){var r=a[s];o[r]=t(e[r],r,e)}return o},m.pairs=function(e){for(var t=m.keys(e),i=t.length,a=Array(i),n=0;n<i;n++)a[n]=[t[n],e[t[n]]];return a},m.invert=function(e){for(var t={},i=m.keys(e),a=0,n=i.length;a<n;a++)t[e[i[a]]]=i[a];return t},m.functions=m.methods=function(e){var t=[];for(var i in e)m.isFunction(e[i])&&t.push(i);return t.sort()};var O=function(e,t){return function(i){var a=arguments.length;if(t&&(i=Object(i)),a<2||null==i)return i;for(var n=1;n<a;n++)for(var o=arguments[n],s=e(o),r=s.length,l=0;l<r;l++){var c=s[l];t&&void 0!==i[c]||(i[c]=o[c])}return i}};m.extend=O(m.allKeys),m.extendOwn=m.assign=O(m.keys),m.findKey=function(e,t,i){t=v(t,i);for(var a,n=m.keys(e),o=0,s=n.length;o<s;o++)if(a=n[o],t(e[a],a,e))return a};var B=function(e,t,i){return t in i};m.pick=f(function(e,t){var i={},a=t[0];if(null==e)return i;m.isFunction(a)?(t.length>1&&(a=g(a,t[1])),t=m.allKeys(e)):(a=B,t=A(t,!1,!1),e=Object(e));for(var n=0,o=t.length;n<o;n++){var s=t[n],r=e[s];a(r,s,e)&&(i[s]=r)}return i}),m.omit=f(function(e,t){var i,a=t[0];return m.isFunction(a)?(a=m.negate(a),t.length>1&&(i=t[1])):(t=m.map(A(t,!1,!1),String),a=function(e,i){return!m.contains(t,i)}),m.pick(e,a,i)}),m.defaults=O(m.allKeys,!0),m.create=function(e,t){var i=b(e);return t&&m.extendOwn(i,t),i},m.clone=function(e){return m.isObject(e)?m.isArray(e)?e.slice():m.extend({},e):e},m.tap=function(e,t){return t(e),e},m.isMatch=function(e,t){var i=m.keys(t),a=i.length;if(null==e)return!a;for(var n=Object(e),o=0;o<a;o++){var s=i[o];if(t[s]!==n[s]||!(s in n))return!1}return!0};var R,N;R=function(e,t,i,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var n=typeof e;return("function"===n||"object"===n||"object"==typeof t)&&N(e,t,i,a)},N=function(e,t,i,a){e instanceof m&&(e=e._wrapped),t instanceof m&&(t=t._wrapped);var o=r.call(e);if(o!==r.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return n.valueOf.call(e)===n.valueOf.call(t)}var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(m.isFunction(l)&&l instanceof l&&m.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],a=a||[];for(var d=i.length;d--;)if(i[d]===e)return a[d]===t;if(i.push(e),a.push(t),s){if((d=e.length)!==t.length)return!1;for(;d--;)if(!R(e[d],t[d],i,a))return!1}else{var p,u=m.keys(e);if(d=u.length,m.keys(t).length!==d)return!1;for(;d--;)if(p=u[d],!m.has(t,p)||!R(e[p],t[p],i,a))return!1}return i.pop(),a.pop(),!0},m.isEqual=function(e,t){return R(e,t)},m.isEmpty=function(e){return null==e||(k(e)&&(m.isArray(e)||m.isString(e)||m.isArguments(e))?0===e.length:0===m.keys(e).length)},m.isElement=function(e){return!(!e||1!==e.nodeType)},m.isArray=c||function(e){return"[object Array]"===r.call(e)},m.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){m["is"+e]=function(t){return r.call(t)==="[object "+e+"]"}}),m.isArguments(arguments)||(m.isArguments=function(e){return m.has(e,"callee")});var F=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof F&&(m.isFunction=function(e){return"function"==typeof e||!1}),m.isFinite=function(e){return!m.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},m.isNaN=function(e){return m.isNumber(e)&&isNaN(e)},m.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===r.call(e)},m.isNull=function(e){return null===e},m.isUndefined=function(e){return void 0===e},m.has=function(e,t){if(!m.isArray(t))return null!=e&&l.call(e,t);for(var i=t.length,a=0;a<i;a++){var n=t[a];if(null==e||!l.call(e,n))return!1;e=e[n]}return!!i},m.noConflict=function(){return e._=t,this},m.identity=function(e){return e},m.constant=function(e){return function(){return e}},m.noop=function(){},m.property=function(e){return m.isArray(e)?function(t){return w(t,e)}:C(e)},m.propertyOf=function(e){return null==e?function(){}:function(t){return m.isArray(t)?w(e,t):e[t]}},m.matcher=m.matches=function(e){return e=m.extendOwn({},e),function(t){return m.isMatch(t,e)}},m.times=function(e,t,i){var a=Array(Math.max(0,e));t=g(t,i,1);for(var n=0;n<e;n++)a[n]=t(n);return a},m.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},m.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=m.invert(H),U=function(e){var t=function(t){return e[t]},i="(?:"+m.keys(e).join("|")+")",a=RegExp(i),n=RegExp(i,"g");return function(e){return e=null==e?"":""+e,a.test(e)?e.replace(n,t):e}};m.escape=U(H),m.unescape=U(z),m.result=function(e,t,i){m.isArray(t)||(t=[t]);var a=t.length;if(!a)return m.isFunction(i)?i.call(e):i;for(var n=0;n<a;n++){var o=null==e?void 0:e[t[n]];void 0===o&&(o=i,n=a),e=m.isFunction(o)?o.call(e):o}return e};var V=0;m.uniqueId=function(e){var t=++V+"";return e?e+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+q[e]};m.template=function(e,t,i){!t&&i&&(t=i),t=m.defaults({},t,m.templateSettings);var a=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),n=0,o="__p+='";e.replace(a,function(t,i,a,s,r){return o+=e.slice(n,r).replace(W,G),n=r+t.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":a?o+="'+\n((__t=("+a+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var s;try{s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var r=function(e){return s.call(this,e,m)};return r.source="function("+(t.variable||"obj")+"){\n"+o+"}",r},m.chain=function(e){var t=m(e);return t._chain=!0,t};var $=function(e,t){return e._chain?m(t).chain():t};m.mixin=function(e){return m.each(m.functions(e),function(t){var i=m[t]=e[t];m.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),$(this,i.apply(m,e))}}),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];m.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],$(this,i)}}),m.each(["concat","join","slice"],function(e){var t=i[e];m.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}(),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){t=t||ie;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function a(e){var t=!!e&&"length"in e&&e.length,i=he.type(e);return"function"!==i&&!he.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,i){return he.isFunction(t)?he.grep(e,function(e,a){return!!t.call(e,a,e)!==i}):t.nodeType?he.grep(e,function(e){return e===t!==i}):"string"!=typeof t?he.grep(e,function(e){return re.call(t,e)>-1!==i}):Te.test(t)?he.filter(t,e,i):(t=he.filter(t,e),he.grep(e,function(e){return re.call(t,e)>-1!==i&&1===e.nodeType}))}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return he.each(e.match(Pe)||[],function(e,i){t[i]=!0}),t}function l(e){return e}function c(e){throw e}function d(e,t,i,a){var n;try{e&&he.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&he.isFunction(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(a))}catch(e){i.apply(void 0,[e])}}function p(){ie.removeEventListener("DOMContentLoaded",p),e.removeEventListener("load",p),he.ready()}function u(){this.expando=he.expando+u.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Re.test(e)?JSON.parse(e):e)}function h(e,t,i){var a;if(void 0===i&&1===e.nodeType)if(a="data-"+t.replace(Ne,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(a))){try{i=m(i)}catch(e){}Be.set(e,t,i)}else i=void 0;return i}function g(e,t,i,a){var n,o=1,s=20,r=a?function(){return a.cur()}:function(){return he.css(e,t,"")},l=r(),c=i&&i[3]||(he.cssNumber[t]?"":"px"),d=(he.cssNumber[t]||"px"!==c&&+l)&&He.exec(he.css(e,t));if(d&&d[3]!==c){c=c||d[3],i=i||[],d=+l||1;do{o=o||".5",d/=o,he.style(e,t,d+c)}while(o!==(o=r()/l)&&1!==o&&--s)}return i&&(d=+d||+l||0,n=i[1]?d+(i[1]+1)*i[2]:+i[2],a&&(a.unit=c,a.start=d,a.end=n)),n}function v(e){var t,i=e.ownerDocument,a=e.nodeName,n=je[a];return n||(t=i.body.appendChild(i.createElement(a)),n=he.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),je[a]=n,n)}function f(e,t){for(var i,a,n=[],o=0,s=e.length;o<s;o++)a=e[o],a.style&&(i=a.style.display,t?("none"===i&&(n[o]=Oe.get(a,"display")||null,n[o]||(a.style.display="")),""===a.style.display&&Ue(a)&&(n[o]=v(a))):"none"!==i&&(n[o]="none",Oe.set(a,"display",i)));for(o=0;o<s;o++)null!=n[o]&&(e[o].style.display=n[o]);return e}function b(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&n(e,t)?he.merge([e],i):i}function C(e,t){for(var i=0,a=e.length;i<a;i++)Oe.set(e[i],"globalEval",!t||Oe.get(t[i],"globalEval"))}function w(e,t,i,a,n){for(var o,s,r,l,c,d,p=t.createDocumentFragment(),u=[],m=0,h=e.length;m<h;m++)if((o=e[m])||0===o)if("object"===he.type(o))he.merge(u,o.nodeType?[o]:o);else if(Ye.test(o)){for(s=s||p.appendChild(t.createElement("div")),r=(We.exec(o)||["",""])[1].toLowerCase(),l=$e[r]||$e._default,s.innerHTML=l[1]+he.htmlPrefilter(o)+l[2],d=l[0];d--;)s=s.lastChild;he.merge(u,s.childNodes),s=p.firstChild,s.textContent=""}else u.push(t.createTextNode(o));for(p.textContent="",m=0;o=u[m++];)if(a&&he.inArray(o,a)>-1)n&&n.push(o);else if(c=he.contains(o.ownerDocument,o),s=b(p.appendChild(o),"script"),c&&C(s),i)for(d=0;o=s[d++];)Ge.test(o.type||"")&&i.push(o);return p}function y(){return!0}function x(){return!1}function k(){try{return ie.activeElement}catch(e){}}function T(e,t,i,a,n,o){var s,r;if("object"==typeof t){"string"!=typeof i&&(a=a||i,i=void 0);for(r in t)T(e,r,i,a,t[r],o);return e}if(null==a&&null==n?(n=i,a=i=void 0):null==n&&("string"==typeof i?(n=a,a=void 0):(n=a,a=i,i=void 0)),!1===n)n=x;else if(!n)return e;return 1===o&&(s=n,n=function(e){return he().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=he.guid++)),e.each(function(){he.event.add(this,t,n,a,i)})}function S(e,t){return n(e,"table")&&n(11!==t.nodeType?t:t.firstChild,"tr")?he(">tbody",e)[0]||e:e}function _(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function A(e){var t=it.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var i,a,n,o,s,r,l,c;if(1===t.nodeType){if(Oe.hasData(e)&&(o=Oe.access(e),s=Oe.set(t,o),c=o.events)){delete s.handle,s.events={};for(n in c)for(i=0,a=c[n].length;i<a;i++)he.event.add(t,n,c[n][i])}Be.hasData(e)&&(r=Be.access(e),l=he.extend({},r),Be.set(t,l))}}function P(e,t){var i=t.nodeName.toLowerCase();"input"===i&&qe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function M(e,t,a,n){t=oe.apply([],t);var o,s,r,l,c,d,p=0,u=e.length,m=u-1,h=t[0],g=he.isFunction(h);if(g||u>1&&"string"==typeof h&&!me.checkClone&&tt.test(h))return e.each(function(i){var o=e.eq(i);g&&(t[0]=h.call(this,i,o.html())),M(o,t,a,n)});if(u&&(o=w(t,e[0].ownerDocument,!1,e,n),s=o.firstChild,1===o.childNodes.length&&(o=s),s||n)){for(r=he.map(b(o,"script"),_),l=r.length;p<u;p++)c=o,p!==m&&(c=he.clone(c,!0,!0),l&&he.merge(r,b(c,"script"))),a.call(e[p],c,p);if(l)for(d=r[r.length-1].ownerDocument,he.map(r,A),p=0;p<l;p++)c=r[p],Ge.test(c.type||"")&&!Oe.access(c,"globalEval")&&he.contains(d,c)&&(c.src?he._evalUrl&&he._evalUrl(c.src):i(c.textContent.replace(at,""),d))}return e}function I(e,t,i){for(var a,n=t?he.filter(t,e):e,o=0;null!=(a=n[o]);o++)i||1!==a.nodeType||he.cleanData(b(a)),a.parentNode&&(i&&he.contains(a.ownerDocument,a)&&C(b(a,"script")),a.parentNode.removeChild(a));return e}function D(e,t,i){var a,n,o,s,r=e.style;return i=i||st(e),i&&(s=i.getPropertyValue(t)||i[t],""!==s||he.contains(e.ownerDocument,e)||(s=he.style(e,t)),!me.pixelMarginRight()&&ot.test(s)&&nt.test(t)&&(a=r.width,n=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=s,s=i.width,r.width=a,r.minWidth=n,r.maxWidth=o)),void 0!==s?s+"":s}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in ut)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=pt.length;i--;)if((e=pt[i]+t)in ut)return e}function B(e){var t=he.cssProps[e];return t||(t=he.cssProps[e]=O(e)||e),t}function R(e,t,i){var a=He.exec(t);return a?Math.max(0,a[2]-(i||0))+(a[3]||"px"):t}function N(e,t,i,a,n){var o,s=0;for(o=i===(a?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(s+=he.css(e,i+ze[o],!0,n)),a?("content"===i&&(s-=he.css(e,"padding"+ze[o],!0,n)),"margin"!==i&&(s-=he.css(e,"border"+ze[o]+"Width",!0,n))):(s+=he.css(e,"padding"+ze[o],!0,n),"padding"!==i&&(s+=he.css(e,"border"+ze[o]+"Width",!0,n)));return s}function F(e,t,i){var a,n=st(e),o=D(e,t,n),s="border-box"===he.css(e,"boxSizing",!1,n);return ot.test(o)?o:(a=s&&(me.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+N(e,t,i||(s?"border":"content"),a,n)+"px")}function H(e,t,i,a,n){return new H.prototype.init(e,t,i,a,n)}function z(){ht&&(!1===ie.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(z):e.setTimeout(z,he.fx.interval),he.fx.tick())}function U(){return e.setTimeout(function(){mt=void 0}),mt=he.now()}function V(e,t){var i,a=0,n={height:e};for(t=t?1:0;a<4;a+=2-t)i=ze[a],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function j(e,t,i){for(var a,n=(G.tweeners[t]||[]).concat(G.tweeners["*"]),o=0,s=n.length;o<s;o++)if(a=n[o].call(i,t,e))return a}function q(e,t,i){var a,n,o,s,r,l,c,d,p="width"in t||"height"in t,u=this,m={},h=e.style,g=e.nodeType&&Ue(e),v=Oe.get(e,"fxshow");i.queue||(s=he._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,r=s.empty.fire,s.empty.fire=function(){s.unqueued||r()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,he.queue(e,"fx").length||s.empty.fire()})}));for(a in t)if(n=t[a],gt.test(n)){if(delete t[a],o=o||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!v||void 0===v[a])continue;g=!0}m[a]=v&&v[a]||he.style(e,a)}if((l=!he.isEmptyObject(t))||!he.isEmptyObject(m)){p&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],c=v&&v.display,null==c&&(c=Oe.get(e,"display")),d=he.css(e,"display"),"none"===d&&(c?d=c:(f([e],!0),c=e.style.display||c,d=he.css(e,"display"),f([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===he.css(e,"float")&&(l||(u.done(function(){h.display=c}),null==c&&(d=h.display,c="none"===d?"":d)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),l=!1;for(a in m)l||(v?"hidden"in v&&(g=v.hidden):v=Oe.access(e,"fxshow",{display:c}),o&&(v.hidden=!g),g&&f([e],!0),u.done(function(){g||f([e]),Oe.remove(e,"fxshow");for(a in m)he.style(e,a,m[a])})),l=j(g?v[a]:0,a,u),a in v||(v[a]=l.start,g&&(l.end=l.start,l.start=0))}}function W(e,t){var i,a,n,o,s;for(i in e)if(a=he.camelCase(i),n=t[a],o=e[i],Array.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==a&&(e[a]=o,delete e[i]),(s=he.cssHooks[a])&&"expand"in s){o=s.expand(o),delete e[a];for(i in o)i in e||(e[i]=o[i],t[i]=n)}else t[a]=n}function G(e,t,i){var a,n,o=0,s=G.prefilters.length,r=he.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var t=mt||U(),i=Math.max(0,c.startTime+c.duration-t),a=i/c.duration||0,o=1-a,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(o);return r.notifyWith(e,[c,o,i]),o<1&&l?i:(l||r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},i),originalProperties:t,originalOptions:i,startTime:mt||U(),duration:i.duration,tweens:[],createTween:function(t,i){var a=he.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(a),a},stop:function(t){var i=0,a=t?c.tweens.length:0;if(n)return this;for(n=!0;i<a;i++)c.tweens[i].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),d=c.props;for(W(d,c.opts.specialEasing);o<s;o++)if(a=G.prefilters[o].call(c,e,d,c.opts))return he.isFunction(a.stop)&&(he._queueHooks(c.elem,c.opts.queue).stop=he.proxy(a.stop,a)),a;return he.map(d,j,c),he.isFunction(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),he.fx.timer(he.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function $(e){return(e.match(Pe)||[]).join(" ")}function Y(e){return e.getAttribute&&e.getAttribute("class")||""}function X(e,t,i,a){var n;if(Array.isArray(t))he.each(t,function(t,n){i||_t.test(e)?a(e,n):X(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,a)});else if(i||"object"!==he.type(t))a(e,t);else for(n in t)X(e+"["+n+"]",t[n],i,a)}function K(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var a,n=0,o=t.toLowerCase().match(Pe)||[];if(he.isFunction(i))for(;a=o[n++];)"+"===a[0]?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(i)):(e[a]=e[a]||[]).push(i)}}function J(e,t,i,a){function n(r){var l;return o[r]=!0,he.each(e[r]||[],function(e,r){var c=r(t,i,a);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),n(c),!1)}),l}var o={},s=e===Ft;return n(t.dataTypes[0])||!o["*"]&&n("*")}function Q(e,t){var i,a,n=he.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:a||(a={}))[i]=t[i]);return a&&he.extend(!0,e,a),e}function Z(e,t,i){for(var a,n,o,s,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(n in r)if(r[n]&&r[n].test(a)){l.unshift(n);break}if(l[0]in i)o=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function ee(e,t,i,a){var n,o,s,r,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(n in c)if(r=n.split(" "),r[1]===o&&(s=c[l+" "+r[0]]||c["* "+r[0]])){!0===s?s=c[n]:!0!==c[n]&&(o=r[0],d.unshift(r[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var te=[],ie=e.document,ae=Object.getPrototypeOf,ne=te.slice,oe=te.concat,se=te.push,re=te.indexOf,le={},ce=le.toString,de=le.hasOwnProperty,pe=de.toString,ue=pe.call(Object),me={},he=function(e,t){return new he.fn.init(e,t)},ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,fe=/-([a-z])/g,be=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:"3.2.1",constructor:he,length:0,toArray:function(){return ne.call(this)},get:function(e){return null==e?ne.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:te.sort,splice:te.splice},he.extend=he.fn.extend=function(){var e,t,i,a,n,o,s=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[r]||{},r++),"object"==typeof s||he.isFunction(s)||(s={}),r===l&&(s=this,r--);r<l;r++)if(null!=(e=arguments[r]))for(t in e)i=s[t],a=e[t],s!==a&&(c&&a&&(he.isPlainObject(a)||(n=Array.isArray(a)))?(n?(n=!1,o=i&&Array.isArray(i)?i:[]):o=i&&he.isPlainObject(i)?i:{},s[t]=he.extend(c,o,a)):void 0!==a&&(s[t]=a));return s},he.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},
isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==ce.call(e))&&(!(t=ae(e))||"function"==typeof(i=de.call(t,"constructor")&&t.constructor)&&pe.call(i)===ue)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[ce.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(fe,be)},each:function(e,t){var i,n=0;if(a(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ge,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(a(Object(e))?he.merge(i,"string"==typeof e?[e]:e):se.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:re.call(t,e,i)},merge:function(e,t){for(var i=+t.length,a=0,n=e.length;a<i;a++)e[n++]=t[a];return e.length=n,e},grep:function(e,t,i){for(var a=[],n=0,o=e.length,s=!i;n<o;n++)!t(e[n],n)!==s&&a.push(e[n]);return a},map:function(e,t,i){var n,o,s=0,r=[];if(a(e))for(n=e.length;s<n;s++)null!=(o=t(e[s],s,i))&&r.push(o);else for(s in e)null!=(o=t(e[s],s,i))&&r.push(o);return oe.apply([],r)},guid:1,proxy:function(e,t){var i,a,n;if("string"==typeof t&&(i=e[t],t=e,e=i),he.isFunction(e))return a=ne.call(arguments,2),n=function(){return e.apply(t||this,a.concat(ne.call(arguments)))},n.guid=e.guid=e.guid||he.guid++,n},now:Date.now,support:me}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=te[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var Ce=function(e){function t(e,t,i,a){var n,o,s,r,l,d,u,m=t&&t.ownerDocument,h=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return i;if(!a&&((t?t.ownerDocument||t:H)!==I&&M(t),t=t||I,L)){if(11!==h&&(l=ge.exec(e)))if(n=l[1]){if(9===h){if(!(s=t.getElementById(n)))return i;if(s.id===n)return i.push(s),i}else if(m&&(s=m.getElementById(n))&&N(t,s)&&s.id===n)return i.push(s),i}else{if(l[2])return K.apply(i,t.getElementsByTagName(e)),i;if((n=l[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(i,t.getElementsByClassName(n)),i}if(w.qsa&&!q[e+" "]&&(!O||!O.test(e))){if(1!==h)m=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((r=t.getAttribute("id"))?r=r.replace(Ce,we):t.setAttribute("id",r=F),d=T(e),o=d.length;o--;)d[o]="#"+r+" "+p(d[o]);u=d.join(","),m=ve.test(e)&&c(t.parentNode)||t}if(u)try{return K.apply(i,m.querySelectorAll(u)),i}catch(e){}finally{r===F&&t.removeAttribute("id")}}}return _(e.replace(oe,"$1"),t,i,a)}function i(){function e(i,a){return t.push(i+" ")>y.cacheLength&&delete e[t.shift()],e[i+" "]=a}var t=[];return e}function a(e){return e[F]=!0,e}function n(e){var t=I.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),a=i.length;a--;)y.attrHandle[i[a]]=t}function s(e,t){var i=t&&e,a=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(a)return a;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function r(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&xe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return a(function(t){return t=+t,a(function(i,a){for(var n,o=e([],i.length,t),s=o.length;s--;)i[n=o[s]]&&(i[n]=!(a[n]=i[n]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,i=e.length,a="";t<i;t++)a+=e[t].value;return a}function u(e,t,i){var a=t.dir,n=t.next,o=n||a,s=i&&"parentNode"===o,r=U++;return t.first?function(t,i,n){for(;t=t[a];)if(1===t.nodeType||s)return e(t,i,n);return!1}:function(t,i,l){var c,d,p,u=[z,r];if(l){for(;t=t[a];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[a];)if(1===t.nodeType||s)if(p=t[F]||(t[F]={}),d=p[t.uniqueID]||(p[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[a]||t;else{if((c=d[o])&&c[0]===z&&c[1]===r)return u[2]=c[2];if(d[o]=u,u[2]=e(t,i,l))return!0}return!1}}function m(e){return e.length>1?function(t,i,a){for(var n=e.length;n--;)if(!e[n](t,i,a))return!1;return!0}:e[0]}function h(e,i,a){for(var n=0,o=i.length;n<o;n++)t(e,i[n],a);return a}function g(e,t,i,a,n){for(var o,s=[],r=0,l=e.length,c=null!=t;r<l;r++)(o=e[r])&&(i&&!i(o,a,n)||(s.push(o),c&&t.push(r)));return s}function v(e,t,i,n,o,s){return n&&!n[F]&&(n=v(n)),o&&!o[F]&&(o=v(o,s)),a(function(a,s,r,l){var c,d,p,u=[],m=[],v=s.length,f=a||h(t||"*",r.nodeType?[r]:r,[]),b=!e||!a&&t?f:g(f,u,e,r,l),C=i?o||(a?e:v||n)?[]:s:b;if(i&&i(b,C,r,l),n)for(c=g(C,m),n(c,[],r,l),d=c.length;d--;)(p=c[d])&&(C[m[d]]=!(b[m[d]]=p));if(a){if(o||e){if(o){for(c=[],d=C.length;d--;)(p=C[d])&&c.push(b[d]=p);o(null,C=[],c,l)}for(d=C.length;d--;)(p=C[d])&&(c=o?Q(a,p):u[d])>-1&&(a[c]=!(s[c]=p))}}else C=g(C===s?C.splice(v,C.length):C),o?o(null,s,C,l):K.apply(s,C)})}function f(e){for(var t,i,a,n=e.length,o=y.relative[e[0].type],s=o||y.relative[" "],r=o?1:0,l=u(function(e){return e===t},s,!0),c=u(function(e){return Q(t,e)>-1},s,!0),d=[function(e,i,a){var n=!o&&(a||i!==A)||((t=i).nodeType?l(e,i,a):c(e,i,a));return t=null,n}];r<n;r++)if(i=y.relative[e[r].type])d=[u(m(d),i)];else{if(i=y.filter[e[r].type].apply(null,e[r].matches),i[F]){for(a=++r;a<n&&!y.relative[e[a].type];a++);return v(r>1&&m(d),r>1&&p(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(oe,"$1"),i,r<a&&f(e.slice(r,a)),a<n&&f(e=e.slice(a)),a<n&&p(e))}d.push(i)}return m(d)}function b(e,i){var n=i.length>0,o=e.length>0,s=function(a,s,r,l,c){var d,p,u,m=0,h="0",v=a&&[],f=[],b=A,C=a||o&&y.find.TAG("*",c),w=z+=null==b?1:Math.random()||.1,x=C.length;for(c&&(A=s===I||s||c);h!==x&&null!=(d=C[h]);h++){if(o&&d){for(p=0,s||d.ownerDocument===I||(M(d),r=!L);u=e[p++];)if(u(d,s||I,r)){l.push(d);break}c&&(z=w)}n&&((d=!u&&d)&&m--,a&&v.push(d))}if(m+=h,n&&h!==m){for(p=0;u=i[p++];)u(v,f,s,r);if(a){if(m>0)for(;h--;)v[h]||f[h]||(f[h]=Y.call(l));f=g(f)}K.apply(l,f),c&&!a&&f.length>0&&m+i.length>1&&t.uniqueSort(l)}return c&&(z=w,A=b),v};return n?a(s):s}var C,w,y,x,k,T,S,_,A,E,P,M,I,D,L,O,B,R,N,F="sizzle"+1*new Date,H=e.document,z=0,U=0,V=i(),j=i(),q=i(),W=function(e,t){return e===t&&(P=!0),0},G={}.hasOwnProperty,$=[],Y=$.pop,X=$.push,K=$.push,J=$.slice,Q=function(e,t){for(var i=0,a=e.length;i<a;i++)if(e[i]===t)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ae=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ne=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),re=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(ae),de=new RegExp("^"+te+"$"),pe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},ue=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,fe=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,i){var a="0x"+t-65536;return a!==a||i?t:a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)},Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ye=function(){M()},xe=u(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{K.apply($=J.call(H.childNodes),H.childNodes),$[H.childNodes.length].nodeType}catch(e){K={apply:$.length?function(e,t){X.apply(e,J.call(t))}:function(e,t){for(var i=e.length,a=0;e[i++]=t[a++];);e.length=i-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=t.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:H;return a!==I&&9===a.nodeType&&a.documentElement?(I=a,D=I.documentElement,L=!k(I),H!==I&&(i=I.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ye,!1):i.attachEvent&&i.attachEvent("onunload",ye)),w.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=n(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=he.test(I.getElementsByClassName),w.getById=n(function(e){return D.appendChild(e).id=F,!I.getElementsByName||!I.getElementsByName(F).length}),w.getById?(y.filter.ID=function(e){var t=e.replace(fe,be);return function(e){return e.getAttribute("id")===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var i=t.getElementById(e);return i?[i]:[]}}):(y.filter.ID=function(e){var t=e.replace(fe,be);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var i,a,n,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(n=t.getElementsByName(e),a=0;o=n[a++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),y.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,a=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n++];)1===i.nodeType&&a.push(i);return a}return o},y.find.CLASS=w.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&L)return t.getElementsByClassName(e)},B=[],O=[],(w.qsa=he.test(I.querySelectorAll))&&(n(function(e){D.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+F+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||O.push(".#.+[+~]")}),n(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&O.push(":enabled",":disabled"),D.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=he.test(R=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&n(function(e){w.disconnectedMatch=R.call(e,"*"),R.call(e,"[s!='']:x"),B.push("!=",ae)}),O=O.length&&new RegExp(O.join("|")),B=B.length&&new RegExp(B.join("|")),t=he.test(D.compareDocumentPosition),N=t||he.test(D.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(i.contains?i.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===I||e.ownerDocument===H&&N(H,e)?-1:t===I||t.ownerDocument===H&&N(H,t)?1:E?Q(E,e)-Q(E,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,a=0,n=e.parentNode,o=t.parentNode,r=[e],l=[t];if(!n||!o)return e===I?-1:t===I?1:n?-1:o?1:E?Q(E,e)-Q(E,t):0;if(n===o)return s(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;r[a]===l[a];)a++;return a?s(r[a],l[a]):r[a]===H?-1:l[a]===H?1:0},I):I},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==I&&M(e),i=i.replace(le,"='$1']"),w.matchesSelector&&L&&!q[i+" "]&&(!B||!B.test(i))&&(!O||!O.test(i)))try{var a=R.call(e,i);if(a||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return a}catch(e){}return t(i,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&M(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&M(e);var i=y.attrHandle[t.toLowerCase()],a=i&&G.call(y.attrHandle,t.toLowerCase())?i(e,t,!L):void 0;return void 0!==a?a:w.attributes||!L?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},t.escape=function(e){return(e+"").replace(Ce,we)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],a=0,n=0;if(P=!w.detectDuplicates,E=!w.sortStable&&e.slice(0),e.sort(W),P){for(;t=e[n++];)t===e[n]&&(a=i.push(n));for(;a--;)e.splice(i[a],1)}return E=null,e},x=t.getText=function(e){var t,i="",a=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[a++];)i+=x(t);return i},y=t.selectors={cacheLength:50,createPseudo:a,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(fe,be),e[3]=(e[3]||e[4]||e[5]||"").replace(fe,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ce.test(i)&&(t=T(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(fe,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,a){return function(n){var o=t.attr(n,e);return null==o?"!="===i:!i||(o+="","="===i?o===a:"!="===i?o!==a:"^="===i?a&&0===o.indexOf(a):"*="===i?a&&o.indexOf(a)>-1:"$="===i?a&&o.slice(-a.length)===a:"~="===i?(" "+o.replace(ne," ")+" ").indexOf(a)>-1:"|="===i&&(o===a||o.slice(0,a.length+1)===a+"-"))}},CHILD:function(e,t,i,a,n){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),r="of-type"===t;return 1===a&&0===n?function(e){return!!e.parentNode}:function(t,i,l){var c,d,p,u,m,h,g=o!==s?"nextSibling":"previousSibling",v=t.parentNode,f=r&&t.nodeName.toLowerCase(),b=!l&&!r,C=!1;if(v){if(o){for(;g;){for(u=t;u=u[g];)if(r?u.nodeName.toLowerCase()===f:1===u.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?v.firstChild:v.lastChild],s&&b){for(u=v,p=u[F]||(u[F]={}),d=p[u.uniqueID]||(p[u.uniqueID]={}),c=d[e]||[],m=c[0]===z&&c[1],C=m&&c[2],u=m&&v.childNodes[m];u=++m&&u&&u[g]||(C=m=0)||h.pop();)if(1===u.nodeType&&++C&&u===t){d[e]=[z,m,C];break}}else if(b&&(u=t,p=u[F]||(u[F]={}),d=p[u.uniqueID]||(p[u.uniqueID]={}),c=d[e]||[],m=c[0]===z&&c[1],C=m),!1===C)for(;(u=++m&&u&&u[g]||(C=m=0)||h.pop())&&((r?u.nodeName.toLowerCase()!==f:1!==u.nodeType)||!++C||(b&&(p=u[F]||(u[F]={}),d=p[u.uniqueID]||(p[u.uniqueID]={}),d[e]=[z,C]),u!==t)););return(C-=n)===a||C%a==0&&C/a>=0}}},PSEUDO:function(e,i){var n,o=y.pseudos[e]||y.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(i):o.length>1?(n=[e,e,"",i],y.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,t){for(var a,n=o(e,i),s=n.length;s--;)a=Q(e,n[s]),e[a]=!(t[a]=n[s])}):function(e){return o(e,0,n)}):o}},pseudos:{not:a(function(e){var t=[],i=[],n=S(e.replace(oe,"$1"));return n[F]?a(function(e,t,i,a){for(var o,s=n(e,null,a,[]),r=e.length;r--;)(o=s[r])&&(e[r]=!(t[r]=o))}):function(e,a,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}}),has:a(function(e){return function(i){return t(e,i).length>0}}),contains:a(function(e){return e=e.replace(fe,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:a(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(fe,be).toLowerCase(),function(t){var i;do{if(i=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:r(!1),disabled:r(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var a=i<0?i+t:i;--a>=0;)e.push(a);return e}),gt:l(function(e,t,i){for(var a=i<0?i+t:i;++a<t;)e.push(a);return e})}},y.pseudos.nth=y.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[C]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(C);for(C in{submit:!0,reset:!0})y.pseudos[C]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(C);return d.prototype=y.filters=y.pseudos,y.setFilters=new d,T=t.tokenize=function(e,i){var a,n,o,s,r,l,c,d=j[e+" "];if(d)return i?0:d.slice(0);for(r=e,l=[],c=y.preFilter;r;){a&&!(n=se.exec(r))||(n&&(r=r.slice(n[0].length)||r),l.push(o=[])),a=!1,(n=re.exec(r))&&(a=n.shift(),o.push({value:a,type:n[0].replace(oe," ")}),r=r.slice(a.length));for(s in y.filter)!(n=pe[s].exec(r))||c[s]&&!(n=c[s](n))||(a=n.shift(),o.push({value:a,type:s,matches:n}),r=r.slice(a.length));if(!a)break}return i?r.length:r?t.error(e):j(e,l).slice(0)},S=t.compile=function(e,t){var i,a=[],n=[],o=q[e+" "];if(!o){for(t||(t=T(e)),i=t.length;i--;)o=f(t[i]),o[F]?a.push(o):n.push(o);o=q(e,b(n,a)),o.selector=e}return o},_=t.select=function(e,t,i,a){var n,o,s,r,l,d="function"==typeof e&&e,u=!a&&T(e=d.selector||e);if(i=i||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&L&&y.relative[o[1].type]){if(!(t=(y.find.ID(s.matches[0].replace(fe,be),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=pe.needsContext.test(e)?0:o.length;n--&&(s=o[n],!y.relative[r=s.type]);)if((l=y.find[r])&&(a=l(s.matches[0].replace(fe,be),ve.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(n,1),!(e=a.length&&p(o)))return K.apply(i,a),i;break}}return(d||S(e,u))(a,t,!L,i,!t||ve.test(e)&&c(t.parentNode)||t),i},w.sortStable=F.split("").sort(W).join("")===F,w.detectDuplicates=!!P,M(),w.sortDetached=n(function(e){return 1&e.compareDocumentPosition(I.createElement("fieldset"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,i){var a;if(!i)return!0===e[t]?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null}),t}(e);he.find=Ce,he.expr=Ce.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=Ce.uniqueSort,he.text=Ce.getText,he.isXMLDoc=Ce.isXML,he.contains=Ce.contains,he.escapeSelector=Ce.escape;var we=function(e,t,i){for(var a=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&he(e).is(i))break;a.push(e)}return a},ye=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},xe=he.expr.match.needsContext,ke=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Te=/^.[^:#\[\.,]*$/;he.filter=function(e,t,i){var a=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===a.nodeType?he.find.matchesSelector(a,e)?[a]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,i,a=this.length,n=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;t<a;t++)if(he.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<a;t++)he.find(e,n[t],i);return a>1?he.uniqueSort(i):i},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&xe.test(e)?he(e):e||[],!1).length}});var Se,_e=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(he.fn.init=function(e,t,i){var a,n;if(!e)return this;if(i=i||Se,"string"==typeof e){if(!(a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_e.exec(e))||!a[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),ke.test(a[1])&&he.isPlainObject(t))for(a in t)he.isFunction(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return n=ie.getElementById(a[2]),n&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?void 0!==i.ready?i.ready(e):e(he):he.makeArray(e,this)}).prototype=he.fn,Se=he(ie);var Ae=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var i,a=0,n=this.length,o=[],s="string"!=typeof e&&he(e);if(!xe.test(e))for(;a<n;a++)for(i=this[a];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&he.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?he.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?re.call(he(e),this[0]):re.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,i){return we(e,"parentNode",i)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,i){return we(e,"nextSibling",i)},prevUntil:function(e,t,i){return we(e,"previousSibling",i)},siblings:function(e){return ye((e.parentNode||{}).firstChild,e)},children:function(e){return ye(e.firstChild)},contents:function(e){return n(e,"iframe")?e.contentDocument:(n(e,"template")&&(e=e.content||e),he.merge([],e.childNodes))}},function(e,t){he.fn[e]=function(i,a){var n=he.map(this,t,i);return"Until"!==e.slice(-5)&&(a=i),a&&"string"==typeof a&&(n=he.filter(a,n)),this.length>1&&(Ee[e]||he.uniqueSort(n),Ae.test(e)&&n.reverse()),this.pushStack(n)}});var Pe=/[^\x20\t\r\n\f]+/g;he.Callbacks=function(e){e="string"==typeof e?r(e):he.extend({},e);var t,i,a,n,o=[],s=[],l=-1,c=function(){for(n=n||e.once,a=t=!0;s.length;l=-1)for(i=s.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,n&&(o=i?[]:"")},d={add:function(){return o&&(i&&!t&&(l=o.length-1,s.push(i)),function t(i){he.each(i,function(i,a){he.isFunction(a)?e.unique&&d.has(a)||o.push(a):a&&a.length&&"string"!==he.type(a)&&t(a)})}(arguments),i&&!t&&c()),this},remove:function(){return he.each(arguments,function(e,t){for(var i;(i=he.inArray(t,o,i))>-1;)o.splice(i,1),i<=l&&l--}),this},has:function(e){return e?he.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=s=[],i||t||(o=i=""),this},locked:function(){return!!n},fireWith:function(e,i){return n||(i=i||[],i=[e,i.slice?i.slice():i],s.push(i),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!a}};return d},he.extend({Deferred:function(t){var i=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],a="pending",n={state:function(){return a},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(i,function(i,a){var n=he.isFunction(e[a[4]])&&e[a[4]];o[a[1]](function(){var e=n&&n.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[a[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(t,a,n){function o(t,i,a,n){return function(){var r=this,d=arguments,p=function(){var e,p;if(!(t<s)){if((e=a.apply(r,d))===i.promise())throw new TypeError("Thenable self-resolution");p=e&&("object"==typeof e||"function"==typeof e)&&e.then,he.isFunction(p)?n?p.call(e,o(s,i,l,n),o(s,i,c,n)):(s++,p.call(e,o(s,i,l,n),o(s,i,c,n),o(s,i,l,i.notifyWith))):(a!==l&&(r=void 0,d=[e]),(n||i.resolveWith)(r,d))}},u=n?p:function(){try{p()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,u.stackTrace),t+1>=s&&(a!==c&&(r=void 0,d=[e]),i.rejectWith(r,d))}};t?u():(he.Deferred.getStackHook&&(u.stackTrace=he.Deferred.getStackHook()),e.setTimeout(u))}}var s=0;return he.Deferred(function(e){i[0][3].add(o(0,e,he.isFunction(n)?n:l,e.notifyWith)),i[1][3].add(o(0,e,he.isFunction(t)?t:l)),i[2][3].add(o(0,e,he.isFunction(a)?a:c))}).promise()},promise:function(e){return null!=e?he.extend(e,n):n}},o={};return he.each(i,function(e,t){var s=t[2],r=t[5];n[t[1]]=s.add,r&&s.add(function(){a=r},i[3-e][2].disable,i[0][2].lock),s.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=s.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,a=Array(i),n=ne.call(arguments),o=he.Deferred(),s=function(e){return function(i){a[e]=this,n[e]=arguments.length>1?ne.call(arguments):i,--t||o.resolveWith(a,n)}};if(t<=1&&(d(e,o.done(s(i)).resolve,o.reject,!t),"pending"===o.state()||he.isFunction(n[i]&&n[i].then)))return o.then();for(;i--;)d(n[i],s(i),o.reject);return o.promise()}});var Me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Me.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},he.readyException=function(t){e.setTimeout(function(){throw t})};var Ie=he.Deferred();he.fn.ready=function(e){return Ie.then(e).catch(function(e){he.readyException(e)}),this},he.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--he.readyWait:he.isReady)||(he.isReady=!0,!0!==e&&--he.readyWait>0||Ie.resolveWith(ie,[he]))}}),he.ready.then=Ie.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?e.setTimeout(he.ready):(ie.addEventListener("DOMContentLoaded",p),e.addEventListener("load",p));var De=function(e,t,i,a,n,o,s){var r=0,l=e.length,c=null==i;if("object"===he.type(i)){n=!0;for(r in i)De(e,t,r,i[r],!0,o,s)}else if(void 0!==a&&(n=!0,he.isFunction(a)||(s=!0),c&&(s?(t.call(e,a),t=null):(c=t,t=function(e,t,i){return c.call(he(e),i)})),t))for(;r<l;r++)t(e[r],i,s?a:a.call(e[r],r,t(e[r],i)));return n?e:c?t.call(e):l?t(e[0],i):o},Le=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};u.uid=1,u.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Le(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var a,n=this.cache(e);if("string"==typeof t)n[he.camelCase(t)]=i;else for(a in t)n[he.camelCase(a)]=t[a];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,a=e[this.expando];if(void 0!==a){if(void 0!==t){Array.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in a?[t]:t.match(Pe)||[]),i=t.length;for(;i--;)delete a[t[i]]}(void 0===t||he.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!he.isEmptyObject(t)}};var Oe=new u,Be=new u,Re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/[A-Z]/g;he.extend({hasData:function(e){return Be.hasData(e)||Oe.hasData(e)},data:function(e,t,i){return Be.access(e,t,i)},removeData:function(e,t){Be.remove(e,t)},_data:function(e,t,i){return Oe.access(e,t,i)},_removeData:function(e,t){Oe.remove(e,t)}}),he.fn.extend({data:function(e,t){var i,a,n,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(n=Be.get(o),1===o.nodeType&&!Oe.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(a=s[i].name,0===a.indexOf("data-")&&(a=he.camelCase(a.slice(5)),h(o,a,n[a])));Oe.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){Be.set(this,e)}):De(this,function(t){var i;if(o&&void 0===t){if(void 0!==(i=Be.get(o,e)))return i;if(void 0!==(i=h(o,e)))return i}else this.each(function(){Be.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Be.remove(this,e)})}}),he.extend({queue:function(e,t,i){var a;if(e)return t=(t||"fx")+"queue",a=Oe.get(e,t),i&&(!a||Array.isArray(i)?a=Oe.access(e,t,he.makeArray(i)):a.push(i)),a||[]},dequeue:function(e,t){t=t||"fx";var i=he.queue(e,t),a=i.length,n=i.shift(),o=he._queueHooks(e,t),s=function(){he.dequeue(e,t)};"inprogress"===n&&(n=i.shift(),a--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,s,o)),!a&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Oe.get(e,i)||Oe.access(e,i,{empty:he.Callbacks("once memory").add(function(){
Oe.remove(e,[t+"queue",i])})})}}),he.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?he.queue(this[0],e):void 0===t?this:this.each(function(){var i=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,a=1,n=he.Deferred(),o=this,s=this.length,r=function(){--a||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=Oe.get(o[s],e+"queueHooks"))&&i.empty&&(a++,i.empty.add(r));return r(),n.promise(t)}});var Fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,He=new RegExp("^(?:([+-])=|)("+Fe+")([a-z%]*)$","i"),ze=["Top","Right","Bottom","Left"],Ue=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},Ve=function(e,t,i,a){var n,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];n=i.apply(e,a||[]);for(o in t)e.style[o]=s[o];return n},je={};he.fn.extend({show:function(){return f(this,!0)},hide:function(){return f(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ue(this)?he(this).show():he(this).hide()})}});var qe=/^(?:checkbox|radio)$/i,We=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ge=/^$|\/(?:java|ecma)script/i,$e={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$e.optgroup=$e.option,$e.tbody=$e.tfoot=$e.colgroup=$e.caption=$e.thead,$e.th=$e.td;var Ye=/<|&#?\w+;/;!function(){var e=ie.createDocumentFragment(),t=e.appendChild(ie.createElement("div")),i=ie.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),me.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Xe=ie.documentElement,Ke=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qe=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,i,a,n){var o,s,r,l,c,d,p,u,m,h,g,v=Oe.get(e);if(v)for(i.handler&&(o=i,i=o.handler,n=o.selector),n&&he.find.matchesSelector(Xe,n),i.guid||(i.guid=he.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(t){return void 0!==he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Pe)||[""],c=t.length;c--;)r=Qe.exec(t[c])||[],m=g=r[1],h=(r[2]||"").split(".").sort(),m&&(p=he.event.special[m]||{},m=(n?p.delegateType:p.bindType)||m,p=he.event.special[m]||{},d=he.extend({type:m,origType:g,data:a,handler:i,guid:i.guid,selector:n,needsContext:n&&he.expr.match.needsContext.test(n),namespace:h.join(".")},o),(u=l[m])||(u=l[m]=[],u.delegateCount=0,p.setup&&!1!==p.setup.call(e,a,h,s)||e.addEventListener&&e.addEventListener(m,s)),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),n?u.splice(u.delegateCount++,0,d):u.push(d),he.event.global[m]=!0)},remove:function(e,t,i,a,n){var o,s,r,l,c,d,p,u,m,h,g,v=Oe.hasData(e)&&Oe.get(e);if(v&&(l=v.events)){for(t=(t||"").match(Pe)||[""],c=t.length;c--;)if(r=Qe.exec(t[c])||[],m=g=r[1],h=(r[2]||"").split(".").sort(),m){for(p=he.event.special[m]||{},m=(a?p.delegateType:p.bindType)||m,u=l[m]||[],r=r[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=u.length;o--;)d=u[o],!n&&g!==d.origType||i&&i.guid!==d.guid||r&&!r.test(d.namespace)||a&&a!==d.selector&&("**"!==a||!d.selector)||(u.splice(o,1),d.selector&&u.delegateCount--,p.remove&&p.remove.call(e,d));s&&!u.length&&(p.teardown&&!1!==p.teardown.call(e,h,v.handle)||he.removeEvent(e,m,v.handle),delete l[m])}else for(m in l)he.event.remove(e,m+t[c],i,a,!0);he.isEmptyObject(l)&&Oe.remove(e,"handle events")}},dispatch:function(e){var t,i,a,n,o,s,r=he.event.fix(e),l=new Array(arguments.length),c=(Oe.get(this,"events")||{})[r.type]||[],d=he.event.special[r.type]||{};for(l[0]=r,t=1;t<arguments.length;t++)l[t]=arguments[t];if(r.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,r)){for(s=he.event.handlers.call(this,r,c),t=0;(n=s[t++])&&!r.isPropagationStopped();)for(r.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!r.rnamespace.test(o.namespace)||(r.handleObj=o,r.data=o.data,void 0!==(a=((he.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,l))&&!1===(r.result=a)&&(r.preventDefault(),r.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,r),r.result}},handlers:function(e,t){var i,a,n,o,s,r=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},i=0;i<l;i++)a=t[i],n=a.selector+" ",void 0===s[n]&&(s[n]=a.needsContext?he(n,this).index(c)>-1:he.find(n,this,null,[c]).length),s[n]&&o.push(a);o.length&&r.push({elem:c,handlers:o})}return c=this,l<t.length&&r.push({elem:c,handlers:t.slice(l)}),r},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&n(this,"input"))return this.click(),!1},_default:function(e){return n(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},he.Event=function(e,t){if(!(this instanceof he.Event))return new he.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?y:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),this[he.expando]=!0},he.Event.prototype={constructor:he.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ke.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Je.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,a=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===a||he.contains(a,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),he.fn.extend({on:function(e,t,i,a){return T(this,e,t,i,a)},one:function(e,t,i,a){return T(this,e,t,i,a,1)},off:function(e,t,i){var a,n;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,he(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=x),this.each(function(){he.event.remove(this,e,i,t)})}});var Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,et=/<script|<style|<link/i,tt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(Ze,"<$1></$2>")},clone:function(e,t,i){var a,n,o,s,r=e.cloneNode(!0),l=he.contains(e.ownerDocument,e);if(!(me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||he.isXMLDoc(e)))for(s=b(r),o=b(e),a=0,n=o.length;a<n;a++)P(o[a],s[a]);if(t)if(i)for(o=o||b(e),s=s||b(r),a=0,n=o.length;a<n;a++)E(o[a],s[a]);else E(e,r);return s=b(r,"script"),s.length>0&&C(s,!l&&b(e,"script")),r},cleanData:function(e){for(var t,i,a,n=he.event.special,o=0;void 0!==(i=e[o]);o++)if(Le(i)){if(t=i[Oe.expando]){if(t.events)for(a in t.events)n[a]?he.event.remove(i,a):he.removeEvent(i,a,t.handle);i[Oe.expando]=void 0}i[Be.expando]&&(i[Be.expando]=void 0)}}}),he.fn.extend({detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return De(this,function(e){return void 0===e?he.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){S(this,e).appendChild(e)}})},prepend:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=S(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return De(this,function(e){var t=this[0]||{},i=0,a=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!et.test(e)&&!$e[(We.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;i<a;i++)t=this[i]||{},1===t.nodeType&&(he.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return M(this,arguments,function(t){var i=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(b(this)),i&&i.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var i,a=[],n=he(e),o=n.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),he(n[s])[t](i),se.apply(a,i.get());return this.pushStack(a)}});var nt=/^margin/,ot=new RegExp("^("+Fe+")(?!px)[a-z%]+$","i"),st=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(r){r.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",Xe.appendChild(s);var t=e.getComputedStyle(r);i="1%"!==t.top,o="2px"===t.marginLeft,a="4px"===t.width,r.style.marginRight="50%",n="4px"===t.marginRight,Xe.removeChild(s),r=null}}var i,a,n,o,s=ie.createElement("div"),r=ie.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===r.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(r),he.extend(me,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),a},pixelMarginRight:function(){return t(),n},reliableMarginLeft:function(){return t(),o}}))}();var rt=/^(none|table(?!-c[ea]).+)/,lt=/^--/,ct={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],ut=ie.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=D(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,r=he.camelCase(t),l=lt.test(t),c=e.style;if(l||(t=B(r)),s=he.cssHooks[t]||he.cssHooks[r],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(e,!1,a))?n:c[t];o=typeof i,"string"===o&&(n=He.exec(i))&&n[1]&&(i=g(e,t,n),o="number"),null!=i&&i===i&&("number"===o&&(i+=n&&n[3]||(he.cssNumber[r]?"":"px")),me.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,a))||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,a){var n,o,s,r=he.camelCase(t);return lt.test(t)||(t=B(r)),s=he.cssHooks[t]||he.cssHooks[r],s&&"get"in s&&(n=s.get(e,!0,i)),void 0===n&&(n=D(e,t,a)),"normal"===n&&t in dt&&(n=dt[t]),""===i||i?(o=parseFloat(n),!0===i||isFinite(o)?o||0:n):n}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,i,a){if(i)return!rt.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?F(e,t,a):Ve(e,ct,function(){return F(e,t,a)})},set:function(e,i,a){var n,o=a&&st(e),s=a&&N(e,t,a,"border-box"===he.css(e,"boxSizing",!1,o),o);return s&&(n=He.exec(i))&&"px"!==(n[3]||"px")&&(e.style[t]=i,i=he.css(e,t)),R(e,i,s)}}}),he.cssHooks.marginLeft=L(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(D(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(i){for(var a=0,n={},o="string"==typeof i?i.split(" "):[i];a<4;a++)n[e+ze[a]+t]=o[a]||o[a-2]||o[0];return n}},nt.test(e)||(he.cssHooks[e+t].set=R)}),he.fn.extend({css:function(e,t){return De(this,function(e,t,i){var a,n,o={},s=0;if(Array.isArray(t)){for(a=st(e),n=t.length;s<n;s++)o[t[s]]=he.css(e,t[s],!1,a);return o}return void 0!==i?he.style(e,t,i):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=H,H.prototype={constructor:H,init:function(e,t,i,a,n,o){this.elem=e,this.prop=i,this.easing=n||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=o||(he.cssNumber[i]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,i=H.propHooks[this.prop];return this.options.duration?this.pos=t=he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=H.prototype.init,he.fx.step={};var mt,ht,gt=/^(?:toggle|show|hide)$/,vt=/queueHooks$/;he.Animation=he.extend(G,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return g(i.elem,e,He.exec(t),i),i}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(Pe);for(var i,a=0,n=e.length;a<n;a++)i=e[a],G.tweeners[i]=G.tweeners[i]||[],G.tweeners[i].unshift(t)},prefilters:[q],prefilter:function(e,t){t?G.prefilters.unshift(e):G.prefilters.push(e)}}),he.speed=function(e,t,i){var a=e&&"object"==typeof e?he.extend({},e):{complete:i||!i&&t||he.isFunction(e)&&e,duration:e,easing:i&&t||t&&!he.isFunction(t)&&t};return he.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in he.fx.speeds?a.duration=he.fx.speeds[a.duration]:a.duration=he.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){he.isFunction(a.old)&&a.old.call(this),a.queue&&he.dequeue(this,a.queue)},a},he.fn.extend({fadeTo:function(e,t,i,a){return this.filter(Ue).css("opacity",0).show().end().animate({opacity:t},e,i,a)},animate:function(e,t,i,a){var n=he.isEmptyObject(e),o=he.speed(t,i,a),s=function(){var t=G(this,he.extend({},e),o);(n||Oe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var a=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=he.timers,s=Oe.get(this);if(n)s[n]&&s[n].stop&&a(s[n]);else for(n in s)s[n]&&s[n].stop&&vt.test(n)&&a(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));!t&&i||he.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Oe.get(this),a=i[e+"queue"],n=i[e+"queueHooks"],o=he.timers,s=a?a.length:0;for(i.finish=!0,he.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete i.finish})}}),he.each(["toggle","show","hide"],function(e,t){var i=he.fn[t];he.fn[t]=function(e,a,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(V(t,!0),e,a,n)}}),he.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,i,a){return this.animate(t,e,i,a)}}),he.timers=[],he.fx.tick=function(){var e,t=0,i=he.timers;for(mt=he.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||he.fx.stop(),mt=void 0},he.fx.timer=function(e){he.timers.push(e),he.fx.start()},he.fx.interval=13,he.fx.start=function(){ht||(ht=!0,z())},he.fx.stop=function(){ht=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,i){return t=he.fx?he.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,a){var n=e.setTimeout(i,t);a.stop=function(){e.clearTimeout(n)}})},function(){var e=ie.createElement("input"),t=ie.createElement("select"),i=t.appendChild(ie.createElement("option"));e.type="checkbox",me.checkOn=""!==e.value,me.optSelected=i.selected,e=ie.createElement("input"),e.value="t",e.type="radio",me.radioValue="t"===e.value}();var ft,bt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return De(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,i){var a,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?he.prop(e,t,i):(1===o&&he.isXMLDoc(e)||(n=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?ft:void 0)),void 0!==i?null===i?void he.removeAttr(e,t):n&&"set"in n&&void 0!==(a=n.set(e,i,t))?a:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(a=n.get(e,t))?a:(a=he.find.attr(e,t),null==a?void 0:a))},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&n(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,a=0,n=t&&t.match(Pe);if(n&&1===e.nodeType)for(;i=n[a++];)e.removeAttribute(i)}}),ft={set:function(e,t,i){return!1===t?he.removeAttr(e,i):e.setAttribute(i,i),i}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var i=bt[t]||he.find.attr;bt[t]=function(e,t,a){var n,o,s=t.toLowerCase();return a||(o=bt[s],bt[s]=n,n=null!=i(e,t,a)?s:null,bt[s]=o),n}});var Ct=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return De(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,i){var a,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&he.isXMLDoc(e)||(t=he.propFix[t]||t,n=he.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(a=n.set(e,i,t))?a:e[t]=i:n&&"get"in n&&null!==(a=n.get(e,t))?a:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):Ct.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),me.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.fn.extend({addClass:function(e){var t,i,a,n,o,s,r,l=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(Pe)||[];i=this[l++];)if(n=Y(i),a=1===i.nodeType&&" "+$(n)+" "){for(s=0;o=t[s++];)a.indexOf(" "+o+" ")<0&&(a+=o+" ");r=$(a),n!==r&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,a,n,o,s,r,l=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Pe)||[];i=this[l++];)if(n=Y(i),a=1===i.nodeType&&" "+$(n)+" "){for(s=0;o=t[s++];)for(;a.indexOf(" "+o+" ")>-1;)a=a.replace(" "+o+" "," ");r=$(a),n!==r&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):he.isFunction(e)?this.each(function(i){he(this).toggleClass(e.call(this,i,Y(this),t),t)}):this.each(function(){var t,a,n,o;if("string"===i)for(a=0,n=he(this),o=e.match(Pe)||[];t=o[a++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==e&&"boolean"!==i||(t=Y(this),t&&Oe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Oe.get(this,"__className__")||""))})},hasClass:function(e){var t,i,a=0;for(t=" "+e+" ";i=this[a++];)if(1===i.nodeType&&(" "+$(Y(i))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;he.fn.extend({val:function(e){var t,i,a,n=this[0];{if(arguments.length)return a=he.isFunction(e),this.each(function(i){var n;1===this.nodeType&&(n=a?e.call(this,i,he(this).val()):e,null==n?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=he.map(n,function(e){return null==e?"":e+""})),(t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))});if(n)return(t=he.valHooks[n.type]||he.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(yt,""):null==i?"":i)}}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:$(he.text(e))}},select:{get:function(e){var t,i,a,o=e.options,s=e.selectedIndex,r="select-one"===e.type,l=r?null:[],c=r?s+1:o.length;for(a=s<0?c:r?s:0;a<c;a++)if(i=o[a],(i.selected||a===s)&&!i.disabled&&(!i.parentNode.disabled||!n(i.parentNode,"optgroup"))){if(t=he(i).val(),r)return t;l.push(t)}return l},set:function(e,t){for(var i,a,n=e.options,o=he.makeArray(t),s=n.length;s--;)a=n[s],(a.selected=he.inArray(he.valHooks.option.get(a),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=he.inArray(he(e).val(),t)>-1}},me.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,i,a,n){var o,s,r,l,c,d,p,u=[a||ie],m=de.call(t,"type")?t.type:t,h=de.call(t,"namespace")?t.namespace.split("."):[];if(s=r=a=a||ie,3!==a.nodeType&&8!==a.nodeType&&!xt.test(m+he.event.triggered)&&(m.indexOf(".")>-1&&(h=m.split("."),m=h.shift(),h.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[he.expando]?t:new he.Event(m,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),i=null==i?[t]:he.makeArray(i,[t]),p=he.event.special[m]||{},n||!p.trigger||!1!==p.trigger.apply(a,i))){if(!n&&!p.noBubble&&!he.isWindow(a)){for(l=p.delegateType||m,xt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)u.push(s),r=s;r===(a.ownerDocument||ie)&&u.push(r.defaultView||r.parentWindow||e)}for(o=0;(s=u[o++])&&!t.isPropagationStopped();)t.type=o>1?l:p.bindType||m,d=(Oe.get(s,"events")||{})[t.type]&&Oe.get(s,"handle"),d&&d.apply(s,i),(d=c&&s[c])&&d.apply&&Le(s)&&(t.result=d.apply(s,i),!1===t.result&&t.preventDefault());return t.type=m,n||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(u.pop(),i)||!Le(a)||c&&he.isFunction(a[m])&&!he.isWindow(a)&&(r=a[c],r&&(a[c]=null),he.event.triggered=m,a[m](),he.event.triggered=void 0,r&&(a[c]=r)),t.result}},simulate:function(e,t,i){var a=he.extend(new he.Event,i,{type:e,isSimulated:!0});he.event.trigger(a,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return he.event.trigger(e,t,i,!0)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),me.focusin="onfocusin"in e,me.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var a=this.ownerDocument||this,n=Oe.access(a,t);n||a.addEventListener(e,i,!0),Oe.access(a,t,(n||0)+1)},teardown:function(){var a=this.ownerDocument||this,n=Oe.access(a,t)-1;n?Oe.access(a,t,n):(a.removeEventListener(e,i,!0),Oe.remove(a,t))}}});var kt=e.location,Tt=he.now(),St=/\?/;he.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+t),i};var _t=/\[\]$/,At=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var i,a=[],n=function(e,t){var i=he.isFunction(t)?t():t;a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){n(this.name,this.value)});else for(i in e)X(i,e[i],t,n);return a.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&Pt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!qe.test(e))}).map(function(e,t){var i=he(this).val();return null==i?null:Array.isArray(i)?he.map(i,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:i.replace(At,"\r\n")}}).get()}});var Mt=/%20/g,It=/#.*$/,Dt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Nt={},Ft={},Ht="*/".concat("*"),zt=ie.createElement("a");zt.href=kt.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:Ot.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,he.ajaxSettings),t):Q(he.ajaxSettings,e)},ajaxPrefilter:K(Nt),ajaxTransport:K(Ft),ajax:function(t,i){function a(t,i,a,r){var c,u,m,w,y,x=i;d||(d=!0,l&&e.clearTimeout(l),n=void 0,s=r||"",k.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(w=Z(h,k,a)),w=ee(h,w,k,c),c?(h.ifModified&&(y=k.getResponseHeader("Last-Modified"),y&&(he.lastModified[o]=y),(y=k.getResponseHeader("etag"))&&(he.etag[o]=y)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=w.state,u=w.data,m=w.error,c=!m)):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(i||x)+"",c?f.resolveWith(g,[u,x,k]):f.rejectWith(g,[k,x,m]),k.statusCode(C),C=void 0,p&&v.trigger(c?"ajaxSuccess":"ajaxError",[k,h,c?u:m]),b.fireWith(g,[k,x]),p&&(v.trigger("ajaxComplete",[k,h]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var n,o,s,r,l,c,d,p,u,m,h=he.ajaxSetup({},i),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?he(g):he.event,f=he.Deferred(),b=he.Callbacks("once memory"),C=h.statusCode||{},w={},y={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(d){if(!r)for(r={};t=Lt.exec(s);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return d?s:null},setRequestHeader:function(e,t){return null==d&&(e=y[e.toLowerCase()]=y[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==d&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)k.always(e[k.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||x;return n&&n.abort(t),a(0,t),this}};if(f.promise(k),h.url=((t||h.url||kt.href)+"").replace(Rt,kt.protocol+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Pe)||[""],null==h.crossDomain){c=ie.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=zt.protocol+"//"+zt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=he.param(h.data,h.traditional)),J(Nt,h,i,k),d)return k;p=he.event&&h.global,p&&0==he.active++&&he.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Bt.test(h.type),o=h.url.replace(It,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Mt,"+")):(m=h.url.slice(o.length),h.data&&(o+=(St.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Dt,"$1"),m=(St.test(o)?"&":"?")+"_="+Tt+++m),h.url=o+m),h.ifModified&&(he.lastModified[o]&&k.setRequestHeader("If-Modified-Since",he.lastModified[o]),he.etag[o]&&k.setRequestHeader("If-None-Match",he.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&k.setRequestHeader("Content-Type",h.contentType),
k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ht+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)k.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(!1===h.beforeSend.call(g,k,h)||d))return k.abort();if(x="abort",b.add(h.complete),k.done(h.success),k.fail(h.error),n=J(Ft,h,i,k)){if(k.readyState=1,p&&v.trigger("ajaxSend",[k,h]),d)return k;h.async&&h.timeout>0&&(l=e.setTimeout(function(){k.abort("timeout")},h.timeout));try{d=!1,n.send(w,a)}catch(e){if(d)throw e;a(-1,e)}}else a(-1,"No Transport");return k},getJSON:function(e,t,i){return he.get(e,t,i,"json")},getScript:function(e,t){return he.get(e,void 0,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,i,a,n){return he.isFunction(i)&&(n=n||a,a=i,i=void 0),he.ajax(he.extend({url:e,type:t,dataType:n,data:i,success:a},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return he.isFunction(e)?this.each(function(t){he(this).wrapInner(e.call(this,t))}):this.each(function(){var t=he(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(i){he(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Vt=he.ajaxSettings.xhr();me.cors=!!Vt&&"withCredentials"in Vt,me.ajax=Vt=!!Vt,he.ajaxTransport(function(t){var i,a;if(me.cors||Vt&&!t.crossDomain)return{send:function(n,o){var s,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(s in n)r.setRequestHeader(s,n[s]);i=function(e){return function(){i&&(i=a=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?o(0,"error"):o(r.status,r.statusText):o(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),a=r.onerror=i("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){i&&a()})},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(a,n){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&n("error"===e.type?404:200,e.type)}),ie.head.appendChild(t[0])},abort:function(){i&&i()}}}});var jt=[],qt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||he.expando+"_"+Tt++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,i,a){var n,o,s,r=!1!==t.jsonp&&(qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(qt,"$1"+n):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||he.error(n+" was not called"),s[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){s=arguments},a.always(function(){void 0===o?he(e).removeProp(n):e[n]=o,t[n]&&(t.jsonpCallback=i.jsonpCallback,jt.push(n)),s&&he.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),me.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var a,n,o;return t||(me.createHTMLDocument?(t=ie.implementation.createHTMLDocument(""),a=t.createElement("base"),a.href=ie.location.href,t.head.appendChild(a)):t=ie),n=ke.exec(e),o=!i&&[],n?[t.createElement(n[1])]:(n=w([e],t,o),o&&o.length&&he(o).remove(),he.merge([],n.childNodes))},he.fn.load=function(e,t,i){var a,n,o,s=this,r=e.indexOf(" ");return r>-1&&(a=$(e.slice(r)),e=e.slice(0,r)),he.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),s.length>0&&he.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(a?he("<div>").append(he.parseHTML(e)).find(a):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,i){var a,n,o,s,r,l,c,d=he.css(e,"position"),p=he(e),u={};"static"===d&&(e.style.position="relative"),r=p.offset(),o=he.css(e,"top"),l=he.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(o+l).indexOf("auto")>-1,c?(a=p.position(),s=a.top,n=a.left):(s=parseFloat(o)||0,n=parseFloat(l)||0),he.isFunction(t)&&(t=t.call(e,i,he.extend({},r))),null!=t.top&&(u.top=t.top-r.top+s),null!=t.left&&(u.left=t.left-r.left+n),"using"in t?t.using.call(e,u):p.css(u)}},he.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,i,a,n,o=this[0];if(o)return o.getClientRects().length?(a=o.getBoundingClientRect(),t=o.ownerDocument,i=t.documentElement,n=t.defaultView,{top:a.top+n.pageYOffset-i.clientTop,left:a.left+n.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i=this[0],a={top:0,left:0};return"fixed"===he.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n(e[0],"html")||(a=e.offset()),a={top:a.top+he.css(e[0],"borderTopWidth",!0),left:a.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-a.top-he.css(i,"marginTop",!0),left:t.left-a.left-he.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Xe})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;he.fn[e]=function(a){return De(this,function(e,a,n){var o;if(he.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===n)return o?o[t]:e[a];o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):e[a]=n},e,a,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=L(me.pixelPosition,function(e,i){if(i)return i=D(e,t),ot.test(i)?he(e).position()[t]+"px":i})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,a){he.fn[a]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(!0===n||!0===o?"margin":"border");return De(this,function(t,i,n){var o;return he.isWindow(t)?0===a.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?he.css(t,i,r):he.style(t,i,n,r)},t,s?n:void 0,s)}})}),he.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,a){return this.on(t,e,i,a)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),he.holdReady=function(e){e?he.readyWait++:he.ready(!0)},he.isArray=Array.isArray,he.parseJSON=JSON.parse,he.nodeName=n,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var Wt=e.jQuery,Gt=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Gt),t&&e.jQuery===he&&(e.jQuery=Wt),he},t||(e.jQuery=e.$=he),he}),function(){var e,t=this,i=t.Backbone,a=[],n=a.slice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.1.0";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=e.Events={on:function(e,t,i){return l(this,"on",e,[t,i])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this}),this):this},once:function(e,t,i){if(!l(this,"once",e,[t,i])||!t)return this;var a=this,n=o.once(function(){a.off(e,n),t.apply(this,arguments)});return n._callback=t,this.on(e,n,i)},off:function(e,t,i){var a,n,s,r,c,d,p,u;if(!this._events||!l(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(r=e?[e]:o.keys(this._events),c=0,d=r.length;c<d;c++)if(e=r[c],s=this._events[e]){if(this._events[e]=a=[],t||i)for(p=0,u=s.length;p<u;p++)n=s[p],(t&&t!==n.callback&&t!==n.callback._callback||i&&i!==n.context)&&a.push(n);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=n.call(arguments,1);if(!l(this,"trigger",e,t))return this;var i=this._events[e],a=this._events.all;return i&&c(i,t),a&&c(a,arguments),this},stopListening:function(e,t,i){var a=this._listeningTo;if(!a)return this;var n=!t&&!i;i||"object"!=typeof t||(i=this),e&&((a={})[e._listenId]=e);for(var s in a)e=a[s],e.off(t,i,this),(n||o.isEmpty(e._events))&&delete this._listeningTo[s];return this}},r=/\s+/,l=function(e,t,i,a){if(!i)return!0;if("object"==typeof i){for(var n in i)e[t].apply(e,[n,i[n]].concat(a));return!1}if(r.test(i)){for(var o=i.split(r),s=0,l=o.length;s<l;s++)e[t].apply(e,[o[s]].concat(a));return!1}return!0},c=function(e,t){var i,a=-1,n=e.length,o=t[0],s=t[1],r=t[2];switch(t.length){case 0:for(;++a<n;)(i=e[a]).callback.call(i.ctx);return;case 1:for(;++a<n;)(i=e[a]).callback.call(i.ctx,o);return;case 2:for(;++a<n;)(i=e[a]).callback.call(i.ctx,o,s);return;case 3:for(;++a<n;)(i=e[a]).callback.call(i.ctx,o,s,r);return;default:for(;++a<n;)(i=e[a]).callback.apply(i.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};o.each(d,function(e,t){s[t]=function(t,i,a){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=o.uniqueId("l"))]=t,a||"object"!=typeof i||(a=this),t[e](i,a,this),this}}),s.bind=s.on,s.unbind=s.off,o.extend(e,s);var p=e.Model=function(e,t){var i=e||{};t||(t={}),this.cid=o.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=o.defaults({},i,o.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};o.extend(p.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return o.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,n,s,r,l,c,d,p;if(null==e)return this;if("object"==typeof e?(n=e,i=t):(n={})[e]=t,i||(i={}),!this._validate(n,i))return!1;s=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=o.clone(this.attributes),this.changed={}),p=this.attributes,d=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]);for(a in n)t=n[a],o.isEqual(p[a],t)||r.push(a),o.isEqual(d[a],t)?delete this.changed[a]:this.changed[a]=t,s?delete p[a]:p[a]=t;if(!l){r.length&&(this._pending=!0);for(var u=0,m=r.length;u<m;u++)this.trigger("change:"+r[u],this,p[r[u]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&o.clone(this.changed);var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var n in e)o.isEqual(a[n],t=e[n])||((i||(i={}))[n]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(a){if(!t.set(t.parse(a,e),e))return!1;i&&i(t,a,e),t.trigger("sync",t,a,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,n,s,r=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=o.extend({validate:!0},i),a&&!i.wait){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=o.extend({},r,a)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=r;var t=l.parse(e,i);if(i.wait&&(t=o.extend(a||{},t)),o.isObject(t)&&!l.set(t,i))return!1;c&&c(l,e,i),l.trigger("sync",l,e,i)},R(this,i),n=this.isNew()?"create":i.patch?"patch":"update","patch"===n&&(i.attrs=a),s=this.sync(n,this,i),a&&i.wait&&(this.attributes=r),s},destroy:function(e){e=e?o.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;R(this,e);var n=this.sync("delete",this,e);return e.wait||a(),n},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||B();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},o.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=o.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,o.extend(t,{validationError:i})),!1)}});var u=["keys","values","pairs","invert","pick","omit"];o.each(u,function(e){p.prototype[e]=function(){var t=n.call(arguments);return t.unshift(this.attributes),o[e].apply(o,t)}});var m=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))},h={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};o.extend(m.prototype,s,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,o.extend({merge:!1},t,g))},remove:function(e,t){var i=!o.isArray(e);e=i?[e]:o.clone(e),t||(t={});var a,n,s,r;for(a=0,n=e.length;a<n;a++)(r=e[a]=this.get(e[a]))&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,t.silent||(t.index=s,r.trigger("remove",r,this,t)),this._removeReference(r));return i?e[0]:e},set:function(e,t){t=o.defaults({},t,h),t.parse&&(e=this.parse(e,t));var i=!o.isArray(e);e=i?e?[e]:[]:o.clone(e);var a,n,s,r,l,c,d,u=t.at,m=this.model,g=this.comparator&&null==u&&!1!==t.sort,v=o.isString(this.comparator)?this.comparator:null,f=[],b=[],C={},w=t.add,y=t.merge,x=t.remove,k=!(g||!w||!x)&&[];for(a=0,n=e.length;a<n;a++){if(l=e[a],s=l instanceof p?r=l:l[m.prototype.idAttribute],c=this.get(s))x&&(C[c.cid]=!0),y&&(l=l===r?r.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),g&&!d&&c.hasChanged(v)&&(d=!0)),e[a]=c;else if(w){if(!(r=e[a]=this._prepareModel(l,t)))continue;f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)}k&&k.push(c||r)}if(x){for(a=0,n=this.length;a<n;++a)C[(r=this.models[a]).cid]||b.push(r);b.length&&this.remove(b,t)}if(f.length||k&&k.length)if(g&&(d=!0),this.length+=f.length,null!=u)for(a=0,n=f.length;a<n;a++)this.models.splice(u+a,0,f[a]);else{k&&(this.models.length=0);var T=k||f;for(a=0,n=T.length;a<n;a++)this.models.push(T[a])}if(d&&this.sort({silent:!0}),!t.silent){for(a=0,n=f.length;a<n;a++)(r=f[a]).trigger("add",r,this,t);(d||k&&k.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;i<a;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),e=this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,o.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,o.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return n.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return o.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return o.invoke(this.models,"get",e)},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(a){var n=e.reset?"reset":"set";i[n](a,e),t&&t(i,a,e),i.trigger("sync",i,a,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?o.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(e,t,n){n.wait&&i.add(e,n),a&&a(e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t=t?o.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,a){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,a),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(v,function(e){m.prototype[e]=function(){var t=n.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var f=["groupBy","countBy","sortBy"];o.each(f,function(e){m.prototype[e]=function(t,i){var a=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,a,i)}});var b=e.View=function(e){this.cid=o.uniqueId("view"),e||(e={}),o.extend(this,o.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},C=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];o.extend(b.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(o.isFunction(i)||(i=this[e[t]]),i){var a=t.match(C),n=a[1],s=a[2];i=o.bind(i,this),n+=".delegateEvents"+this.cid,""===s?this.$el.on(n,i):this.$el.on(n,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t.class=o.result(this,"className"));var i=e.$("<"+o.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,a){var n=x[t];o.defaults(a||(a={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:n,dataType:"json"};if(a.url||(s.url=o.result(i,"url")||B()),null!=a.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),a.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){s.type="POST",a.emulateJSON&&(s.data._method=n);var r=a.beforeSend;a.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",n),r)return r.apply(this,arguments)}}"GET"===s.type||a.emulateJSON||(s.processData=!1),"PATCH"===s.type&&y&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=e.ajax(o.extend(s,a));return i.trigger("request",i,l,a),l};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,_=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(k.prototype,s,{initialize:function(){},route:function(t,i,a){o.isRegExp(t)||(t=this._routeToRegExp(t)),o.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var n=this;return e.history.route(t,function(o){var s=n._extractParameters(t,o);a&&a.apply(n,s),n.trigger.apply(n,["route:"+i].concat(s)),n.trigger("route",i,s),e.history.trigger("route",n,i,s)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(T,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return o.map(i,function(e){return e?decodeURIComponent(e):null})}});var E=e.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,I=/msie [\w.]+/,D=/\/$/,L=/[?#].*$/;E.started=!1,o.extend(E.prototype,s,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(D,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(P,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=o.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,n=I.exec(navigator.userAgent.toLowerCase())&&(!a||a<=7);this.root=("/"+this.root+"/").replace(M,"/"),n&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location,r=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!r)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&r&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),o.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!E.started)return!1;t&&!0!==t||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(L,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var a=e.href.replace(/(javascript:|#).*$/,"");e.replace(a+"#"+t)}else e.hash="#"+t}}),e.history=new E;var O=function(e,t){var i,a=this;i=e&&o.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},o.extend(i,a,t);var n=function(){this.constructor=i};return n.prototype=a.prototype,i.prototype=new n,e&&o.extend(i.prototype,e),i.__super__=a.prototype,i};p.extend=m.extend=k.extend=b.extend=E.extend=O;var B=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var i=t.error;t.error=function(a){i&&i(e,a,t),e.trigger("error",e,a,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){return e.Backbone}}(this)),function(){"use strict";window.Framework7=function(t){function i(){var e,t=s(this),i=t[0].scrollTop,a=t[0].scrollHeight,n=t[0].offsetHeight,o=t[0].getAttribute("data-distance"),r=t.find(".virtual-list"),l=t.hasClass("infinite-scroll-top");if(o||(o=50),"string"==typeof o&&o.indexOf("%")>=0&&(o=parseInt(o,10)/100*n),o>n&&(o=n),l)i<o&&t.trigger("infinite");else if(i+n>=a-o){if(r.length>0&&(e=r[0].f7VirtualList)&&!e.reachEnd)return;t.trigger("infinite")}}function a(){n.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var n=this;n.version="1.5.0",n.params={root:"body",cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,uniqueHistory:!1,uniqueHistoryIgnoreGetParameters:!1,dynamicPageUrl:"content-{{index}}",allowDuplicateUrls:!1,router:!0,routerRemoveTimeout:!1,routerRemoveWithTimeout:!1,pushState:!1,pushStateRoot:void 0,pushStateNoAnimation:!1,pushStateSeparator:"#!/",pushStateOnLoad:!0,fastClicks:!0,fastClicksDistanceThreshold:10,fastClicksDelayBetweenClicks:50,fastClicksExclude:"",tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span",animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageAnimateShadow:!0,swipeBackPageAnimateOpacity:!0,ajaxLinks:void 0,externalLinks:".external",sortable:!0,hideNavbarOnPageScroll:!1,hideToolbarOnPageScroll:!1,hideTabbarOnPageScroll:!1,showBarsOnPageScrollEnd:!0,showBarsOnPageScrollTop:!0,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,swipeoutRemoveWithTimeout:!1,smartSelectOpenIn:"page",smartSelectBackText:"Back",smartSelectPopupCloseText:"Close",smartSelectPickerCloseText:"Done",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,scrollTopOnNavbarClick:!1,scrollTopOnStatusbarClick:!1,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelOnlyClose:!1,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",modalStack:!0,imagesLazyLoadThreshold:0,imagesLazyLoadSequential:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,notificationCloseButtonText:"Close",animatePages:!0,templates:{},template7Data:{},template7Pages:!1,precompileTemplates:!1,material:!1,materialPageLoadDelay:0,materialPreloaderSvg:'<svg xmlns="http://www.w3.org/2000/svg" height="75" width="75" viewbox="0 0 75 75"><circle cx="37.5" cy="37.5" r="33.5" stroke-width="8"/></svg>',materialPreloaderHtml:'<span class="preloader-inner"><span class="preloader-inner-gap"></span><span class="preloader-inner-left"><span class="preloader-inner-half-circle"></span></span><span class="preloader-inner-right"><span class="preloader-inner-half-circle"></span></span></span>',materialRipple:!0,materialRippleElements:".ripple, a.link, a.item-link, .button, .modal-button, .tab-link, .label-radio, .label-checkbox, .actions-modal-button, a.searchbar-clear, a.floating-button, .floating-button > a, .speed-dial-buttons a",init:!0};for(var o in t)n.params[o]=t[o];var s=e,r=Template7;n._compiledTemplates={},n.root=s(n.params.root),n.root.eq(0).addClass("framework7-root"),n.touchEvents={start:n.support.touch?"touchstart":"mousedown",move:n.support.touch?"touchmove":"mousemove",end:n.support.touch?"touchend":"mouseup"},n.ls=window.localStorage,n.rtl="rtl"===s("body").css("direction"),n.rtl&&s("html").attr("dir","rtl"),void 0!==n.params.statusbarOverlay&&(n.params.statusbarOverlay?s("html").addClass("with-statusbar-overlay"):s("html").removeClass("with-statusbar-overlay")),n.views=[];var l=function(e,t){var i,a={dynamicNavbar:!1,domCache:!1,linksView:void 0,reloadPages:!1,uniqueHistory:n.params.uniqueHistory,uniqueHistoryIgnoreGetParameters:n.params.uniqueHistoryIgnoreGetParameters,allowDuplicateUrls:n.params.allowDuplicateUrls,swipeBackPage:n.params.swipeBackPage,swipeBackPageAnimateShadow:n.params.swipeBackPageAnimateShadow,swipeBackPageAnimateOpacity:n.params.swipeBackPageAnimateOpacity,
swipeBackPageActiveArea:n.params.swipeBackPageActiveArea,swipeBackPageThreshold:n.params.swipeBackPageThreshold,animatePages:n.params.animatePages,preloadPreviousPage:n.params.preloadPreviousPage};t=t||{},t.dynamicNavbar&&n.params.material&&(t.dynamicNavbar=!1);for(var o in a)void 0===t[o]&&(t[o]=a[o]);var r=this;r.params=t,r.selector=e;var l=s(e);if(r.container=l[0],"string"!=typeof e&&(e=(l.attr("id")?"#"+l.attr("id"):"")+(l.attr("class")?"."+l.attr("class").replace(/ /g,".").replace(".active",""):""),r.selector=e),r.main=l.hasClass(n.params.viewMainClass),r.contentCache={},r.contextCache={},r.pagesCache={},r.pageElementsCache={},l[0].f7View=r,r.pagesContainer=l.find(".pages")[0],r.initialPages=[],r.initialPagesUrl=[],r.initialNavbars=[],r.params.domCache){var c=l.find(".page");for(i=0;i<c.length;i++)r.initialPages.push(c[i]),r.initialPagesUrl.push("#"+c.eq(i).attr("data-page"));if(r.params.dynamicNavbar){var d=l.find(".navbar-inner");for(i=0;i<d.length;i++)r.initialNavbars.push(d[i])}}r.allowPageChange=!0;var p=document.location.href;r.history=[];var u=p,m=n.params.pushStateSeparator,h=n.params.pushStateRoot;n.params.pushState&&r.main&&(h?u=h:m&&u.indexOf(m)>=0&&u.indexOf(m+"#")<0&&(u=u.split(m)[0]));var g,v;r.activePage||(g=s(r.pagesContainer).find(".page-on-center"),0===g.length&&(g=s(r.pagesContainer).find(".page:not(.cached)"),g=g.eq(g.length-1)),g.length>0&&(v=g[0].f7PageData)),r.params.domCache&&g?(r.url=l.attr("data-url")||r.params.url||"#"+g.attr("data-page"),r.pagesCache[r.url]=g.attr("data-page")):r.url=l.attr("data-url")||r.params.url||u,v&&(v.view=r,v.url=r.url,r.params.domCache&&r.params.dynamicNavbar&&!v.navbarInnerContainer&&(v.navbarInnerContainer=r.initialNavbars[r.initialPages.indexOf(v.container)]),r.activePage=v,g[0].f7PageData=v),r.url&&r.history.push(r.url);var f,b,C,w,y,x,k,T,S,_,A,E=!1,P=!1,M={},I=[],D=[],L=!0,O=[],B=[];if(r.handleTouchStart=function(e){L&&r.params.swipeBackPage&&!E&&!n.swipeoutOpenedEl&&r.allowPageChange&&(P=!1,E=!0,f=void 0,M.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,M.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,w=(new Date).getTime(),S=r.params.dynamicNavbar&&l.find(".navbar-inner").length>1)},r.handleTouchMove=function(e){if(E){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===f&&(f=!!(f||Math.abs(i-M.y)>Math.abs(t-M.x))),f||e.f7PreventSwipeBack||n.preventSwipeBack)return void(E=!1);if(!P){var a=!1;b=l.width();var o=s(e.target),c=o.hasClass("swipeout")?o:o.parents(".swipeout");c.length>0&&(!n.rtl&&c.find(".swipeout-actions-left").length>0&&(a=!0),n.rtl&&c.find(".swipeout-actions-right").length>0&&(a=!0)),I=o.is(".page")?o:o.parents(".page"),I.hasClass("no-swipeback")&&(a=!0),D=l.find(".page-on-left:not(.cached)");var d=M.x-l.offset().left>r.params.swipeBackPageActiveArea;if(d=n.rtl?M.x<l.offset().left-l[0].scrollLeft+b-r.params.swipeBackPageActiveArea:M.x-l.offset().left>r.params.swipeBackPageActiveArea,d&&(a=!0),0!==D.length&&0!==I.length||(a=!0),a)return void(E=!1);r.params.swipeBackPageAnimateShadow&&!n.device.android&&(_=I.find(".swipeback-page-shadow"),0===_.length&&(_=s('<div class="swipeback-page-shadow"></div>'),I.append(_))),S&&(O=l.find(".navbar-on-center:not(.cached)"),B=l.find(".navbar-on-left:not(.cached)"),y=O.find(".left, .center, .right, .subnavbar, .fading"),x=B.find(".left, .center, .right, .subnavbar, .fading"),n.params.animateNavBackIcon&&(k=O.find(".left.sliding .back .icon"),T=B.find(".left.sliding .back .icon"))),s(".picker-modal.modal-in").length>0&&n.closeModal(s(".picker-modal.modal-in"))}e.f7PreventPanelSwipe=!0,P=!0,e.preventDefault();var p=n.rtl?-1:1;C=(t-M.x-r.params.swipeBackPageThreshold)*p,C<0&&(C=0);var u=C/b,m={percentage:u,activePage:I[0],previousPage:D[0],activeNavbar:O[0],previousNavbar:B[0]};r.params.onSwipeBackMove&&r.params.onSwipeBackMove(m),l.trigger("swipeBackMove",m);var h=C*p,g=(C/5-b/5)*p;if(1===n.device.pixelRatio&&(h=Math.round(h),g=Math.round(g)),I.transform("translate3d("+h+"px,0,0)"),r.params.swipeBackPageAnimateShadow&&!n.device.android&&(_[0].style.opacity=1-1*u),D.transform("translate3d("+g+"px,0,0)"),r.params.swipeBackPageAnimateOpacity&&(D[0].style.opacity=.9+.1*u),S){var v;for(v=0;v<y.length;v++)if(A=s(y[v]),A.is(".subnavbar.sliding")||(A[0].style.opacity=1-1.3*u),A[0].className.indexOf("sliding")>=0){var w=u*A[0].f7NavbarRightOffset;1===n.device.pixelRatio&&(w=Math.round(w)),A.transform("translate3d("+w+"px,0,0)"),n.params.animateNavBackIcon&&A[0].className.indexOf("left")>=0&&k.length>0&&k.transform("translate3d("+-w+"px,0,0)")}for(v=0;v<x.length;v++)if(A=s(x[v]),A.is(".subnavbar.sliding")||(A[0].style.opacity=1.3*u-.3),A[0].className.indexOf("sliding")>=0){var L=A[0].f7NavbarLeftOffset*(1-u);1===n.device.pixelRatio&&(L=Math.round(L)),A.transform("translate3d("+L+"px,0,0)"),n.params.animateNavBackIcon&&A[0].className.indexOf("left")>=0&&T.length>0&&T.transform("translate3d("+-L+"px,0,0)")}}}},r.handleTouchEnd=function(e){if(!E||!P)return E=!1,void(P=!1);if(E=!1,P=!1,0===C)return s([I[0],D[0]]).transform("").css({opacity:"",boxShadow:""}),void(S&&(y.transform("").css({opacity:""}),x.transform("").css({opacity:""}),k&&k.length>0&&k.transform(""),T&&k.length>0&&T.transform("")));var t=(new Date).getTime()-w,i=!1;(t<300&&C>10||t>=300&&C>b/2)&&(I.removeClass("page-on-center").addClass("page-on-right"),D.removeClass("page-on-left").addClass("page-on-center"),S&&(O.removeClass("navbar-on-center").addClass("navbar-on-right"),B.removeClass("navbar-on-left").addClass("navbar-on-center")),i=!0),s([I[0],D[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),S&&(y.css({opacity:""}).each(function(){var e=i?this.f7NavbarRightOffset:0,t=s(this);t.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&t.hasClass("left")&&k.length>0&&k.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning"),x.transform("").css({opacity:""}).each(function(){var e=i?0:this.f7NavbarLeftOffset,t=s(this);t.transform("translate3d("+e+"px,0,0)"),n.params.animateNavBackIcon&&t.hasClass("left")&&T.length>0&&T.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning")),L=!1,r.allowPageChange=!1;var a={activePage:I[0],previousPage:D[0],activeNavbar:O[0],previousNavbar:B[0]};if(i){var o=r.history[r.history.length-2];r.url=o,n.pageBackCallback("before",r,{pageContainer:I[0],url:o,position:"center",newPage:D,oldPage:I,swipeBack:!0}),n.pageAnimCallback("before",r,{pageContainer:D[0],url:o,position:"left",newPage:D,oldPage:I,swipeBack:!0}),r.params.onSwipeBackBeforeChange&&r.params.onSwipeBackBeforeChange(a),l.trigger("swipeBackBeforeChange",a)}else r.params.onSwipeBackBeforeReset&&r.params.onSwipeBackBeforeReset(a),l.trigger("swipeBackBeforeReset",a);I.transitionEnd(function(){s([I[0],D[0]]).removeClass("page-transitioning"),S&&(y.removeClass("page-transitioning").css({opacity:""}),x.removeClass("page-transitioning").css({opacity:""}),k&&k.length>0&&k.removeClass("page-transitioning"),T&&T.length>0&&T.removeClass("page-transitioning")),L=!0,r.allowPageChange=!0,i?(n.params.pushState&&r.main&&history.back(),n.pageBackCallback("after",r,{pageContainer:I[0],url:o,position:"center",newPage:D,oldPage:I,swipeBack:!0}),n.pageAnimCallback("after",r,{pageContainer:D[0],url:o,position:"left",newPage:D,oldPage:I,swipeBack:!0}),n.router.afterBack(r,I,D),r.params.onSwipeBackAfterChange&&r.params.onSwipeBackAfterChange(a),l.trigger("swipeBackAfterChange",a)):(r.params.onSwipeBackAfterReset&&r.params.onSwipeBackAfterReset(a),l.trigger("swipeBackAfterReset",a)),_&&_.length>0&&_.remove()})},r.attachEvents=function(e){var t=e?"off":"on",i=!("touchstart"!==n.touchEvents.start||!n.support.passiveListener)&&{passive:!0,capture:!1};l[t](n.touchEvents.start,r.handleTouchStart,i),l[t](n.touchEvents.move,r.handleTouchMove),l[t](n.touchEvents.end,r.handleTouchEnd,i)},r.detachEvents=function(){r.attachEvents(!0)},r.params.swipeBackPage&&!n.params.material&&r.attachEvents(),n.views.push(r),r.main&&(n.mainView=r),r.router={load:function(e){return n.router.load(r,e)},back:function(e){return n.router.back(r,e)},loadPage:function(e){if("string"==typeof(e=e||{})){var t=e;e={},t&&0===t.indexOf("#")&&r.params.domCache?e.pageName=t.split("#")[1]:e.url=t}return n.router.load(r,e)},loadContent:function(e){return n.router.load(r,{content:e})},reloadPage:function(e){return n.router.load(r,{url:e,reload:!0})},reloadContent:function(e){return n.router.load(r,{content:e,reload:!0})},reloadPreviousPage:function(e){return n.router.load(r,{url:e,reloadPrevious:!0,reload:!0})},reloadPreviousContent:function(e){return n.router.load(r,{content:e,reloadPrevious:!0,reload:!0})},refreshPage:function(){var e={url:r.url,reload:!0,ignoreCache:!0};return e.url&&0===e.url.indexOf("#")&&(r.params.domCache&&r.pagesCache[e.url]?(e.pageName=r.pagesCache[e.url],e.url=void 0,delete e.url):r.contentCache[e.url]&&(e.content=r.contentCache[e.url],e.url=void 0,delete e.url)),n.router.load(r,e)},refreshPreviousPage:function(){var e={url:r.history[r.history.length-2],reload:!0,reloadPrevious:!0,ignoreCache:!0};return e.url&&0===e.url.indexOf("#")&&r.params.domCache&&r.pagesCache[e.url]&&(e.pageName=r.pagesCache[e.url],e.url=void 0,delete e.url),n.router.load(r,e)}},r.loadPage=r.router.loadPage,r.loadContent=r.router.loadContent,r.reloadPage=r.router.reloadPage,r.reloadContent=r.router.reloadContent,r.reloadPreviousPage=r.router.reloadPreviousPage,r.reloadPreviousContent=r.router.reloadPreviousContent,r.refreshPage=r.router.refreshPage,r.refreshPreviousPage=r.router.refreshPreviousPage,r.back=r.router.back,r.hideNavbar=function(){return n.hideNavbar(l.find(".navbar"))},r.showNavbar=function(){return n.showNavbar(l.find(".navbar"))},r.hideToolbar=function(){return n.hideToolbar(l.find(".toolbar"))},r.showToolbar=function(){return n.showToolbar(l.find(".toolbar"))},n.params.pushState&&n.params.pushStateOnLoad&&r.main){var R,N=p.split(m)[1];h?R=p.split(n.params.pushStateRoot+m)[1]:m&&p.indexOf(m)>=0&&p.indexOf(m+"#")<0&&(R=N);var F=!n.params.pushStateNoAnimation&&void 0,H=history.state;R?R.indexOf("#")>=0&&r.params.domCache&&H&&H.pageName&&"viewIndex"in H?n.router.load(r,{pageName:H.pageName,url:H.url,animatePages:F,pushState:!1}):R.indexOf("#")>=0&&r.params.domCache&&r.initialPagesUrl.indexOf(R)>=0?n.router.load(r,{pageName:R.replace("#",""),animatePages:F,pushState:!1}):n.router.load(r,{url:R,animatePages:F,pushState:!1}):r.params.domCache&&p.indexOf(m+"#")>=0&&(H&&H.pageName&&"viewIndex"in H?n.router.load(r,{pageName:H.pageName,url:H.url,animatePages:F,pushState:!1}):m&&0===N.indexOf("#")&&r.initialPagesUrl.indexOf(N)&&n.router.load(r,{pageName:N.replace("#",""),animatePages:F,pushState:!1}))}return r.destroy=function(){r.detachEvents(),r=void 0},n.pluginHook("addView",r),r};n.addView=function(e,t){return new l(e,t)},n.getCurrentView=function(e){var t=s(".popover.modal-in .view"),i=s(".popup.modal-in .view"),a=s(".panel.active .view"),n=s(".views"),o=n.children(".view");if(o.length>1&&o.hasClass("tab")&&(o=n.children(".view.active")),t.length>0&&t[0].f7View)return t[0].f7View;if(i.length>0&&i[0].f7View)return i[0].f7View;if(a.length>0&&a[0].f7View)return a[0].f7View;if(o.length>0){if(1===o.length&&o[0].f7View)return o[0].f7View;if(o.length>1){for(var r=[],l=0;l<o.length;l++)o[l].f7View&&r.push(o[l].f7View);if(r.length>0&&void 0!==e)return r[e];if(r.length>1)return r;if(1===r.length)return r[0];return}}},n.navbarInitCallback=function(e,t,i,a){if(!i&&a&&(i=s(a).parent(".navbar")[0]),a&&(!a.f7NavbarInitialized||!e||e.params.domCache)){var o={container:i,innerContainer:a},r=t&&t.f7PageData,l={page:r,navbar:o};if(a.f7NavbarInitialized&&(e&&e.params.domCache||!e&&s(i).parents(".popup, .popover, .login-screen, .modal, .actions-modal, .picker-modal").length>0))return n.reinitNavbar(i,a),n.pluginHook("navbarReinit",l),void s(a).trigger("navbarReinit",l);a.f7NavbarInitialized=!0,n.pluginHook("navbarBeforeInit",o,r),s(a).trigger("navbarBeforeInit",l),n.initNavbar(i,a),n.pluginHook("navbarInit",o,r),s(a).trigger("navbarInit",l)}},n.navbarRemoveCallback=function(e,t,i,a){!i&&a&&(i=s(a).parent(".navbar")[0]);var o,r={container:i,innerContainer:a};t&&(o=t.f7PageData);var l={page:o,navbar:r};n.pluginHook("navbarBeforeRemove",r,o),s(a).trigger("navbarBeforeRemove",l),r=null,o=null},n.initNavbar=function(e,t){n.initSearchbar&&n.initSearchbar(t)},n.reinitNavbar=function(e,t){},n.initNavbarWithCallback=function(e){e=s(e);var t,i=e.parents("."+n.params.viewClass);0!==i.length&&(0===e.parents(".navbar-through").length&&0===i.find(".navbar-through").length||(t=i[0].f7View||void 0,e.find(".navbar-inner").each(function(){var a,o=this;if(s(o).attr("data-page")&&(a=i.find('.page[data-page="'+s(o).attr("data-page")+'"]')[0]),!a){var r=i.find(".page");1===r.length?a=r[0]:i.find(".page").each(function(){this.f7PageData&&this.f7PageData.navbarInnerContainer===o&&(a=this)})}n.navbarInitCallback(t,a,e[0],o)})))},n.sizeNavbars=function(e){if(!n.params.material){(e?s(e).find(".navbar .navbar-inner:not(.cached)"):s(".navbar .navbar-inner:not(.cached)")).each(function(){var e=s(this);if(!e.hasClass("cached")){var t,i,a=n.rtl?e.find(".right"):e.find(".left"),o=n.rtl?e.find(".left"):e.find(".right"),r=e.find(".center"),l=e.find(".subnavbar"),c=0===a.length,d=0===o.length,p=c?0:a.outerWidth(!0),u=d?0:o.outerWidth(!0),m=r.outerWidth(!0),h=e.styles(),g=e[0].offsetWidth-parseInt(h.paddingLeft,10)-parseInt(h.paddingRight,10),v=e.hasClass("navbar-on-left");d&&(t=g-m),c&&(t=0),c||d||(t=(g-u-m+p)/2);var f=(g-m)/2;g-p-u>m?(f<p&&(f=p),f+m>g-u&&(f=g-u-m),i=f-t):i=0;var b=n.rtl?-1:1;if(r.hasClass("sliding")&&(r[0].f7NavbarLeftOffset=-(t+i)*b,r[0].f7NavbarRightOffset=(g-t-i-m)*b,v)){if(n.params.animateNavBackIcon){var C=e.parent().find(".navbar-on-center").find(".left.sliding .back .icon ~ span");C.length>0&&(r[0].f7NavbarLeftOffset+=C[0].offsetLeft)}r.transform("translate3d("+r[0].f7NavbarLeftOffset+"px, 0, 0)")}!c&&a.hasClass("sliding")&&(n.rtl?(a[0].f7NavbarLeftOffset=-(g-a[0].offsetWidth)/2*b,a[0].f7NavbarRightOffset=p*b):(a[0].f7NavbarLeftOffset=-p,a[0].f7NavbarRightOffset=(g-a[0].offsetWidth)/2,n.params.animateNavBackIcon&&a.find(".back .icon").length>0&&(a[0].f7NavbarRightOffset-=a.find(".back .icon")[0].offsetWidth)),v&&a.transform("translate3d("+a[0].f7NavbarLeftOffset+"px, 0, 0)")),!d&&o.hasClass("sliding")&&(n.rtl?(o[0].f7NavbarLeftOffset=-u*b,o[0].f7NavbarRightOffset=(g-o[0].offsetWidth)/2*b):(o[0].f7NavbarLeftOffset=-(g-o[0].offsetWidth)/2,o[0].f7NavbarRightOffset=u),v&&o.transform("translate3d("+o[0].f7NavbarLeftOffset+"px, 0, 0)")),l.length&&l.hasClass("sliding")&&(l[0].f7NavbarLeftOffset=n.rtl?l[0].offsetWidth:-l[0].offsetWidth,l[0].f7NavbarRightOffset=-l[0].f7NavbarLeftOffset);var w=i;n.rtl&&c&&d&&r.length>0&&(w=-w),r.css({left:w+"px"})}})}},n.hideNavbar=function(e){return s(e).addClass("navbar-hidden"),!0},n.showNavbar=function(e){var t=s(e);return t.addClass("navbar-hiding").removeClass("navbar-hidden").transitionEnd(function(){t.removeClass("navbar-hiding")}),!0},n.hideToolbar=function(e){return s(e).addClass("toolbar-hidden"),!0},n.showToolbar=function(e){var t=s(e);t.addClass("toolbar-hiding").removeClass("toolbar-hidden").transitionEnd(function(){t.removeClass("toolbar-hiding")})};var c=function(e,t){function i(e){e.preventDefault()}var a={input:null,clearButton:null,cancelButton:null,searchList:null,searchIn:".item-title",searchBy:"",found:null,notFound:null,overlay:null,ignore:".searchbar-ignore",customSearch:!1,removeDiacritics:!1,hideDividers:!0,hideGroups:!0};t=t||{};for(var o in a)void 0!==t[o]&&null!==t[o]||(t[o]=a[o]);var r=this;r.material=n.params.material,r.params=t,e=s(e),r.container=e,r.active=!1,r.input=r.params.input?s(r.params.input):r.container.find('input[type="search"]'),r.clearButton=r.params.clearButton?s(r.params.clearButton):r.container.find(".searchbar-clear"),r.cancelButton=r.params.cancelButton?s(r.params.cancelButton):r.container.find(".searchbar-cancel"),r.searchList=s(r.params.searchList),r.isVirtualList=r.searchList.hasClass("virtual-list"),r.pageContainer=r.container.parents(".page").eq(0),r.params.overlay?r.overlay=s(r.params.overlay):r.overlay=r.pageContainer.length>0?r.pageContainer.find(".searchbar-overlay"):s(".searchbar-overlay"),r.params.found?r.found=s(r.params.found):r.found=r.pageContainer.length>0?r.pageContainer.find(".searchbar-found"):s(".searchbar-found"),r.params.notFound?r.notFound=s(r.params.notFound):r.notFound=r.pageContainer.length>0?r.pageContainer.find(".searchbar-not-found"):s(".searchbar-not-found");var l=n.rtl?"margin-left":"margin-right",c=!1;r.setCancelButtonMargin=function(){r.cancelButton.transition(0).show(),r.cancelButton.css(l,-r.cancelButton[0].offsetWidth+"px");r.cancelButton[0].clientLeft;r.cancelButton.transition(""),c=!0},r.triggerEvent=function(e,t,i){r.container.trigger(e,i),r.searchList.length>0&&r.searchList.trigger(e,i),t&&r.params[t]&&r.params[t](r,i)},r.enable=function(e){function t(){!r.searchList.length&&!r.params.customSearch||r.container.hasClass("searchbar-active")||r.query||r.overlay.addClass("searchbar-overlay-active"),r.container.addClass("searchbar-active"),r.cancelButton.length>0&&!r.material&&(c||r.setCancelButtonMargin(),r.cancelButton.css(l,"0px")),r.triggerEvent("enableSearch","onEnable"),r.active=!0}n.device.ios&&!n.params.material&&e&&"focus"===e.type?setTimeout(function(){t()},400):t()},r.disable=function(){function e(){r.input.blur()}r.input.val("").trigger("change"),r.container.removeClass("searchbar-active searchbar-not-empty"),r.cancelButton.length>0&&!r.material&&r.cancelButton.css(l,-r.cancelButton[0].offsetWidth+"px"),(r.searchList.length||r.params.customSearch)&&r.overlay.removeClass("searchbar-overlay-active"),r.active=!1,n.device.ios?setTimeout(function(){e()},400):e(),r.triggerEvent("disableSearch","onDisable")},r.clear=function(e){if(!r.query&&e&&s(e.target).hasClass("searchbar-clear"))return void r.disable();r.input.val("").trigger("change").focus(),r.triggerEvent("clearSearch","onClear")},r.handleInput=function(){setTimeout(function(){var e=r.input.val().trim();(r.searchList.length>0||r.params.customSearch)&&(r.params.searchIn||r.isVirtualList)&&r.search(e,!0)},0)};var d,p="";return r.search=function(e,t){if(e.trim()!==p){if(p=e.trim(),t||(r.active||r.enable(),r.input.val(e)),r.query=r.value=e,0===e.length?(r.container.removeClass("searchbar-not-empty"),r.searchList.length&&r.container.hasClass("searchbar-active")&&r.overlay.addClass("searchbar-overlay-active")):(r.container.addClass("searchbar-not-empty"),r.searchList.length&&r.container.hasClass("searchbar-active")&&r.overlay.removeClass("searchbar-overlay-active")),r.params.customSearch)return void r.triggerEvent("search","onSearch",{query:e});var i,a=[];if(r.isVirtualList){if(d=r.searchList[0].f7VirtualList,""===e.trim())return d.resetFilter(),r.notFound.hide(),void r.found.show();if(i=r.params.removeDiacritics?s.removeDiacritics(e):e,d.params.searchAll)a=d.params.searchAll(i,d.items)||[];else if(d.params.searchByItem)for(var n=0;n<d.items.length;n++)d.params.searchByItem(i,n,d.params.items[n])&&a.push(n)}else{var o;o=r.params.removeDiacritics?s.removeDiacritics(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),r.searchList.find("li").removeClass("hidden-by-searchbar").each(function(e,t){t=s(t);var i=[];t.find(r.params.searchIn).each(function(){var e=s(this).text().trim().toLowerCase();r.params.removeDiacritics&&(e=s.removeDiacritics(e)),i.push(e)}),i=i.join(" ");for(var n=0,l=0;l<o.length;l++)i.indexOf(o[l])>=0&&n++;n===o.length||r.params.ignore&&t.is(r.params.ignore)?a.push(t[0]):t.addClass("hidden-by-searchbar")}),r.params.hideDividers&&r.searchList.find(".item-divider, .list-group-title").each(function(){for(var e=s(this),t=e.nextAll("li"),i=!0,a=0;a<t.length;a++){var n=s(t[a]);if(n.hasClass("list-group-title")||n.hasClass("item-divider"))break;n.hasClass("hidden-by-searchbar")||(i=!1)}var o=r.params.ignore&&e.is(r.params.ignore);i&&!o?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),r.params.hideGroups&&r.searchList.find(".list-group").each(function(){var e=s(this),t=r.params.ignore&&e.is(r.params.ignore);0!==e.find("li:not(.hidden-by-searchbar)").length||t?e.removeClass("hidden-by-searchbar"):e.addClass("hidden-by-searchbar")})}r.triggerEvent("search","onSearch",{query:e,foundItems:a}),0===a.length?(r.notFound.show(),r.found.hide()):(r.notFound.hide(),r.found.show()),r.isVirtualList&&d.filterItems(a)}},r.attachEvents=function(e){var t=e?"off":"on";r.container[t]("submit",i),r.material||r.cancelButton[t]("click",r.disable),r.overlay[t]("click",r.disable),r.input[t]("focus",r.enable),r.input[t]("change keydown keypress keyup",r.handleInput),r.clearButton[t]("click",r.clear)},r.detachEvents=function(){r.attachEvents(!0)},r.init=function(){r.attachEvents()},r.destroy=function(){r&&(r.detachEvents(),r=null)},r.init(),r.container[0].f7Searchbar=r,r};n.searchbar=function(e,t){return new c(e,t)},n.initSearchbar=function(e){function t(){a&&a.destroy()}e=s(e);var i=e.hasClass("searchbar")?e:e.find(".searchbar");if(0!==i.length&&i.hasClass("searchbar-init")){var a=n.searchbar(i,i.dataset());e.hasClass("page")?e.once("pageBeforeRemove",t):e.hasClass("navbar-inner")&&e.once("navbarBeforeRemove",t)}};var d=function(e,t){function i(e){e.preventDefault()}var a={textarea:null,maxHeight:null};t=t||{};for(var n in a)void 0!==t[n]&&null!==t[n]||(t[n]=a[n]);var o=this;if(o.params=t,o.container=s(e),0!==o.container.length)return o.textarea=o.params.textarea?s(o.params.textarea):o.container.find("textarea"),o.pageContainer=o.container.parents(".page").eq(0),o.pageContent=o.pageContainer.find(".page-content"),o.pageContentPadding=parseInt(o.pageContent.css("padding-bottom")),o.initialBarHeight=o.container[0].offsetHeight,o.initialAreaHeight=o.textarea[0].offsetHeight,o.sizeTextarea=function(){o.textarea.css({height:""});var e=o.textarea[0].offsetHeight,t=e-o.textarea[0].clientHeight,i=o.textarea[0].scrollHeight;if(i+t>e){var a=i+t,n=o.initialBarHeight+(a-o.initialAreaHeight),s=o.params.maxHeight||o.container.parents(".view")[0].offsetHeight-88;n>s&&(n=parseInt(s,10),a=n-o.initialBarHeight+o.initialAreaHeight),o.textarea.css("height",a+"px"),o.container.css("height",n+"px");var r=o.pageContent[0].scrollTop===o.pageContent[0].scrollHeight-o.pageContent[0].offsetHeight;o.pageContent.length>0&&(o.pageContent.css("padding-bottom",n+"px"),0===o.pageContent.find(".messages-new-first").length&&r&&o.pageContent.scrollTop(o.pageContent[0].scrollHeight-o.pageContent[0].offsetHeight))}else o.pageContent.length>0&&(o.container.css({height:"",bottom:""}),o.pageContent.css({"padding-bottom":""}))},o.clear=function(){o.textarea.val("").trigger("change")},o.value=function(e){if(void 0===e)return o.textarea.val();o.textarea.val(e).trigger("change")},o.textareaTimeout=void 0,o.handleTextarea=function(e){clearTimeout(o.textareaTimeout),o.textareaTimeout=setTimeout(function(){o.sizeTextarea()},0)},o.attachEvents=function(e){var t=e?"off":"on";o.container[t]("submit",i),o.textarea[t]("change keydown keypress keyup paste cut",o.handleTextarea)},o.detachEvents=function(){o.attachEvents(!0)},o.init=function(){o.attachEvents()},o.destroy=function(){o.detachEvents(),o=null},o.init(),o.container[0].f7Messagebar=o,o};n.messagebar=function(e,t){return new d(e,t)},n.initPageMessagebar=function(e){function t(){a.destroy(),e.off("pageBeforeRemove",t)}e=s(e);var i=e.hasClass("messagebar")?e:e.find(".messagebar");if(0!==i.length&&i.hasClass("messagebar-init")){var a=n.messagebar(i,i.dataset());e.hasClass("page")&&e.on("pageBeforeRemove",t)}},n.cache=[],n.removeFromCache=function(e){for(var t=!1,i=0;i<n.cache.length;i++)n.cache[i].url===e&&(t=i);!1!==t&&n.cache.splice(t,1)},n.xhr=!1,n.get=function(e,t,i,a){var o=e;if(n.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(o=e.split("?")[0]),n.params.cache&&!i&&e.indexOf("nocache")<0&&n.params.cacheIgnore.indexOf(o)<0)for(var r=0;r<n.cache.length;r++)if(n.cache[r].url===o&&(new Date).getTime()-n.cache[r].time<n.params.cacheDuration)return a(n.cache[r].content),!1;return n.xhr=s.ajax({url:e,method:"GET",beforeSend:n.params.onAjaxStart,complete:function(e){e.status>=200&&e.status<300||0===e.status?(n.params.cache&&(n.removeFromCache(o),n.cache.push({url:o,time:(new Date).getTime(),content:e.responseText})),a(e.responseText,!1)):a(e.responseText,!0),n.params.onAjaxComplete&&n.params.onAjaxComplete(e)},error:function(e){a(e.responseText,!0),n.params.onAjaxError&&n.params.onAjaxError(e)}}),t&&(t.xhr=n.xhr),n.xhr},n.pageCallbacks={},n.onPage=function(e,t,i){if(t&&t.split(" ").length>1){for(var a=t.split(" "),o=[],s=0;s<a.length;s++)o.push(n.onPage(e,a[s],i));return o.remove=function(){for(var e=0;e<o.length;e++)o[e].remove()},o.trigger=function(){for(var e=0;e<o.length;e++)o[e].trigger()},o}var r=n.pageCallbacks[e][t];return r||(r=n.pageCallbacks[e][t]=[]),n.pageCallbacks[e][t].push(i),{remove:function(){for(var e,t=0;t<r.length;t++)r[t].toString()===i.toString()&&(e=t);void 0!==e&&r.splice(e,1)},trigger:i}};for(var p="beforeInit init reinit beforeAnimation afterAnimation back afterBack beforeRemove".split(" "),u=0;u<p.length;u++)n.pageCallbacks[p[u]]={},function(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});n["onPage"+t]=function(t,i){return n.onPage(e,t,i)}}(p[u]);n.triggerPageCallbacks=function(e,t,i){var a=n.pageCallbacks[e]["*"];if(a)for(var o=0;o<a.length;o++)a[o](i);var s=n.pageCallbacks[e][t];if(s&&0!==s.length)for(var r=0;r<s.length;r++)s[r](i)},n.pageInitCallback=function(e,t){var i=t.pageContainer;if(i&&(!i.f7PageInitialized||!e||e.params.domCache)){var a=t.query;a||(a=t.url&&t.url.indexOf("?")>0?s.parseUrlQuery(t.url||""):i.f7PageData&&i.f7PageData.query?i.f7PageData.query:{});var o={container:i,url:t.url,query:a,name:s(i).attr("data-page"),view:e,from:t.position,context:t.context,navbarInnerContainer:t.navbarInnerContainer,fromPage:t.fromPage};if(t.fromPage&&!t.fromPage.navbarInnerContainer&&t.oldNavbarInnerContainer&&(t.fromPage.navbarInnerContainer=t.oldNavbarInnerContainer),i.f7PageInitialized&&(e&&e.params.domCache||!e&&s(i).parents(".popup, .popover, .login-screen, .modal, .actions-modal, .picker-modal").length>0))return n.reinitPage(i),n.pluginHook("pageReinit",o),n.params.onPageReinit&&n.params.onPageReinit(n,o),n.triggerPageCallbacks("reinit",o.name,o),void s(o.container).trigger("pageReinit",{page:o});i.f7PageInitialized=!0,i.f7PageData=o,!e||t.preloadOnly||t.reloadPrevious||(s(e.container).attr("data-page",o.name),e.activePage=o),n.pluginHook("pageBeforeInit",o),n.params.onPageBeforeInit&&n.params.onPageBeforeInit(n,o),n.triggerPageCallbacks("beforeInit",o.name,o),s(o.container).trigger("pageBeforeInit",{page:o}),n.initPage(i),n.pluginHook("pageInit",o),n.params.onPageInit&&n.params.onPageInit(n,o),n.triggerPageCallbacks("init",o.name,o),s(o.container).trigger("pageInit",{page:o})}},n.pageRemoveCallback=function(e,t,i){var a;if(t){t.f7PageData&&(a=t.f7PageData.context);var o={container:t,name:s(t).attr("data-page"),view:e,url:t.f7PageData&&t.f7PageData.url,query:t.f7PageData&&t.f7PageData.query,navbarInnerContainer:t.f7PageData&&t.f7PageData.navbarInnerContainer,from:i,context:a};n.pluginHook("pageBeforeRemove",o),n.params.onPageBeforeRemove&&n.params.onPageBeforeRemove(n,o),n.triggerPageCallbacks("beforeRemove",o.name,o),s(o.container).trigger("pageBeforeRemove",{page:o}),o=null}},n.pageBackCallback=function(e,t,i){var a,o=i.pageContainer;if(o){o.f7PageData&&(a=o.f7PageData.context);var r={container:o,name:s(o).attr("data-page"),url:o.f7PageData&&o.f7PageData.url,query:o.f7PageData&&o.f7PageData.query,view:t,from:i.position,context:a,navbarInnerContainer:o.f7PageData&&o.f7PageData.navbarInnerContainer,swipeBack:i.swipeBack};"after"===e&&(n.pluginHook("pageAfterBack",r),n.params.onPageAfterBack&&n.params.onPageAfterBack(n,r),n.triggerPageCallbacks("afterBack",r.name,r),s(o).trigger("pageAfterBack",{page:r})),"before"===e&&(n.pluginHook("pageBack",r),n.params.onPageBack&&n.params.onPageBack(n,r),n.triggerPageCallbacks("back",r.name,r),s(r.container).trigger("pageBack",{page:r}))}},n.pageAnimCallback=function(e,t,i){var a,o=i.pageContainer;if(o){o.f7PageData&&(a=o.f7PageData.context);var r=i.query;r||(r=i.url&&i.url.indexOf("?")>0?s.parseUrlQuery(i.url||""):o.f7PageData&&o.f7PageData.query?o.f7PageData.query:{});var l={container:o,url:i.url,query:r,name:s(o).attr("data-page"),view:t,from:i.position,context:a,swipeBack:i.swipeBack,navbarInnerContainer:o.f7PageData&&o.f7PageData.navbarInnerContainer,fromPage:i.fromPage},c=i.oldPage,d=i.newPage;if(o.f7PageData=l,"after"===e&&(n.pluginHook("pageAfterAnimation",l),n.params.onPageAfterAnimation&&n.params.onPageAfterAnimation(n,l),n.triggerPageCallbacks("afterAnimation",l.name,l),s(l.container).trigger("pageAfterAnimation",{page:l})),"before"===e){s(t.container).attr("data-page",l.name),t&&(t.activePage=l),d.hasClass("no-navbar")&&!c.hasClass("no-navbar")&&t.hideNavbar(),d.hasClass("no-navbar")||!c.hasClass("no-navbar")&&!c.hasClass("no-navbar-by-scroll")||t.showNavbar(),d.hasClass("no-toolbar")&&!c.hasClass("no-toolbar")&&t.hideToolbar(),d.hasClass("no-toolbar")||!c.hasClass("no-toolbar")&&!c.hasClass("no-toolbar-by-scroll")||t.showToolbar();var p;d.hasClass("no-tabbar")&&!c.hasClass("no-tabbar")&&(p=s(t.container).find(".tabbar"),0===p.length&&(p=s(t.container).parents("."+n.params.viewsClass).find(".tabbar")),n.hideToolbar(p)),d.hasClass("no-tabbar")||!c.hasClass("no-tabbar")&&!c.hasClass("no-tabbar-by-scroll")||(p=s(t.container).find(".tabbar"),0===p.length&&(p=s(t.container).parents("."+n.params.viewsClass).find(".tabbar")),n.showToolbar(p)),c.removeClass("no-navbar-by-scroll no-toolbar-by-scroll"),n.pluginHook("pageBeforeAnimation",l),n.params.onPageBeforeAnimation&&n.params.onPageBeforeAnimation(n,l),n.triggerPageCallbacks("beforeAnimation",l.name,l),s(l.container).trigger("pageBeforeAnimation",{page:l})}}},n.initPage=function(e){e=s(e),0!==e.length&&(n.sizeNavbars&&n.sizeNavbars(e.parents("."+n.params.viewClass)[0]),n.initPageMessages&&n.initPageMessages(e),n.initFormsStorage&&n.initFormsStorage(e),n.initSmartSelects&&n.initSmartSelects(e),n.initPageSwiper&&n.initPageSwiper(e),n.initPullToRefresh&&n.initPullToRefresh(e),n.initPageInfiniteScroll&&n.initPageInfiniteScroll(e),n.initSearchbar&&n.initSearchbar(e),n.initPageMessagebar&&n.initPageMessagebar(e),n.initPageScrollToolbars&&n.initPageScrollToolbars(e),n.initImagesLazyLoad&&n.initImagesLazyLoad(e),n.initPageProgressbar&&n.initPageProgressbar(e),n.initPageResizableTextarea&&n.initPageResizableTextarea(e),n.params.material&&n.initPageMaterialPreloader&&n.initPageMaterialPreloader(e),n.params.material&&n.initPageMaterialInputs&&n.initPageMaterialInputs(e),n.params.material&&n.initPageMaterialTabbar&&n.initPageMaterialTabbar(e))},n.reinitPage=function(e){e=s(e),0!==e.length&&(n.sizeNavbars&&n.sizeNavbars(e.parents("."+n.params.viewClass)[0]),n.reinitPageSwiper&&n.reinitPageSwiper(e),n.reinitLazyLoad&&n.reinitLazyLoad(e))},n.initPageWithCallback=function(e){e=s(e);var t=e.parents("."+n.params.viewClass);if(0!==t.length){var i=t[0].f7View||void 0,a=i&&i.url?i.url:void 0;t&&e.attr("data-page")&&t.attr("data-page",e.attr("data-page")),n.pageInitCallback(i,{pageContainer:e[0],url:a,position:"center"})}},n.router={_remove:function(e){n.params.routerRemoveTimeout||n.params.routerRemoveWithTimeout?setTimeout(function(){s(e).remove()},0):s(e).remove()},temporaryDom:document.createElement("div"),findElement:function(e,t,i,a){t=s(t),a&&(e+=":not(.cached)");var o=t.find(e);return o.length>1&&("string"==typeof i.selector&&(o=t.find(i.selector+" "+e)),o.length>1&&(o=t.find("."+n.params.viewMainClass+" "+e))),1===o.length?o:(a||(o=n.router.findElement(e,t,i,!0)),o&&1===o.length?o:o&&o.length>1?s(o[0]):void 0)},animatePages:function(e,t,i,a){
var n="page-on-center page-on-right page-on-left";"to-left"===i&&(e.removeClass(n).addClass("page-from-center-to-left"),t.removeClass(n).addClass("page-from-right-to-center")),"to-right"===i&&(e.removeClass(n).addClass("page-from-left-to-center"),t.removeClass(n).addClass("page-from-center-to-right"))},prepareNavbar:function(e,t,i){s(e).find(".sliding").each(function(){var e=s(this),t="right"===i?this.f7NavbarRightOffset:this.f7NavbarLeftOffset;n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-t+"px,0,0)"),e.transform("translate3d("+t+"px,0,0)")})},animateNavbars:function(e,t,i,a){var o="navbar-on-right navbar-on-center navbar-on-left";"to-left"===i&&(t.removeClass(o).addClass("navbar-from-right-to-center"),t.find(".sliding").each(function(){var e=s(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass(o).addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e,i=s(this);n.params.animateNavBackIcon&&(i.hasClass("center")&&t.find(".sliding.left .back .icon").length>0&&(e=t.find(".sliding.left .back span"),e.length>0&&(this.f7NavbarLeftOffset+=e[0].offsetLeft)),i.hasClass("left")&&i.find(".back .icon").length>0&&i.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)")),i.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),"to-right"===i&&(e.removeClass(o).addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=s(this);e.transform("translate3d(0px,0,0)"),n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass(o).addClass("navbar-from-center-to-right"),t.find(".sliding").each(function(){var e=s(this);n.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))},preprocess:function(e,t,i,a){n.pluginHook("routerPreprocess",e,t,i,a),t=n.pluginProcess("preprocess",t),e&&e.params&&e.params.preprocess?void 0!==(t=e.params.preprocess(t,i,a))&&a(t):n.params.preprocess?void 0!==(t=n.params.preprocess(t,i,a))&&a(t):a(t)},preroute:function(e,t,i){return i&&(t.isBack=!0),n.pluginHook("routerPreroute",e,t),!!(n.params.preroute&&!1===n.params.preroute(e,t)||e&&e.params.preroute&&!1===e.params.preroute(e,t))},template7Render:function(e,t){var i,a,o=t.url,l=t.content,c=t.content,d=t.context,p=t.contextName,u=t.template;t.pageName;if("string"==typeof l?o?n.template7Cache[o]&&!t.ignoreCache?a=r.cache[o]:(a=r.compile(l),r.cache[o]=a):a=r.compile(l):u&&(a=u),d)i=d,d&&o&&(e.contextCache[o]=d);else{if(p)if(p.indexOf(".")>=0){for(var m=p.split("."),h=r.data[m[0]],g=1;g<m.length;g++)m[g]&&(h=h[m[g]]);i=h}else i=r.data[p];if(!i&&o&&(i=r.data["url:"+o]),!i&&"string"==typeof l&&!u){var v=l.match(/(data-page=["'][^"^']*["'])/);if(v){var f=v[0].split("data-page=")[1].replace(/['"]/g,"");f&&(i=r.data["page:"+f])}}if(!i&&u&&r.templates)for(var b in r.templates)r.templates[b]===u&&(i=r.data[b]);!i&&o&&o in e.contextCache&&(i=e.contextCache[o]),i||(i={})}if(a&&i){if("function"==typeof i&&(i=i()),o){var C=s.parseUrlQuery(o);i.url_query={};for(var w in C)i.url_query[w]=C[w]}try{c=a(i)}catch(e){c="",window.console&&window.console.error&&console.error(e)}}return{content:c,context:i}}},n.router._load=function(e,t){function i(){e.allowPageChange=!0,a.removeClass("page-from-right-to-center page-on-right page-on-left").addClass("page-on-center"),o.removeClass("page-from-center-to-left page-on-center page-on-right").addClass("page-on-left"),u&&(d.removeClass("navbar-from-right-to-center navbar-on-left navbar-on-right").addClass("navbar-on-center"),c.removeClass("navbar-from-center-to-left navbar-on-center navbar-on-right").addClass("navbar-on-left")),n.pageAnimCallback("after",e,{pageContainer:a[0],url:h,position:"right",oldPage:o,newPage:a,query:t.query,fromPage:o&&o.length&&o[0].f7PageData}),n.params.pushState&&e.main&&n.pushStateClearQueue(),e.params.swipeBackPage||e.params.preloadPreviousPage||(e.params.domCache?(o.addClass("cached"),u&&c.addClass("cached")):0===h.indexOf("#")&&0===a.attr("data-page").indexOf("smart-select-")||(n.pageRemoveCallback(e,o[0],"left"),u&&n.navbarRemoveCallback(e,o[0],p[0],c[0]),n.router._remove(o),u&&n.router._remove(c))),e.params.uniqueHistory&&M&&e.refreshPreviousPage()}t=t||{};var a,o,r,l,c,d,p,u,m,h=t.url,g=t.content,v={content:t.content},f=t.template,b=t.pageName,C=s(e.container),w=s(e.pagesContainer),y=t.animatePages,x=void 0===h&&g||f,k=t.pushState,T=t.pageElement;if(void 0===y&&(y=e.params.animatePages),n.pluginHook("routerLoad",e,t),(n.params.template7Pages&&"string"==typeof g||f)&&(v=n.router.template7Render(e,t),v.content&&!g&&(g=v.content)),n.router.temporaryDom.innerHTML="",!b&&!T)if("string"==typeof g||h&&"string"==typeof g)n.router.temporaryDom.innerHTML=v.content;else if("length"in g&&g.length>1)for(var S=0;S<g.length;S++)s(n.router.temporaryDom).append(g[S]);else s(n.router.temporaryDom).append(g);if(m=t.reload&&(t.reloadPrevious?"left":"center"),!(a=b?w.find('.page[data-page="'+b+'"]'):T?s(T):n.router.findElement(".page",n.router.temporaryDom,e))||0===a.length||b&&e.activePage&&e.activePage.name===b)return void(e.allowPageChange=!0);if(a.addClass(t.reload?"page-on-"+m:"page-on-right"),r=w.children(".page:not(.cached)"),T&&(r=r.filter(function(e,t){if(t!==T)return t})),t.reload&&t.reloadPrevious&&1===r.length)return void(e.allowPageChange=!0);if(t.reload)o=r.eq(r.length-1);else{if(r.length>1){for(l=0;l<r.length-2;l++)e.params.domCache?s(r[l]).addClass("cached"):(n.pageRemoveCallback(e,r[l],"left"),n.router._remove(r[l]));e.params.domCache?s(r[l]).addClass("cached"):(n.pageRemoveCallback(e,r[l],"left"),n.router._remove(r[l]))}o=w.children(".page:not(.cached)")}if(T&&o.length>1&&(o=o.filter(function(e,t){if(t!==T)return t})),(e.params.domCache||T)&&a.removeClass("cached"),e.params.dynamicNavbar)if(u=!0,d=b?C.find('.navbar-inner[data-page="'+b+'"]'):n.router.findElement(".navbar-inner",n.router.temporaryDom,e),d&&0!==d.length||(d=a.find(".navbar-inner"),d&&0!==d.length?d.parent(".navbar").length>0&&d.prependTo(a):u=!1),u&&a.find(".navbar").length>0&&n.router._remove(a.find(".navbar")),p=C.children(".navbar"),t.reload)c=p.find(".navbar-inner:not(.cached):last-child");else if(c=p.find(".navbar-inner:not(.cached)"),c.length>0){for(l=0;l<c.length-1;l++)e.params.domCache?s(c[l]).addClass("cached"):(n.navbarRemoveCallback(e,r[l],p[0],c[l]),n.router._remove(c[l]));d||1!==c.length||(e.params.domCache?s(c[0]).addClass("cached"):(n.navbarRemoveCallback(e,r[0],p[0],c[0]),n.router._remove(c[0]))),c=p.find(".navbar-inner:not(.cached)")}if(u&&(d.addClass(t.reload?"navbar-on-"+m:"navbar-on-right"),(e.params.domCache||T)&&d.removeClass("cached"),a[0].f7RelatedNavbar=d[0],d[0].f7RelatedPage=a[0]),h)h&&T&&(e.pageElementsCache[h]={page:a,navbarInner:d});else{var _=b||a.attr("data-page");h=x?"#"+n.params.dynamicPageUrl.replace(/{{name}}/g,_).replace(/{{index}}/g,e.history.length-(t.reload?1:0)):"#"+_,e.params.domCache||(e.contentCache[h]=g),e.params.domCache&&b&&(e.pagesCache[h]=b)}if(n.params.pushState&&!t.reloadPrevious&&e.main){void 0===k&&(k=!0);var A=n.params.pushStateRoot||"",E=t.reload?"replaceState":"pushState";k&&(x||b?x&&g?history[E]({content:"string"==typeof g?g:"",url:h,viewIndex:n.views.indexOf(e)},"",A+n.params.pushStateSeparator+h):b&&history[E]({pageName:b,url:h,viewIndex:n.views.indexOf(e)},"",A+n.params.pushStateSeparator+h):history[E]({url:h,viewIndex:n.views.indexOf(e)},"",A+n.params.pushStateSeparator+h))}if(e.url=h,t.reload){var P=e.history[e.history.length-(t.reloadPrevious?2:1)];P&&0===P.indexOf("#")&&P in e.contentCache&&P!==h&&-1===e.history.indexOf(P)?(e.contentCache[P]=null,delete e.contentCache[P]):P&&P in e.pageElementsCache&&P!==h&&(-1===e.history.indexOf(P)||e.history.indexOf(P)===e.history.length-1)&&(e.pageElementsCache[P]=null,delete e.pageElementsCache[P]),P&&P in e.contextCache&&P!==h&&(-1===e.history.indexOf(P)||e.history.indexOf(P)===e.history.length-1)&&(e.contextCache[P]=null,delete e.contextCache[P]),e.history[e.history.length-(t.reloadPrevious?2:1)]=h}else e.history.push(h);var M=!1;if(e.params.uniqueHistory){var I=e.history,D=h;if(e.params.uniqueHistoryIgnoreGetParameters)for(I=[],D=h.split("?")[0],l=0;l<e.history.length;l++)I.push(e.history[l].split("?")[0]);I.indexOf(D)!==I.lastIndexOf(D)&&(e.history=e.history.slice(0,I.indexOf(D)),e.history.push(h),M=!0)}if(t.reloadPrevious?(o=o.prev(".page"),a.insertBefore(o),u&&(c=c.prev(".navbar-inner"),d.insertAfter(c))):(w.append(a[0]),u&&p.append(d[0])),t.reload&&(e.params.domCache&&e.initialPages.indexOf(o[0])>=0?(o.addClass("cached"),u&&c.addClass("cached")):(n.pageRemoveCallback(e,o[0],m),u&&n.navbarRemoveCallback(e,o[0],p[0],c[0]),n.router._remove(o),u&&n.router._remove(c))),n.pageInitCallback(e,{pageContainer:a[0],url:h,position:t.reload?m:"right",navbarInnerContainer:u?d&&d[0]:void 0,oldNavbarInnerContainer:u?c&&c[0]:void 0,context:v.context,query:t.query,fromPage:o&&o.length&&o[0].f7PageData,reload:t.reload,reloadPrevious:t.reloadPrevious}),u&&n.navbarInitCallback(e,a[0],p[0],d[0],h,t.reload?m:"right"),t.reload)return e.allowPageChange=!0,void(M&&e.refreshPreviousPage());u&&y&&n.router.prepareNavbar(d,c,"right");a[0].clientLeft;n.pageAnimCallback("before",e,{pageContainer:a[0],url:h,position:"right",oldPage:o,newPage:a,query:t.query,fromPage:o&&o.length&&o[0].f7PageData}),y?(n.params.material&&n.params.materialPageLoadDelay?setTimeout(function(){n.router.animatePages(o,a,"to-left",e)},n.params.materialPageLoadDelay):n.router.animatePages(o,a,"to-left",e),u&&setTimeout(function(){n.router.animateNavbars(c,d,"to-left",e)},0),a.animationEnd(function(e){i()})):(u&&d.find(".sliding, .sliding .back .icon").transform(""),i())},n.router.load=function(e,t){function i(i){n.router.preprocess(e,i,a,function(i){t.content=i,n.router._load(e,t)})}if(t=t||{},n.router.preroute(e,t))return!1;var a=t.url,o=t.content,r=t.pageName,l=t.pageElement;r&&r.indexOf("?")>0&&(t.query=s.parseUrlQuery(r),t.pageName=r=r.split("?")[0]);var c=t.template;return!0===e.params.reloadPages&&(t.reload=!0),!!e.allowPageChange&&(!(a&&e.url===a&&!t.reload&&!e.params.allowDuplicateUrls)&&(e.allowPageChange=!1,n.xhr&&e.xhr&&e.xhr===n.xhr&&(n.xhr.abort(),n.xhr=!1),o||r||l?void i(o):c?void n.router._load(e,t):t.url&&"#"!==t.url?void n.get(t.url,e,t.ignoreCache,function(t,a){if(a)return void(e.allowPageChange=!0);i(t)}):void(e.allowPageChange=!0)))},n.router._back=function(e,t){function i(){n.pageBackCallback("after",e,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:c}),n.pageAnimCallback("after",e,{pageContainer:c[0],url:g,position:"left",oldPage:l,newPage:c,query:t.query,fromPage:l&&l.length&&l[0].f7PageData}),n.router.afterBack(e,l[0],c[0])}function a(){n.pageBackCallback("before",e,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:c}),n.pageAnimCallback("before",e,{pageContainer:c[0],url:g,position:"left",oldPage:l,newPage:c,query:t.query,fromPage:l&&l.length&&l[0].f7PageData}),C?(n.router.animatePages(c,l,"to-right",e),h&&setTimeout(function(){n.router.animateNavbars(p,d,"to-right",e)},0),c.animationEnd(function(){i()})):(h&&p.find(".sliding, .sliding .back .icon").transform(""),i())}function o(){if(n.router.temporaryDom.innerHTML="","string"==typeof v||g&&"string"==typeof v)n.router.temporaryDom.innerHTML=f.content;else if("length"in v&&v.length>1)for(var t=0;t<v.length;t++)s(n.router.temporaryDom).append(v[t]);else s(n.router.temporaryDom).append(v);c=T?s(T):n.router.findElement(".page",n.router.temporaryDom,e),e.params.dynamicNavbar&&(p=n.router.findElement(".navbar-inner",n.router.temporaryDom,e))}function r(){if(!c||0===c.length)return void(e.allowPageChange=!0);if(e.params.dynamicNavbar&&void 0===h&&(h=!(!p||0===p.length)),c.addClass("page-on-left").removeClass("cached"),h&&(u=S.children(".navbar"),m=u.find(".navbar-inner:not(.cached)"),p.addClass("navbar-on-left").removeClass("cached")),x){var i,o;if(i=s(A[A.length-2]),h&&(o=s(i[0]&&i[0].f7RelatedNavbar||m[m.length-2])),e.params.domCache&&e.initialPages.indexOf(i[0])>=0)i.length&&i[0]!==c[0]&&i.addClass("cached"),h&&o.length&&o[0]!==p[0]&&o.addClass("cached");else{var r=h&&o.length;i.length?(n.pageRemoveCallback(e,i[0],"right"),r&&n.navbarRemoveCallback(e,i[0],u[0],o[0]),n.router._remove(i),r&&n.router._remove(o)):r&&(n.navbarRemoveCallback(e,i[0],u[0],o[0]),n.router._remove(o))}A=_.children(".page:not(.cached)"),h&&(m=S.children(".navbar").find(".navbar-inner:not(.cached)")),e.history.indexOf(g)>=0?e.history=e.history.slice(0,e.history.indexOf(g)+2):e.history[[e.history.length-2]]?e.history[e.history.length-2]=g:e.history.unshift(g)}if(l=s(A[A.length-1]),e.params.domCache&&l[0]===c[0]&&(l=_.children(".page.page-on-center"),0===l.length&&e.activePage&&(l=s(e.activePage.container))),h&&!d&&(d=s(m[m.length-1]),e.params.domCache&&(d[0]===p[0]&&(d=u.children(".navbar-inner.navbar-on-center:not(.cached)")),0===d.length&&(d=u.children('.navbar-inner[data-page="'+l.attr("data-page")+'"]'))),0!==d.length&&p[0]!==d[0]||(h=!1)),h&&(E&&p.insertBefore(d),p[0].f7RelatedPage=c[0],c[0].f7RelatedNavbar=p[0]),E&&c.insertBefore(l),n.pageInitCallback(e,{pageContainer:c[0],url:g,position:"left",navbarInnerContainer:h?p[0]:void 0,oldNavbarInnerContainer:h?d&&d[0]:void 0,context:f.context,query:t.query,fromPage:l&&l.length&&l[0].f7PageData,preloadOnly:w}),h&&n.navbarInitCallback(e,c[0],u[0],p[0],g,"right"),h&&p.hasClass("navbar-on-left")&&C&&n.router.prepareNavbar(p,d,"left"),w)return void(e.allowPageChange=!0);e.url=g;c[0].clientLeft;a(),n.params.pushState&&e.main&&(void 0===y&&(y=!0),!w&&history.state&&y&&history.back())}t=t||{};var l,c,d,p,u,m,h,g=t.url,v=t.content,f={content:t.content},b=t.template,C=t.animatePages,w=t.preloadOnly,y=t.pushState,x=(t.ignoreCache,t.force),k=t.pageName,T=t.pageElement,S=s(e.container),_=s(e.pagesContainer),A=_.children(".page:not(.cached)"),E=!0;return void 0===C&&(C=e.params.animatePages),n.pluginHook("routerBack",e,t),(n.params.template7Pages&&"string"==typeof v||b)&&(f=n.router.template7Render(e,t),f.content&&!v&&(v=f.content)),A.length>1&&!x?w?void(e.allowPageChange=!0):(e.url=e.history[e.history.length-2],g=e.url,c=s(A[A.length-2]),l=s(A[A.length-1]),e.params.dynamicNavbar&&(h=!0,m=S.children(".navbar").find(".navbar-inner:not(.cached)"),p=s(m[0]),d=s(m[1]),0!==p.length&&0!==d.length&&d[0]!==p[0]||(h=!1)),E=!1,void r()):x?g&&g===e.url||k&&e.activePage&&e.activePage.name===k?void(e.allowPageChange=!0):v?(o(),void r()):k&&e.params.domCache?(k&&(g="#"+k),c=s(S).find('.page[data-page="'+k+'"]'),c[0].f7PageData&&c[0].f7PageData.url&&(g=c[0].f7PageData.url),e.params.dynamicNavbar&&(p=s(S).children(".navbar").find('.navbar-inner[data-page="'+k+'"]'),0===p.length&&c[0].f7RelatedNavbar&&(p=s(c[0].f7RelatedNavbar)),0===p.length&&c[0].f7PageData&&(p=s(c[0].f7PageData.navbarInnerContainer))),void r()):T&&g?(c=s(T),e.params.dynamicNavbar&&(p=c.find(".navbar-inner"),p.length>0&&(c.prepend(p),n.router._remove(c.find(".navbar")))),void r()):void(e.allowPageChange=!0):(w||(e.url=e.history[e.history.length-2],g=e.url),v?(o(),void r()):k?(c=s(S).find('.page[data-page="'+k+'"]'),e.params.dynamicNavbar&&(p=s(S).children(".navbar").find('.navbar-inner[data-page="'+k+'"]'),0===p.length&&c[0].f7RelatedNavbar&&(p=s(c[0].f7RelatedNavbar)),0===p.length&&c[0].f7PageData&&(p=s(c[0].f7PageData.navbarInnerContainer))),void r()):g&&g in e.pageElementsCache?(c=e.pageElementsCache[g].page,p=e.pageElementsCache[g].navbarInner,void r()):void(e.allowPageChange=!0))},n.router.back=function(e,t){function i(i){n.router.preprocess(e,i,a,function(i){t.content=i,n.router._back(e,t)})}if(t=t||{},n.router.preroute(e,t,!0))return!1;var a=t.url,o=t.content,r=t.pageName,l=t.pageElement;r&&r.indexOf("?")>0&&(t.query=s.parseUrlQuery(r),t.pageName=r=r.split("?")[0]);var c=t.force;if(!e.allowPageChange)return!1;if(e.allowPageChange=!1,n.xhr&&e.xhr&&e.xhr===n.xhr&&(n.xhr.abort(),n.xhr=!1),s(e.pagesContainer).find(".page:not(.cached)").length>1&&!c)return void n.router._back(e,t);if(c){if(!a&&o)return void i(o);if(!a&&r)return r&&(a="#"+r),void i();if(a&&l)return void i();if(a)return void n.get(t.url,e,t.ignoreCache,function(t,a){if(a)return void(e.allowPageChange=!0);i(t)})}else{if(a=e.history[e.history.length-2]||t.url,t.url||(t.url=a),!a)return void(e.allowPageChange=!0);if(0===a.indexOf("#")&&e.contentCache[a])return void i(e.contentCache[a]);if(0===a.indexOf("#")&&e.params.domCache)return r||(t.pageName=a.split("#")[1]),void i();if(a&&a in e.pageElementsCache)i();else if(0!==a.indexOf("#"))return void n.get(t.url,e,t.ignoreCache,function(t,a){if(a)return void(e.allowPageChange=!0);i(t)})}e.allowPageChange=!0},n.router.afterBack=function(e,t,i){t=s(t),i=s(i),e.params.domCache&&e.initialPages.indexOf(t[0])>=0?t.removeClass("page-from-center-to-right").addClass("cached"):(n.pageRemoveCallback(e,t[0],"right"),n.router._remove(t)),i.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),e.allowPageChange=!0;var a,o=e.history.pop();if(e.params.dynamicNavbar){var r=s(e.container).children(".navbar").find(".navbar-inner:not(.cached)"),l=s(t[0].f7RelatedNavbar||r[1]);e.params.domCache&&e.initialNavbars.indexOf(l[0])>=0?l.removeClass("navbar-from-center-to-right").addClass("cached"):(n.navbarRemoveCallback(e,t[0],void 0,l[0]),n.router._remove(l)),a=s(r[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center")}if(e.params.domCache&&s(e.container).find(".page.cached").each(function(){var t=s(this),i=(t.index(),t[0].f7PageData&&t[0].f7PageData.url);i&&e.history.indexOf(i)<0&&e.initialPages.indexOf(this)<0&&(n.pageRemoveCallback(e,t[0],"right"),t[0].f7RelatedNavbar&&e.params.dynamicNavbar&&n.navbarRemoveCallback(e,t[0],void 0,t[0].f7RelatedNavbar),n.router._remove(t),t[0].f7RelatedNavbar&&e.params.dynamicNavbar&&n.router._remove(t[0].f7RelatedNavbar))}),!e.params.domCache&&o&&o.indexOf("#")>-1&&o in e.contentCache&&-1===e.history.indexOf(o)&&(e.contentCache[o]=null,delete e.contentCache[o]),o&&o in e.pageElementsCache&&-1===e.history.indexOf(o)&&(e.pageElementsCache[o]=null,delete e.pageElementsCache[o]),o&&o in e.contextCache&&-1===e.history.indexOf(o)&&(e.contextCache[o]=null,delete e.contextCache[o]),n.params.pushState&&e.main&&n.pushStateClearQueue(),e.params.preloadPreviousPage)if(e.params.domCache&&e.history.length>1){var c,d,p=e.history[e.history.length-2];p&&e.pagesCache[p]?(c=s(e.container).find('.page[data-page="'+e.pagesCache[p]+'"]'),c.next(".page")[0]!==i[0]&&c.insertBefore(i),a&&(d=s(e.container).children(".navbar").find('.navbar-inner[data-page="'+e.pagesCache[p]+'"]'),d&&0!==d.length||(d=a.prev(".navbar-inner.cached")),d.next(".navbar-inner")[0]!==a[0]&&d.insertBefore(a))):(c=i.prev(".page.cached"),a&&(d=a.prev(".navbar-inner.cached"))),c&&c.length>0&&c.removeClass("cached page-on-right page-on-center").addClass("page-on-left"),d&&d.length>0&&d.removeClass("cached navbar-on-right navbar-on-center").addClass("navbar-on-left")}else n.router.back(e,{preloadOnly:!0})};var m=document.createElement("div");n.modalStack=[],n.modalStackClearQueue=function(){n.modalStack.length&&n.modalStack.shift()()},n.modal=function(e){e=e||{};var t="";if(n.params.modalTemplate)n._compiledTemplates.modal||(n._compiledTemplates.modal=r.compile(n.params.modalTemplate)),t=n._compiledTemplates.modal(e);else{var i="";if(e.buttons&&e.buttons.length>0)for(var a=0;a<e.buttons.length;a++)i+='<span class="modal-button'+(e.buttons[a].bold?" modal-button-bold":"")+'">'+e.buttons[a].text+"</span>";var o=e.title?'<div class="modal-title">'+e.title+"</div>":"",l=e.text?'<div class="modal-text">'+e.text+"</div>":"",c=e.afterText?e.afterText:"",d=e.buttons&&0!==e.buttons.length?"":"modal-no-buttons",p=e.verticalButtons?"modal-buttons-vertical":"",u=e.buttons&&e.buttons.length>0?'<div class="modal-buttons modal-buttons-'+e.buttons.length+" "+p+'">'+i+"</div>":"";t='<div class="modal '+d+" "+(e.cssClass||"")+'"><div class="modal-inner">'+(o+l+c)+"</div>"+u+"</div>"}m.innerHTML=t;var h=s(m).children();return n.root.append(h[0]),h.find(".modal-button").each(function(t,i){s(i).on("click",function(i){!1!==e.buttons[t].close&&n.closeModal(h),e.buttons[t].onClick&&e.buttons[t].onClick(h,i),e.onClick&&e.onClick(h,t)})}),n.openModal(h),h[0]},n.alert=function(e,t,i){return"function"==typeof t&&(i=arguments[1],t=void 0),n.modal({text:e||"",title:void 0===t?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonOk,bold:!0,onClick:i}]})},n.confirm=function(e,t,i,a){return"function"==typeof t&&(a=arguments[2],i=arguments[1],t=void 0),n.modal({text:e||"",title:void 0===t?n.params.modalTitle:t,buttons:[{text:n.params.modalButtonCancel,onClick:a},{text:n.params.modalButtonOk,bold:!0,onClick:i}]})},n.prompt=function(e,t,i,a){return"function"==typeof t&&(a=arguments[2],i=arguments[1],t=void 0),n.modal({text:e||"",title:void 0===t?n.params.modalTitle:t,afterText:'<div class="input-field"><input type="text" class="modal-text-input"></div>',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){0===t&&a&&a(s(e).find(".modal-text-input").val()),1===t&&i&&i(s(e).find(".modal-text-input").val())}})},n.modalLogin=function(e,t,i,a){return"function"==typeof t&&(a=arguments[2],i=arguments[1],t=void 0),n.modal({text:e||"",title:void 0===t?n.params.modalTitle:t,afterText:'<div class="input-field modal-input-double"><input type="text" name="modal-username" placeholder="'+n.params.modalUsernamePlaceholder+'" class="modal-text-input"></div><div class="input-field modal-input-double"><input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input"></div>',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){var n=s(e).find('.modal-text-input[name="modal-username"]').val(),o=s(e).find('.modal-text-input[name="modal-password"]').val();0===t&&a&&a(n,o),1===t&&i&&i(n,o)}})},n.modalPassword=function(e,t,i,a){return"function"==typeof t&&(a=arguments[2],i=arguments[1],t=void 0),n.modal({text:e||"",title:void 0===t?n.params.modalTitle:t,afterText:'<div class="input-field"><input type="password" name="modal-password" placeholder="'+n.params.modalPasswordPlaceholder+'" class="modal-text-input"></div>',buttons:[{text:n.params.modalButtonCancel},{text:n.params.modalButtonOk,bold:!0}],onClick:function(e,t){var n=s(e).find('.modal-text-input[name="modal-password"]').val();0===t&&a&&a(n),1===t&&i&&i(n)}})},n.showPreloader=function(e){return n.modal({title:e||n.params.modalPreloaderTitle,text:'<div class="preloader">'+(n.params.material?n.params.materialPreloaderHtml:"")+"</div>",cssClass:"modal-preloader"})},n.hidePreloader=function(){n.closeModal(".modal.modal-in")},n.showIndicator=function(){s(".preloader-indicator-overlay").length>0||n.root.append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white">'+(n.params.material?n.params.materialPreloaderHtml:"")+"</span></div>")},n.hideIndicator=function(){s(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},n.actions=function(e,t){var i,a,o,l=!1;1===arguments.length?t=e:n.device.ios?n.device.ipad&&(l=!0):s(window).width()>=768&&(l=!0),t=t||[],t.length>0&&!s.isArray(t[0])&&(t=[t]);var c;if(l){var d=n.params.modalActionsToPopoverTemplate||'<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';n._compiledTemplates.actionsToPopover||(n._compiledTemplates.actionsToPopover=r.compile(d));var p=n._compiledTemplates.actionsToPopover(t);i=s(n.popover(p,e,!0)),a=".list-block ul",o=".list-button"}else{if(n.params.modalActionsTemplate)n._compiledTemplates.actions||(n._compiledTemplates.actions=r.compile(n.params.modalActionsTemplate)),c=n._compiledTemplates.actions(t);else{for(var u="",h=0;h<t.length;h++)for(var g=0;g<t[h].length;g++){0===g&&(u+='<div class="actions-modal-group">');var v=t[h][g],f=v.label?"actions-modal-label":"actions-modal-button";v.bold&&(f+=" actions-modal-button-bold"),v.color&&(f+=" color-"+v.color),v.bg&&(f+=" bg-"+v.bg),v.disabled&&(f+=" disabled"),u+='<div class="'+f+'">'+v.text+"</div>",g===t[h].length-1&&(u+="</div>")}c='<div class="actions-modal">'+u+"</div>"}m.innerHTML=c,i=s(m).children(),n.root.append(i[0]),a=".actions-modal-group",o=".actions-modal-button"}return i.find(a).each(function(e,a){var r=e;s(a).children().each(function(e,a){var c,d=e,p=t[r][d];!l&&s(a).is(o)&&(c=s(a)),l&&s(a).find(o).length>0&&(c=s(a).find(o)),c&&c.on("click",function(e){!1!==p.close&&n.closeModal(i),p.onClick&&p.onClick(i,e)})})}),l||n.openModal(i),i[0]},n.popover=function(e,t,i){function a(){e.css({left:"",top:""});var i,a,n,o=e.width(),l=e.height(),c=0;r?e.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom").css({left:"",top:""}):(i=e.find(".popover-angle"),c=i.width()/2,i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}));var d=t.outerWidth(),p=t.outerHeight(),u=t.offset(),m=t.parents(".page");m.length>0&&(u.top=u.top-m[0].scrollTop);var h=s(window).height(),g=s(window).width(),v=0,f=0,b=0,C=r?"bottom":"top";if(r){if(l<h-u.top-p?(C="bottom",v=u.top):l<u.top?(v=u.top-l+p,C="top"):(C="bottom",v=u.top),v<=0?v=8:v+l>=h&&(v=h-l-8),f=u.left,f+o>=g-8&&(f=u.left+d-o-8),f<8&&(f=8),"top"===C&&e.addClass("popover-on-top"),"bottom"===C&&e.addClass("popover-on-bottom"),t.hasClass("floating-button-to-popover")&&!e.hasClass("modal-in")){e.addClass("popover-floating-button");var w=f+o/2-(u.left+d/2),y=v+l/2-(u.top+p/2);t.addClass("floating-button-to-popover-in").transform("translate3d("+w+"px, "+y+"px,0)").transitionEnd(function(e){t.hasClass("floating-button-to-popover-in")&&t.addClass("floating-button-to-popover-scale").transform("translate3d("+w+"px, "+y+"px,0) scale("+o/d+", "+l/p+")")}),e.once("close",function(){t.removeClass("floating-button-to-popover-in floating-button-to-popover-scale").addClass("floating-button-to-popover-out").transform("").transitionEnd(function(e){t.removeClass("floating-button-to-popover-out")})}),e.once("closed",function(){e.removeClass("popover-floating-button")})}}else l+c<u.top?v=u.top-l-c:l+c<h-u.top-p?(C="bottom",v=u.top+p+c):(C="middle",v=p/2+u.top-l/2,b=v,v<=0?v=5:v+l>=h&&(v=h-l-5),b-=v),"top"===C||"bottom"===C?(f=d/2+u.left-o/2,b=f,f<5&&(f=5),f+o>g&&(f=g-o-5),"top"===C&&i.addClass("on-bottom"),"bottom"===C&&i.addClass("on-top"),b-=f,a=o/2-c+b,a=Math.max(Math.min(a,o-2*c-13),13),i.css({left:a+"px"})):"middle"===C&&(f=u.left-o-c,i.addClass("on-right"),(f<5||f+o>g)&&(f<5&&(f=u.left+d+c),f+o>g&&(f=g-o-5),i.removeClass("on-right").addClass("on-left")),n=l/2-c+b,n=Math.max(Math.min(n,l-2*c-13),13),i.css({top:n+"px"}));e.css({top:v+"px",left:f+"px"})}if(void 0===i&&(i=!0),"string"==typeof e&&e.indexOf("<")>=0){var o=document.createElement("div");if(o.innerHTML=e.trim(),!(o.childNodes.length>0))return!1;e=o.childNodes[0],i&&e.classList.add("remove-on-close"),n.root.append(e)}if(e=s(e),t=s(t),0===e.length||0===t.length)return!1;0===e.parents("body").length&&(i&&e.addClass("remove-on-close"),n.root.append(e[0])),0!==e.find(".popover-angle").length||n.params.material||e.append('<div class="popover-angle"></div>'),e.show();var r=n.params.material;return a(),s(window).on("resize",a),e.on("close",function(){s(window).off("resize",a)}),n.openModal(e),e[0]},n.popup=function(e,t){if(void 0===t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){var i=document.createElement("div");if(i.innerHTML=e.trim(),!(i.childNodes.length>0))return!1;e=i.childNodes[0],t&&e.classList.add("remove-on-close"),n.root.append(e)}return e=s(e),0!==e.length&&(0===e.parents("body").length&&(t&&e.addClass("remove-on-close"),n.root.append(e[0])),e.show(),n.openModal(e),e[0])},n.pickerModal=function(e,t){if(void 0===t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){if(e=s(e),!(e.length>0))return!1;t&&e.addClass("remove-on-close"),n.root.append(e[0])}return e=s(e),0!==e.length&&(0===e.parents("body").length&&(t&&e.addClass("remove-on-close"),n.root.append(e[0])),s(".picker-modal.modal-in:not(.modal-out)").length>0&&!e.hasClass("modal-in")&&n.closeModal(".picker-modal.modal-in:not(.modal-out)"),e.show(),n.openModal(e),e[0])},n.loginScreen=function(e){return e||(e=".login-screen"),e=s(e),0!==e.length&&(s(".login-screen.modal-in:not(.modal-out)").length>0&&!e.hasClass("modal-in")&&n.closeModal(".login-screen.modal-in:not(.modal-out)"),e.show(),n.openModal(e),e[0])},n.openModal=function(e){e=s(e);var t=e.hasClass("modal");if(s(".modal.modal-in:not(.modal-out)").length&&n.params.modalStack&&t)return void n.modalStack.push(function(){n.openModal(e)});if(!0!==e.data("f7-modal-shown")){e.data("f7-modal-shown",!0),e.once("close",function(){e.removeData("f7-modal-shown")});var i=(e.hasClass("popover"),e.hasClass("popup")),a=e.hasClass("login-screen"),o=e.hasClass("picker-modal");t&&(e.show(),e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"}));var r;a||o||(0!==s(".modal-overlay").length||i||n.root.append('<div class="modal-overlay"></div>'),0===s(".popup-overlay").length&&i&&n.root.append('<div class="popup-overlay"></div>'),r=s(i?".popup-overlay":".modal-overlay")),n.params.material&&o&&e.hasClass("picker-calendar")&&(0!==s(".picker-modal-overlay").length||i||n.root.append('<div class="picker-modal-overlay"></div>'),r=s(".picker-modal-overlay"));e[0].clientLeft;return e.trigger("open"),o&&s("body").addClass("with-picker-modal"),e.find("."+n.params.viewClass).length>0&&(e.find(".page").each(function(){n.initPageWithCallback(this)}),e.find(".navbar").each(function(){n.initNavbarWithCallback(this)})),a||o||r.addClass("modal-overlay-visible"),n.params.material&&o&&r&&r.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(t){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened")}),!0}},n.closeModal=function(e){if(void 0===(e=s(e||".modal-in"))||0!==e.length){var t,i=e.hasClass("modal"),a=e.hasClass("popover"),o=e.hasClass("popup"),r=e.hasClass("login-screen"),l=e.hasClass("picker-modal"),c=e.hasClass("remove-on-close");return o?t=s(".popup-overlay"):l&&n.params.material?t=s(".picker-modal-overlay"):l||(t=s(".modal-overlay")),o?e.length===s(".popup.modal-in").length&&t.removeClass("modal-overlay-visible"):t&&t.length>0&&t.removeClass("modal-overlay-visible"),e.trigger("close"),l&&(s("body").removeClass("with-picker-modal"),s("body").addClass("picker-modal-closing")),!a||n.params.material?(e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(t){if(e.hasClass("modal-out"))e.trigger("closed");else if(e.trigger("opened"),a)return;l&&s("body").removeClass("picker-modal-closing"),o||r||l||a?(e.removeClass("modal-out").hide(),c&&e.length>0&&e.remove()):e.remove()}),i&&n.params.modalStack&&n.modalStackClearQueue()):(e.removeClass("modal-in modal-out").trigger("closed").hide(),c&&e.remove()),!0}},n.setProgressbar=function(e,t,i){if(e=s(e||n.root),0!==e.length){t&&(t=Math.min(Math.max(t,0),100));var a;if(a=e.hasClass("progressbar")?e:e.children(".progressbar"),0!==a.length&&!a.hasClass("progressbar-infinite")){a[0].clientLeft;return a.children("span").transform("translate3d("+(-100+t)+"%,0,0)"),
void 0!==i?a.children("span").transition(i):a.children("span").transition(""),a[0]}}},n.showProgressbar=function(e,t,i){if("number"==typeof e&&(e=n.root,t=arguments[0],i=arguments[1]),t&&"string"==typeof t&&parseFloat(t)!==1*t&&(i=t,t=void 0),e=s(e||n.root),0!==e.length){var a;return e.hasClass("progressbar")?a=e:(a=e.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)"),0===a.length&&(a=s(void 0!==t?'<span class="progressbar progressbar-in'+(i?" color-"+i:"")+'"><span></span></span>':'<span class="progressbar-infinite progressbar-in'+(i?" color-"+i:"")+'"></span>'),e.append(a))),t&&n.setProgressbar(e,t),a[0]}},n.hideProgressbar=function(e){if(e=s(e||n.root),0!==e.length){var t;t=e.hasClass("progressbar")?e:e.children(".progressbar, .progressbar-infinite"),0!==t.length&&t.hasClass("progressbar-in")&&!t.hasClass("progressbar-out")&&t.removeClass("progressbar-in").addClass("progressbar-out").animationEnd(function(){t.remove(),t=null})}},n.initPageProgressbar=function(e){e=s(e),e.find(".progressbar").each(function(){var e=s(this);0===e.children("span").length&&e.append("<span></span>"),e.attr("data-progress")&&n.setProgressbar(e,e.attr("data-progress"))})},n.allowPanelOpen=!0,n.openPanel=function(e){function t(){o.transitionEnd(function(e){s(e.target).is(o)?(i.hasClass("active")?i.trigger("opened"):i.trigger("closed"),n.params.material&&s(".panel-overlay").css({display:""}),n.allowPanelOpen=!0):t()})}if(!n.allowPanelOpen)return!1;var i=s(".panel-"+e);if(0===i.length||i.hasClass("active"))return!1;n.closePanel(),n.allowPanelOpen=!1;var a=i.hasClass("panel-reveal")?"reveal":"cover";i.css({display:"block"}).addClass("active"),i.trigger("open"),n.params.material&&s(".panel-overlay").show(),i.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(i.find("."+n.params.viewClass)[0]);var o=(i[0].clientLeft,"reveal"===a?s("."+n.params.viewsClass):i);return t(),s("body").addClass("with-panel-"+e+"-"+a),!0},n.closePanel=function(){var e=s(".panel.active");if(0===e.length)return!1;var t=e.hasClass("panel-reveal")?"reveal":"cover",i=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var a="reveal"===t?s("."+n.params.viewsClass):e;e.trigger("close"),n.allowPanelOpen=!1,a.transitionEnd(function(){e.hasClass("active")||(e.css({display:""}),e.trigger("closed"),s("body").removeClass("panel-closing"),n.allowPanelOpen=!0)}),s("body").addClass("panel-closing").removeClass("with-panel-"+i+"-"+t)},n.initSwipePanels=function(){function e(e){if(n.allowPanelOpen&&(n.params.swipePanel||n.params.swipePanelOnlyClose)&&!r&&!(s(".modal-in, .photo-browser-in").length>0)&&(n.params.swipePanelCloseOpposite||n.params.swipePanelOnlyClose||!(s(".panel.active").length>0)||a.hasClass("active"))){if(C.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,C.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,n.params.swipePanelCloseOpposite||n.params.swipePanelOnlyClose){if(s(".panel.active").length>0)o=s(".panel.active").hasClass("panel-left")?"left":"right";else{if(n.params.swipePanelOnlyClose)return;o=n.params.swipePanel}if(!o)return}if(a=s(".panel.panel-"+o),h=a.hasClass("active"),n.params.swipePanelActiveArea&&!h){if("left"===o&&C.x>n.params.swipePanelActiveArea)return;if("right"===o&&C.x<window.innerWidth-n.params.swipePanelActiveArea)return}l=!1,r=!0,c=void 0,d=(new Date).getTime(),f=void 0}}function t(e){if(r&&!e.f7PreventPanelSwipe){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===c&&(c=!!(c||Math.abs(i-C.y)>Math.abs(t-C.x))),c)return void(r=!1);if(!f&&(f=t>C.x?"to-right":"to-left","both"===o&&(o=s(".panel.active").length>0?s(".panel.active").hasClass("panel-left")?"left":"right":"to-right"===f?"left":"right",a=s(".panel.panel-"+o)),"left"===o&&"to-left"===f&&!a.hasClass("active")||"right"===o&&"to-right"===f&&!a.hasClass("active")))return void(r=!1);if(n.params.swipePanelNoFollow){return(new Date).getTime()-d<300&&("to-left"===f&&("right"===o&&n.openPanel(o),"left"===o&&a.hasClass("active")&&n.closePanel()),"to-right"===f&&("left"===o&&n.openPanel(o),"right"===o&&a.hasClass("active")&&n.closePanel())),r=!1,void(l=!1)}l||(v=a.hasClass("panel-cover")?"cover":"reveal",h||(a.show(),b.show()),g=a[0].offsetWidth,a.transition(0),a.find("."+n.params.viewClass).length>0&&n.sizeNavbars&&n.sizeNavbars(a.find("."+n.params.viewClass)[0])),l=!0,e.preventDefault();var y=h?0:-n.params.swipePanelThreshold;"right"===o&&(y=-y),p=t-C.x+y,"right"===o?(u=p-(h?g:0),u>0&&(u=0),u<-g&&(u=-g)):(u=p+(h?g:0),u<0&&(u=0),u>g&&(u=g)),"reveal"===v?(w.transform("translate3d("+u+"px,0,0)").transition(0),b.transform("translate3d("+u+"px,0,0)").transition(0),n.pluginHook("swipePanelSetTransform",w[0],a[0],Math.abs(u/g))):(a.transform("translate3d("+u+"px,0,0)").transition(0),n.params.material&&(b.transition(0),m=Math.abs(u/g),b.css({opacity:m})),n.pluginHook("swipePanelSetTransform",w[0],a[0],Math.abs(u/g)))}}function i(e){if(!r||!l)return r=!1,void(l=!1);r=!1,l=!1;var t,i=(new Date).getTime()-d,c=0===u||Math.abs(u)===g;if(t=h?u===-g?"reset":i<300&&Math.abs(u)>=0||i>=300&&Math.abs(u)<=g/2?"left"===o&&u===g?"reset":"swap":"reset":0===u?"reset":i<300&&Math.abs(u)>0||i>=300&&Math.abs(u)>=g/2?"swap":"reset","swap"===t&&(n.allowPanelOpen=!0,h?(n.closePanel(),c&&(a.css({display:""}),s("body").removeClass("panel-closing"))):n.openPanel(o),c&&(n.allowPanelOpen=!0)),"reset"===t)if(h)n.allowPanelOpen=!0,n.openPanel(o);else if(n.closePanel(),c)n.allowPanelOpen=!0,a.css({display:""});else{var p="reveal"===v?w:a;a.trigger("close"),s("body").addClass("panel-closing"),p.transitionEnd(function(){a.trigger("closed"),a.css({display:""}),s("body").removeClass("panel-closing"),n.allowPanelOpen=!0})}"reveal"===v&&(w.transition(""),w.transform("")),a.transition("").transform(""),b.css({display:""}).transform("").transition("").css("opacity","")}var a,o;if(n.params.swipePanel){if(a=s(".panel.panel-"+n.params.swipePanel),o=n.params.swipePanel,0===a.length&&"both"!==o)return}else{if(!n.params.swipePanelOnlyClose)return;if(0===s(".panel").length)return}var r,l,c,d,p,u,m,h,g,v,f,b=s(".panel-overlay"),C={},w=s("."+n.params.viewsClass),y=!("touchstart"!==n.touchEvents.start||!n.support.passiveListener)&&{passive:!0,capture:!1};s(document).on(n.touchEvents.start,e,y),s(document).on(n.touchEvents.move,t),s(document).on(n.touchEvents.end,i,y)},n.initImagesLazyLoad=function(e){function t(e){function i(){e.removeClass("lazy").addClass("lazy-loaded"),a?e.css("background-image","url("+o+")"):e.attr("src",o),n.params.imagesLazyLoadSequential&&(u=!1,p.length>0&&t(p.shift()))}e=s(e);var a=e.attr("data-background"),o=a||e.attr("data-src");if(o){if(n.params.imagesLazyLoadSequential&&u)return void(p.indexOf(e[0])<0&&p.push(e[0]));u=!0;var r=new Image;r.onload=i,r.onerror=i,r.src=o}}function i(){l=e.find(".lazy"),l.each(function(e,i){i=s(i),i.parents(".tab:not(.active)").length>0||a(i[0])&&t(i)})}function a(e){var t=e.getBoundingClientRect(),i=n.params.imagesLazyLoadThreshold||0;return t.top>=0-i&&t.left>=0-i&&t.top<=window.innerHeight+i&&t.left<=window.innerWidth+i}function o(t){var a=t?"off":"on";l[a]("lazy",i),l.parents(".tab")[a]("show",i),e[a]("lazy",i),c[a]("lazy",i),c[a]("scroll",i),s(window)[a]("resize",i)}function r(){o(!0)}e=s(e);var l;if(e.hasClass("lazy")?(l=e,e=l.parents(".page")):l=e.find(".lazy"),0!==l.length){var c;if(e.hasClass("page-content")?(c=e,e=e.parents(".page")):c=e.find(".page-content"),0!==c.length){var d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";"string"==typeof n.params.imagesLazyLoadPlaceholder&&(d=n.params.imagesLazyLoadPlaceholder),!1!==n.params.imagesLazyLoadPlaceholder&&l.each(function(){s(this).attr("data-src")&&s(this).attr("src",d)});var p=[],u=!1;e[0].f7DestroyImagesLazyLoad=r,o(),e.hasClass("page")&&e.once("pageBeforeRemove",r),i(),e.once("pageAfterAnimation",i)}}},n.destroyImagesLazyLoad=function(e){e=s(e),e.length>0&&e[0].f7DestroyImagesLazyLoad&&e[0].f7DestroyImagesLazyLoad()},n.reinitImagesLazyLoad=function(e){e=s(e),e.length>0&&e.trigger("lazy")},n.initPageMaterialPreloader=function(e){s(e).find(".preloader").each(function(){0===s(this).children().length&&s(this).html(n.params.materialPreloaderHtml)})};var h=function(e,t){var i={autoLayout:!0,newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnlyOnEdge:!1,messageTemplate:'{{#if day}}<div class="messages-date">{{day}} {{#if time}}, <span>{{time}}</span>{{/if}}</div>{{/if}}<div class="message message-{{type}} {{#if hasImage}}message-pic{{/if}} {{#if avatar}}message-with-avatar{{/if}} {{#if position}}message-appear-from-{{position}}{{/if}}">{{#if name}}<div class="message-name">{{name}}</div>{{/if}}<div class="message-text">{{text}}{{#if date}}<div class="message-date">{{date}}</div>{{/if}}</div>{{#if avatar}}<div class="message-avatar" style="background-image:url({{avatar}})"></div>{{/if}}{{#if label}}<div class="message-label">{{label}}</div>{{/if}}</div>'};t=t||{};for(var a in i)void 0!==t[a]&&null!==t[a]||(t[a]=i[a]);var n=this;if(n.params=t,n.container=s(e),0!==n.container.length)return n.params.autoLayout&&n.container.addClass("messages-auto-layout"),n.params.newMessagesFirst&&n.container.addClass("messages-new-first"),n.pageContainer=n.container.parents(".page").eq(0),n.pageContent=n.pageContainer.find(".page-content"),n.template=Template7.compile(n.params.messageTemplate),n.layout=function(){n.container.hasClass("messages-auto-layout")||n.container.addClass("messages-auto-layout"),n.container.find(".message").each(function(){var e=s(this);if(e.find(".message-text img").length>0){for(var t=e.find(".message-text")[0].childNodes,i=!0,a=0;a<t.length;a++)1===t[a].nodeType&&"img"!==t[a].nodeName.toLowerCase()&&(i=!1),3===t[a].nodeType&&""!==t[a].textContent.trim()&&(i=!1);i?e.addClass("message-pic"):e.removeClass("message-pic")}e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),n.container.find(".message").each(function(){var e=s(this),t=e.hasClass("message-sent"),i=e.next(".message-"+(t?"sent":"received")),a=e.prev(".message-"+(t?"sent":"received"));0===i.length?e.addClass("message-last message-with-tail"):e.removeClass("message-last message-with-tail"),0===a.length?e.addClass("message-first"):e.removeClass("message-first"),a.length>0&&a.find(".message-name").length>0&&e.find(".message-name").length>0&&a.find(".message-name").text()!==e.find(".message-name").text()&&(a.addClass("message-last message-with-tail"),e.addClass("message-first"))})},n.appendMessage=function(e,t){return n.addMessage(e,"append",t)},n.prependMessage=function(e,t){return n.addMessage(e,"prepend",t)},n.addMessage=function(e,t,i){return n.addMessages([e],t,i)},n.addMessages=function(e,t,i){void 0===i&&(i=!0),void 0===t&&(t=n.params.newMessagesFirst?"prepend":"append");var a,o="";for(a=0;a<e.length;a++){var s=e[a]||{};s.type=s.type||"sent",s.text&&(s.hasImage=s.text.indexOf("<img")>=0,!1===s.onlyImage&&(s.hasImage=!1),i&&(s.position="append"===t?"bottom":"top"),o+=n.template(s))}var r=n.pageContent[0].scrollHeight,l=n.pageContent[0].offsetHeight,c=n.pageContent[0].scrollTop;if(n.container[t](o),n.params.autoLayout&&n.layout(),"prepend"===t&&(n.pageContent[0].scrollTop=c+(n.pageContent[0].scrollHeight-r)),n.params.scrollMessages&&"append"===t&&!n.params.newMessagesFirst||"prepend"===t&&n.params.newMessagesFirst)if(n.params.scrollMessagesOnlyOnEdge){var d=!1;n.params.newMessagesFirst?0===c&&(d=!0):c-(r-l)>=-10&&(d=!0),d&&n.scrollMessages(i?void 0:0)}else n.scrollMessages(i?void 0:0);var p=n.container.find(".message");if(1===e.length)return"append"===t?p[p.length-1]:p[0];var u=[];if("append"===t)for(a=p.length-e.length;a<p.length;a++)u.push(p[a]);else for(a=0;a<e.length;a++)u.push(p[a]);return u},n.removeMessage=function(e){return e=s(e),0!==e.length&&(e.remove(),n.params.autoLayout&&n.layout(),!0)},n.removeMessages=function(e){n.removeMessage(e)},n.clean=function(){n.container.html("")},n.scrollMessages=function(e,t){void 0===e&&(e=400);var i,a=n.pageContent[0].scrollTop;if(void 0!==t)i=t;else if((i=n.params.newMessagesFirst?0:n.pageContent[0].scrollHeight-n.pageContent[0].offsetHeight)===a)return;n.pageContent.scrollTop(i,e)},n.init=function(){n.params.messages?n.addMessages(n.params.messages,void 0,!1):(n.params.autoLayout&&n.layout(),n.scrollMessages(0))},n.destroy=function(){n=null},n.init(),n.container[0].f7Messages=n,n};n.messages=function(e,t){return new h(e,t)},n.initPageMessages=function(e){function t(){a.destroy(),e.off("pageBeforeRemove",t)}e=s(e);var i=e.find(".messages");if(0!==i.length&&i.hasClass("messages-init")){var a=n.messages(i,i.dataset());e.hasClass("page")&&e.on("pageBeforeRemove",t)}},n.swipeoutOpenedEl=void 0,n.allowSwipeout=!0,n.initSwipeout=function(e){function t(e){n.allowSwipeout&&(r=!1,o=!0,l=void 0,P.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,P.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,c=(new Date).getTime())}function i(e){if(o){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,i="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===l&&(l=!!(l||Math.abs(i-P.y)>Math.abs(t-P.x))),l)return void(o=!1);if(!r){if(s(".list-block.sortable-opened").length>0)return;p=s(this),u=p.find(".swipeout-content"),m=p.find(".swipeout-actions-right"),h=p.find(".swipeout-actions-left"),g=v=w=y=T=k=null,A=h.hasClass("swipeout-actions-no-fold")||n.params.swipeoutActionsNoFold,E=m.hasClass("swipeout-actions-no-fold")||n.params.swipeoutActionsNoFold,h.length>0&&(g=h.outerWidth(),w=h.children("a"),k=h.find(".swipeout-overswipe")),m.length>0&&(v=m.outerWidth(),y=m.children("a"),T=m.find(".swipeout-overswipe")),b=p.hasClass("swipeout-opened"),b&&(C=p.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),p.removeClass("transitioning"),n.params.swipeoutNoFollow||(p.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),p.removeClass("swipeout-opened"))}if(r=!0,e.preventDefault(),d=t-P.x,f=d,b&&("right"===C?f-=v:f+=g),f>0&&0===h.length||f<0&&0===m.length){if(!b)return o=r=!1,u.transform(""),y&&y.length>0&&y.transform(""),void(w&&w.length>0&&w.transform(""));f=0}x=f<0?"to-left":f>0?"to-right":x||"to-left";var a,c,M;if(e.f7PreventPanelSwipe=!0,n.params.swipeoutNoFollow)return b?("right"===C&&d>0&&n.swipeoutClose(p),"left"===C&&d<0&&n.swipeoutClose(p)):(d<0&&m.length>0&&n.swipeoutOpen(p,"right"),d>0&&h.length>0&&n.swipeoutOpen(p,"left")),o=!1,void(r=!1);S=!1,_=!1;var I;if(m.length>0)for(M=f/v,f<-v&&(f=-v-Math.pow(-f-v,.8),T.length>0&&(_=!0)),a=0;a<y.length;a++)void 0===y[a]._buttonOffset&&(y[a]._buttonOffset=y[a].offsetLeft),c=y[a]._buttonOffset,I=s(y[a]),T.length>0&&I.hasClass("swipeout-overswipe")&&(I.css({left:(_?-c:0)+"px"}),_?I.addClass("swipeout-overswipe-active"):I.removeClass("swipeout-overswipe-active")),I.transform("translate3d("+(f-c*(1+Math.max(M,-1)))+"px,0,0)");if(h.length>0)for(M=f/g,f>g&&(f=g+Math.pow(f-g,.8),k.length>0&&(S=!0)),a=0;a<w.length;a++)void 0===w[a]._buttonOffset&&(w[a]._buttonOffset=g-w[a].offsetLeft-w[a].offsetWidth),c=w[a]._buttonOffset,I=s(w[a]),k.length>0&&I.hasClass("swipeout-overswipe")&&(I.css({left:(S?c:0)+"px"}),S?I.addClass("swipeout-overswipe-active"):I.removeClass("swipeout-overswipe-active")),w.length>1&&I.css("z-index",w.length-a),I.transform("translate3d("+(f+c*(1-Math.min(M,1)))+"px,0,0)");u.transform("translate3d("+f+"px,0,0)")}}function a(e){if(!o||!r)return o=!1,void(r=!1);o=!1,r=!1;var t,i,a,l,C,k=(new Date).getTime()-c;if("to-left"===x?E:A,a="to-left"===x?m:h,i="to-left"===x?v:g,t=k<300&&(d<-10&&"to-left"===x||d>10&&"to-right"===x)||k>=300&&Math.abs(f)>i/2?"open":"close",k<300&&(0===Math.abs(f)&&(t="close"),Math.abs(f)===i&&(t="open")),"open"===t){n.swipeoutOpenedEl=p,p.trigger("open"),p.addClass("swipeout-opened transitioning");var T="to-left"===x?-i:i;if(u.transform("translate3d("+T+"px,0,0)"),a.addClass("swipeout-actions-opened"),l="to-left"===x?y:w)for(C=0;C<l.length;C++)s(l[C]).transform("translate3d("+T+"px,0,0)");_&&m.find(".swipeout-overswipe")[0].click(),S&&h.find(".swipeout-overswipe")[0].click()}else p.trigger("close"),n.swipeoutOpenedEl=void 0,p.addClass("transitioning").removeClass("swipeout-opened"),u.transform(""),a.removeClass("swipeout-actions-opened");var P;if(w&&w.length>0&&w!==l)for(C=0;C<w.length;C++)P=w[C]._buttonOffset,void 0===P&&(w[C]._buttonOffset=g-w[C].offsetLeft-w[C].offsetWidth),s(w[C]).transform("translate3d("+P+"px,0,0)");if(y&&y.length>0&&y!==l)for(C=0;C<y.length;C++)P=y[C]._buttonOffset,void 0===P&&(y[C]._buttonOffset=y[C].offsetLeft),s(y[C]).transform("translate3d("+-P+"px,0,0)");u.transitionEnd(function(e){b&&"open"===t||closed&&"close"===t||(p.trigger("open"===t?"opened":"closed"),b&&"close"===t&&(m.length>0&&y.transform(""),h.length>0&&w.transform("")))})}var o,r,l,c,d,p,u,m,h,g,v,f,b,C,w,y,x,k,T,S,_,A,E,P={};s(document).on(n.touchEvents.start,function(e){if(n.swipeoutOpenedEl){var t=s(e.target);n.swipeoutOpenedEl.is(t[0])||t.parents(".swipeout").is(n.swipeoutOpenedEl)||t.hasClass("modal-in")||t.hasClass("modal-overlay")||t.hasClass("actions-modal")||t.parents(".actions-modal.modal-in, .modal.modal-in").length>0||n.swipeoutClose(n.swipeoutOpenedEl)}}),e?(s(e).on(n.touchEvents.start,t),s(e).on(n.touchEvents.move,i),s(e).on(n.touchEvents.end,a)):(s(document).on(n.touchEvents.start,".list-block li.swipeout",t),s(document).on(n.touchEvents.move,".list-block li.swipeout",i),s(document).on(n.touchEvents.end,".list-block li.swipeout",a))},n.swipeoutOpen=function(e,t,i){if(e=s(e),2===arguments.length&&"function"==typeof arguments[1]&&(i=t),0!==e.length&&(e.length>1&&(e=s(e[0])),e.hasClass("swipeout")&&!e.hasClass("swipeout-opened"))){t||(t=e.find(".swipeout-actions-right").length>0?"right":"left");var a=e.find(".swipeout-actions-"+t);if(0!==a.length){a.hasClass("swipeout-actions-no-fold")||n.params.swipeoutActionsNoFold;e.trigger("open").addClass("swipeout-opened").removeClass("transitioning"),a.addClass("swipeout-actions-opened");var o,r=a.children("a"),l=a.outerWidth(),c="right"===t?-l:l;if(r.length>1){for(o=0;o<r.length;o++)"right"===t?s(r[o]).transform("translate3d("+-r[o].offsetLeft+"px,0,0)"):s(r[o]).css("z-index",r.length-o).transform("translate3d("+(l-r[o].offsetWidth-r[o].offsetLeft)+"px,0,0)");r[1].clientLeft}for(e.addClass("transitioning"),o=0;o<r.length;o++)s(r[o]).transform("translate3d("+c+"px,0,0)");e.find(".swipeout-content").transform("translate3d("+c+"px,0,0)").transitionEnd(function(){e.trigger("opened"),i&&i.call(e[0])}),n.swipeoutOpenedEl=e}}},n.swipeoutClose=function(e,t){function i(){n.allowSwipeout=!0,e.hasClass("swipeout-opened")||(e.removeClass("transitioning"),r.transform(""),e.trigger("closed"),t&&t.call(e[0]),c&&clearTimeout(c))}if(e=s(e),0!==e.length&&e.hasClass("swipeout-opened")){var a=e.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",o=e.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),r=(o.hasClass("swipeout-actions-no-fold")||n.params.swipeoutActionsNoFold,o.children("a")),l=o.outerWidth();n.allowSwipeout=!1,e.trigger("close"),e.removeClass("swipeout-opened").addClass("transitioning");var c;e.find(".swipeout-content").transform("").transitionEnd(i),c=setTimeout(i,500);for(var d=0;d<r.length;d++)"right"===a?s(r[d]).transform("translate3d("+-r[d].offsetLeft+"px,0,0)"):s(r[d]).transform("translate3d("+(l-r[d].offsetWidth-r[d].offsetLeft)+"px,0,0)"),s(r[d]).css({left:"0px"}).removeClass("swipeout-overswipe-active");n.swipeoutOpenedEl&&n.swipeoutOpenedEl[0]===e[0]&&(n.swipeoutOpenedEl=void 0)}},n.swipeoutDelete=function(e,t){if(e=s(e),0!==e.length){e.length>1&&(e=s(e[0])),n.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"});e[0].clientLeft;e.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){if(e.trigger("deleted"),t&&t.call(e[0]),e.parents(".virtual-list").length>0){var i=e.parents(".virtual-list")[0].f7VirtualList,a=e[0].f7VirtualListIndex;i&&void 0!==a&&i.deleteItem(a)}else n.params.swipeoutRemoveWithTimeout?setTimeout(function(){e.remove()},0):e.remove()});e.find(".swipeout-content").transform("translate3d(-100%,0,0)")}},n.sortableToggle=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.toggleClass("sortable-opened"),e.hasClass("sortable-opened")?e.trigger("open"):e.trigger("close"),e},n.sortableOpen=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.addClass("sortable-opened"),e.trigger("open"),e},n.sortableClose=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.removeClass("sortable-opened"),e.trigger("close"),e},n.initSortable=function(){function e(e){o=!1,a=!0,r="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,c=s(this).parent(),f=c.index(),p=c.parent().find("li"),v=c.parents(".sortable"),e.preventDefault(),n.allowPanelOpen=n.allowSwipeout=!1}function t(e){if(a&&c){var t=("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);o||(c.addClass("sorting"),v.addClass("sortable-sorting"),u=c[0].offsetTop,m=c.parent().height()-c[0].offsetTop-c.height(),d=c[0].offsetHeight),o=!0,e.preventDefault(),e.f7PreventPanelSwipe=!0,l=t-r;var i=l;i<-u&&(i=-u),i>m&&(i=m),c.transform("translate3d(0,"+i+"px,0)"),g=h=void 0,p.each(function(){var e=s(this);if(e[0]!==c[0]){var t=e[0].offsetTop,a=e.height(),n=c[0].offsetTop+i;n>=t-a/2&&c.index()<e.index()?(e.transform("translate3d(0, "+-d+"px,0)"),h=e,g=void 0):n<=t+a/2&&c.index()>e.index()?(e.transform("translate3d(0, "+d+"px,0)"),h=void 0,g||(g=e)):s(this).transform("translate3d(0, 0%,0)")}})}}function i(e){if(n.allowPanelOpen=n.allowSwipeout=!0,!a||!o)return a=!1,void(o=!1);e.preventDefault(),p.transform(""),c.removeClass("sorting"),v.removeClass("sortable-sorting");var t,i,s;h&&(c.insertAfter(h),c.trigger("sort",{startIndex:f,newIndex:c.index()})),g&&(c.insertBefore(g),c.trigger("sort",{startIndex:f,newIndex:c.index()})),(h||g)&&v.hasClass("virtual-list")&&(t=v[0].f7VirtualList,i=c[0].f7VirtualListIndex,s=g?g[0].f7VirtualListIndex:h[0].f7VirtualListIndex,t&&t.moveItem(i,s)),h=g=void 0,a=!1,o=!1}var a,o,r,l,c,d,p,u,m,h,g,v,f;s(document).on(n.touchEvents.start,".list-block.sortable .sortable-handler",e),n.support.touch?(s(document).on(n.touchEvents.move,".list-block.sortable .sortable-handler",t),s(document).on(n.touchEvents.end,".list-block.sortable .sortable-handler",i)):(s(document).on(n.touchEvents.move,t),s(document).on(n.touchEvents.end,i))},n.initSmartSelects=function(e){e=s(e);var t;t=e.is(".smart-select")?e:e.find(".smart-select"),0!==t.length&&t.each(function(){var e=s(this),t=e.find("select");if(0!==t.length){var i=t[0];if(0!==i.length){for(var a=[],n=0;n<i.length;n++)i[n].selected&&a.push(i[n].textContent.trim());var o=e.find(".item-after");if(0===o.length)e.find(".item-inner").append('<div class="item-after">'+a.join(", ")+"</div>");else{var r=o.text();if(o.hasClass("smart-select-value"))for(n=0;n<i.length;n++)i[n].selected=i[n].textContent.trim()===r.trim();else o.text(a.join(", "))}t.on("change",function(){for(var t=[],a=0;a<i.length;a++)i[a].selected&&t.push(i[a].textContent.trim());e.find(".item-after").text(t.join(", "))})}}})},n.smartSelectAddOption=function(e,t,i){e=s(e);var a=e.parents(".smart-select");void 0===i?e.append(t):s(t).insertBefore(e.find("option").eq(i)),n.initSmartSelects(a);var o=a.find("select").attr("name");s('.page.smart-select-page[data-select-name="'+o+'"]').length>0&&n.smartSelectOpen(a,!0)},n.smartSelectOpen=function(e,t){function i(t){var i=!0;(t.target===e[0]||s(t.target).parents(e[0]).length>0)&&(i=!1),s(t.target).parents(".picker-modal").length>0&&(i=!1),i&&n.closeModal(".smart-select-picker.modal-in")}function a(e){k.selectedOptions.length>=U?e.find('input[type="checkbox"]').each(function(){this.checked?s(this).parents("li").removeClass("disabled"):s(this).parents("li").addClass("disabled")}):e.find(".disabled").removeClass("disabled")}function o(t){if(t=s(t),C){var i=n.virtualList(t.find(".virtual-list"),{items:N,template:q,height:w||void 0,searchByItem:function(e,t,i){return i.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0}});t.once("popup"===d||"picker"===d?"closed":"pageBeforeRemove",function(){i&&i.destroy&&i.destroy()})}U&&a(t),g&&t.find('input[type="radio"][name="'+z+'"]:checked').parents("label").once("click",function(){"popup"===d?n.closeModal(ae):"picker"===d?n.closeModal(ne):c.router.back()}),t.on("change",'input[name="'+z+'"]',function(){var i=this,o=i.value,s=[];if("checkbox"===i.type){for(var r=0;r<k.options.length;r++){var l=k.options[r];l.value===o&&(l.selected=i.checked),l.selected&&s.push(l.textContent.trim())}U&&a(t)}else s=[e.find('option[value="'+o+'"]').text()],k.value=o;T.trigger("change"),e.find(".item-after").text(s.join(", ")),g&&"radio"===H&&("popup"===d?n.closeModal(ae):"picker"===d?n.closeModal(ne):c.router.back())})}function l(e){var t=e.detail.page;t.name===te&&o(t.container)}if(e=s(e),0!==e.length){var c=e.parents("."+n.params.viewClass);if(0!==c.length){c=c[0].f7View;var d=e.attr("data-open-in")||n.params.smartSelectOpenIn;if("popup"===d){if(s(".popup.smart-select-popup").length>0)return}else if("picker"===d){if(s(".picker-modal.modal-in").length>0&&!t){if(e[0].f7SmartSelectPicker===s(".picker-modal.modal-in:not(.modal-out)")[0])return;n.closeModal(s(".picker-modal.modal-in:not(.modal-out)"))}}else if(!c)return;var p,u=e.dataset(),m=u.pageTitle||e.find(".item-title").text(),h=u.backText||n.params.smartSelectBackText;p="picker"===d?u.pickerCloseText||u.backText||n.params.smartSelectPickerCloseText:u.popupCloseText||u.backText||n.params.smartSelectPopupCloseText;var g=void 0!==u.backOnSelect?u.backOnSelect:n.params.smartSelectBackOnSelect,v=u.formTheme||n.params.smartSelectFormTheme,f=u.navbarTheme||n.params.smartSelectNavbarTheme,b=u.toolbarTheme||n.params.smartSelectToolbarTheme,C=u.virtualList,w=u.virtualListHeight,y=n.params.material,x=u.pickerHeight||n.params.smartSelectPickerHeight,k=e.find("select")[0],T=s(k),S=T.dataset();if(!(k.disabled||e.hasClass("disabled")||T.hasClass("disabled"))){for(var _,A,E,P,M,I,D,L,O,B,R,N=[],F=(new Date).getTime(),H=k.multiple?"checkbox":"radio",z=H+"-"+F,U=T.attr("maxlength"),V=k.name,j=0;j<k.length;j++)_=s(k[j]),R=_.dataset(),E=R.optionImage||S.optionImage||u.optionImage,P=R.optionIcon||S.optionIcon||u.optionIcon,A=E||P||"checkbox"===H,y&&(A=E||P),O=R.optionColor,B=R.optionClass,_[0].disabled&&(B+=" disabled"),M=_.parent("optgroup")[0],I=M&&M.label,D=!1,M&&M!==L&&(D=!0,L=M,N.push({groupLabel:I,isLabel:D})),N.push({value:_[0].value,text:_[0].textContent.trim(),selected:_[0].selected,group:M,groupLabel:I,image:E,icon:P,color:O,className:B,disabled:_[0].disabled,inputType:H,id:F,hasMedia:A,checkbox:"checkbox"===H,inputName:z,material:n.params.material});n._compiledTemplates.smartSelectItem||(n._compiledTemplates.smartSelectItem=r.compile(n.params.smartSelectItemTemplate||'{{#if isLabel}}<li class="item-divider">{{groupLabel}}</li>{{else}}<li{{#if className}} class="{{className}}"{{/if}}><label class="label-{{inputType}} item-content"><input type="{{inputType}}" name="{{inputName}}" value="{{value}}" {{#if selected}}checked{{/if}}>{{#if material}}{{#if hasMedia}}<div class="item-media">{{#if icon}}<i class="icon {{icon}}"></i>{{/if}}{{#if image}}<img src="{{image}}">{{/if}}</div><div class="item-inner"><div class="item-title{{#if color}} color-{{color}}{{/if}}">{{text}}</div></div><div class="item-after"><i class="icon icon-form-{{inputType}}"></i></div>{{else}}<div class="item-media"><i class="icon icon-form-{{inputType}}"></i></div><div class="item-inner"><div class="item-title{{#if color}} color-{{color}}{{/if}}">{{text}}</div></div>{{/if}}{{else}}{{#if hasMedia}}<div class="item-media">{{#if checkbox}}<i class="icon icon-form-checkbox"></i>{{/if}}{{#if icon}}<i class="icon {{icon}}"></i>{{/if}}{{#if image}}<img src="{{image}}">{{/if}}</div>{{/if}}<div class="item-inner"><div class="item-title{{#if color}} color-{{color}}{{/if}}">{{text}}</div></div>{{/if}}</label></li>{{/if}}'));var q=n._compiledTemplates.smartSelectItem,W="";if(!C)for(var G=0;G<N.length;G++)W+=q(N[G]);var $,Y,X="",K="",J="",Q="";"picker"===d?(n._compiledTemplates.smartSelectToolbar||(n._compiledTemplates.smartSelectToolbar=r.compile(n.params.smartSelectToolbarTemplate||'<div class="toolbar {{#if toolbarTheme}}theme-{{toolbarTheme}}{{/if}}"><div class="toolbar-inner"><div class="left"></div><div class="right"><a href="#" class="link close-picker"><span>{{closeText}}</span></a></div></div></div>')),X=n._compiledTemplates.smartSelectToolbar({pageTitle:m,closeText:p,openIn:d,toolbarTheme:b,inPicker:"picker"===d})):(n._compiledTemplates.smartSelectNavbar||(n._compiledTemplates.smartSelectNavbar=r.compile(n.params.smartSelectNavbarTemplate||'<div class="navbar {{#if navbarTheme}}theme-{{navbarTheme}}{{/if}}"><div class="navbar-inner">{{leftTemplate}}<div class="center sliding">{{pageTitle}}</div></div></div>')),$=n._compiledTemplates.smartSelectNavbar({pageTitle:m,backText:h,closeText:p,openIn:d,navbarTheme:f,inPopup:"popup"===d,inPage:"page"===d,leftTemplate:"popup"===d?(n.params.smartSelectPopupCloseTemplate||(y?'<div class="left"><a href="#" class="link close-popup icon-only"><i class="icon icon-back"></i></a></div>':'<div class="left"><a href="#" class="link close-popup"><i class="icon icon-back"></i><span>{{closeText}}</span></a></div>')).replace(/{{closeText}}/g,p):(n.params.smartSelectBackTemplate||(y?'<div class="left"><a href="#" class="back link icon-only"><i class="icon icon-back"></i></a></div>':'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>')).replace(/{{backText}}/g,h)}),"page"===d?(Y="static",e.parents(".navbar-through").length>0&&(Y="through"),e.parents(".navbar-fixed").length>0&&(Y="fixed"),J=e.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",K=e.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+Y,Q=e.parents(".page").hasClass("no-tabbar")?"no-tabbar":""):Y="fixed");var Z,ee,te="smart-select-"+z,ie=void 0===e.data("searchbar")?n.params.smartSelectSearchbar:"true"===e.data("searchbar");ie&&(Z=e.data("searchbar-placeholder")||"Search",ee=e.data("searchbar-cancel")||"Cancel");var ae,ne,oe='<form class="searchbar searchbar-init" data-search-list=".smart-select-list-'+F+'" data-search-in=".item-title"><div class="searchbar-input"><input type="search" placeholder="'+Z+'"><a href="#" class="searchbar-clear"></a></div>'+(y?"":'<a href="#" class="searchbar-cancel">'+ee+"</a>")+'</form><div class="searchbar-overlay"></div>',se=("picker"!==d&&"through"===Y?$:"")+'<div class="pages">  <div data-page="'+te+'" data-select-name="'+V+'" class="page smart-select-page '+K+" "+J+" "+Q+'">'+("picker"!==d&&"fixed"===Y?$:"")+(ie?oe:"")+'    <div class="page-content">'+("picker"!==d&&"static"===Y?$:"")+'      <div class="list-block '+(C?"virtual-list":"")+" smart-select-list-"+F+" "+(v?"theme-"+v:"")+'">        <ul>'+(C?"":W)+"        </ul>      </div>    </div>  </div></div>";"popup"===d?(t?(ae=s(".popup.smart-select-popup .view"),ae.html(se)):(ae=n.popup('<div class="popup smart-select-popup smart-select-popup-'+z+'"><div class="view navbar-fixed">'+se+"</div></div>"),ae=s(ae)),n.initPage(ae.find(".page")),o(ae)):"picker"===d?(t?(ne=s(".picker-modal.smart-select-picker .view"),ne.html(se)):(ne=n.pickerModal('<div class="picker-modal smart-select-picker smart-select-picker-'+z+'"'+(x?' style="height:'+x+'"':"")+">"+X+'<div class="picker-modal-inner"><div class="view">'+se+"</div></div></div>"),ne=s(ne),function(){var t=e.parents(".page-content");if(0!==t.length){var i,a=parseInt(t.css("padding-top"),10),n=parseInt(t.css("padding-bottom"),10),o=t[0].offsetHeight-a-ne.height(),s=t[0].scrollHeight-a-ne.height(),r=e.offset().top-a+e[0].offsetHeight;if(r>o){var l=t.scrollTop()+r-o;l+o>s&&(i=l+o-s+n,o===s&&(i=ne.height()),t.css({
"padding-bottom":i+"px"})),t.scrollTop(l,300)}}}(),s("html").on("click",i),ne.once("close",function(){e[0].f7SmartSelectPicker=void 0,s("html").off("click",i),e.parents(".page-content").css({paddingBottom:""})}),e[0].f7SmartSelectPicker=ne[0]),n.initPage(ne.find(".page")),o(ne)):(s(document).once("pageInit",".smart-select-page",l),c.router.load({content:se,reload:!!t||void 0}))}}}};var g=function(e,t){var i={cols:1,height:n.params.material?48:44,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1};t=t||{};for(var a in i)void 0===t[a]&&(t[a]=i[a]);var o=this;o.listBlock=s(e),o.params=t,o.items=o.params.items,o.params.showFilteredItemsOnly&&(o.filteredItems=[]),o.params.template&&("string"==typeof o.params.template?o.template=r.compile(o.params.template):"function"==typeof o.params.template&&(o.template=o.params.template)),o.pageContent=o.listBlock.parents(".page-content");var l;void 0!==o.params.updatableScroll?l=o.params.updatableScroll:(l=!0,n.device.ios&&n.device.osVersion.split(".")[0]<8&&(l=!1)),o.ul=o.params.ul?s(o.params.ul):o.listBlock.children("ul"),0===o.ul.length&&(o.listBlock.append("<ul></ul>"),o.ul=o.listBlock.children("ul")),o.domCache={},o.displayDomCache={},o.tempDomElement=document.createElement("ul"),o.lastRepaintY=null,o.fragment=document.createDocumentFragment(),o.filterItems=function(e,t){o.filteredItems=[];for(var i=(e[0],e[e.length-1],0);i<e.length;i++)o.filteredItems.push(o.items[e[i]]);void 0===t&&(t=!0),t&&(o.pageContent[0].scrollTop=0),o.update()},o.resetFilter=function(){o.params.showFilteredItemsOnly?o.filteredItems=[]:(o.filteredItems=null,delete o.filteredItems),o.update()};var c,d,p,u,m,h,g=0,v="function"==typeof o.params.height;return o.setListSize=function(){var e=o.filteredItems||o.items;if(c=o.pageContent[0].offsetHeight,v){h=0,o.heights=[];for(var t=0;t<e.length;t++){var i=o.params.height(e[t]);h+=i,o.heights.push(i)}}else h=Math.ceil(e.length/o.params.cols)*o.params.height,d=Math.ceil(c/o.params.height),p=o.params.rowsBefore||2*d,u=o.params.rowsAfter||d,m=d+p+u,g=p/2*o.params.height;l&&o.ul.css({height:h+"px"})},o.render=function(e,t){e&&(o.lastRepaintY=null);var i=-(o.listBlock[0].getBoundingClientRect().top-o.pageContent[0].getBoundingClientRect().top);if(void 0!==t&&(i=t),null===o.lastRepaintY||Math.abs(i-o.lastRepaintY)>g||!l&&o.pageContent[0].scrollTop+c>=o.pageContent[0].scrollHeight){o.lastRepaintY=i;var a,n,s=o.filteredItems||o.items,r=0,d=0;if(v){var u,h,f=0;for(g=c,u=0;u<o.heights.length;u++)h=o.heights[u],void 0===a&&(f+h>=i-2*c*o.params.dynamicHeightBufferSize?a=u:r+=h),void 0===n&&((f+h>=i+2*c*o.params.dynamicHeightBufferSize||u===o.heights.length-1)&&(n=u+1),d+=h),f+=h;n=Math.min(n,s.length)}else a=(parseInt(i/o.params.height)-p)*o.params.cols,a<0&&(a=0),n=Math.min(a+m*o.params.cols,s.length);var b;o.reachEnd=!1;for(var C=a;C<n;C++){var w,y;y=o.items.indexOf(s[C]),C===a&&(o.currentFromIndex=y),C===n-1&&(o.currentToIndex=y),y===o.items.length-1&&(o.reachEnd=!0),o.domCache[y]?w=o.domCache[y]:(o.template?o.tempDomElement.innerHTML=o.template(s[C],{index:y}).trim():o.params.renderItem?o.tempDomElement.innerHTML=o.params.renderItem(y,s[C]).trim():o.tempDomElement.innerHTML=s[C].trim(),w=o.tempDomElement.childNodes[0],o.params.cache&&(o.domCache[y]=w)),w.f7VirtualListIndex=y,C===a&&(b=v?r:C*o.params.height/o.params.cols),w.style.top=b+"px",o.params.onItemBeforeInsert&&o.params.onItemBeforeInsert(o,w),o.fragment.appendChild(w)}l||(o.ul[0].style.height=v?d+"px":C*o.params.height/o.params.cols+"px"),o.params.onBeforeClear&&o.params.onBeforeClear(o,o.fragment),o.ul[0].innerHTML="",o.params.onItemsBeforeInsert&&o.params.onItemsBeforeInsert(o,o.fragment),o.ul[0].appendChild(o.fragment),o.params.onItemsAfterInsert&&o.params.onItemsAfterInsert(o,o.fragment),void 0!==t&&e&&o.pageContent.scrollTop(t,0)}},o.scrollToItem=function(e){if(e>o.items.length)return!1;var t,i=0;if(v)for(var a=0;a<e;a++)i+=o.heights[a];else i=e*o.params.height;return t=o.listBlock[0].offsetTop,o.render(!0,t+i-parseInt(o.pageContent.css("padding-top"),10)),!0},o.handleScroll=function(e){o.render()},o._isVisible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},o.handleResize=function(e){o._isVisible(o.listBlock[0])&&(o.setListSize(),o.render(!0))},o.attachEvents=function(e){var t=e?"off":"on";o.pageContent[t]("scroll",o.handleScroll),o.listBlock.parents(".tab").eq(0)[t]("show",o.handleResize),s(window)[t]("resize",o.handleResize)},o.init=function(){o.attachEvents(),o.setListSize(),o.render()},o.appendItems=function(e){for(var t=0;t<e.length;t++)o.items.push(e[t]);o.update()},o.appendItem=function(e){o.appendItems([e])},o.replaceAllItems=function(e){o.items=e,delete o.filteredItems,o.domCache={},o.update()},o.replaceItem=function(e,t){o.items[e]=t,o.params.cache&&delete o.domCache[e],o.update()},o.prependItems=function(e){for(var t=e.length-1;t>=0;t--)o.items.unshift(e[t]);if(o.params.cache){var i={};for(var a in o.domCache)i[parseInt(a,10)+e.length]=o.domCache[a];o.domCache=i}o.update()},o.prependItem=function(e){o.prependItems([e])},o.moveItem=function(e,t){if(e!==t){var i=o.items.splice(e,1)[0];if(t>=o.items.length?(o.items.push(i),t=o.items.length-1):o.items.splice(t,0,i),o.params.cache){var a={};for(var n in o.domCache){var s=parseInt(n,10),r=e<t?e:t,l=e<t?t:e,c=e<t?-1:1;(s<r||s>l)&&(a[s]=o.domCache[s]),s===r&&(a[l]=o.domCache[s]),s>r&&s<=l&&(a[s+c]=o.domCache[s])}o.domCache=a}o.update()}},o.insertItemBefore=function(e,t){if(0===e)return void o.prependItem(t);if(e>=o.items.length)return void o.appendItem(t);if(o.items.splice(e,0,t),o.params.cache){var i={};for(var a in o.domCache){var n=parseInt(a,10);n>=e&&(i[n+1]=o.domCache[n])}o.domCache=i}o.update()},o.deleteItems=function(e){for(var t,i=0,a=0;a<e.length;a++){var n=e[a];void 0!==t&&n>t&&(i=-a),n+=i,t=e[a];var s=o.items.splice(n,1)[0];if(o.filteredItems&&o.filteredItems.indexOf(s)>=0&&o.filteredItems.splice(o.filteredItems.indexOf(s),1),o.params.cache){var r={};for(var l in o.domCache){var c=parseInt(l,10);c===n?delete o.domCache[n]:parseInt(l,10)>n?r[c-1]=o.domCache[l]:r[c]=o.domCache[l]}o.domCache=r}}o.update()},o.deleteAllItems=function(){o.items=[],delete o.filteredItems,o.params.cache&&(o.domCache={}),o.update()},o.deleteItem=function(e){o.deleteItems([e])},o.clearCache=function(){o.domCache={}},o.update=function(){o.setListSize(),o.render(!0)},o.destroy=function(){o.attachEvents(!0),delete o.items,delete o.domCache},o.init(),o.listBlock[0].f7VirtualList=o,o};n.virtualList=function(e,t){return new g(e,t)},n.reinitVirtualList=function(e){var t=s(e),i=t.find(".virtual-list");if(0!==i.length)for(var a=0;a<i.length;a++){var n=i[a].f7VirtualList;n&&n.update()}},n.initPullToRefresh=function(e){function t(e){if(d){if("android"!==n.device.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}g=s(this),g.hasClass("refreshing")||(p=!1,y=!1,d=!0,u=void 0,b=void 0,"touchstart"===e.type&&(c=e.targetTouches[0].identifier),x.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,x.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=(new Date).getTime())}function i(e){if(d){var t,i,a;if("touchmove"===e.type){if(c&&e.touches)for(var o=0;o<e.touches.length;o++)e.touches[o].identifier===c&&(a=e.touches[o]);a||(a=e.targetTouches[0]),t=a.pageX,i=a.pageY}else t=e.pageX,i=e.pageY;if(t&&i){if(void 0===u&&(u=!!(u||Math.abs(i-x.y)>Math.abs(t-x.x))),!u)return void(d=!1);if(f=g[0].scrollTop,void 0===b&&0!==f&&(b=!0),!p){if(g.removeClass("transitioning"),f>g[0].offsetHeight)return void(d=!1);w&&(C=g.attr("data-ptr-distance"),C.indexOf("%")>=0&&(C=g[0].offsetHeight*parseInt(C,10)/100)),S=g.hasClass("refreshing")?C:0,T=g[0].scrollHeight===g[0].offsetHeight||"ios"!==n.device.os}if(p=!0,!((m=i-x.y)>0&&f<=0||f<0))return y=!1,g.removeClass("pull-up pull-down"),void(k=!1);"ios"===n.device.os&&parseInt(n.device.osVersion.split(".")[0],10)>7&&0===f&&!b&&(T=!0),T&&(e.preventDefault(),v=Math.pow(m,.85)+S,g.transform("translate3d(0,"+v+"px,0)")),T&&Math.pow(m,.85)>C||!T&&m>=2*C?(k=!0,g.addClass("pull-up").removeClass("pull-down")):(k=!1,g.removeClass("pull-up").addClass("pull-down")),y||(g.trigger("pullstart"),y=!0),g.trigger("pullmove",{event:e,scrollTop:f,translate:v,touchesDiff:m})}}}function a(e){if(!("touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&c&&e.changedTouches[0].identifier!==c)){if(!d||!p)return d=!1,void(p=!1);v&&(g.addClass("transitioning"),v=0),g.transform(""),k?(g.addClass("refreshing"),g.trigger("refresh",{done:function(){n.pullToRefreshDone(g)}})):g.removeClass("pull-down"),d=!1,p=!1,y&&g.trigger("pullend")}}function o(){l.off(n.touchEvents.start,t),l.off(n.touchEvents.move,i),l.off(n.touchEvents.end,a)}function r(){o(),_.off("pageBeforeRemove",r)}var l=s(e);if(l.hasClass("pull-to-refresh-content")||(l=l.find(".pull-to-refresh-content")),l&&0!==l.length){var c,d,p,u,m,h,g,v,f,b,C,w,y,x={},k=!1,T=!1,S=0,_=l.hasClass("page")?l:l.parents(".page"),A=!1;(_.find(".navbar").length>0||_.parents(".navbar-fixed, .navbar-through").length>0||_.hasClass("navbar-fixed")||_.hasClass("navbar-through"))&&(A=!0),_.hasClass("no-navbar")&&(A=!1),A||l.addClass("pull-to-refresh-no-navbar"),g=l,g.attr("data-ptr-distance")?w=!0:C=44;var E=!("touchstart"!==n.touchEvents.start||!n.support.passiveListener)&&{passive:!0,capture:!1};l.on(n.touchEvents.start,t,E),l.on(n.touchEvents.move,i),l.on(n.touchEvents.end,a,E),0!==_.length&&(l[0].f7DestroyPullToRefresh=o,_.on("pageBeforeRemove",r))}},n.pullToRefreshDone=function(e){e=s(e),0===e.length&&(e=s(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up pull-down"),e.trigger("refreshdone")})},n.pullToRefreshTrigger=function(e){e=s(e),0===e.length&&(e=s(".pull-to-refresh-content")),e.hasClass("refreshing")||(e.addClass("transitioning refreshing"),e.trigger("refresh",{done:function(){n.pullToRefreshDone(e)}}))},n.destroyPullToRefresh=function(e){e=s(e);var t=e.hasClass("pull-to-refresh-content")?e:e.find(".pull-to-refresh-content");0!==t.length&&t[0].f7DestroyPullToRefresh&&t[0].f7DestroyPullToRefresh()},n.attachInfiniteScroll=function(e){s(e).on("scroll",i)},n.detachInfiniteScroll=function(e){s(e).off("scroll",i)},n.initPageInfiniteScroll=function(e){function t(){n.detachInfiniteScroll(i),e.off("pageBeforeRemove",t)}e=s(e);var i=e.find(".infinite-scroll");0!==i.length&&(n.attachInfiniteScroll(i),e.on("pageBeforeRemove",t))},n.initPageScrollToolbars=function(e){function t(t){e.hasClass("page-on-left")||(m=i[0].scrollTop,f=i[0].scrollHeight,b=i[0].offsetHeight,C=m+b>=f-_,y=d.hasClass("navbar-hidden"),x=p.hasClass("toolbar-hidden"),k=c&&c.hasClass("toolbar-hidden"),C?n.params.showBarsOnPageScrollEnd&&(w="show"):w=u>m?n.params.showBarsOnPageScrollTop||m<=44?"show":"hide":m>44?"hide":"show","show"===w?(h&&a&&y&&(n.showNavbar(d),e.removeClass("no-navbar-by-scroll"),y=!1),g&&o&&x&&(n.showToolbar(p),e.removeClass("no-toolbar-by-scroll"),x=!1),v&&r&&k&&(n.showToolbar(c),e.removeClass("no-tabbar-by-scroll"),k=!1)):(h&&a&&!y&&(n.hideNavbar(d),e.addClass("no-navbar-by-scroll"),y=!0),g&&o&&!x&&(n.hideToolbar(p),e.addClass("no-toolbar-by-scroll"),x=!0),v&&r&&!k&&(n.hideToolbar(c),e.addClass("no-tabbar-by-scroll"),k=!0)),u=m)}e=s(e);var i=e.find(".page-content");if(0!==i.length){var a=(n.params.hideNavbarOnPageScroll||i.hasClass("hide-navbar-on-scroll")||i.hasClass("hide-bars-on-scroll"))&&!(i.hasClass("keep-navbar-on-scroll")||i.hasClass("keep-bars-on-scroll")),o=(n.params.hideToolbarOnPageScroll||i.hasClass("hide-toolbar-on-scroll")||i.hasClass("hide-bars-on-scroll"))&&!(i.hasClass("keep-toolbar-on-scroll")||i.hasClass("keep-bars-on-scroll")),r=(n.params.hideTabbarOnPageScroll||i.hasClass("hide-tabbar-on-scroll"))&&!i.hasClass("keep-tabbar-on-scroll");if(a||o||r){var l=i.parents("."+n.params.viewClass);if(0!==l.length){var c,d=l.find(".navbar"),p=l.find(".toolbar");r&&(c=l.find(".tabbar"),0===c.length&&(c=l.parents("."+n.params.viewsClass).find(".tabbar")));var u,m,h=d.length>0,g=p.length>0,v=c&&c.length>0;u=m=i[0].scrollTop;var f,b,C,w,y,x,k,T=g&&o?p[0].offsetHeight:0,S=v&&r?c[0].offsetHeight:0,_=S||T;i.on("scroll",t),i[0].f7ScrollToolbarsHandler=t}}}},n.destroyScrollToolbars=function(e){e=s(e);var t=e.find(".page-content");if(0!==t.length){t[0].f7ScrollToolbarsHandler&&t.off("scroll",t[0].f7ScrollToolbarsHandler)}},n.materialTabbarSetHighlight=function(e,t){e=s(e),t=t||e.find(".tab-link.active");var i,a;e.hasClass("tabbar-scrollable")?(i=t[0].offsetWidth+"px",a=(n.rtl?-t[0].offsetLeft:t[0].offsetLeft)+"px"):(i=1/e.find(".tab-link").length*100+"%",a=100*(n.rtl?-t.index():t.index())+"%"),e.find(".tab-link-highlight").css({width:i}).transform("translate3d("+a+",0,0)")},n.initPageMaterialTabbar=function(e){function t(){n.materialTabbarSetHighlight(i)}e=s(e);var i=s(e).find(".tabbar");i.length>0&&(0===i.find(".tab-link-highlight").length&&i.find(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),t(),s(window).on("resize",t),e.once("pageBeforeRemove",function(){s(window).off("resize",t)}))},n.showTab=function(e,t,i){var a=s(e);if(2===arguments.length&&"boolean"==typeof t&&(i=t),0===a.length)return!1;if(a.hasClass("active"))return i&&a.trigger("show"),!1;var o=a.parent(".tabs");if(0===o.length)return!1;n.allowSwipeout=!0;var r=o.parent().hasClass("tabs-animated-wrap");if(r){var l=100*(n.rtl?a.index():-a.index());o.transform("translate3d("+l+"%,0,0)")}var c,d=o.parent().hasClass("tabs-swipeable-wrap");d&&(c=o.parent()[0].swiper,c.activeIndex!==a.index()&&c.slideTo(a.index(),void 0,!1));var p=o.children(".tab.active").removeClass("active").trigger("hide");if(a.addClass("active"),a.trigger("show"),!r&&!d&&a.find(".navbar").length>0){var u;u=a.hasClass(n.params.viewClass)?a[0]:a.parents("."+n.params.viewClass)[0],n.sizeNavbars(u)}if(t?t=s(t):(!(t=s("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+a.attr("id")+'"]'))||t&&0===t.length)&&s("[data-tab]").each(function(){a.is(s(this).attr("data-tab"))&&(t=s(this))}),0!==t.length){var m;if(p&&p.length>0){var h=p.attr("id");h&&(m=s('.tab-link[href="#'+h+'"]')),(!m||m&&0===m.length)&&s("[data-tab]").each(function(){p.is(s(this).attr("data-tab"))&&(m=s(this))})}if(t&&t.length>0&&(t.addClass("active"),n.params.material)){var g=t.parents(".tabbar");g.length>0&&(0===g.find(".tab-link-highlight").length&&g.find(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),n.materialTabbarSetHighlight(g,t))}return m&&m.length>0&&m.removeClass("active"),!0}},n.accordionToggle=function(e){e=s(e),0!==e.length&&(e.hasClass("accordion-item-expanded")?n.accordionClose(e):n.accordionOpen(e))},n.accordionOpen=function(e){e=s(e);var t=e.parents(".accordion-list").eq(0),i=e.children(".accordion-item-content");0===i.length&&(i=e.find(".accordion-item-content"));var a=t.length>0&&e.parent().children(".accordion-item-expanded");a.length>0&&n.accordionClose(a),i.css("height",i[0].scrollHeight+"px").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){i.transition(0),i.css("height","auto");i[0].clientLeft;i.transition(""),e.trigger("opened")}else i.css("height",""),e.trigger("closed")}),e.trigger("open"),e.addClass("accordion-item-expanded")},n.accordionClose=function(e){e=s(e);var t=e.children(".accordion-item-content");0===t.length&&(t=e.find(".accordion-item-content")),e.removeClass("accordion-item-expanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px");t[0].clientLeft;t.transition(""),t.css("height","").transitionEnd(function(){if(e.hasClass("accordion-item-expanded")){t.transition(0),t.css("height","auto");t[0].clientLeft;t.transition(""),e.trigger("opened")}else t.css("height",""),e.trigger("closed")}),e.trigger("close")},n.initFastClicks=function(){function e(e){var t,i=s(e),a=i.parents(n.params.activeStateElements);return i.is(n.params.activeStateElements)&&(t=i),a.length>0&&(t=t?t.add(a):a),t||i}function t(e){var t=e.parents(".page-content, .panel");return 0!==t.length&&("yes"!==t.prop("scrollHandlerSet")&&(t.on("scroll",function(){clearTimeout(F),clearTimeout(q)}),t.prop("scrollHandlerSet","yes")),!0)}function i(){N&&N.addClass("active-state")}function a(e){N&&(N.removeClass("active-state"),N=null)}function o(e){var t="input select textarea label".split(" ");return!!(e.nodeName&&t.indexOf(e.nodeName.toLowerCase())>=0)}function r(e){var t="button input textarea select".split(" ");return!(!document.activeElement||e===document.activeElement||document.activeElement===document.body)&&!(t.indexOf(e.nodeName.toLowerCase())>=0)}function l(e){var t=s(e);return("input"!==e.nodeName.toLowerCase()||"file"!==e.type)&&(("select"!==e.nodeName.toLowerCase()||!n.device.android)&&(!(t.hasClass("no-fastclick")||t.parents(".no-fastclick").length>0)&&(!n.params.fastClicksExclude||!t.is(n.params.fastClicksExclude))))}function c(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),i="button checkbox file image radio submit".split(" ");return!e.disabled&&!e.readOnly&&("textarea"===t||("select"===t?!n.device.android:"input"===t&&i.indexOf(e.type)<0||void 0))}function d(e){e=s(e);var t=!0;return(e.is("label")||e.parents("label").length>0)&&(t=!n.device.android&&!(!n.device.ios||!e.is("input"))),t}function p(t){e(t.target).addClass("active-state"),"which"in t&&3===t.which&&setTimeout(function(){s(".active-state").removeClass("active-state")},0),n.params.material&&n.params.materialRipple&&(_=t.pageX,A=t.pageY,f(t.target,t.pageX,t.pageY))}function u(e){s(".active-state").removeClass("active-state"),n.params.material&&n.params.materialRipple&&b()}function m(e){s(".active-state").removeClass("active-state"),n.params.material&&n.params.materialRipple&&C()}function h(e){var t=n.params.materialRippleElements,i=s(e);if(i.is(t))return!i.hasClass("no-ripple")&&i;if(i.parents(t).length>0){var a=i.parents(t).eq(0);return!a.hasClass("no-ripple")&&a}return!1}function g(e,t,i){var a=i[0].getBoundingClientRect(),n={x:e-a.left,y:t-a.top},o=a.height,r=a.width,l=Math.max(Math.pow(Math.pow(o,2)+Math.pow(r,2),.5),48);U=s('<div class="ripple-wave" style="width: '+l+"px; height: "+l+"px; margin-top:-"+l/2+"px; margin-left:-"+l/2+"px; left:"+n.x+"px; top:"+n.y+'px;"></div>'),i.prepend(U);U[0].clientLeft;j="translate3d("+(r/2-n.x)+"px, "+(o/2-n.y)+"px, 0) scale(1)",U.transform(j)}function v(){if(U){var e=U,t=setTimeout(function(){e.remove()},400);U.addClass("ripple-wave-fill").transform(j.replace("scale(1)","scale(1.01)")).transitionEnd(function(){clearTimeout(t);var e=s(this).addClass("ripple-wave-out").transform(j.replace("scale(1)","scale(1.01)"));t=setTimeout(function(){e.remove()},700),setTimeout(function(){e.transitionEnd(function(){clearTimeout(t),s(this).remove()})},0)}),U=V=void 0}}function f(e,i,a){if(!(V=h(e))||0===V.length)return void(V=void 0);t(V)?q=setTimeout(function(){g(_,A,V)},80):g(_,A,V)}function b(){clearTimeout(q),v()}function C(){U?v():V&&!O?(clearTimeout(q),g(_,A,V),setTimeout(v,0)):v()}function w(e){var t=e.changedTouches[0],i=document.createEvent("MouseEvents"),a="click";n.device.android&&"select"===P.nodeName.toLowerCase()&&(a="mousedown"),i.initMouseEvent(a,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,P.dispatchEvent(i)}function y(o){if(O=!1,B=!1,o.targetTouches.length>1)return N&&a(),!0;if(o.touches.length>1&&N&&a(),n.params.tapHold&&(R&&clearTimeout(R),R=setTimeout(function(){o&&o.touches&&o.touches.length>1||(B=!0,o.preventDefault(),s(o.target).trigger("taphold"))},n.params.tapHoldDelay)),z&&clearTimeout(z),!(H=l(o.target)))return M=!1,!0;if(n.device.ios||n.device.android&&"getSelection"in window){var c=window.getSelection();if(c.rangeCount&&c.focusNode!==document.body&&(!c.isCollapsed||document.activeElement===c.focusNode))return I=!0,!0;I=!1}n.device.android&&r(o.target)&&document.activeElement.blur(),M=!0,P=o.target,E=(new Date).getTime(),_=o.targetTouches[0].pageX,A=o.targetTouches[0].pageY,n.device.ios&&(D=void 0,s(P).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!D&&(D=e,D.f7ScrollTop=D.scrollTop)})),o.timeStamp-L<n.params.fastClicksDelayBetweenClicks&&o.preventDefault(),n.params.activeState&&(N=e(P),t(N)?F=setTimeout(i,80):i()),n.params.material&&n.params.materialRipple&&f(P,_,A)}function x(e){if(M){var t=!1,i=n.params.fastClicksDistanceThreshold;if(i){var o=e.targetTouches[0].pageX,s=e.targetTouches[0].pageY;(Math.abs(o-_)>i||Math.abs(s-A)>i)&&(t=!0)}else t=!0;t&&(M=!1,P=null,O=!0,n.params.tapHold&&clearTimeout(R),n.params.activeState&&(clearTimeout(F),a()),n.params.material&&n.params.materialRipple&&b())}}function k(e){if(clearTimeout(F),clearTimeout(R),!M)return!I&&H&&(n.device.android&&!e.cancelable||e.preventDefault()),!0;if(document.activeElement===e.target)return n.params.activeState&&a(),n.params.material&&n.params.materialRipple&&C(),!0;if(I||e.preventDefault(),e.timeStamp-L<n.params.fastClicksDelayBetweenClicks)return setTimeout(a,0),!0;if(L=e.timeStamp,M=!1,n.device.ios&&D&&D.scrollTop!==D.f7ScrollTop)return!1;if(n.params.activeState&&(i(),setTimeout(a,0)),n.params.material&&n.params.materialRipple&&C(),c(P)){if(n.device.ios&&n.device.webView)return event.timeStamp-E>159?(P=null,!1):(P.focus(),!1);P.focus()}return document.activeElement&&P!==document.activeElement&&document.activeElement!==document.body&&"label"!==P.nodeName.toLowerCase()&&document.activeElement.blur(),e.preventDefault(),w(e),!1}function T(e){M=!1,P=null,clearTimeout(F),clearTimeout(R),n.params.activeState&&a(),n.params.material&&n.params.materialRipple&&C()}function S(e){var t=!1;return M?(P=null,M=!1,!0):"submit"===e.target.type&&0===e.detail||(P||o(e.target)||(t=!0),H||(t=!0),document.activeElement===P&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),n.params.tapHold&&n.params.tapHoldPreventClicks&&B&&(t=!1),t||(e.stopImmediatePropagation(),e.stopPropagation(),P?(d(P)||O)&&e.preventDefault():e.preventDefault(),P=null),z=setTimeout(function(){H=!1},n.device.ios||n.device.androidChrome?100:400),n.params.tapHold&&(R=setTimeout(function(){B=!1},n.device.ios||n.device.androidChrome?100:400)),t)}n.params.activeState&&s("html").addClass("watch-active-state"),n.device.ios&&n.device.webView&&window.addEventListener("touchstart",function(){});var _,A,E,P,M,I,D,L,O,B,R,N,F,H,z,U,V,j,q;n.support.touch?(document.addEventListener("click",S,!0),document.addEventListener("touchstart",y),document.addEventListener("touchmove",x),document.addEventListener("touchend",k),document.addEventListener("touchcancel",T)):n.params.activeState&&(document.addEventListener("mousedown",p),document.addEventListener("mousemove",u),document.addEventListener("mouseup",m)),n.params.material&&n.params.materialRipple&&document.addEventListener("contextmenu",function(e){N&&a(),C()})},n.initClickEvents=function(){function e(e){var t=s(this),i=s(e.target);if(!("a"===t[0].nodeName.toLowerCase()||t.parents("a").length>0||"a"===i[0].nodeName.toLowerCase()||i.parents("a").length>0)){var a;if(n.params.scrollTopOnNavbarClick&&t.is(".navbar .center")){var o=t.parents(".navbar");a=o.parents(".page-content"),0===a.length&&(o.parents(".page").length>0&&(a=o.parents(".page").find(".page-content")),0===a.length&&o.nextAll(".pages").length>0&&(a=o.nextAll(".pages").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")))}n.params.scrollTopOnStatusbarClick&&t.is(".statusbar-overlay")&&(a=s(".popup.modal-in").length>0?s(".popup.modal-in").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".panel.active").length>0?s(".panel.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views > .view.active").length>0?s(".views > .view.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")),a&&a.length>0&&(a.hasClass("tab")&&(a=a.parent(".tabs").children(".page-content.active")),a.length>0&&a.scrollTop(0,300))}}function t(e){var t=s(this),i=t.attr("href"),a="a"===t[0].nodeName.toLowerCase();if(a&&(t.is(n.params.externalLinks)||i&&i.indexOf("javascript:")>=0))return void(i&&"_system"===t.attr("target")&&(e.preventDefault(),window.open(i,"_system")));var o=t.dataset();if(t.hasClass("smart-select")&&n.smartSelectOpen&&n.smartSelectOpen(t),t.hasClass("open-panel")&&(1===s(".panel").length?s(".panel").hasClass("panel-left")?n.openPanel("left"):n.openPanel("right"):"right"===o.panel?n.openPanel("right"):n.openPanel("left")),t.hasClass("close-panel")&&n.closePanel(),t.hasClass("panel-overlay")&&n.params.panelsCloseByOutside&&n.closePanel(),t.hasClass("open-popover")){var c;c=o.popover?o.popover:".popover",n.popover(c,t)}t.hasClass("close-popover")&&n.closeModal(".popover.modal-in");var d;t.hasClass("open-popup")&&(d=o.popup?o.popup:".popup",n.popup(d)),t.hasClass("close-popup")&&(d=o.popup?o.popup:".popup.modal-in",n.closeModal(d));var p;if(t.hasClass("open-login-screen")&&(p=o.loginScreen?o.loginScreen:".login-screen",n.loginScreen(p)),t.hasClass("close-login-screen")&&n.closeModal(".login-screen.modal-in"),t.hasClass("modal-overlay")&&(s(".modal.modal-in").length>0&&n.params.modalCloseByOutside&&n.closeModal(".modal.modal-in"),s(".actions-modal.modal-in").length>0&&n.params.actionsCloseByOutside&&n.closeModal(".actions-modal.modal-in"),s(".popover.modal-in").length>0&&n.closeModal(".popover.modal-in")),t.hasClass("popup-overlay")&&s(".popup.modal-in").length>0&&n.params.popupCloseByOutside&&n.closeModal(".popup.modal-in"),t.hasClass("picker-modal-overlay")&&s(".picker-modal.modal-in").length>0&&n.closeModal(".picker-modal.modal-in"),t.hasClass("close-picker")){var u=s(".picker-modal.modal-in");u.length>0?n.closeModal(u):(u=s(".popover.modal-in .picker-modal"),u.length>0&&n.closeModal(u.parents(".popover")))}if(t.hasClass("open-picker")){var m;m=o.picker?o.picker:".picker-modal",n.pickerModal(m,t)}var h;if(t.hasClass("tab-link")&&(h=!0,n.showTab(o.tab||t.attr("href"),t)),t.hasClass("swipeout-close")&&n.swipeoutClose(t.parents(".swipeout-opened")),t.hasClass("swipeout-delete"))if(o.confirm){var g=o.confirm,v=o.confirmTitle;v?n.confirm(g,v,function(){n.swipeoutDelete(t.parents(".swipeout"))},function(){o.closeOnCancel&&n.swipeoutClose(t.parents(".swipeout"))}):n.confirm(g,function(){n.swipeoutDelete(t.parents(".swipeout"))},function(){o.closeOnCancel&&n.swipeoutClose(t.parents(".swipeout"))})}else n.swipeoutDelete(t.parents(".swipeout"));if(t.hasClass("toggle-sortable")&&n.sortableToggle(o.sortable),t.hasClass("open-sortable")&&n.sortableOpen(o.sortable),t.hasClass("close-sortable")&&n.sortableClose(o.sortable),t.hasClass("accordion-item-toggle")||t.hasClass("item-link")&&t.parent().hasClass("accordion-item")){var f=t.parent(".accordion-item");0===f.length&&(f=t.parents(".accordion-item")),0===f.length&&(f=t.parents("li")),n.accordionToggle(f)}if(t.hasClass("floating-button")&&t.parent().hasClass("speed-dial")&&t.parent().toggleClass("speed-dial-opened"),t.hasClass("close-speed-dial")&&s(".speed-dial-opened").removeClass("speed-dial-opened"),(!n.params.ajaxLinks||t.is(n.params.ajaxLinks))&&a&&n.params.router){a&&e.preventDefault();var b=i&&i.length>0&&"#"!==i&&!h,C=o.template;if(b||t.hasClass("back")||C){var w;if(o.view?w=s(o.view)[0].f7View:(w=t.parents("."+n.params.viewClass)[0]&&t.parents("."+n.params.viewClass)[0].f7View)&&w.params.linksView&&("string"==typeof w.params.linksView?w=s(w.params.linksView)[0].f7View:w.params.linksView instanceof l&&(w=w.params.linksView)),w||n.mainView&&(w=n.mainView),!w)return;var y;if(C)i=void 0;else{if(i&&0===i.indexOf("#")&&"#"!==i){if(!w.params.domCache)return;y=i.split("#")[1]}if("#"===i&&!t.hasClass("back"))return}var x;void 0!==o.animatePages?x=o.animatePages:(t.hasClass("with-animation")&&(x=!0),t.hasClass("no-animation")&&(x=!1));var k={animatePages:x,ignoreCache:o.ignoreCache,force:o.force,reload:o.reload,reloadPrevious:o.reloadPrevious,pageName:y,pushState:o.pushState,url:i};if(n.params.template7Pages){k.contextName=o.contextName;var T=o.context;T&&(k.context=JSON.parse(T))}C&&C in r.templates&&(k.template=r.templates[C]),t.hasClass("back")?w.router.back(k):w.router.load(k)}}}function i(e){e.preventDefault()}s(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .swipeout-close, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle, .close-picker, .picker-modal-overlay",t),(n.params.scrollTopOnNavbarClick||n.params.scrollTopOnStatusbarClick)&&s(document).on("click",".statusbar-overlay, .navbar .center",e),n.support.touch&&!n.device.android&&s(document).on(n.params.fastClicks?"touchstart":"touchmove",".panel-overlay, .modal-overlay, .preloader-indicator-overlay, .popup-overlay, .searchbar-overlay",i)},n.initResize=function(){s(window).on("resize",n.resize),s(window).on("orientationchange",n.orientationchange)},n.resize=function(){n.sizeNavbars&&n.sizeNavbars(),a()},n.orientationchange=function(){n.device&&n.device.minimalUi&&(90!==window.orientation&&-90!==window.orientation||(document.body.scrollTop=0)),a()},n.formsData={},n.formStoreData=function(e,t){n.formsData[e]=t,n.ls["f7form-"+e]=JSON.stringify(t)},n.formDeleteData=function(e){n.formsData[e]&&(n.formsData[e]="",delete n.formsData[e]),n.ls["f7form-"+e]&&(n.ls["f7form-"+e]="",n.ls.removeItem("f7form-"+e))},n.formGetData=function(e){return n.ls["f7form-"+e]?JSON.parse(n.ls["f7form-"+e]):n.formsData[e]?n.formsData[e]:void 0},n.formToData=function(e){if(e=s(e),1!==e.length)return!1;var t={},i=["submit","image","button","file"],a=[];return e.find("input, select, textarea").each(function(){var n=s(this),o=n.attr("name"),r=n.attr("type"),l=this.nodeName.toLowerCase();if(!(i.indexOf(r)>=0)&&!(a.indexOf(o)>=0)&&o)if("select"===l&&n.prop("multiple"))a.push(o),t[o]=[],e.find('select[name="'+o+'"] option').each(function(){this.selected&&t[o].push(this.value)});else switch(r){case"checkbox":a.push(o),t[o]=[],e.find('input[name="'+o+'"]').each(function(){this.checked&&t[o].push(this.value)});break;case"radio":a.push(o),e.find('input[name="'+o+'"]').each(function(){this.checked&&(t[o]=this.value)});break;default:t[o]=n.val()}}),e.trigger("formToJSON formToData",{formData:t}),t},n.formToJSON=n.formToData,n.formFromData=function(e,t){if(e=s(e),1!==e.length)return!1;var i=["submit","image","button","file"],a=[];e.find("input, select, textarea").each(function(){var n=s(this),o=n.attr("name"),r=n.attr("type"),l=this.nodeName.toLowerCase();if(t[o]&&!(i.indexOf(r)>=0)&&!(a.indexOf(o)>=0)&&o){if("select"===l&&n.prop("multiple"))a.push(o),e.find('select[name="'+o+'"] option').each(function(){t[o].indexOf(this.value)>=0?this.selected=!0:this.selected=!1});else switch(r){case"checkbox":a.push(o),e.find('input[name="'+o+'"]').each(function(){t[o].indexOf(this.value)>=0?this.checked=!0:this.checked=!1});break;case"radio":a.push(o),e.find('input[name="'+o+'"]').each(function(){t[o]===this.value?this.checked=!0:this.checked=!1});break;default:n.val(t[o])}"select"===l&&n.parents(".smart-select").length>0&&n.trigger("change")}}),e.trigger("formFromJSON formFromData",{formData:t})},n.formFromJSON=n.formFromData,n.initFormsStorage=function(e){function t(){var e=s(this),t=e[0].id;if(t){var i=n.formToData(e);i&&(n.formStoreData(t,i),e.trigger("store",{data:i}))}}function i(){a.off("change submit",t),e.off("pageBeforeRemove",i)}e=s(e);var a=e.find("form.store-data");0!==a.length&&(a.each(function(){var e=this.getAttribute("id");if(e){var t=n.formGetData(e);t&&n.formFromData(this,t)}}),a.on("change submit",t),e.on("pageBeforeRemove",i))},s(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var t=s(this);if("change"!==e.type||t.hasClass("ajax-submit-onchange")){"submit"===e.type&&e.preventDefault()
;var i=(t.attr("method")||"GET").toUpperCase(),a=t.prop("enctype")||t.attr("enctype"),o=t.attr("action");if(o){var r;r="POST"===i?new FormData(t[0]):s.serializeObject(n.formToJSON(t[0]));var l=s.ajax({method:i,url:o,contentType:a,data:r,beforeSend:function(e){t.trigger("beforeSubmit",{data:r,xhr:e})},error:function(e){t.trigger("submitError",{data:r,xhr:e})},success:function(e){t.trigger("submitted",{data:e,xhr:l})}})}}}),n.resizeTextarea=function(e){if(e=s(e),e.hasClass("resizable")){e.css({height:""});var t=e[0].offsetHeight,i=t-e[0].clientHeight,a=e[0].scrollHeight;if(a+i>t){var n=a+i;e.css("height",n+"px")}}},n.resizableTextarea=function(e){function t(){clearTimeout(i),i=setTimeout(function(){n.resizeTextarea(e)},0)}if(e=s(e),0!==e.length){var i;return e[0].f7DestroyResizableTextarea=function(){e.off("change keydown keypress keyup paste cut",t)},e.on("change keydown keypress keyup paste cut",t)}},n.destroyResizableTextarea=function(e){e=s(e),e.length>0&&e.is("textarea")&&e[0].f7DestroyResizableTextarea?e[0].f7DestroyResizableTextarea():e.length>0&&e.find("textarea.resiable").each(function(){var e=this;e.f7DestroyResizableTextarea&&e.f7DestroyResizableTextarea()})},n.initPageResizableTextarea=function(e){e=s(e),e.find("textarea.resizable").each(function(){n.resizableTextarea(this)})},n.initPageMaterialInputs=function(e){e=s(e);e.find("textarea.resizable");e.find(".item-input").each(function(){var e=s(this),t=["checkbox","button","submit","range","radio","image"];e.find("input, select, textarea").each(function(){var i=s(this);t.indexOf(i.attr("type"))<0&&(e.addClass("item-input-field"),""!==i.val().trim()&&i.parents(".item-input, .input-field").add(i.parents(".item-inner")).addClass("not-empty-state"))}),e.parents(".input-item, .inputs-list").length>0||e.parents(".list-block").eq(0).addClass("inputs-list")})},n.initMaterialWatchInputs=function(){function e(e){var t=s(this),i=t.attr("type");if(!(a.indexOf(i)>=0)){t.add(t.parents(".item-input, .input-field")).add(t.parents(".item-inner").eq(0)).addClass("focus-state")}}function t(e){var t=s(this),i=t.val(),n=t.attr("type");if(!(a.indexOf(n)>=0)){var o=t.add(t.parents(".item-input, .input-field")).add(t.parents(".item-inner").eq(0));o.removeClass("focus-state"),i&&""!==i.trim()?o.addClass("not-empty-state"):o.removeClass("not-empty-state")}}function i(e){var t=s(this),i=t.val(),n=t.attr("type");if(!(a.indexOf(n)>=0)){var o=t.add(t.parents(".item-input, .input-field")).add(t.parents(".item-inner").eq(0));i&&""!==i.trim()?o.addClass("not-empty-state"):o.removeClass("not-empty-state")}}var a=["checkbox","button","submit","range","radio","image"];s(document).on("change",".item-input input, .item-input select, .item-input textarea, input, textarea, select",i,!0),s(document).on("focus",".item-input input, .item-input select, .item-input textarea, input, textarea, select",e,!0),s(document).on("blur",".item-input input, .item-input select, .item-input textarea, input, textarea, select",t,!0)},n.pushStateQueue=[],n.pushStateClearQueue=function(){if(0!==n.pushStateQueue.length){var e,t=n.pushStateQueue.pop();!0===n.params.pushStateNoAnimation&&(e=!1),"back"===t.action&&n.router.back(t.view,{animatePages:e}),"loadPage"===t.action&&n.router.load(t.view,{url:t.stateUrl,animatePages:e,pushState:!1}),"loadContent"===t.action&&n.router.load(t.view,{content:t.stateContent,animatePages:e,pushState:!1}),"loadPageName"===t.action&&n.router.load(t.view,{pageName:t.statePageName,url:t.stateUrl,animatePages:e,pushState:!1})}},n.initPushState=function(){function e(e){if(!t){var i=n.mainView;if(i){var a=e.state;if(a||(a={viewIndex:n.views.indexOf(i),url:i.history[0]}),!(a.viewIndex<0)){var o,s=n.views[a.viewIndex],r=a&&a.url||void 0,l=a&&a.content||void 0,c=a&&a.pageName||void 0;!0===n.params.pushStateNoAnimation&&(o=!1),r!==s.url&&(s.history.indexOf(r)>=0?s.allowPageChange?n.router.back(s,{url:void 0,animatePages:o,pushState:!1,preloadOnly:!1}):n.pushStateQueue.push({action:"back",view:s}):l?s.allowPageChange?n.router.load(s,{content:l,animatePages:o,pushState:!1}):n.pushStateQueue.unshift({action:"loadContent",stateContent:l,view:s}):c?s.allowPageChange?n.router.load(s,{pageName:c,url:r,animatePages:o,pushState:!1}):n.pushStateQueue.unshift({action:"loadPageName",statePageName:c,view:s}):s.allowPageChange?n.router.load(s,{url:r,animatePages:o,pushState:!1}):n.pushStateQueue.unshift({action:"loadPage",stateUrl:r,view:s}))}}}}var t=!0;s(window).on("load",function(){setTimeout(function(){t=!1},0)}),document.readyState&&"complete"===document.readyState&&(t=!1),s(window).on("popstate",e)},n.swiper=function(e,t){return new Swiper(e,t)},n.initPageSwiper=function(e){function t(t){function i(){t.destroy(),e.off("pageBeforeRemove",i)}e.on("pageBeforeRemove",i)}e=s(e);var i=e.find(".swiper-init, .tabs-swipeable-wrap");0!==i.length&&i.each(function(){var e,i,a=s(this);a.hasClass("tabs-swipeable-wrap")&&(a.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),e=a.children(".tabs").children(".tab.active").index()),i=a.data("swiper")?JSON.parse(a.data("swiper")):a.dataset(),void 0===i.initialSlide&&void 0!==e&&(i.initialSlide=e),a.hasClass("tabs-swipeable-wrap")&&(i.onSlideChangeStart=function(e){n.showTab(e.slides.eq(e.activeIndex))}),t(n.swiper(a[0],i))})},n.reinitPageSwiper=function(e){e=s(e);var t=e.find(".swiper-init, .tabs-swipeable-wrap");if(0!==t.length)for(var i=0;i<t.length;i++){var a=t[0].swiper;a&&a.update(!0)}};var v=function(e){var t=this,i={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,zoomMax:3,zoomMin:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of",loop:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1,material:n.params.material,materialPreloaderSvg:n.params.materialPreloaderSvg,materialPreloaderHtml:n.params.materialPreloaderHtml};e=e||{},!e.backLinkText&&n.params.material&&(i.backLinkText="");for(var a in i)void 0===e[a]&&(e[a]=i[a]);e.maxZoom&&(e.zoomMax=e.maxZoom),e.minZoom&&(e.zoomMin=e.minZoom),t.params=e,t.params.iconsColorClass=t.params.iconsColor?"color-"+t.params.iconsColor:"dark"===t.params.theme?"color-white":"",t.params.preloaderColorClass="dark"===t.params.theme?"preloader-white":"";var o=t.params.photoTemplate||'<div class="photo-browser-slide swiper-slide"><span class="swiper-zoom-container"><img src="{{js "this.url || this"}}"></span></div>',l=t.params.lazyPhotoTemplate||'<div class="photo-browser-slide photo-browser-slide-lazy swiper-slide"><div class="preloader {{@root.preloaderColorClass}}">{{#if @root.material}}{{@root.materialPreloaderHtml}}{{/if}}</div><span class="swiper-zoom-container"><img data-src="{{js "this.url || this"}}" class="swiper-lazy"></span></div>',c=t.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide swiper-slide">{{js "this.html || this"}}</div>',d=t.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{@index}}">{{caption}}</div>',p=t.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+("popup"===e.type?"close-popup":"photo-browser-close-link")+' {{#unless backLinkText}}icon-only{{/unless}} {{js "this.type === \'page\' ? \'back\' : \'\'"}}"><i class="icon icon-back {{iconsColorClass}}"></i>{{#if backLinkText}}<span>{{backLinkText}}</span>{{/if}}</a></div><div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">{{ofText}}</span> <span class="photo-browser-total"></span></div><div class="right"></div></div></div>',u=t.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-prev {{iconsColorClass}}"></i></a><a href="#" class="link photo-browser-next"><i class="icon icon-next {{iconsColorClass}}"></i></a></div></div>',m=r.compile('<div class="photo-browser photo-browser-{{theme}}"><div class="view navbar-fixed toolbar-fixed">{{#unless material}}{{#if navbar}}'+p+'{{/if}}{{/unless}}<div class="page no-toolbar {{#unless navbar}}no-navbar{{/unless}} toolbar-fixed navbar-fixed" data-page="photo-browser-slides">{{#if material}}{{#if navbar}}'+p+"{{/if}}{{/if}}{{#if toolbar}}"+u+'{{/if}}<div class="photo-browser-captions photo-browser-captions-{{js "this.captionsTheme || this.theme"}}">{{#each photos}}{{#if caption}}'+d+"{{/if}}{{/each}}</div><div class=\"photo-browser-swiper-container swiper-container\"><div class=\"photo-browser-swiper-wrapper swiper-wrapper\">{{#each photos}}{{#js_compare \"this.html || ((typeof this === 'string' || this instanceof String) && (this.indexOf('<') >= 0 || this.indexOf('>') >= 0))\"}}"+c+"{{else}}{{#if @root.lazyLoading}}"+l+"{{else}}"+o+"{{/if}}{{/js_compare}}{{/each}}</div></div></div></div></div>")(t.params);t.activeIndex=t.params.initialSlide,t.openIndex=t.activeIndex,t.opened=!1,t.open=function(e){return void 0===e&&(e=t.activeIndex),e=parseInt(e,10),t.opened&&t.swiper?void t.swiper.slideTo(e):(t.opened=!0,t.openIndex=e,"standalone"===t.params.type&&n.root.append(m),"popup"===t.params.type&&(t.popup=n.popup('<div class="popup photo-browser-popup">'+m+"</div>"),s(t.popup).on("closed",t.onPopupClose)),"page"===t.params.type?(s(document).on("pageBeforeInit",t.onPageBeforeInit),s(document).on("pageBeforeRemove",t.onPageBeforeRemove),t.params.view||(t.params.view=n.mainView),void t.params.view.loadContent(m)):(t.layout(t.openIndex),void(t.params.onOpen&&t.params.onOpen(t))))},t.close=function(){t.opened=!1,t.swiperContainer&&0!==t.swiperContainer.length&&(t.params.onClose&&t.params.onClose(t),t.attachEvents(!0),"standalone"===t.params.type&&t.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){t.container.remove()}),t.swiper.destroy(),t.swiper=t.swiperContainer=t.swiperWrapper=t.slides=void 0)},t.onPopupClose=function(e){t.close(),s(t.popup).off("pageBeforeInit",t.onPopupClose)},t.onPageBeforeInit=function(e){"photo-browser-slides"===e.detail.page.name&&t.layout(t.openIndex),s(document).off("pageBeforeInit",t.onPageBeforeInit)},t.onPageBeforeRemove=function(e){"photo-browser-slides"===e.detail.page.name&&t.close(),s(document).off("pageBeforeRemove",t.onPageBeforeRemove)},t.onSliderTransitionStart=function(e){t.activeIndex=e.activeIndex;var i=e.activeIndex+1,a=e.slides.length;if(t.params.loop&&(a-=2,i-=e.loopedSlides,i<1&&(i=a+i),i>a&&(i-=a)),t.container.find(".photo-browser-current").text(i),t.container.find(".photo-browser-total").text(a),s(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),e.isBeginning&&!t.params.loop&&s(".photo-browser-prev").addClass("photo-browser-link-inactive"),e.isEnd&&!t.params.loop&&s(".photo-browser-next").addClass("photo-browser-link-inactive"),t.captions.length>0){t.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active");var n=t.params.loop?e.slides.eq(e.activeIndex).attr("data-swiper-slide-index"):t.activeIndex;t.captionsContainer.find('[data-caption-index="'+n+'"]').addClass("photo-browser-caption-active")}var o=e.slides.eq(e.previousIndex).find("video");o.length>0&&"pause"in o[0]&&o[0].pause(),t.params.onTransitionStart&&t.params.onTransitionStart(e)},t.onSliderTransitionEnd=function(e){t.params.onTransitionEnd&&t.params.onTransitionEnd(e)},t.layout=function(e){"page"===t.params.type?t.container=s(".photo-browser-swiper-container").parents(".view"):t.container=s(".photo-browser"),"standalone"===t.params.type&&(t.container.addClass("photo-browser-in"),n.sizeNavbars(t.container)),t.swiperContainer=t.container.find(".photo-browser-swiper-container"),t.swiperWrapper=t.container.find(".photo-browser-swiper-wrapper"),t.slides=t.container.find(".photo-browser-slide"),t.captionsContainer=t.container.find(".photo-browser-captions"),t.captions=t.container.find(".photo-browser-caption");var i={nextButton:t.params.nextButton||".photo-browser-next",prevButton:t.params.prevButton||".photo-browser-prev",indexButton:t.params.indexButton,initialSlide:e,spaceBetween:t.params.spaceBetween,speed:t.params.speed,loop:t.params.loop,lazyLoading:t.params.lazyLoading,lazyLoadingInPrevNext:t.params.lazyLoadingInPrevNext,lazyLoadingOnTransitionStart:t.params.lazyLoadingOnTransitionStart,preloadImages:!t.params.lazyLoading,zoom:t.params.zoom,zoomMax:t.params.zoomMax,zoomMin:t.params.zoomMin,onTap:function(e,i){t.params.onTap&&t.params.onTap(e,i)},onClick:function(e,i){t.params.exposition&&t.toggleExposition(),t.params.onClick&&t.params.onClick(e,i)},onDoubleTap:function(e,i){t.params.onDoubleTap&&t.params.onDoubleTap(e,i)},onTransitionStart:function(e){t.onSliderTransitionStart(e)},onTransitionEnd:function(e){t.onSliderTransitionEnd(e)},onSlideChangeStart:t.params.onSlideChangeStart,onSlideChangeEnd:t.params.onSlideChangeEnd,onLazyImageLoad:function(e,i,a){t.params.onLazyImageLoad&&t.params.onLazyImageLoad(t,i,a)},onLazyImageReady:function(e,i,a){s(i).removeClass("photo-browser-slide-lazy"),t.params.onLazyImageReady&&t.params.onLazyImageReady(t,i,a)}};t.params.swipeToClose&&"page"!==t.params.type&&(i.onTouchStart=t.swipeCloseTouchStart,i.onTouchMoveOpposite=t.swipeCloseTouchMove,i.onTouchEnd=t.swipeCloseTouchEnd),t.swiper=n.swiper(t.swiperContainer,i),0===e&&t.onSliderTransitionStart(t.swiper),t.attachEvents()},t.attachEvents=function(e){var i=e?"off":"on";t.container.find(".photo-browser-close-link")[i]("click",t.close)},t.exposed=!1,t.toggleExposition=function(){t.container&&t.container.toggleClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.toggleClass("photo-browser-captions-exposed"),t.exposed=!t.exposed},t.enableExposition=function(){t.container&&t.container.addClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.addClass("photo-browser-captions-exposed"),t.exposed=!0},t.disableExposition=function(){t.container&&t.container.removeClass("photo-browser-exposed"),t.params.expositionHideCaptions&&t.captionsContainer.removeClass("photo-browser-captions-exposed"),t.exposed=!1};var h,g,v,f,b,C=!1,w=!0,y=!1;return t.swipeCloseTouchStart=function(e,t){w&&(C=!0)},t.swipeCloseTouchMove=function(e,i){if(C){y||(y=!0,g="touchmove"===i.type?i.targetTouches[0].pageY:i.pageY,f=t.swiper.slides.eq(t.swiper.activeIndex),b=(new Date).getTime()),i.preventDefault(),v="touchmove"===i.type?i.targetTouches[0].pageY:i.pageY,h=g-v;var a=1-Math.abs(h)/300;f.transform("translate3d(0,"+-h+"px,0)"),t.swiper.container.css("opacity",a).transition(0)}},t.swipeCloseTouchEnd=function(e,i){if(C=!1,!y)return void(y=!1);y=!1,w=!1;var a=Math.abs(h),o=(new Date).getTime()-b;if(o<300&&a>20||o>=300&&a>100)return void setTimeout(function(){"standalone"===t.params.type&&t.close(),"popup"===t.params.type&&n.closeModal(t.popup),t.params.onSwipeToClose&&t.params.onSwipeToClose(t),w=!0},0);0!==a?f.addClass("transitioning").transitionEnd(function(){w=!0,f.removeClass("transitioning")}):w=!0,t.swiper.container.css("opacity","").transition(""),f.transform("")},t};n.photoBrowser=function(e){return new v(e)};var f=function(e){function t(e){var t=o.input.val();o.params.source&&o.params.source(o,t,function(e){var i="",a=o.params.limit?Math.min(o.params.limit,e.length):e.length;o.items=e;var n,s=new RegExp("("+t+")","i");for(n=0;n<a;n++){var r="object"==typeof e[n]?e[n][o.params.valueProperty]:e[n];i+=o.dropdownItemTemplate({value:r,text:("object"!=typeof e[n]?e[n]:e[n][o.params.textProperty]).replace(s,"<b>$1</b>")})}""===i&&""===t&&o.params.dropdownPlaceholderText&&(i+=o.dropdownPlaceholderTemplate({text:o.params.dropdownPlaceholderText})),o.dropdown.find("ul").html(i)})}function i(e){for(var t,i=s(this),a=0;a<o.items.length;a++){var n="object"==typeof o.items[a]?o.items[a][o.params.valueProperty]:o.items[a],r=i.attr("data-value");n!==r&&1*n!=1*r||(t=o.items[a])}o.params.updateInputValueOnSelect&&(o.input.val("object"==typeof t?t[o.params.textProperty]:t),o.input.trigger("input change")),o.params.onChange&&o.params.onChange(o,t),o.close()}function a(e){var t=s(e.target);t.is(o.input[0])||o.dropdown&&t.parents(o.dropdown[0]).length>0||o.close()}var o=this,l={popupCloseText:"Close",backText:"Back",searchbarPlaceholderText:"Search...",searchbarCancelText:"Cancel",openIn:"page",backOnSelect:!1,notFoundText:"Nothing found",valueProperty:"id",textProperty:"text",updateInputValueOnSelect:!0,expandInput:!1,preloaderColor:!1,preloader:!1};e=e||{};for(var c in l)void 0===e[c]&&(e[c]=l[c]);o.params=e,o.params.opener&&(o.opener=s(o.params.opener));var d=o.params.view;if(!o.params.view&&o.opener&&o.opener.length){if(d=o.opener.parents("."+n.params.viewClass),0===d.length)return;d=d[0].f7View}if(!o.params.input||(o.input=s(o.params.input),0!==o.input.length||"dropdown"!==o.params.openIn)){o.value=o.params.value||[],o.id=(new Date).getTime(),o.inputType=o.params.multiple?"checkbox":"radio",o.inputName=o.inputType+"-"+o.id;var p=n.params.material,u=o.params.backOnSelect;if("dropdown"!==o.params.openIn){o.itemTemplate=r.compile(o.params.itemTemplate||'<li><label class="label-{{inputType}} item-content"><input type="{{inputType}}" name="{{inputName}}" value="{{value}}" {{#if selected}}checked{{/if}}>{{#if material}}<div class="item-media"><i class="icon icon-form-{{inputType}}"></i></div><div class="item-inner"><div class="item-title">{{text}}</div></div>{{else}}{{#if checkbox}}<div class="item-media"><i class="icon icon-form-checkbox"></i></div>{{/if}}<div class="item-inner"><div class="item-title">{{text}}</div></div>{{/if}}</label></li>');var m=o.params.pageTitle||"";!m&&o.opener&&o.opener.length&&(m=o.opener.find(".item-title").text());var h,g,v="autocomplete-"+o.inputName,f=o.params.navbarTheme,b=o.params.formTheme,C="",w="";o.navbarTemplate=r.compile(o.params.navbarTemplate||'<div class="navbar {{#if navbarTheme}}theme-{{navbarTheme}}{{/if}}"><div class="navbar-inner"><div class="left sliding">{{#if material}}<a href="#" class="link {{#if inPopup}}close-popup{{else}}back{{/if}} icon-only"><i class="icon icon-back"></i></a>{{else}}<a href="#" class="link {{#if inPopup}}close-popup{{else}}back{{/if}}"><i class="icon icon-back"></i>{{#if inPopup}}<span>{{popupCloseText}}</span>{{else}}<span>{{backText}}</span>{{/if}}</a>{{/if}}</div><div class="center sliding">{{pageTitle}}</div>{{#if preloader}}<div class="right"><div class="autocomplete-preloader preloader {{#if preloaderColor}}preloader-{{preloaderColor}}{{/if}}"></div></div>{{/if}}</div></div>'),h=o.navbarTemplate({pageTitle:m,backText:o.params.backText,popupCloseText:o.params.popupCloseText,openIn:o.params.openIn,navbarTheme:f,inPopup:"popup"===o.params.openIn,inPage:"page"===o.params.openIn,material:p,preloader:o.params.preloader,preloaderColor:o.params.preloaderColor}),"page"===o.params.openIn?(g="static",o.opener?(o.opener.parents(".navbar-through").length>0&&(g="through"),o.opener.parents(".navbar-fixed").length>0&&(g="fixed"),w=o.opener.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",C=o.opener.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+g):d.container&&((s(d.container).hasClass("navbar-through")||s(d.container).find(".navbar-through").length>0)&&(g="through"),(s(d.container).hasClass("navbar-fixed")||s(d.container).find(".navbar-fixed").length>0)&&(g="fixed"),w=s(d.activePage.container).hasClass("no-toolbar")?"no-toolbar":"",C=s(d.activePage.container).hasClass("no-navbar")?"no-navbar":"navbar-"+g)):g="fixed";var y='<form class="searchbar"><div class="searchbar-input"><input type="search" placeholder="'+o.params.searchbarPlaceholderText+'"><a href="#" class="searchbar-clear"></a></div>'+(p?"":'<a href="#" class="searchbar-cancel">'+o.params.searchbarCancelText+"</a>")+'</form><div class="searchbar-overlay"></div>',x=("through"===g?h:"")+'<div class="pages"><div data-page="'+v+'" class="page autocomplete-page '+C+" "+w+'">'+("fixed"===g?h:"")+y+'<div class="page-content">'+("static"===g?h:"")+'<div class="list-block autocomplete-found autocomplete-list-'+o.id+" "+(b?"theme-"+b:"")+'"><ul></ul></div><div class="list-block autocomplete-not-found"><ul><li class="item-content"><div class="item-inner"><div class="item-title">'+o.params.notFoundText+'</div></div></li></ul></div><div class="list-block autocomplete-values"><ul></ul></div></div></div></div>'}else o.dropdownItemTemplate=r.compile(o.params.dropdownItemTemplate||'<li><label class="{{#unless placeholder}}label-radio{{/unless}} item-content" data-value="{{value}}"><div class="item-inner"><div class="item-title">{{text}}</div></div></label></li>'),o.dropdownPlaceholderTemplate=r.compile(o.params.dropdownPlaceholderTemplate||'<li class="autocomplete-dropdown-placeholder"><div class="item-content"><div class="item-inner"><div class="item-title">{{text}}</div></div></label></li>'),o.dropdownTemplate=r.compile(o.params.dropdownTemplate||'<div class="autocomplete-dropdown"><div class="autocomplete-dropdown-inner"><div class="list-block"><ul></ul></div></div>{{#if preloader}}<div class="autocomplete-preloader preloader {{#if preloaderColor}}preloader-{{preloaderColor}}{{/if}}">{{#if material}}{{materialPreloaderHtml}}{{/if}}</div>{{/if}}</div>');return o.popup=void 0,o.dropdown=void 0,o.positionDropDown=function(){var e=o.input.parents(".list-block"),t=o.input.parents(".page-content"),i=(parseInt(t.css("padding-top"),10),parseInt(t.css("padding-top"),10)),a=e.length>0?e.offset().left-e.parent().offset().left:0,n=o.input.offset().left-(e.length>0?e.offset().left:0),s=o.input.offset().top-(t.offset().top-t[0].scrollTop),r=t[0].scrollHeight-i-(s+t[0].scrollTop)-o.input[0].offsetHeight;o.dropdown.css({left:(e.length>0?a:n)+"px",top:s+t[0].scrollTop+o.input[0].offsetHeight+"px",width:(e.length>0?e[0].offsetWidth:o.input[0].offsetWidth)+"px"}),o.dropdown.children(".autocomplete-dropdown-inner").css({maxHeight:r+"px",paddingLeft:e.length>0&&!o.params.expandInput?n-(p?16:15)+"px":""})},o.pageInit=function(e){function t(){var e,t="";for(e=0;e<o.value.length;e++)t+=o.itemTemplate({value:"object"==typeof o.value[e]?o.value[e][o.params.valueProperty]:o.value[e],text:"object"==typeof o.value[e]?o.value[e][o.params.textProperty]:o.value[e],inputType:o.inputType,id:o.id,inputName:o.inputName+"-checked",checkbox:"checkbox"===o.inputType,material:p,selected:!0});a.find(".autocomplete-values ul").html(t)}var i=e.detail.page;if(o.page=s(i.container),o.pageData=i,i.name===v){var a=s(i.container),r=n.searchbar(a.find(".searchbar"),{customSearch:!0,onSearch:function(e,t){0===t.query.length&&e.active?e.overlay.addClass("searchbar-overlay-active"):e.overlay.removeClass("searchbar-overlay-active");var i,n;o.params.source&&o.params.source(o,t.query,function(e){var s="",r=o.params.limit?Math.min(o.params.limit,e.length):e.length;for(o.items=e,i=0;i<r;i++){var l=!1,c="object"==typeof e[i]?e[i][o.params.valueProperty]:e[i];for(n=0;n<o.value.length;n++){var d="object"==typeof o.value[n]?o.value[n][o.params.valueProperty]:o.value[n];d!==c&&1*d!=1*c||(l=!0)}s+=o.itemTemplate({value:c,text:"object"!=typeof e[i]?e[i]:e[i][o.params.textProperty],inputType:o.inputType,id:o.id,inputName:o.inputName,selected:l,checkbox:"checkbox"===o.inputType,material:p})}a.find(".autocomplete-found ul").html(s),0===e.length?0!==t.query.length?(a.find(".autocomplete-not-found").show(),a.find(".autocomplete-found, .autocomplete-values").hide()):(a.find(".autocomplete-values").show(),a.find(".autocomplete-found, .autocomplete-not-found").hide()):(a.find(".autocomplete-found").show(),a.find(".autocomplete-not-found, .autocomplete-values").hide())})}});o.searchbar=r,a.on("change",'input[type="radio"], input[type="checkbox"]',function(){var e,i,a,r,l=this,c=l.value,p=(s(l).parents("li").find(".item-title").text(),s(l).parents(".autocomplete-values").length>0);if(p){if("checkbox"===o.inputType&&!l.checked){for(e=0;e<o.value.length;e++)(r="string"==typeof o.value[e]?o.value[e]:o.value[e][o.params.valueProperty])!==c&&1*r!=1*c||o.value.splice(e,1);t(),o.params.onChange&&o.params.onChange(o,o.value)}}else{for(e=0;e<o.items.length;e++)(a="string"==typeof o.items[e]?o.items[e]:o.items[e][o.params.valueProperty])!==c&&1*a!=1*c||(i=o.items[e]);if("radio"===o.inputType)o.value=[i];else if(l.checked)o.value.push(i);else for(e=0;e<o.value.length;e++)(r="string"==typeof o.value[e]?o.value[e]:o.value[e][o.params.valueProperty])!==c&&1*r!=1*c||o.value.splice(e,1);t(),("radio"===o.inputType&&l.checked||"checkbox"===o.inputType)&&o.params.onChange&&o.params.onChange(o,o.value),u&&"radio"===o.inputType&&("popup"===o.params.openIn?n.closeModal(o.popup):d.router.back())}}),t(),o.params.onOpen&&o.params.onOpen(o)}},o.showPreloader=function(){"dropdown"===o.params.openIn?o.dropdown&&o.dropdown.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):s(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},o.hidePreloader=function(){"dropdown"===o.params.openIn?o.dropdown&&o.dropdown.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):s(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},o.open=function(){if(!o.opened)if(o.opened=!0,"dropdown"===o.params.openIn){o.dropdown||(o.dropdown=s(o.dropdownTemplate({preloader:o.params.preloader,preloaderColor:o.params.preloaderColor,material:p,materialPreloaderHtml:n.params.materialPreloaderHtml})),o.dropdown.on("click","label",i));var e=o.input.parents(".list-block");e.length&&o.input.parents(".item-content").length>0&&o.params.expandInput&&o.input.parents(".item-content").addClass("item-content-dropdown-expand"),o.positionDropDown(),o.input.parents(".page-content").append(o.dropdown),o.dropdown.addClass("autocomplete-dropdown-in"),o.input.trigger("input"),s(window).on("resize",o.positionDropDown),o.params.onOpen&&o.params.onOpen(o)}else s(document).once("pageInit",".autocomplete-page",o.pageInit),"popup"===o.params.openIn?(o.popup=n.popup('<div class="popup autocomplete-popup autocomplete-popup-'+o.inputName+'"><div class="view navbar-fixed">'+x+"</div></div>"),o.popup=s(o.popup),o.popup.once("closed",function(){o.popup=void 0,o.opened=!1,o.params.onClose&&o.params.onClose(o)})):(d.router.load({content:x}),s(document).once("pageBack",".autocomplete-page",function(){o.opened=!1,o.params.onClose&&o.params.onClose(o)}))},o.close=function(e){if(o.opened){if("dropdown"===o.params.openIn){if(e&&"blur"===e.type&&o.dropdown.find("label.active-state").length>0)return;o.dropdown.removeClass("autocomplete-dropdown-in").remove(),o.input.parents(".item-content-dropdown-expand").removeClass("item-content-dropdown-expand"),o.opened=!1,s(window).off("resize",o.positionDropDown),o.params.onClose&&o.params.onClose(o)}"popup"===o.params.openIn&&o.popup&&n.closeModal(o.popup)}},o.initEvents=function(e){var i=e?"off":"on";"dropdown"!==o.params.openIn&&o.opener&&o.opener[i]("click",o.open),"dropdown"===o.params.openIn&&o.input&&(o.input[i]("focus",o.open),o.input[i]("input",t),n.device.android?s("html")[i]("click",a):o.input[i]("blur",o.close)),e&&o.dropdown&&(o.dropdown=null)},o.init=function(){o.initEvents()},o.destroy=function(){o.initEvents(!0),o=null},o.init(),o}};n.autocomplete=function(e){return new f(e)};var b=function(e){function t(){var e=!1;return c.params.convertToPopover||c.params.onlyInPopover?(!c.inline&&c.params.input&&(c.params.onlyInPopover?e=!0:n.device.ios?e=!!n.device.ipad:s(window).width()>=768&&(e=!0)),e):e}function i(){return!!(c.opened&&c.container&&c.container.length>0&&c.container.parents(".popover").length>0)}function a(){if(c.opened)for(var e=0;e<c.cols.length;e++)c.cols[e].divider||(c.cols[e].calcSize(),c.cols[e].setValue(c.cols[e].value,0,!1))}function o(e){if(e.preventDefault(),!c.opened&&(c.open(),c.params.scrollToInput&&!t())){var i=c.input.parents(".page-content");if(0===i.length)return;var a,n=parseInt(i.css("padding-top"),10),o=parseInt(i.css("padding-bottom"),10),s=i[0].offsetHeight-n-c.container.height(),r=i[0].scrollHeight-n-c.container.height(),l=c.input.offset().top-n+c.input[0].offsetHeight;if(l>s){var d=i.scrollTop()+l-s;d+s>r&&(a=d+s-r+o,s===r&&(a=c.container.height()),i.css({"padding-bottom":a+"px"})),i.scrollTop(d,300)}}}function r(e){i()||(c.input&&c.input.length>0?e.target!==c.input[0]&&0===s(e.target).parents(".picker-modal").length&&c.close():0===s(e.target).parents(".picker-modal").length&&c.close())}function l(){c.opened=!1,c.input&&c.input.length>0&&(c.input.parents(".page-content").css({"padding-bottom":""}),n.params.material&&c.input.trigger("blur")),c.params.onClose&&c.params.onClose(c),c.container.find(".picker-items-col").each(function(){c.destroyPickerCol(this)})}var c=this,d={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,closeByOutsideClick:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner"><div class="left"></div><div class="right"><a href="#" class="link close-picker">{{closeText}}</a></div></div></div>'};e=e||{};for(var p in d)void 0===e[p]&&(e[p]=d[p]);c.params=e,c.cols=[],c.initialized=!1,c.inline=!!c.params.container;var u=n.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!n.device.android;return c.setValue=function(e,t){var i=0;if(0===c.cols.length)return c.value=e,void c.updateValue(e);for(var a=0;a<c.cols.length;a++)c.cols[a]&&!c.cols[a].divider&&(c.cols[a].setValue(e[i],t),i++)},c.updateValue=function(e){for(var t=e||[],i=[],a=0;a<c.cols.length;a++)c.cols[a].divider||(t.push(c.cols[a].value),i.push(c.cols[a].displayValue));t.indexOf(void 0)>=0||(c.value=t,c.displayValue=i,c.params.onChange&&c.params.onChange(c,c.value,c.displayValue),c.input&&c.input.length>0&&(s(c.input).val(c.params.formatValue?c.params.formatValue(c,c.value,c.displayValue):c.value.join(" ")),s(c.input).trigger("change")))},c.initPickerCol=function(e,t){function i(){C=s.requestAnimationFrame(function(){m.updateItems(void 0,void 0,0),i()})}function a(e){y||w||(e.preventDefault(),w=!0,x=k="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,T=(new Date).getTime(),D=!0,_=E=s.getTranslate(m.wrapper[0],"y"))}function o(e){if(w){e.preventDefault(),D=!1,k="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,y||(s.cancelAnimationFrame(C),y=!0,_=E=s.getTranslate(m.wrapper[0],"y"),m.wrapper.transition(0));E=_+(k-x),A=void 0,E<f&&(E=f-Math.pow(f-E,.8),A="min"),E>b&&(E=b+Math.pow(E-b,.8),A="max"),m.wrapper.transform("translate3d(0,"+E+"px,0)"),m.updateItems(void 0,E,0,c.params.updateValuesOnTouchmove),M=E-P||E,I=(new Date).getTime(),P=E}}function r(e){if(!w||!y)return void(w=y=!1);w=y=!1,m.wrapper.transition(""),A&&("min"===A?m.wrapper.transform("translate3d(0,"+f+"px,0)"):m.wrapper.transform("translate3d(0,"+b+"px,0)")),S=(new Date).getTime();var t;S-T>300?t=E:(Math.abs(M/(S-I)),t=E+M*c.params.momentumRatio),t=Math.max(Math.min(t,b),f);var a=-Math.floor((t-b)/g);c.params.freeMode||(t=-a*g+b),m.wrapper.transform("translate3d(0,"+parseInt(t,10)+"px,0)"),m.updateItems(a,t,"",!0),c.params.updateValuesOnMomentum&&(i(),m.wrapper.transitionEnd(function(){s.cancelAnimationFrame(C)})),setTimeout(function(){D=!0},100)}function l(e){if(D){s.cancelAnimationFrame(C);var t=s(this).attr("data-picker-value");m.setValue(t)}}var d=s(e),p=d.index(),m=c.cols[p];if(!m.divider){m.container=d,m.wrapper=m.container.find(".picker-items-col-wrapper"),m.items=m.wrapper.find(".picker-item");var h,g,v,f,b;m.replaceValues=function(e,t){m.destroyEvents(),m.values=e,m.displayValues=t;var i=c.columnHTML(m,!0);m.wrapper.html(i),m.items=m.wrapper.find(".picker-item"),m.calcSize(),m.setValue(m.values[0],0,!0),m.initEvents()},m.calcSize=function(){c.params.rotateEffect&&(m.container.removeClass("picker-items-col-absolute"),m.width||m.container.css({width:""}));var e,t;e=0,t=m.container[0].offsetHeight,
h=m.wrapper[0].offsetHeight,g=m.items[0].offsetHeight,v=g*m.items.length,f=t/2-v+g/2,b=t/2-g/2,m.width&&(e=m.width,parseInt(e,10)===e&&(e+="px"),m.container.css({width:e})),c.params.rotateEffect&&(m.width||(m.items.each(function(){var t=s(this);t.css({width:"auto"}),e=Math.max(e,t[0].offsetWidth),t.css({width:""})}),m.container.css({width:e+2+"px"})),m.container.addClass("picker-items-col-absolute"))},m.calcSize(),m.wrapper.transform("translate3d(0,"+b+"px,0)").transition(0);var C;m.setValue=function(e,t,a){void 0===t&&(t="");var n=m.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==n&&-1!==n){var o=-n*g+b;m.wrapper.transition(t),m.wrapper.transform("translate3d(0,"+o+"px,0)"),c.params.updateValuesOnMomentum&&m.activeIndex&&m.activeIndex!==n&&(s.cancelAnimationFrame(C),m.wrapper.transitionEnd(function(){s.cancelAnimationFrame(C)}),i()),m.updateItems(n,o,t,a)}},m.updateItems=function(e,t,i,a){void 0===t&&(t=s.getTranslate(m.wrapper[0],"y")),void 0===e&&(e=-Math.round((t-b)/g)),e<0&&(e=0),e>=m.items.length&&(e=m.items.length-1);var n=m.activeIndex;m.activeIndex=e,m.wrapper.find(".picker-selected").removeClass("picker-selected"),m.items.transition(i);var o=m.items.eq(e).addClass("picker-selected").transform("");if(c.params.rotateEffect){Math.floor((t-b)/g);m.items.each(function(){var e=s(this),i=e.index()*g,a=b-t,n=i-a,o=n/g,r=Math.ceil(m.height/g/2)+1,l=-18*o;l>180&&(l=180),l<-180&&(l=-180),Math.abs(o)>r?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),e.transform("translate3d(0, "+(-t+b)+"px, "+(u?-110:0)+"px) rotateX("+l+"deg)")})}(a||void 0===a)&&(m.value=o.attr("data-picker-value"),m.displayValue=m.displayValues?m.displayValues[e]:m.value,n!==e&&(m.onChange&&m.onChange(c,m.value,m.displayValue),c.updateValue()))},t&&m.updateItems(0,b,0);var w,y,x,k,T,S,_,A,E,P,M,I,D=!0;m.initEvents=function(e){var t=e?"off":"on";m.container[t](n.touchEvents.start,a),m.container[t](n.touchEvents.move,o),m.container[t](n.touchEvents.end,r),m.items[t]("click",l)},m.destroyEvents=function(){m.initEvents(!0)},m.container[0].f7DestroyPickerCol=function(){m.destroyEvents()},m.initEvents()}},c.destroyPickerCol=function(e){e=s(e),"f7DestroyPickerCol"in e[0]&&e[0].f7DestroyPickerCol()},s(window).on("resize",a),c.columnHTML=function(e,t){var i="",a="";if(e.divider)a+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var n=0;n<e.values.length;n++)i+='<div class="picker-item" data-picker-value="'+e.values[n]+'">'+(e.displayValues?e.displayValues[n]:e.values[n])+"</div>";a+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+i+"</div></div>"}return t?i:a},c.layout=function(){var e,t="",i="";c.cols=[];var a="";for(e=0;e<c.params.cols.length;e++){var n=c.params.cols[e];a+=c.columnHTML(c.params.cols[e]),c.cols.push(n)}i="picker-modal picker-columns "+(c.params.cssClass||"")+(c.params.rotateEffect?" picker-3d":""),t='<div class="'+i+'">'+(c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+a+'<div class="picker-center-highlight"></div></div></div>',c.pickerHTML=t},c.params.input&&(c.input=s(c.params.input),c.input.length>0&&(c.params.inputReadOnly&&c.input.prop("readOnly",!0),c.inline||c.input.on("click",o),c.params.inputReadOnly&&c.input.on("focus mousedown",function(e){e.preventDefault()}))),!c.inline&&c.params.closeByOutsideClick&&s("html").on("click",r),c.opened=!1,c.open=function(){var e=t();c.opened||(c.layout(),e?(c.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+c.pickerHTML+"</div></div>",c.popover=n.popover(c.pickerHTML,c.params.input,!0),c.container=s(c.popover).find(".picker-modal"),s(c.popover).on("close",function(){l()})):c.inline?(c.container=s(c.pickerHTML),c.container.addClass("picker-modal-inline"),s(c.params.container).append(c.container)):(c.container=s(n.pickerModal(c.pickerHTML)),s(c.container).on("close",function(){l()})),c.container[0].f7Picker=c,c.container.find(".picker-items-col").each(function(){var e=!0;(!c.initialized&&c.params.value||c.initialized&&c.value)&&(e=!1),c.initPickerCol(this,e)}),c.initialized?c.value&&c.setValue(c.value,0):c.value?c.setValue(c.value,0):c.params.value&&c.setValue(c.params.value,0),c.input&&c.input.length>0&&n.params.material&&c.input.trigger("focus")),c.opened=!0,c.initialized=!0,c.params.onOpen&&c.params.onOpen(c)},c.close=function(){if(c.opened&&!c.inline)return i()?void n.closeModal(c.popover):void n.closeModal(c.container)},c.destroy=function(){c.close(),c.params.input&&c.input.length>0&&c.input.off("click focus",o),s("html").off("click",r),s(window).off("resize",a)},c.inline?c.open():!c.initialized&&c.params.value&&c.setValue(c.params.value),c};n.picker=function(e){return new b(e)};var C=function(e){function t(){var e=!1;return c.params.convertToPopover||c.params.onlyInPopover?(!c.inline&&c.params.input&&(c.params.onlyInPopover?e=!0:n.device.ios?e=!!n.device.ipad:s(window).width()>=768&&(e=!0)),e):e}function i(){return!!(c.opened&&c.container&&c.container.length>0&&c.container.parents(".popover").length>0)}function a(e){e=new Date(e);var t=e.getFullYear(),i=e.getMonth(),a=i+1,n=e.getDate(),o=e.getDay();return c.params.dateFormat.replace(/yyyy/g,t).replace(/yy/g,(t+"").substring(2)).replace(/mm/g,a<10?"0"+a:a).replace(/m(\W+)/g,a+"$1").replace(/MM/g,c.params.monthNames[i]).replace(/M(\W+)/g,c.params.monthNamesShort[i]+"$1").replace(/dd/g,n<10?"0"+n:n).replace(/d(\W+)/g,n+"$1").replace(/DD/g,c.params.dayNames[o]).replace(/D(\W+)/g,c.params.dayNamesShort[o]+"$1")}function o(e){if(e.preventDefault(),!c.opened&&(c.open(),c.params.scrollToInput&&!t()&&!n.params.material)){var i=c.input.parents(".page-content");if(0===i.length)return;var a,o=parseInt(i.css("padding-top"),10),s=parseInt(i.css("padding-bottom"),10),r=i[0].offsetHeight-o-c.container.height(),l=i[0].scrollHeight-o-c.container.height(),d=c.input.offset().top-o+c.input[0].offsetHeight;if(d>r){var p=i.scrollTop()+d-r;p+r>l&&(a=p+r-l+s,r===l&&(a=c.container.height()),i.css({"padding-bottom":a+"px"})),i.scrollTop(p,300)}}}function r(e){i()||(c.input&&c.input.length>0?e.target!==c.input[0]&&0===s(e.target).parents(".picker-modal").length&&c.close():0===s(e.target).parents(".picker-modal").length&&c.close())}function l(){c.opened=!1,c.input&&c.input.length>0&&(c.input.parents(".page-content").css({"padding-bottom":""}),n.params.material&&c.input.trigger("blur")),c.params.onClose&&c.params.onClose(c),c.destroyCalendarEvents()}var c=this,d={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><span class="current-month-value"></span><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,closeByOutsideClick:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"Done",headerPlaceholder:"Select date",header:n.params.material,footer:n.params.material,toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>',headerTemplate:'<div class="picker-header"><div class="picker-calendar-selected-date">{{placeholder}}</div></div>',footerTemplate:'<div class="picker-footer"><a href="#" class="button close-picker">{{closeText}}</a></div>'};e=e||{};for(var p in d)void 0===e[p]&&(e[p]=d[p]);c.params=e,c.initialized=!1,c.inline=!!c.params.container,c.isH="horizontal"===c.params.direction;var u=c.isH&&n.rtl?-1:1;return c.animating=!1,c.addValue=function(e){if(c.params.multiple){c.value||(c.value=[]);for(var t,i=0;i<c.value.length;i++)new Date(e).getTime()===new Date(c.value[i]).getTime()&&(t=i);void 0===t?c.value.push(e):c.value.splice(t,1),c.updateValue()}else c.params.rangePicker?(c.value||(c.value=[]),2!==c.value.length&&0!==c.value.length||(c.value=[]),c.value[0]!==e?c.value.push(e):c.value=[],c.value.sort(function(e,t){return e-t}),c.updateValue()):(c.value=[e],c.updateValue())},c.setValue=function(e){c.value=e,c.updateValue()},c.updateValue=function(e){var t,i;if(c.container&&c.container.length>0){c.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var o;if(c.params.rangePicker&&2===c.value.length)for(t=c.value[0];t<=c.value[1];t+=864e5)o=new Date(t),c.wrapper.find('.picker-calendar-day[data-date="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]').addClass("picker-calendar-day-selected");else for(t=0;t<c.value.length;t++)o=new Date(c.value[t]),c.wrapper.find('.picker-calendar-day[data-date="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]').addClass("picker-calendar-day-selected")}if(c.params.onChange&&c.params.onChange(c,c.value),c.input&&c.input.length>0||n.params.material&&c.params.header){if(c.params.formatValue)i=c.params.formatValue(c,c.value);else{for(i=[],t=0;t<c.value.length;t++)i.push(a(c.value[t]));i=i.join(c.params.rangePicker?" - ":", ")}n.params.material&&c.params.header&&c.container&&c.container.length>0&&c.container.find(".picker-calendar-selected-date").text(i),c.input&&c.input.length>0&&!e&&(s(c.input).val(i),s(c.input).trigger("change"))}},c.initCalendarEvents=function(){function e(e){r||o||(o=!0,l=m="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,d=m="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=(new Date).getTime(),w=0,k=!0,x=void 0,v=f=c.monthsTranslate)}function t(e){if(o){if(p="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,m="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,void 0===x&&(x=!!(x||Math.abs(m-d)>Math.abs(p-l))),c.isH&&x)return void(o=!1);if(e.preventDefault(),c.animating)return void(o=!1);k=!1,r||(r=!0,b=c.wrapper[0].offsetWidth,C=c.wrapper[0].offsetHeight,c.wrapper.transition(0)),y=c.isH?p-l:m-d,w=y/(c.isH?b:C),f=100*(c.monthsTranslate*u+w),c.wrapper.transform("translate3d("+(c.isH?f:0)+"%, "+(c.isH?0:f)+"%, 0)")}}function i(e){if(!o||!r)return void(o=r=!1);o=r=!1,g=(new Date).getTime(),g-h<300?Math.abs(y)<10?c.resetMonth():y>=10?n.rtl?c.nextMonth():c.prevMonth():n.rtl?c.prevMonth():c.nextMonth():w<=-.5?n.rtl?c.prevMonth():c.nextMonth():w>=.5?n.rtl?c.nextMonth():c.prevMonth():c.resetMonth(),setTimeout(function(){k=!0},100)}function a(e){if(k){var t=s(e.target).parents(".picker-calendar-day");if(0===t.length&&s(e.target).hasClass("picker-calendar-day")&&(t=s(e.target)),0!==t.length&&(!t.hasClass("picker-calendar-day-selected")||c.params.multiple||c.params.rangePicker)&&!t.hasClass("picker-calendar-day-disabled")){c.params.rangePicker||(t.hasClass("picker-calendar-day-next")&&c.nextMonth(),t.hasClass("picker-calendar-day-prev")&&c.prevMonth());var i=t.attr("data-year"),a=t.attr("data-month"),n=t.attr("data-day");c.params.onDayClick&&c.params.onDayClick(c,t[0],i,a,n),c.addValue(new Date(i,a,n).getTime()),c.params.closeOnSelect&&(c.params.rangePicker&&2===c.value.length||!c.params.rangePicker)&&c.close()}}}var o,r,l,d,p,m,h,g,v,f,b,C,w,y,x,k=!0;c.container.find(".picker-calendar-prev-month").on("click",c.prevMonth),c.container.find(".picker-calendar-next-month").on("click",c.nextMonth),c.container.find(".picker-calendar-prev-year").on("click",c.prevYear),c.container.find(".picker-calendar-next-year").on("click",c.nextYear),c.wrapper.on("click",a);var T=!("touchstart"!==n.touchEvents.start||!n.support.passiveListener)&&{passive:!0,capture:!1};c.params.touchMove&&(c.wrapper.on(n.touchEvents.start,e,T),c.wrapper.on(n.touchEvents.move,t),c.wrapper.on(n.touchEvents.end,i,T)),c.container[0].f7DestroyCalendarEvents=function(){c.container.find(".picker-calendar-prev-month").off("click",c.prevMonth),c.container.find(".picker-calendar-next-month").off("click",c.nextMonth),c.container.find(".picker-calendar-prev-year").off("click",c.prevYear),c.container.find(".picker-calendar-next-year").off("click",c.nextYear),c.wrapper.off("click",a),c.params.touchMove&&(c.wrapper.off(n.touchEvents.start,e,T),c.wrapper.off(n.touchEvents.move,t),c.wrapper.off(n.touchEvents.end,i,T))}},c.destroyCalendarEvents=function(e){"f7DestroyCalendarEvents"in c.container[0]&&c.container[0].f7DestroyCalendarEvents()},c.dateInRange=function(e,t){var i,a=!1;if(!t)return!1;if(s.isArray(t))for(i=0;i<t.length;i++)t[i].from||t[i].to?t[i].from&&t[i].to?e<=new Date(t[i].to).getTime()&&e>=new Date(t[i].from).getTime()&&(a=!0):t[i].from?e>=new Date(t[i].from).getTime()&&(a=!0):t[i].to&&e<=new Date(t[i].to).getTime()&&(a=!0):e===new Date(t[i]).getTime()&&(a=!0);else t.from||t.to?t.from&&t.to?e<=new Date(t.to).getTime()&&e>=new Date(t.from).getTime()&&(a=!0):t.from?e>=new Date(t.from).getTime()&&(a=!0):t.to&&e<=new Date(t.to).getTime()&&(a=!0):"function"==typeof t&&(a=t(new Date(e)));return a},c.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},c.monthHTML=function(e,t){e=new Date(e);var i=e.getFullYear(),a=e.getMonth();e.getDate();"next"===t&&(e=11===a?new Date(i+1,0):new Date(i,a+1,1)),"prev"===t&&(e=0===a?new Date(i-1,11):new Date(i,a-1,1)),"next"!==t&&"prev"!==t||(a=e.getMonth(),i=e.getFullYear());var n=c.daysInMonth(new Date(e.getFullYear(),e.getMonth()).getTime()-864e6),o=c.daysInMonth(e),s=new Date(e.getFullYear(),e.getMonth()).getDay();0===s&&(s=7);var r,l,d,p,u,m,h=[],g="",v=c.params.firstDay-1+0,f=(new Date).setHours(0,0,0,0),b=c.params.minDate?new Date(c.params.minDate).getTime():null,C=c.params.maxDate?new Date(c.params.maxDate).getTime():null;if(c.value&&c.value.length)for(l=0;l<c.value.length;l++)h.push(new Date(c.value[l]).setHours(0,0,0,0));for(l=1;l<=6;l++){var w="";for(d=1;d<=7;d++){var y=d;v++;var x=v-s,k=y-1+c.params.firstDay>6?y-1-7+c.params.firstDay:y-1+c.params.firstDay,T="";if(x<0?(x=n+x+1,T+=" picker-calendar-day-prev",r=new Date(a-1<0?i-1:i,a-1<0?11:a-1,x).getTime()):(x+=1,x>o?(x-=o,T+=" picker-calendar-day-next",r=new Date(a+1>11?i+1:i,a+1>11?0:a+1,x).getTime()):r=new Date(i,a,x).getTime()),r===f&&(T+=" picker-calendar-day-today"),c.params.rangePicker&&2===h.length?r>=h[0]&&r<=h[1]&&(T+=" picker-calendar-day-selected"):h.indexOf(r)>=0&&(T+=" picker-calendar-day-selected"),c.params.weekendDays.indexOf(k)>=0&&(T+=" picker-calendar-day-weekend"),m=!1,c.params.events&&c.dateInRange(r,c.params.events)&&(m=!0),m&&(T+=" picker-calendar-day-has-events"),c.params.rangesClasses)for(p=0;p<c.params.rangesClasses.length;p++)c.dateInRange(r,c.params.rangesClasses[p].range)&&(T+=" "+c.params.rangesClasses[p].cssClass);u=!1,(b&&r<b||C&&r>C)&&(u=!0),c.params.disabled&&c.dateInRange(r,c.params.disabled)&&(u=!0),u&&(T+=" picker-calendar-day-disabled"),r=new Date(r);var S=r.getFullYear(),_=r.getMonth();w+='<div data-year="'+S+'" data-month="'+_+'" data-day="'+x+'" class="picker-calendar-day'+T+'" data-date="'+S+"-"+_+"-"+x+'"><span>'+x+"</span></div>"}g+='<div class="picker-calendar-row">'+w+"</div>"}return g='<div class="picker-calendar-month" data-year="'+i+'" data-month="'+a+'">'+g+"</div>"},c.animating=!1,c.updateCurrentMonthYear=function(e){void 0===e?(c.currentMonth=parseInt(c.months.eq(1).attr("data-month"),10),c.currentYear=parseInt(c.months.eq(1).attr("data-year"),10)):(c.currentMonth=parseInt(c.months.eq("next"===e?c.months.length-1:0).attr("data-month"),10),c.currentYear=parseInt(c.months.eq("next"===e?c.months.length-1:0).attr("data-year"),10)),c.container.find(".current-month-value").text(c.params.monthNames[c.currentMonth]),c.container.find(".current-year-value").text(c.currentYear)},c.onMonthChangeStart=function(e){c.updateCurrentMonthYear(e),c.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t="next"===e?c.months.length-1:0;c.months.eq(t).addClass("picker-calendar-month-current"),c.months.eq("next"===e?t-1:t+1).addClass("next"===e?"picker-calendar-month-prev":"picker-calendar-month-next"),c.params.onMonthYearChangeStart&&c.params.onMonthYearChangeStart(c,c.currentYear,c.currentMonth)},c.onMonthChangeEnd=function(e,t){c.animating=!1;var i,a,n;c.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),void 0===e&&(e="next",t=!0),t?(c.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),a=c.monthHTML(new Date(c.currentYear,c.currentMonth),"prev"),i=c.monthHTML(new Date(c.currentYear,c.currentMonth),"next")):n=c.monthHTML(new Date(c.currentYear,c.currentMonth),e),("next"===e||t)&&c.wrapper.append(n||i),("prev"===e||t)&&c.wrapper.prepend(n||a),c.months=c.wrapper.find(".picker-calendar-month"),c.setMonthsTranslate(c.monthsTranslate),c.params.onMonthAdd&&c.params.onMonthAdd(c,"next"===e?c.months.eq(c.months.length-1)[0]:c.months.eq(0)[0]),c.params.onMonthYearChangeEnd&&c.params.onMonthYearChangeEnd(c,c.currentYear,c.currentMonth)},c.setMonthsTranslate=function(e){e=e||c.monthsTranslate||0,void 0===c.monthsTranslate&&(c.monthsTranslate=e),c.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t=100*-(e+1)*u,i=100*-e*u,a=100*-(e-1)*u;c.months.eq(0).transform("translate3d("+(c.isH?t:0)+"%, "+(c.isH?0:t)+"%, 0)").addClass("picker-calendar-month-prev"),c.months.eq(1).transform("translate3d("+(c.isH?i:0)+"%, "+(c.isH?0:i)+"%, 0)").addClass("picker-calendar-month-current"),c.months.eq(2).transform("translate3d("+(c.isH?a:0)+"%, "+(c.isH?0:a)+"%, 0)").addClass("picker-calendar-month-next")},c.nextMonth=function(e){void 0!==e&&"object"!=typeof e||(e="",c.params.animate||(e=0));var t=parseInt(c.months.eq(c.months.length-1).attr("data-month"),10),i=parseInt(c.months.eq(c.months.length-1).attr("data-year"),10),a=new Date(i,t),n=a.getTime(),o=!c.animating;if(c.params.maxDate&&n>new Date(c.params.maxDate).getTime())return c.resetMonth();if(c.monthsTranslate--,t===c.currentMonth){var r=100*-c.monthsTranslate*u,l=s(c.monthHTML(n,"next")).transform("translate3d("+(c.isH?r:0)+"%, "+(c.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next");c.wrapper.append(l[0]),c.months=c.wrapper.find(".picker-calendar-month"),c.params.onMonthAdd&&c.params.onMonthAdd(c,c.months.eq(c.months.length-1)[0])}c.animating=!0,c.onMonthChangeStart("next");var d=100*c.monthsTranslate*u;c.wrapper.transition(e).transform("translate3d("+(c.isH?d:0)+"%, "+(c.isH?0:d)+"%, 0)"),o&&c.wrapper.transitionEnd(function(){c.onMonthChangeEnd("next")}),c.params.animate||c.onMonthChangeEnd("next")},c.prevMonth=function(e){void 0!==e&&"object"!=typeof e||(e="",c.params.animate||(e=0));var t=parseInt(c.months.eq(0).attr("data-month"),10),i=parseInt(c.months.eq(0).attr("data-year"),10),a=new Date(i,t+1,-1),n=a.getTime(),o=!c.animating;if(c.params.minDate&&n<new Date(c.params.minDate).getTime())return c.resetMonth();if(c.monthsTranslate++,t===c.currentMonth){var r=100*-c.monthsTranslate*u,l=s(c.monthHTML(n,"prev")).transform("translate3d("+(c.isH?r:0)+"%, "+(c.isH?0:r)+"%, 0)").addClass("picker-calendar-month-prev");c.wrapper.prepend(l[0]),c.months=c.wrapper.find(".picker-calendar-month"),c.params.onMonthAdd&&c.params.onMonthAdd(c,c.months.eq(0)[0])}c.animating=!0,c.onMonthChangeStart("prev");var d=100*c.monthsTranslate*u;c.wrapper.transition(e).transform("translate3d("+(c.isH?d:0)+"%, "+(c.isH?0:d)+"%, 0)"),o&&c.wrapper.transitionEnd(function(){c.onMonthChangeEnd("prev")}),c.params.animate||c.onMonthChangeEnd("prev")},c.resetMonth=function(e){void 0===e&&(e="");var t=100*c.monthsTranslate*u;c.wrapper.transition(e).transform("translate3d("+(c.isH?t:0)+"%, "+(c.isH?0:t)+"%, 0)")},c.setYearMonth=function(e,t,i){void 0===e&&(e=c.currentYear),void 0===t&&(t=c.currentMonth),void 0!==i&&"object"!=typeof i||(i="",c.params.animate||(i=0));var a;if(a=e<c.currentYear?new Date(e,t+1,-1).getTime():new Date(e,t).getTime(),c.params.maxDate&&a>new Date(c.params.maxDate).getTime())return!1;if(c.params.minDate&&a<new Date(c.params.minDate).getTime())return!1;var n=new Date(c.currentYear,c.currentMonth).getTime(),o=a>n?"next":"prev",s=c.monthHTML(new Date(e,t));c.monthsTranslate=c.monthsTranslate||0;var r,l,d=c.monthsTranslate,p=!c.animating;a>n?(c.monthsTranslate--,c.animating||c.months.eq(c.months.length-1).remove(),c.wrapper.append(s),c.months=c.wrapper.find(".picker-calendar-month"),r=100*-(d-1)*u,c.months.eq(c.months.length-1).transform("translate3d("+(c.isH?r:0)+"%, "+(c.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next")):(c.monthsTranslate++,c.animating||c.months.eq(0).remove(),c.wrapper.prepend(s),c.months=c.wrapper.find(".picker-calendar-month"),r=100*-(d+1)*u,c.months.eq(0).transform("translate3d("+(c.isH?r:0)+"%, "+(c.isH?0:r)+"%, 0)").addClass("picker-calendar-month-prev")),c.params.onMonthAdd&&c.params.onMonthAdd(c,"next"===o?c.months.eq(c.months.length-1)[0]:c.months.eq(0)[0]),c.animating=!0,c.onMonthChangeStart(o),l=100*c.monthsTranslate*u,c.wrapper.transition(i).transform("translate3d("+(c.isH?l:0)+"%, "+(c.isH?0:l)+"%, 0)"),p&&c.wrapper.transitionEnd(function(){c.onMonthChangeEnd(o,!0)}),c.params.animate||c.onMonthChangeEnd(o)},c.nextYear=function(){c.setYearMonth(c.currentYear+1)},c.prevYear=function(){c.setYearMonth(c.currentYear-1)},c.layout=function(){var e,t="",i="",a=c.value&&c.value.length?c.value[0]:(new Date).setHours(0,0,0,0),n=c.monthHTML(a,"prev"),o=c.monthHTML(a),s=c.monthHTML(a,"next"),r='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(n+o+s)+"</div></div>",l="";if(c.params.weekHeader){for(e=0;e<7;e++){var d=e+c.params.firstDay>6?e-7+c.params.firstDay:e+c.params.firstDay,p=c.params.dayNamesShort[d];l+='<div class="picker-calendar-week-day '+(c.params.weekendDays.indexOf(d)>=0?"picker-calendar-week-day-weekend":"")+'"> '+p+"</div>"}l='<div class="picker-calendar-week-days">'+l+"</div>"}i="picker-modal picker-calendar"+(c.params.rangePicker?" picker-calendar-range":"")+(c.params.cssClass?" "+c.params.cssClass:"");var u=c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText):"";c.params.toolbar&&(u=c.params.toolbarTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText).replace(/{{monthPicker}}/g,c.params.monthPicker?c.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,c.params.yearPicker?c.params.yearPickerTemplate:"")),t='<div class="'+i+'">'+(c.params.header?c.params.headerTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText).replace(/{{placeholder}}/g,c.params.headerPlaceholder):"")+(c.params.footer?c.params.footerTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText):"")+u+'<div class="picker-modal-inner">'+l+r+"</div></div>",c.pickerHTML=t},c.params.input&&(c.input=s(c.params.input),c.input.length>0&&(c.params.inputReadOnly&&c.input.prop("readOnly",!0),c.inline||c.input.on("click",o),c.params.inputReadOnly&&c.input.on("focus mousedown",function(e){e.preventDefault()}))),!c.inline&&c.params.closeByOutsideClick&&s("html").on("click",r),c.opened=!1,c.open=function(){var e=t(),i=!1;c.opened||(c.value||c.params.value&&(c.value=c.params.value,i=!0),c.layout(),e?(c.pickerHTML='<div class="popover popover-picker-calendar"><div class="popover-inner">'+c.pickerHTML+"</div></div>",c.popover=n.popover(c.pickerHTML,c.params.input,!0),c.container=s(c.popover).find(".picker-modal"),s(c.popover).on("close",function(){l()})):c.inline?(c.container=s(c.pickerHTML),c.container.addClass("picker-modal-inline"),s(c.params.container).append(c.container)):(c.container=s(n.pickerModal(c.pickerHTML)),s(c.container).on("close",function(){l()})),c.container[0].f7Calendar=c,c.wrapper=c.container.find(".picker-calendar-months-wrapper"),c.months=c.wrapper.find(".picker-calendar-month"),c.updateCurrentMonthYear(),c.monthsTranslate=0,c.setMonthsTranslate(),c.initCalendarEvents(),i?c.updateValue():n.params.material&&c.value&&c.updateValue(!0),c.input&&c.input.length>0&&n.params.material&&c.input.trigger("focus")),c.opened=!0,c.initialized=!0,c.params.onMonthAdd&&c.months.each(function(){c.params.onMonthAdd(c,this)}),c.params.onOpen&&c.params.onOpen(c)},c.close=function(){if(c.opened&&!c.inline)return i()?void n.closeModal(c.popover):void n.closeModal(c.container)},c.destroy=function(){c.close(),c.params.input&&c.input.length>0&&c.input.off("click focus",o),s("html").off("click",r)},c.inline?c.open():!c.initialized&&c.params.value&&c.setValue(c.params.value),c};n.calendar=function(e){return new C(e)};var w;n.addNotification=function(e){if(e){void 0===e.media&&(e.media=n.params.notificationMedia),void 0===e.title&&(e.title=n.params.notificationTitle),void 0===e.subtitle&&(e.subtitle=n.params.notificationSubtitle),void 0===e.closeIcon&&(e.closeIcon=n.params.notificationCloseIcon),void 0===e.hold&&(e.hold=n.params.notificationHold),void 0===e.closeOnClick&&(e.closeOnClick=n.params.notificationCloseOnClick),void 0===e.button&&(e.button=n.params.notificationCloseButtonText&&{text:n.params.notificationCloseButtonText,close:!0}),w||(w=document.createElement("div")),e.material=n.params.material;var t=s(".notifications");0===t.length&&(n.root.append('<div class="notifications list-block'+(e.material?"":" media-list")+'"><ul></ul></div>'),t=s(".notifications"));var i=t.children("ul"),a=n.params.notificationTemplate||'{{#if custom}}<li>{{custom}}</li>{{else}}<li class="notification-item notification-hidden"><div class="item-content">{{#if material}}<div class="item-inner"><div class="item-title">{{js "this.message || this.title || this.subtitle"}}</div>{{#if ../button}}{{#button}}<div class="item-after"><a href="#" class="button {{#if color}}color-{{color}}{{/if}} {{#js_compare "this.close !== false"}}close-notification{{/js_compare}}">{{text}}</a></div>{{/button}}{{/if}}</div>{{else}}{{#if media}}<div class="item-media">{{media}}</div>{{/if}}<div class="item-inner"><div class="item-title-row">{{#if title}}<div class="item-title">{{title}}</div>{{/if}}{{#if closeIcon}}<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>{{/if}}</div>{{#if subtitle}}<div class="item-subtitle">{{subtitle}}</div>{{/if}}{{#if message}}<div class="item-text">{{message}}</div></div>{{/if}}{{/if}}</div></li>{{/if}}';n._compiledTemplates.notification||(n._compiledTemplates.notification=r.compile(a)),w.innerHTML=n._compiledTemplates.notification(e);var o=s(w).children();o.on("click",function(t){var i=!1,a=s(t.target);e.material&&a.hasClass("button")&&e.button&&e.button.onClick&&e.button.onClick.call(a[0],t,o[0]),a.is(".close-notification")||s(t.target).parents(".close-notification").length>0?i=!0:(e.onClick&&e.onClick(t,o[0]),e.closeOnClick&&(i=!0)),i&&n.closeNotification(o[0])}),e.onClose&&o.data("f7NotificationOnClose",function(){e.onClose(o[0])}),e.additionalClass&&o.addClass(e.additionalClass),e.hold&&setTimeout(function(){o.length>0&&n.closeNotification(o[0])},e.hold),n.params.material||n.closeNotification(i.children("li.notification-item:last-child")),i.append(o[0]),t.show();var l=o.outerHeight();return e.material?(t.transform("translate3d(0, "+l+"px, 0)"),t.transition(0),o[0].clientLeft,t.transform("translate3d(0, 0, 0)"),t.transition("")):(o.transform("translate3d(0,"+-l+"px,0)"),o.transition(0),o[0].clientLeft,o.transition(""),o.transform("translate3d(0,0px,0)")),t.transform("translate3d(0, 0,0)"),o.removeClass("notification-hidden"),o[0]}},n.closeNotification=function(e){if(e=s(e),0!==e.length&&!e.hasClass("notification-item-removing")){var t=s(".notifications"),i=e.outerHeight();e.css("height",i+"px").transition(0).addClass("notification-item-removing");e[0].clientLeft;e.css({height:"0px",marginBottom:"0px"}).transition(""),e.data("f7NotificationOnClose")&&e.data("f7NotificationOnClose")(),0===t.find(".notification-item:not(.notification-item-removing)").length&&t.transform(""),e.addClass("notification-hidden").transitionEnd(function(){e.remove(),0===t.find(".notification-item").length&&t.hide()})}},n.initTemplate7Templates=function(){window.Template7&&(Template7.templates=Template7.templates||n.params.templates||{},Template7.data=Template7.data||n.params.template7Data||{},Template7.cache=Template7.cache||{},n.templates=Template7.templates,n.template7Data=Template7.data,n.template7Cache=Template7.cache,n.params.precompileTemplates&&s('script[type="text/template7"]').each(function(){var e=s(this).attr("id");e&&(Template7.templates[e]=Template7.compile(s(this).html()))}))};var y=[];return n.initPlugins=function(){for(var e in n.plugins){var t=n.plugins[e](n,n.params[e]);t&&y.push(t)}},n.pluginHook=function(e){for(var t=0;t<y.length;t++)y[t].hooks&&e in y[t].hooks&&y[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},n.pluginPrevent=function(e){for(var t=!1,i=0;i<y.length;i++)y[i].prevents&&e in y[i].prevents&&y[i].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},n.pluginProcess=function(e,t){for(var i=t,a=0;a<y.length;a++)y[a].preprocess&&e in y[a].preprocess&&(i=y[a].preprocess[e](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return i},n.init=function(){n.initTemplate7Templates&&n.initTemplate7Templates(),n.initPlugins&&n.initPlugins(),n.getDeviceInfo&&n.getDeviceInfo(),n.initFastClicks&&n.params.fastClicks&&n.initFastClicks(),n.initClickEvents&&n.initClickEvents(),s(".page:not(.cached)").each(function(){n.initPageWithCallback(this)}),s(".navbar:not(.cached)").each(function(){n.initNavbarWithCallback(this)}),n.initResize&&n.initResize(),n.initPushState&&n.params.pushState&&n.initPushState(),n.initSwipeout&&n.params.swipeout&&n.initSwipeout(),n.initSortable&&n.params.sortable&&n.initSortable(),n.initSwipePanels&&(n.params.swipePanel||n.params.swipePanelOnlyClose)&&n.initSwipePanels(),n.params.material&&n.initMaterialWatchInputs&&n.initMaterialWatchInputs(),n.params.onAppInit&&n.params.onAppInit(),n.pluginHook("appInit")},n.params.init&&n.init(),n};var e=function(){var e=function(e){var t=this,i=0;for(i=0;i<e.length;i++)t[i]=e[i];return t.length=e.length,this},t=function(t,i){var a=[],n=0;if(t&&!i&&t instanceof e)return t;if(t)if("string"==typeof t){var o,s,r;if(t=r=t.trim(),r.indexOf("<")>=0&&r.indexOf(">")>=0){var l="div";for(0===r.indexOf("<li")&&(l="ul"),0===r.indexOf("<tr")&&(l="tbody"),0!==r.indexOf("<td")&&0!==r.indexOf("<th")||(l="tr"),0===r.indexOf("<tbody")&&(l="table"),0===r.indexOf("<option")&&(l="select"),s=document.createElement(l),s.innerHTML=r,n=0;n<s.childNodes.length;n++)a.push(s.childNodes[n])}else for(o=i||"#"!==t[0]||t.match(/[ .<>:~]/)?(i||document).querySelectorAll(t):[document.getElementById(t.split("#")[1])],n=0;n<o.length;n++)o[n]&&a.push(o[n])}else if(t.nodeType||t===window||t===document)a.push(t);else if(t.length>0&&t[0].nodeType)for(n=0;n<t.length;n++)a.push(t[n]);return new e(a)};e.prototype={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i++)for(var a=0;a<this.length;a++)void 0!==this[a].classList&&this[a].classList.add(t[i]);return this},removeClass:function(e){
for(var t=e.split(" "),i=0;i<t.length;i++)for(var a=0;a<this.length;a++)void 0!==this[a].classList&&this[a].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)for(var a=0;a<this.length;a++)void 0!==this[a].classList&&this[a].classList.toggle(t[i]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i++)if(2===arguments.length)this[i].setAttribute(e,t);else for(var a in e)this[i][a]=e[a],this[i].setAttribute(a,e[a]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},prop:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0][e]:void 0;for(var i=0;i<this.length;i++)if(2===arguments.length)this[i][e]=t;else for(var a in e)this[i][a]=e[a];return this},data:function(e,t){if(void 0!==t){for(var i=0;i<this.length;i++){var a=this[i];a.dom7ElementDataStorage||(a.dom7ElementDataStorage={}),a.dom7ElementDataStorage[e]=t}return this}if(this[0]){if(this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage)return this[0].dom7ElementDataStorage[e];var n=this[0].getAttribute("data-"+e);return n||void 0}},removeData:function(e){for(var t=0;t<this.length;t++){var i=this[t];i.dom7ElementDataStorage&&i.dom7ElementDataStorage[e]&&(i.dom7ElementDataStorage[e]=null,delete i.dom7ElementDataStorage[e])}},dataset:function(){var e=this[0];if(e){var i={};if(e.dataset)for(var a in e.dataset)i[a]=e.dataset[a];else for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];o.name.indexOf("data-")>=0&&(i[t.toCamelCase(o.name.split("data-")[1])]=o.value)}for(var s in i)"false"===i[s]?i[s]=!1:"true"===i[s]?i[s]=!0:parseFloat(i[s])===1*i[s]&&(i[s]=1*i[s]);return i}},val:function(e){if(void 0===e)return this[0]?this[0].value:void 0;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var i=this[t].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=e}return this},on:function(e,i,a,n){function o(e){var n=e.target;if(t(n).is(i))a.call(n,e);else for(var o=t(n).parents(),s=0;s<o.length;s++)t(o[s]).is(i)&&a.call(o[s],e)}var s,r,l=e.split(" ");for(s=0;s<this.length;s++)if("function"==typeof i||!1===i)for("function"==typeof i&&(a=arguments[1],n=arguments[2]||!1),r=0;r<l.length;r++)this[s].addEventListener(l[r],a,n);else for(r=0;r<l.length;r++)this[s].dom7LiveListeners||(this[s].dom7LiveListeners=[]),this[s].dom7LiveListeners.push({listener:a,liveListener:o}),this[s].addEventListener(l[r],o,n);return this},off:function(e,t,i,a){for(var n=e.split(" "),o=0;o<n.length;o++)for(var s=0;s<this.length;s++)if("function"==typeof t||!1===t)"function"==typeof t&&(i=arguments[1],a=arguments[2]||!1),this[s].removeEventListener(n[o],i,a);else if(this[s].dom7LiveListeners)for(var r=0;r<this[s].dom7LiveListeners.length;r++)this[s].dom7LiveListeners[r].listener===i&&this[s].removeEventListener(n[o],this[s].dom7LiveListeners[r].liveListener,a);return this},once:function(e,t,i,a){function n(s){i.call(s.target,s),o.off(e,t,n,a)}var o=this;return"function"==typeof t&&(i=arguments[1],a=arguments[2],t=!1),o.on(e,t,n,a)},trigger:function(e,t){for(var i=e.split(" "),a=0;a<i.length;a++)for(var n=0;n<this.length;n++){var o;try{o=new CustomEvent(i[a],{detail:t,bubbles:!0,cancelable:!0})}catch(e){o=document.createEvent("Event"),o.initEvent(i[a],!0,!0),o.detail=t}this[n].dispatchEvent(o)}return this},transitionEnd:function(e){function t(o){if(o.target===this)for(e.call(this,o),i=0;i<a.length;i++)n.off(a[i],t)}var i,a=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],n=this;if(e)for(i=0;i<a.length;i++)n.on(a[i],t);return this},animationEnd:function(e){function t(o){for(e(o),i=0;i<a.length;i++)n.off(a[i],t)}var i,a=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],n=this;if(e)for(i=0;i<a.length;i++)n.on(a[i],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),i=document.body,a=e.clientTop||i.clientTop||0,n=e.clientLeft||i.clientLeft||0,o=window.pageYOffset||e.scrollTop,s=window.pageXOffset||e.scrollLeft;return{top:t.top+o-a,left:t.left+s-n}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},styles:function(){return this[0]?window.getComputedStyle(this[0],null):void 0},css:function(e,t){var i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i++)for(var a in e)this[i].style[a]=e[a];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i++)this[i].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},filter:function(t){for(var i=[],a=this,n=0;n<a.length;n++)t.call(a[n],n,a[n])&&i.push(a[n]);return new e(i)},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e;return this},is:function(i){if(!this[0]||void 0===i)return!1;var a,n;if("string"==typeof i){var o=this[0];if(o===document)return i===document;if(o===window)return i===window;if(o.matches)return o.matches(i);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(i);if(o.mozMatchesSelector)return o.mozMatchesSelector(i);if(o.msMatchesSelector)return o.msMatchesSelector(i);for(a=t(i),n=0;n<a.length;n++)if(a[n]===this[0])return!0;return!1}if(i===document)return this[0]===document;if(i===window)return this[0]===window;if(i.nodeType||i instanceof e){for(a=i.nodeType?[i]:i,n=0;n<a.length;n++)if(a[n]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(t){if(void 0===t)return this;var i,a=this.length;return t>a-1?new e([]):t<0?(i=a+t,new e(i<0?[]:[this[i]])):new e([this[t]])},append:function(t){var i,a;for(i=0;i<this.length;i++)if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)this[i].appendChild(n.firstChild)}else if(t instanceof e)for(a=0;a<t.length;a++)this[i].appendChild(t[a]);else this[i].appendChild(t);return this},appendTo:function(e){return t(e).append(this),this},prepend:function(t){var i,a;for(i=0;i<this.length;i++)if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t,a=n.childNodes.length-1;a>=0;a--)this[i].insertBefore(n.childNodes[a],this[i].childNodes[0])}else if(t instanceof e)for(a=0;a<t.length;a++)this[i].insertBefore(t[a],this[i].childNodes[0]);else this[i].insertBefore(t,this[i].childNodes[0]);return this},prependTo:function(e){return t(e).prepend(this),this},insertBefore:function(e){for(var i=t(e),a=0;a<this.length;a++)if(1===i.length)i[0].parentNode.insertBefore(this[a],i[0]);else if(i.length>1)for(var n=0;n<i.length;n++)i[n].parentNode.insertBefore(this[a].cloneNode(!0),i[n])},insertAfter:function(e){for(var i=t(e),a=0;a<this.length;a++)if(1===i.length)i[0].parentNode.insertBefore(this[a],i[0].nextSibling);else if(i.length>1)for(var n=0;n<i.length;n++)i[n].parentNode.insertBefore(this[a].cloneNode(!0),i[n].nextSibling)},next:function(i){return new e(this.length>0?i?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(i)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(i){var a=[],n=this[0];if(!n)return new e([]);for(;n.nextElementSibling;){var o=n.nextElementSibling;i?t(o).is(i)&&a.push(o):a.push(o),n=o}return new e(a)},prev:function(i){return new e(this.length>0?i?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(i)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(i){var a=[],n=this[0];if(!n)return new e([]);for(;n.previousElementSibling;){var o=n.previousElementSibling;i?t(o).is(i)&&a.push(o):a.push(o),n=o}return new e(a)},siblings:function(e){return this.nextAll(e).add(this.prevAll(e))},parent:function(e){for(var i=[],a=0;a<this.length;a++)null!==this[a].parentNode&&(e?t(this[a].parentNode).is(e)&&i.push(this[a].parentNode):i.push(this[a].parentNode));return t(t.unique(i))},parents:function(e){for(var i=[],a=0;a<this.length;a++)for(var n=this[a].parentNode;n;)e?t(n).is(e)&&i.push(n):i.push(n),n=n.parentNode;return t(t.unique(i))},closest:function(t){var i=this;return void 0===t?new e([]):(i.is(t)||(i=i.parents(t).eq(0)),i)},find:function(t){for(var i=[],a=0;a<this.length;a++)for(var n=this[a].querySelectorAll(t),o=0;o<n.length;o++)i.push(n[o]);return new e(i)},children:function(i){for(var a=[],n=0;n<this.length;n++)for(var o=this[n].childNodes,s=0;s<o.length;s++)i?1===o[s].nodeType&&t(o[s]).is(i)&&a.push(o[s]):1===o[s].nodeType&&a.push(o[s]);return new e(t.unique(a))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()},add:function(){var e,i,a=this;for(e=0;e<arguments.length;e++){var n=t(arguments[e]);for(i=0;i<n.length;i++)a[a.length]=n[i],a.length++}return a},empty:function(){for(var e=0;e<this.length;e++){var t=this[e];if(1===t.nodeType){for(var i=0;i<t.childNodes.length;i++)t.childNodes[i].parentNode&&t.childNodes[i].parentNode.removeChild(t.childNodes[i]);t.textContent=""}}return this}},function(){for(var i="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),a="resize scroll".split(" "),n=0;n<i.length;n++)!function(i){e.prototype[i]=function(e,n,o){var s;if(void 0===e){for(s=0;s<this.length;s++)a.indexOf(i)<0&&(i in this[s]?this[s][i]():t(this[s]).trigger(i));return this}return this.on(i,e,n,o)}}(i[n])}();var i={};t.ajaxSetup=function(e){e.type&&(e.method=e.type),t.each(e,function(e,t){i[e]=t})};var a=0;t.ajax=function(e){function n(a,n,o){var s=arguments;a&&t(document).trigger(a,n),o&&(o in i&&i[o](s[3],s[4],s[5],s[6]),e[o]&&e[o](s[3],s[4],s[5],s[6]))}var o={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},s=["beforeSend","error","complete","success","statusCode"];e.type&&(e.method=e.type),t.each(i,function(e,t){s.indexOf(e)<0&&(o[e]=t)}),t.each(o,function(t,i){t in e||(e[t]=i)}),e.url||(e.url=window.location.toString());var r=e.url.indexOf("?")>=0?"&":"?",l=e.method.toUpperCase();if(("GET"===l||"HEAD"===l||"OPTIONS"===l||"DELETE"===l)&&e.data){var c;c="string"==typeof e.data?e.data.indexOf("?")>=0?e.data.split("?")[1]:e.data:t.serializeObject(e.data),c.length&&(e.url+=r+c,"?"===r&&(r="&"))}if("json"===e.dataType&&e.url.indexOf("callback=")>=0){var d,p="f7jsonp_"+Date.now()+a++,u=e.url.split("callback="),m=u[0]+"callback="+p;if(u[1].indexOf("&")>=0){var h=u[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");h.length>0&&(m+="&"+h)}var g=document.createElement("script");return g.type="text/javascript",g.onerror=function(){clearTimeout(d),n(void 0,void 0,"error",null,"scripterror")},g.src=m,window[p]=function(e){clearTimeout(d),n(void 0,void 0,"success",e),g.parentNode.removeChild(g),g=null,delete window[p]},document.querySelector("head").appendChild(g),void(e.timeout>0&&(d=setTimeout(function(){g.parentNode.removeChild(g),g=null,n(void 0,void 0,"error",null,"timeout")},e.timeout)))}"GET"!==l&&"HEAD"!==l&&"OPTIONS"!==l&&"DELETE"!==l||!1===e.cache&&(e.url+=r+"_nocache="+Date.now());var v=new XMLHttpRequest;v.requestUrl=e.url,v.requestParameters=e,v.open(l,e.url,e.async,e.user,e.password);var f=null;if(("POST"===l||"PUT"===l||"PATCH"===l)&&e.data)if(e.processData){var b=[ArrayBuffer,Blob,Document,FormData];if(b.indexOf(e.data.constructor)>=0)f=e.data;else{var C="---------------------------"+Date.now().toString(16);"multipart/form-data"===e.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+C):v.setRequestHeader("Content-Type",e.contentType),f="";var w=t.serializeObject(e.data);if("multipart/form-data"===e.contentType){C="---------------------------"+Date.now().toString(16),w=w.split("&");for(var y=[],x=0;x<w.length;x++)y.push('Content-Disposition: form-data; name="'+w[x].split("=")[0]+'"\r\n\r\n'+w[x].split("=")[1]+"\r\n");f="--"+C+"\r\n"+y.join("--"+C+"\r\n")+"--"+C+"--\r\n"}else f="application/x-www-form-urlencoded"===e.contentType?w:w.replace(/&/g,"\r\n")}}else f=e.data;e.headers&&t.each(e.headers,function(e,t){v.setRequestHeader(e,t)}),void 0===e.crossDomain&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.xhrFields&&t.each(e.xhrFields,function(e,t){v[e]=t});var k;return v.onload=function(t){if(k&&clearTimeout(k),v.status>=200&&v.status<300||0===v.status){var a;if("json"===e.dataType)try{a=JSON.parse(v.responseText),n("ajaxSuccess",{xhr:v},"success",a,v.status,v)}catch(e){n("ajaxError",{xhr:v,parseerror:!0},"error",v,"parseerror")}else a="text"===v.responseType||""===v.responseType?v.responseText:v.response,n("ajaxSuccess",{xhr:v},"success",a,v.status,v)}else n("ajaxError",{xhr:v},"error",v,v.status);e.statusCode&&(i.statusCode&&i.statusCode[v.status]&&i.statusCode[v.status](v),e.statusCode[v.status]&&e.statusCode[v.status](v)),n("ajaxComplete",{xhr:v},"complete",v,v.status)},v.onerror=function(e){k&&clearTimeout(k),n("ajaxError",{xhr:v},"error",v,v.status)},n("ajaxStart",{xhr:v},"start",v),n(void 0,void 0,"beforeSend",v),e.timeout>0&&(v.onabort=function(){k&&clearTimeout(k)},k=setTimeout(function(){v.abort(),n("ajaxError",{xhr:v,timeout:!0},"error",v,"timeout"),n("ajaxComplete",{xhr:v,timeout:!0},"complete",v,"timeout")},e.timeout)),v.send(f),v},function(){for(var e="get post getJSON".split(" "),i=0;i<e.length;i++)!function(e){t[e]=function(i,a,n,o){return t.ajax({url:i,method:"post"===e?"POST":"GET",data:"function"==typeof a?void 0:a,success:"function"==typeof a?a:n,error:"function"==typeof a?n:o,dataType:"getJSON"===e?"json":void 0})}}(e[i])}(),t.parseUrlQuery=function(e){var t,i,a,e=e||location.href,n={};if("string"==typeof e&&e.length){if(e=e.indexOf("#")>-1?e.split("#")[0]:e,!(e.indexOf("?")>-1))return n;for(e=e.split("?")[1],i=e.split("&"),t=0;t<i.length;t++)a=i[t].split("="),n[a[0]]=a[1]}return n},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},t.each=function(i,a){if("object"==typeof i&&a){var n,o;if(t.isArray(i)||i instanceof e)for(n=0;n<i.length;n++)a(n,i[n]);else for(o in i)i.hasOwnProperty(o)&&a(o,i[o])}},t.unique=function(e){for(var t=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t},t.serializeObject=t.param=function(e,i){function a(e){if(i.length>0){for(var t="",a=0;a<i.length;a++)t+=0===a?i[a]:"["+encodeURIComponent(i[a])+"]";return t+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function n(e){return encodeURIComponent(e)}if("string"==typeof e)return e;var o=[];i=i||[];var s;for(var r in e)if(e.hasOwnProperty(r)){var l;if(t.isArray(e[r])){l=[];for(var c=0;c<e[r].length;c++)t.isArray(e[r][c])||"object"!=typeof e[r][c]?l.push(a(r)+"[]="+n(e[r][c])):(s=i.slice(),s.push(r),s.push(c+""),l.push(t.serializeObject(e[r][c],s)));l.length>0&&o.push(l.join("&"))}else null===e[r]?o.push(a(r)+"="):"object"==typeof e[r]?(s=i.slice(),s.push(r),""!==(l=t.serializeObject(e[r],s))&&o.push(l)):void 0!==e[r]&&""!==e[r]&&o.push(a(r)+"="+n(e[r]))}return o.join("&")},t.toCamelCase=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},t.dataset=function(e){return t(e).dataset()},t.getTranslate=function(e,t){var i,a,n,o;return void 0===t&&(t="x"),n=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(a=n.transform||n.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),o=new WebKitCSSMatrix("none"===a?"":a)):(o=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),"x"===t&&(a=window.WebKitCSSMatrix?o.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(a=window.WebKitCSSMatrix?o.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),a||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},t.cancelAnimationFrame=function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)},t.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch);for(var n=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],o={},s=0;s<n.length;s++)for(var r=n[s].letters,l=0;l<r.length;l++)o[r[l]]=n[s].base;return t.removeDiacritics=function(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return o[e]||e})},t.fn=e.prototype,t.fn.scrollTo=function(e,i,a,n,o){return 4===arguments.length&&"function"==typeof n&&(o=n,n=void 0),this.each(function(){function s(e){void 0===e&&(e=(new Date).getTime()),null===b&&(b=e);var i,c=Math.max(Math.min((e-b)/a,1),0),d="linear"===n?c:.5-Math.cos(c*Math.PI)/2;if(v&&(m=r+d*(p-r)),f&&(h=l+d*(u-l)),v&&p>r&&m>=p&&(g.scrollTop=p,i=!0),v&&p<r&&m<=p&&(g.scrollTop=p,i=!0),f&&u>l&&h>=u&&(g.scrollLeft=u,i=!0),f&&u<l&&h<=u&&(g.scrollLeft=u,i=!0),i)return void(o&&o());v&&(g.scrollTop=m),f&&(g.scrollLeft=h),t.requestAnimationFrame(s)}var r,l,c,d,p,u,m,h,g=this,v=i>0||0===i,f=e>0||0===e;if(void 0===n&&(n="swing"),v&&(r=g.scrollTop,a||(g.scrollTop=i)),f&&(l=g.scrollLeft,a||(g.scrollLeft=e)),a){v&&(c=g.scrollHeight-g.offsetHeight,p=Math.max(Math.min(i,c),0)),f&&(d=g.scrollWidth-g.offsetWidth,u=Math.max(Math.min(e,d),0));var b=null;v&&p===r&&(v=!1),f&&u===l&&(f=!1),t.requestAnimationFrame(s)}})},t.fn.scrollTop=function(e,t,i,a){3===arguments.length&&"function"==typeof i&&(a=i,i=void 0);var n=this;return void 0===e?n.length>0?n[0].scrollTop:null:n.scrollTo(void 0,e,t,i,a)},t.fn.scrollLeft=function(e,t,i,a){3===arguments.length&&"function"==typeof i&&(a=i,i=void 0);var n=this;return void 0===e?n.length>0?n[0].scrollLeft:null:n.scrollTo(e,void 0,t,i,a)},t}();Framework7.$=e;var t=e;window.Dom7=e;var a=function(e,i,a){i=i||{},a=a||{};var n={duration:300,easing:"swing"};for(var o in n)void 0===a[o]&&(a[o]=n[o]);var s=this;if(s.params=a,s.props=i,s.elements=t(e),0===s.elements.length)return s;s.easingProgress=function(e,t){return"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t},s.stop=function(){s.frameId&&t.cancelAnimationFrame(s.frameId),s.animating=!1,s.elements.each(function(e,t){delete t.animate7Instance}),s.que=[]},s.done=function(t){if(s.animating=!1,s.elements.each(function(e,t){delete t.animate7Instance}),t&&t(e),s.que.length>0){var i=s.que.shift();s.animate(i[0],i[1])}},s.animating=!1,s.que=[],s.animate=function(i,a){function n(){r=(new Date).getTime();var m,h,g;u||(u=!0,a.begin&&a.begin(e)),null===c&&(c=r),a.progress&&a.progress(s.elements,Math.max(Math.min((r-c)/a.duration,1),0),c+a.duration-r<0?0:c+a.duration-r,c);for(var v=0;v<o.length;v++)if(!l&&(g=o[v],!g.done))for(var f in i){if(m=Math.max(Math.min((r-c)/a.duration,1),0),h=s.easingProgress(a.easing,m),g[f].currentValue=g[f].initialValue+h*(g[f].finalValue-g[f].initialValue),(g[f].finalValue>g[f].initialValue&&g[f].currentValue>=g[f].finalValue||g[f].finalValue<g[f].initialValue&&g[f].currentValue<=g[f].finalValue)&&(g._container.style[f]=g[f].finalValue+g[f].unit,p++,p===Object.keys(i).length&&(g.done=!0,d++),d===o.length&&(l=!0)),l)return s.done(a.complete),s;g._container.style[f]=g[f].currentValue+g[f].unit}s.frameId=t.requestAnimationFrame(n)}if(s.animating)return s.que.push([i,a]),s;s.params=a;var o=[];s.elements.each(function(e,t){var a,n,s,r,l;o[e]={_container:t};for(var c in i)a=window.getComputedStyle(t,null).getPropertyValue(c).replace(",","."),n=parseFloat(a),s=a.replace(n,""),r=i[c],l=i[c]+s,o[e][c]={initialFullValue:a,initialValue:n,unit:s,finalValue:r,finalFullValue:l,currentValue:n}});var r,l,c=null,d=0,p=0,u=!1;return s.animating=!0,s.frameId=t.requestAnimationFrame(n),s};for(var r,l=0;l<s.elements.length;l++)s.elements[l].animate7Instance?r=s.elements[l].animate7Instance:s.elements[l].animate7Instance=s;return r?r.animate(i,a):(s.animate(i,a),s)};window.Animate7=function(e,t,i){return new a(e,t,i)},e.fn.animate=function(e,t){return new a(this,e,t),this},Framework7.prototype.support=function(){return{touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(e){}return e}()}}(),Framework7.prototype.device=function(){var t={},i=navigator.userAgent,a=e,n=i.match(/(Android);?[\s\/]+([\d.]+)?/),o=i.match(/(iPad).*OS\s([\d_]+)/),s=i.match(/(iPod)(.*OS\s([\d_]+))?/),r=!o&&i.match(/(iPhone\sOS)\s([\d_]+)/);if(t.ios=t.android=t.iphone=t.ipad=t.androidChrome=!1,n&&(t.os="android",t.osVersion=n[2],t.android=!0,t.androidChrome=i.toLowerCase().indexOf("chrome")>=0),(o||r||s)&&(t.os="ios",t.ios=!0),r&&!s&&(t.osVersion=r[2].replace(/_/g,"."),t.iphone=!0),o&&(t.osVersion=o[2].replace(/_/g,"."),t.ipad=!0),s&&(t.osVersion=s[3]?s[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&i.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=i.toLowerCase().split("version/")[1].split(" ")[0]),t.webView=(r||o||s)&&i.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split(".");t.minimalUi=!t.webView&&(s||r)&&(1*l[0]==7?1*l[1]>=1:1*l[0]>7)&&a('meta[name="viewport"]').length>0&&a('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var c=a(window).width(),d=a(window).height();t.statusBar=!1,t.webView&&c*d==screen.width*screen.height?t.statusBar=!0:t.statusBar=!1;var p=[];if(t.pixelRatio=window.devicePixelRatio||1,p.push("pixel-ratio-"+Math.floor(t.pixelRatio)),t.pixelRatio>=2&&p.push("retina"),t.os&&(p.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var u=parseInt(t.osVersion.split(".")[0],10),m=u-1;m>=6;m--)p.push("ios-gt-"+m);return t.statusBar?p.push("with-statusbar-overlay"):a("html").removeClass("with-statusbar-overlay"),p.length>0&&a("html").addClass(p.join(" ")),t}(),Framework7.prototype.plugins={},window.Template7=function(){function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"function"==typeof e}function i(e){return"undefined"!=typeof window&&window.escape?window.escape(e):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function a(e){var t,i,a,n=e.replace(/[{}#}]/g,"").split(" "),r=[];for(i=0;i<n.length;i++){var l,c,d=n[i];if(0===i)r.push(d);else if(0===d.indexOf('"')||0===d.indexOf("'"))if(l=0===d.indexOf('"')?s:o,c=0===d.indexOf('"')?'"':"'",2===d.match(l).length)r.push(d);else{for(t=0,a=i+1;a<n.length;a++)if(d+=" "+n[a],n[a].indexOf(c)>=0){t=a,r.push(d);break}t&&(i=t)}else if(d.indexOf("=")>0){var p=d.split("="),u=p[0],m=p[1];if(2!==m.match(l).length){for(t=0,a=i+1;a<n.length;a++)if(m+=" "+n[a],n[a].indexOf(c)>=0){t=a;break}t&&(i=t)}var h=[u,m.replace(l,"")];r.push(h)}else r.push(d)}return r}function n(t){var i,n,o=[];if(!t)return[];var s=t.split(/({{[^{^}]*}})/);for(i=0;i<s.length;i++){var r=s[i];if(""!==r)if(r.indexOf("{{")<0)o.push({type:"plain",content:r});else{if(r.indexOf("{/")>=0)continue;if(r.indexOf("{#")<0&&r.indexOf(" ")<0&&r.indexOf("else")<0){o.push({type:"variable",contextName:r.replace(/[{}]/g,"")});continue}var l=a(r),c=l[0],d=">"===c,p=[],u={};for(n=1;n<l.length;n++){var m=l[n];e(m)?u[m[0]]="false"!==m[1]&&m[1]:p.push(m)}if(r.indexOf("{#")>=0){var h,g="",v="",f=0,b=!1,C=!1,w=0;for(n=i+1;n<s.length;n++)if(s[n].indexOf("{{#")>=0&&w++,s[n].indexOf("{{/")>=0&&w--,s[n].indexOf("{{#"+c)>=0)g+=s[n],C&&(v+=s[n]),f++;else if(s[n].indexOf("{{/"+c)>=0){if(!(f>0)){h=n,b=!0;break}f--,g+=s[n],C&&(v+=s[n])}else s[n].indexOf("else")>=0&&0===w?C=!0:(C||(g+=s[n]),C&&(v+=s[n]));b&&(h&&(i=h),o.push({type:"helper",helperName:c,contextName:p,content:g,inverseContent:v,hash:u}))}else r.indexOf(" ")>0&&(d&&(c="_partial",p[0]&&(p[0]='"'+p[0].replace(/"|'/g,"")+'"')),o.push({type:"helper",helperName:c,contextName:p,hash:u}))}}return o}var o=new RegExp("'","g"),s=new RegExp('"',"g"),r=function(e,t){function i(e,t){return e.content?r(e.content,t):function(){return""}}function a(e,t){return e.inverseContent?r(e.inverseContent,t):function(){return""}}function o(e,t){var i,a,n=0;if(0===e.indexOf("../")){n=e.split("../").length-1;var o=t.split("_")[1]-n;t="ctx_"+(o>=1?o:1),a=e.split("../")[n].split(".")}else 0===e.indexOf("@global")?(t="Template7.global",a=e.split("@global.")[1].split(".")):0===e.indexOf("@root")?(t="root",a=e.split("@root.")[1].split(".")):a=e.split(".");i=t;for(var s=0;s<a.length;s++){var r=a[s];0===r.indexOf("@")?s>0?i+="[(data && data."+r.replace("@","")+")]":i="(data && data."+e.replace("@","")+")":isFinite(r)?i+="["+r+"]":"this"===r||r.indexOf("this.")>=0||r.indexOf("this[")>=0||r.indexOf("this(")>=0?i=r.replace("this",t):i+="."+r}return i}function s(e,t){for(var i=[],a=0;a<e.length;a++)/^['"]/.test(e[a])?i.push(e[a]):/^(true|false|\d+)$/.test(e[a])?i.push(e[a]):i.push(o(e[a],t));return i.join(", ")}function r(e,t){if(t=t||1,"string"!=typeof(e=e||l.template))throw new Error("Template7: Template must be a string");var r=n(e);if(0===r.length)return function(){return""};var c="ctx_"+t,d="";d+=1===t?"(function ("+c+", data, root) {\n":"(function ("+c+", data) {\n",1===t&&(d+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",d+="function isFunction(func){return (typeof func === 'function');}\n",d+='function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n',d+="root = root || ctx_1 || {};\n"),d+="var r = '';\n";var p;for(p=0;p<r.length;p++){var u=r[p];if("plain"!==u.type){var m,h;if("variable"===u.type&&(m=o(u.contextName,c),d+="r += c("+m+", "+c+");"),"helper"===u.type)if(u.helperName in l.helpers)h=s(u.contextName,c),d+="r += (Template7.helpers."+u.helperName+").call("+c+", "+(h&&h+", ")+"{hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+i(u,t+1)+", inverse: "+a(u,t+1)+", root: root});";else{if(u.contextName.length>0)throw new Error('Template7: Missing helper: "'+u.helperName+'"');m=o(u.helperName,c),d+="if ("+m+") {",d+="if (isArray("+m+")) {",d+="r += (Template7.helpers.each).call("+c+", "+m+", {hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+i(u,t+1)+", inverse: "+a(u,t+1)+", root: root});",d+="}else {",d+="r += (Template7.helpers.with).call("+c+", "+m+", {hash:"+JSON.stringify(u.hash)+", data: data || {}, fn: "+i(u,t+1)+", inverse: "+a(u,t+1)+", root: root});",d+="}}"}}else d+="r +='"+u.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return d+="\nreturn r;})",eval.call(window,d)}var l=this;l.template=e,l.compile=function(e){return l.compiled||(l.compiled=r(e)),l.compiled}};r.prototype={options:{},partials:{},helpers:{_partial:function(e,t){var i=r.prototype.partials[e];if(!i||i&&!i.template)return"";i.compiled||(i.compiled=new r(i.template).compile());var a=this;for(var n in t.hash)a[n]=t.hash[n];return i.compiled(a,t.data,t.root)},escape:function(e,t){
if("string"!=typeof e)throw new Error('Template7: Passed context to "escape" helper should be a string');return i(e)},if:function(e,i){return t(e)&&(e=e.call(this)),e?i.fn(this,i.data):i.inverse(this,i.data)},unless:function(e,i){return t(e)&&(e=e.call(this)),e?i.inverse(this,i.data):i.fn(this,i.data)},each:function(i,a){var n="",o=0;if(t(i)&&(i=i.call(this)),e(i)){for(a.hash.reverse&&(i=i.reverse()),o=0;o<i.length;o++)n+=a.fn(i[o],{first:0===o,last:o===i.length-1,index:o});a.hash.reverse&&(i=i.reverse())}else for(var s in i)o++,n+=a.fn(i[s],{key:s});return o>0?n:a.inverse(this)},with:function(e,i){return t(e)&&(e=e.call(this)),i.fn(e)},join:function(e,i){return t(e)&&(e=e.call(this)),e.join(i.hash.delimiter||i.hash.delimeter)},js:function(e,t){var i;return i=e.indexOf("return")>=0?"(function(){"+e+"})":"(function(){return ("+e+")})",eval.call(this,i).call(this)},js_compare:function(e,t){var i;return i=e.indexOf("return")>=0?"(function(){"+e+"})":"(function(){return ("+e+")})",eval.call(this,i).call(this)?t.fn(this,t.data):t.inverse(this,t.data)}}};var l=function(e,t){if(2===arguments.length){var i=new r(e),a=i.compile()(t);return i=null,a}return new r(e)};return l.registerHelper=function(e,t){r.prototype.helpers[e]=t},l.unregisterHelper=function(e){r.prototype.helpers[e]=void 0,delete r.prototype.helpers[e]},l.registerPartial=function(e,t){r.prototype.partials[e]={template:t}},l.unregisterPartial=function(e,t){r.prototype.partials[e]&&(r.prototype.partials[e]=void 0,delete r.prototype.partials[e])},l.compile=function(e,t){return new r(e,t).compile()},l.options=r.prototype.options,l.helpers=r.prototype.helpers,l.partials=r.prototype.partials,l}(),window.Swiper=function(a,n){function o(e){return Math.floor(e)}function s(){var e=b.params.autoplay,t=b.slides.eq(b.activeIndex);t.attr("data-swiper-autoplay")&&(e=t.attr("data-swiper-autoplay")||b.params.autoplay),b.autoplayTimeoutId=setTimeout(function(){b.params.loop?(b.fixLoop(),b._slideNext(),b.emit("onAutoplay",b)):b.isEnd?n.autoplayStopOnLast?b.stopAutoplay():(b._slideTo(0),b.emit("onAutoplay",b)):(b._slideNext(),b.emit("onAutoplay",b))},e)}function r(e,i){var a=t(e.target);if(!a.is(i))if("string"==typeof i)a=a.parents(i);else if(i.nodeType){var n;return a.parents().each(function(e,t){t===i&&(n=i)}),n?i:void 0}if(0!==a.length)return a[0]}function l(e,t){t=t||{};var i=window.MutationObserver||window.WebkitMutationObserver,a=new i(function(e){e.forEach(function(e){b.onResize(!0),b.emit("onObserverUpdate",b,e)})});a.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),b.observers.push(a)}function c(e,i){e=t(e);var a,n,o,s=b.rtl?-1:1;a=e.attr("data-swiper-parallax")||"0",n=e.attr("data-swiper-parallax-x"),o=e.attr("data-swiper-parallax-y"),n||o?(n=n||"0",o=o||"0"):b.isHorizontal()?(n=a,o="0"):(o=a,n="0"),n=n.indexOf("%")>=0?parseInt(n,10)*i*s+"%":n*i*s+"px",o=o.indexOf("%")>=0?parseInt(o,10)*i+"%":o*i+"px",e.transform("translate3d("+n+", "+o+",0px)")}function d(e){return 0!==e.indexOf("on")&&(e=e[0]!==e[0].toUpperCase()?"on"+e[0].toUpperCase()+e.substring(1):"on"+e),e}if(!(this instanceof Swiper))return new Swiper(a,n);var p={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,autoplayStopOnLast:!1,iOSEdgeSwipeDetection:!1,iOSEdgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},flip:{slideShadows:!0,limitRotation:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},fade:{crossFade:!1},parallax:!1,zoom:!1,zoomMax:3,zoomMin:1,zoomToggle:!0,scrollbar:null,scrollbarHide:!0,scrollbarDraggable:!1,scrollbarSnapOnRelease:!1,keyboardControl:!1,mousewheelControl:!1,mousewheelReleaseOnEdges:!1,mousewheelInvert:!1,mousewheelForceToAxis:!1,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:!1,hashnavWatchState:!1,history:!1,replaceState:!1,breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,pagination:null,paginationElement:"span",paginationClickable:!1,paginationHide:!1,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,controlBy:"slide",normalizeSlideIndex:!0,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:!1,observeParents:!1,a11y:!1,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:!0},u=n&&n.virtualTranslate;n=n||{};var m={};for(var h in n)if("object"!=typeof n[h]||null===n[h]||(n[h].nodeType||n[h]===window||n[h]===document||void 0!==e&&n[h]instanceof e||"undefined"!=typeof jQuery&&n[h]instanceof jQuery))m[h]=n[h];else{m[h]={};for(var g in n[h])m[h][g]=n[h][g]}for(var v in p)if(void 0===n[v])n[v]=p[v];else if("object"==typeof n[v])for(var f in p[v])void 0===n[v][f]&&(n[v][f]=p[v][f]);var b=this;if(b.params=n,b.originalParams=m,b.classNames=[],void 0!==t&&void 0!==e&&(t=e),(void 0!==t||(t=void 0===e?window.Dom7||window.Zepto||window.jQuery:e))&&(b.$=t,b.currentBreakpoint=void 0,b.getActiveBreakpoint=function(){if(!b.params.breakpoints)return!1;var e,t=!1,i=[];for(e in b.params.breakpoints)b.params.breakpoints.hasOwnProperty(e)&&i.push(e);i.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)});for(var a=0;a<i.length;a++)(e=i[a])>=window.innerWidth&&!t&&(t=e);return t||"max"},b.setBreakpoint=function(){var e=b.getActiveBreakpoint();if(e&&b.currentBreakpoint!==e){var t=e in b.params.breakpoints?b.params.breakpoints[e]:b.originalParams,i=b.params.loop&&t.slidesPerView!==b.params.slidesPerView;for(var a in t)b.params[a]=t[a];b.currentBreakpoint=e,i&&b.destroyLoop&&b.reLoop(!0)}},b.params.breakpoints&&b.setBreakpoint(),b.container=t(a),0!==b.container.length)){if(b.container.length>1){var C=[];return b.container.each(function(){C.push(new Swiper(this,n))}),C}b.container[0].swiper=b,b.container.data("swiper",b),b.classNames.push(b.params.containerModifierClass+b.params.direction),b.params.freeMode&&b.classNames.push(b.params.containerModifierClass+"free-mode"),b.support.flexbox||(b.classNames.push(b.params.containerModifierClass+"no-flexbox"),b.params.slidesPerColumn=1),b.params.autoHeight&&b.classNames.push(b.params.containerModifierClass+"autoheight"),(b.params.parallax||b.params.watchSlidesVisibility)&&(b.params.watchSlidesProgress=!0),b.params.touchReleaseOnEdges&&(b.params.resistanceRatio=0),["cube","coverflow","flip"].indexOf(b.params.effect)>=0&&(b.support.transforms3d?(b.params.watchSlidesProgress=!0,b.classNames.push(b.params.containerModifierClass+"3d")):b.params.effect="slide"),"slide"!==b.params.effect&&b.classNames.push(b.params.containerModifierClass+b.params.effect),"cube"===b.params.effect&&(b.params.resistanceRatio=0,b.params.slidesPerView=1,b.params.slidesPerColumn=1,b.params.slidesPerGroup=1,b.params.centeredSlides=!1,b.params.spaceBetween=0,b.params.virtualTranslate=!0,b.params.setWrapperSize=!1),"fade"!==b.params.effect&&"flip"!==b.params.effect||(b.params.slidesPerView=1,b.params.slidesPerColumn=1,b.params.slidesPerGroup=1,b.params.watchSlidesProgress=!0,b.params.spaceBetween=0,b.params.setWrapperSize=!1,void 0===u&&(b.params.virtualTranslate=!0)),b.params.grabCursor&&b.support.touch&&(b.params.grabCursor=!1),b.wrapper=b.container.children("."+b.params.wrapperClass),b.params.pagination&&(b.paginationContainer=t(b.params.pagination),b.params.uniqueNavElements&&"string"==typeof b.params.pagination&&b.paginationContainer.length>1&&1===b.container.find(b.params.pagination).length&&(b.paginationContainer=b.container.find(b.params.pagination)),"bullets"===b.params.paginationType&&b.params.paginationClickable?b.paginationContainer.addClass(b.params.paginationModifierClass+"clickable"):b.params.paginationClickable=!1,b.paginationContainer.addClass(b.params.paginationModifierClass+b.params.paginationType)),(b.params.nextButton||b.params.prevButton)&&(b.params.nextButton&&(b.nextButton=t(b.params.nextButton),b.params.uniqueNavElements&&"string"==typeof b.params.nextButton&&b.nextButton.length>1&&1===b.container.find(b.params.nextButton).length&&(b.nextButton=b.container.find(b.params.nextButton))),b.params.prevButton&&(b.prevButton=t(b.params.prevButton),b.params.uniqueNavElements&&"string"==typeof b.params.prevButton&&b.prevButton.length>1&&1===b.container.find(b.params.prevButton).length&&(b.prevButton=b.container.find(b.params.prevButton)))),b.isHorizontal=function(){return"horizontal"===b.params.direction},b.rtl=b.isHorizontal()&&("rtl"===b.container[0].dir.toLowerCase()||"rtl"===b.container.css("direction")),b.rtl&&b.classNames.push(b.params.containerModifierClass+"rtl"),b.rtl&&(b.wrongRTL="-webkit-box"===b.wrapper.css("display")),b.params.slidesPerColumn>1&&b.classNames.push(b.params.containerModifierClass+"multirow"),b.device.android&&b.classNames.push(b.params.containerModifierClass+"android"),b.container.addClass(b.classNames.join(" ")),b.translate=0,b.progress=0,b.velocity=0,b.lockSwipeToNext=function(){b.params.allowSwipeToNext=!1,!1===b.params.allowSwipeToPrev&&b.params.grabCursor&&b.unsetGrabCursor()},b.lockSwipeToPrev=function(){b.params.allowSwipeToPrev=!1,!1===b.params.allowSwipeToNext&&b.params.grabCursor&&b.unsetGrabCursor()},b.lockSwipes=function(){b.params.allowSwipeToNext=b.params.allowSwipeToPrev=!1,b.params.grabCursor&&b.unsetGrabCursor()},b.unlockSwipeToNext=function(){b.params.allowSwipeToNext=!0,!0===b.params.allowSwipeToPrev&&b.params.grabCursor&&b.setGrabCursor()},b.unlockSwipeToPrev=function(){b.params.allowSwipeToPrev=!0,!0===b.params.allowSwipeToNext&&b.params.grabCursor&&b.setGrabCursor()},b.unlockSwipes=function(){b.params.allowSwipeToNext=b.params.allowSwipeToPrev=!0,b.params.grabCursor&&b.setGrabCursor()},b.setGrabCursor=function(e){b.container[0].style.cursor="move",b.container[0].style.cursor=e?"-webkit-grabbing":"-webkit-grab",b.container[0].style.cursor=e?"-moz-grabbin":"-moz-grab",b.container[0].style.cursor=e?"grabbing":"grab"},b.unsetGrabCursor=function(){b.container[0].style.cursor=""},b.params.grabCursor&&b.setGrabCursor(),b.imagesToLoad=[],b.imagesLoaded=0,b.loadImage=function(e,t,i,a,n,o){function s(){o&&o()}var r;e.complete&&n?s():t?(r=new window.Image,r.onload=s,r.onerror=s,a&&(r.sizes=a),i&&(r.srcset=i),t&&(r.src=t)):s()},b.preloadImages=function(){function e(){void 0!==b&&null!==b&&(void 0!==b.imagesLoaded&&b.imagesLoaded++,b.imagesLoaded===b.imagesToLoad.length&&(b.params.updateOnImagesReady&&b.update(),b.emit("onImagesReady",b)))}b.imagesToLoad=b.container.find("img");for(var t=0;t<b.imagesToLoad.length;t++)b.loadImage(b.imagesToLoad[t],b.imagesToLoad[t].currentSrc||b.imagesToLoad[t].getAttribute("src"),b.imagesToLoad[t].srcset||b.imagesToLoad[t].getAttribute("srcset"),b.imagesToLoad[t].sizes||b.imagesToLoad[t].getAttribute("sizes"),!0,e)},b.autoplayTimeoutId=void 0,b.autoplaying=!1,b.autoplayPaused=!1,b.startAutoplay=function(){return void 0===b.autoplayTimeoutId&&(!!b.params.autoplay&&(!b.autoplaying&&(b.autoplaying=!0,b.emit("onAutoplayStart",b),void s())))},b.stopAutoplay=function(e){b.autoplayTimeoutId&&(b.autoplayTimeoutId&&clearTimeout(b.autoplayTimeoutId),b.autoplaying=!1,b.autoplayTimeoutId=void 0,b.emit("onAutoplayStop",b))},b.pauseAutoplay=function(e){b.autoplayPaused||(b.autoplayTimeoutId&&clearTimeout(b.autoplayTimeoutId),b.autoplayPaused=!0,0===e?(b.autoplayPaused=!1,s()):b.wrapper.transitionEnd(function(){b&&(b.autoplayPaused=!1,b.autoplaying?s():b.stopAutoplay())}))},b.minTranslate=function(){return-b.snapGrid[0]},b.maxTranslate=function(){return-b.snapGrid[b.snapGrid.length-1]},b.updateAutoHeight=function(){var e=[],t=0;if("auto"!==b.params.slidesPerView&&b.params.slidesPerView>1)for(i=0;i<Math.ceil(b.params.slidesPerView);i++){var a=b.activeIndex+i;if(a>b.slides.length)break;e.push(b.slides.eq(a)[0])}else e.push(b.slides.eq(b.activeIndex)[0]);for(i=0;i<e.length;i++)if(void 0!==e[i]){var n=e[i].offsetHeight;t=n>t?n:t}t&&b.wrapper.css("height",t+"px")},b.updateContainerSize=function(){var e,t;e=void 0!==b.params.width?b.params.width:b.container[0].clientWidth,t=void 0!==b.params.height?b.params.height:b.container[0].clientHeight,0===e&&b.isHorizontal()||0===t&&!b.isHorizontal()||(e=e-parseInt(b.container.css("padding-left"),10)-parseInt(b.container.css("padding-right"),10),t=t-parseInt(b.container.css("padding-top"),10)-parseInt(b.container.css("padding-bottom"),10),b.width=e,b.height=t,b.size=b.isHorizontal()?b.width:b.height)},b.updateSlidesSize=function(){b.slides=b.wrapper.children("."+b.params.slideClass),b.snapGrid=[],b.slidesGrid=[],b.slidesSizesGrid=[];var e,t=b.params.spaceBetween,i=-b.params.slidesOffsetBefore,a=0,n=0;if(void 0!==b.size){"string"==typeof t&&t.indexOf("%")>=0&&(t=parseFloat(t.replace("%",""))/100*b.size),b.virtualSize=-t,b.rtl?b.slides.css({marginLeft:"",marginTop:""}):b.slides.css({marginRight:"",marginBottom:""});var s;b.params.slidesPerColumn>1&&(s=Math.floor(b.slides.length/b.params.slidesPerColumn)===b.slides.length/b.params.slidesPerColumn?b.slides.length:Math.ceil(b.slides.length/b.params.slidesPerColumn)*b.params.slidesPerColumn,"auto"!==b.params.slidesPerView&&"row"===b.params.slidesPerColumnFill&&(s=Math.max(s,b.params.slidesPerView*b.params.slidesPerColumn)));var r,l=b.params.slidesPerColumn,c=s/l,d=c-(b.params.slidesPerColumn*c-b.slides.length);for(e=0;e<b.slides.length;e++){r=0;var p=b.slides.eq(e);if(b.params.slidesPerColumn>1){var u,m,h;"column"===b.params.slidesPerColumnFill?(m=Math.floor(e/l),h=e-m*l,(m>d||m===d&&h===l-1)&&++h>=l&&(h=0,m++),u=m+h*s/l,p.css({"-webkit-box-ordinal-group":u,"-moz-box-ordinal-group":u,"-ms-flex-order":u,"-webkit-order":u,order:u})):(h=Math.floor(e/c),m=e-h*c),p.css("margin-"+(b.isHorizontal()?"top":"left"),0!==h&&b.params.spaceBetween&&b.params.spaceBetween+"px").attr("data-swiper-column",m).attr("data-swiper-row",h)}"none"!==p.css("display")&&("auto"===b.params.slidesPerView?(r=b.isHorizontal()?p.outerWidth(!0):p.outerHeight(!0),b.params.roundLengths&&(r=o(r))):(r=(b.size-(b.params.slidesPerView-1)*t)/b.params.slidesPerView,b.params.roundLengths&&(r=o(r)),b.isHorizontal()?b.slides[e].style.width=r+"px":b.slides[e].style.height=r+"px"),b.slides[e].swiperSlideSize=r,b.slidesSizesGrid.push(r),b.params.centeredSlides?(i=i+r/2+a/2+t,0===e&&(i=i-b.size/2-t),Math.abs(i)<.001&&(i=0),n%b.params.slidesPerGroup==0&&b.snapGrid.push(i),b.slidesGrid.push(i)):(n%b.params.slidesPerGroup==0&&b.snapGrid.push(i),b.slidesGrid.push(i),i=i+r+t),b.virtualSize+=r+t,a=r,n++)}b.virtualSize=Math.max(b.virtualSize,b.size)+b.params.slidesOffsetAfter;var g;if(b.rtl&&b.wrongRTL&&("slide"===b.params.effect||"coverflow"===b.params.effect)&&b.wrapper.css({width:b.virtualSize+b.params.spaceBetween+"px"}),b.support.flexbox&&!b.params.setWrapperSize||(b.isHorizontal()?b.wrapper.css({width:b.virtualSize+b.params.spaceBetween+"px"}):b.wrapper.css({height:b.virtualSize+b.params.spaceBetween+"px"})),b.params.slidesPerColumn>1&&(b.virtualSize=(r+b.params.spaceBetween)*s,b.virtualSize=Math.ceil(b.virtualSize/b.params.slidesPerColumn)-b.params.spaceBetween,b.isHorizontal()?b.wrapper.css({width:b.virtualSize+b.params.spaceBetween+"px"}):b.wrapper.css({height:b.virtualSize+b.params.spaceBetween+"px"}),b.params.centeredSlides)){for(g=[],e=0;e<b.snapGrid.length;e++)b.snapGrid[e]<b.virtualSize+b.snapGrid[0]&&g.push(b.snapGrid[e]);b.snapGrid=g}if(!b.params.centeredSlides){for(g=[],e=0;e<b.snapGrid.length;e++)b.snapGrid[e]<=b.virtualSize-b.size&&g.push(b.snapGrid[e]);b.snapGrid=g,Math.floor(b.virtualSize-b.size)-Math.floor(b.snapGrid[b.snapGrid.length-1])>1&&b.snapGrid.push(b.virtualSize-b.size)}0===b.snapGrid.length&&(b.snapGrid=[0]),0!==b.params.spaceBetween&&(b.isHorizontal()?b.rtl?b.slides.css({marginLeft:t+"px"}):b.slides.css({marginRight:t+"px"}):b.slides.css({marginBottom:t+"px"})),b.params.watchSlidesProgress&&b.updateSlidesOffset()}},b.updateSlidesOffset=function(){for(var e=0;e<b.slides.length;e++)b.slides[e].swiperSlideOffset=b.isHorizontal()?b.slides[e].offsetLeft:b.slides[e].offsetTop},b.updateSlidesProgress=function(e){if(void 0===e&&(e=b.translate||0),0!==b.slides.length){void 0===b.slides[0].swiperSlideOffset&&b.updateSlidesOffset();var t=-e;b.rtl&&(t=e),b.slides.removeClass(b.params.slideVisibleClass);for(var i=0;i<b.slides.length;i++){var a=b.slides[i],n=(t+(b.params.centeredSlides?b.minTranslate():0)-a.swiperSlideOffset)/(a.swiperSlideSize+b.params.spaceBetween);if(b.params.watchSlidesVisibility){var o=-(t-a.swiperSlideOffset),s=o+b.slidesSizesGrid[i];(o>=0&&o<b.size||s>0&&s<=b.size||o<=0&&s>=b.size)&&b.slides.eq(i).addClass(b.params.slideVisibleClass)}a.progress=b.rtl?-n:n}}},b.updateProgress=function(e){void 0===e&&(e=b.translate||0);var t=b.maxTranslate()-b.minTranslate(),i=b.isBeginning,a=b.isEnd;0===t?(b.progress=0,b.isBeginning=b.isEnd=!0):(b.progress=(e-b.minTranslate())/t,b.isBeginning=b.progress<=0,b.isEnd=b.progress>=1),b.isBeginning&&!i&&b.emit("onReachBeginning",b),b.isEnd&&!a&&b.emit("onReachEnd",b),b.params.watchSlidesProgress&&b.updateSlidesProgress(e),b.emit("onProgress",b,b.progress)},b.updateActiveIndex=function(){var e,t,i,a=b.rtl?b.translate:-b.translate;for(t=0;t<b.slidesGrid.length;t++)void 0!==b.slidesGrid[t+1]?a>=b.slidesGrid[t]&&a<b.slidesGrid[t+1]-(b.slidesGrid[t+1]-b.slidesGrid[t])/2?e=t:a>=b.slidesGrid[t]&&a<b.slidesGrid[t+1]&&(e=t+1):a>=b.slidesGrid[t]&&(e=t);b.params.normalizeSlideIndex&&(e<0||void 0===e)&&(e=0),i=Math.floor(e/b.params.slidesPerGroup),i>=b.snapGrid.length&&(i=b.snapGrid.length-1),e!==b.activeIndex&&(b.snapIndex=i,b.previousIndex=b.activeIndex,b.activeIndex=e,b.updateClasses(),b.updateRealIndex())},b.updateRealIndex=function(){b.realIndex=b.slides.eq(b.activeIndex).attr("data-swiper-slide-index")||b.activeIndex},b.updateClasses=function(){b.slides.removeClass(b.params.slideActiveClass+" "+b.params.slideNextClass+" "+b.params.slidePrevClass+" "+b.params.slideDuplicateActiveClass+" "+b.params.slideDuplicateNextClass+" "+b.params.slideDuplicatePrevClass);var e=b.slides.eq(b.activeIndex);e.addClass(b.params.slideActiveClass),n.loop&&(e.hasClass(b.params.slideDuplicateClass)?b.wrapper.children("."+b.params.slideClass+":not(."+b.params.slideDuplicateClass+')[data-swiper-slide-index="'+b.realIndex+'"]').addClass(b.params.slideDuplicateActiveClass):b.wrapper.children("."+b.params.slideClass+"."+b.params.slideDuplicateClass+'[data-swiper-slide-index="'+b.realIndex+'"]').addClass(b.params.slideDuplicateActiveClass));var i=e.next("."+b.params.slideClass).addClass(b.params.slideNextClass);b.params.loop&&0===i.length&&(i=b.slides.eq(0),i.addClass(b.params.slideNextClass));var a=e.prev("."+b.params.slideClass).addClass(b.params.slidePrevClass);if(b.params.loop&&0===a.length&&(a=b.slides.eq(-1),a.addClass(b.params.slidePrevClass)),n.loop&&(i.hasClass(b.params.slideDuplicateClass)?b.wrapper.children("."+b.params.slideClass+":not(."+b.params.slideDuplicateClass+')[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(b.params.slideDuplicateNextClass):b.wrapper.children("."+b.params.slideClass+"."+b.params.slideDuplicateClass+'[data-swiper-slide-index="'+i.attr("data-swiper-slide-index")+'"]').addClass(b.params.slideDuplicateNextClass),a.hasClass(b.params.slideDuplicateClass)?b.wrapper.children("."+b.params.slideClass+":not(."+b.params.slideDuplicateClass+')[data-swiper-slide-index="'+a.attr("data-swiper-slide-index")+'"]').addClass(b.params.slideDuplicatePrevClass):b.wrapper.children("."+b.params.slideClass+"."+b.params.slideDuplicateClass+'[data-swiper-slide-index="'+a.attr("data-swiper-slide-index")+'"]').addClass(b.params.slideDuplicatePrevClass)),b.paginationContainer&&b.paginationContainer.length>0){var o,s=b.params.loop?Math.ceil((b.slides.length-2*b.loopedSlides)/b.params.slidesPerGroup):b.snapGrid.length;if(b.params.loop?(o=Math.ceil((b.activeIndex-b.loopedSlides)/b.params.slidesPerGroup),o>b.slides.length-1-2*b.loopedSlides&&(o-=b.slides.length-2*b.loopedSlides),o>s-1&&(o-=s),o<0&&"bullets"!==b.params.paginationType&&(o=s+o)):o=void 0!==b.snapIndex?b.snapIndex:b.activeIndex||0,"bullets"===b.params.paginationType&&b.bullets&&b.bullets.length>0&&(b.bullets.removeClass(b.params.bulletActiveClass),b.paginationContainer.length>1?b.bullets.each(function(){t(this).index()===o&&t(this).addClass(b.params.bulletActiveClass)}):b.bullets.eq(o).addClass(b.params.bulletActiveClass)),"fraction"===b.params.paginationType&&(b.paginationContainer.find("."+b.params.paginationCurrentClass).text(o+1),b.paginationContainer.find("."+b.params.paginationTotalClass).text(s)),"progress"===b.params.paginationType){var r=(o+1)/s,l=r,c=1;b.isHorizontal()||(c=r,l=1),b.paginationContainer.find("."+b.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+l+") scaleY("+c+")").transition(b.params.speed)}"custom"===b.params.paginationType&&b.params.paginationCustomRender&&(b.paginationContainer.html(b.params.paginationCustomRender(b,o+1,s)),b.emit("onPaginationRendered",b,b.paginationContainer[0]))}b.params.loop||(b.params.prevButton&&b.prevButton&&b.prevButton.length>0&&(b.isBeginning?(b.prevButton.addClass(b.params.buttonDisabledClass),b.params.a11y&&b.a11y&&b.a11y.disable(b.prevButton)):(b.prevButton.removeClass(b.params.buttonDisabledClass),b.params.a11y&&b.a11y&&b.a11y.enable(b.prevButton))),b.params.nextButton&&b.nextButton&&b.nextButton.length>0&&(b.isEnd?(b.nextButton.addClass(b.params.buttonDisabledClass),b.params.a11y&&b.a11y&&b.a11y.disable(b.nextButton)):(b.nextButton.removeClass(b.params.buttonDisabledClass),b.params.a11y&&b.a11y&&b.a11y.enable(b.nextButton))))},b.updatePagination=function(){if(b.params.pagination&&b.paginationContainer&&b.paginationContainer.length>0){var e="";if("bullets"===b.params.paginationType){for(var t=b.params.loop?Math.ceil((b.slides.length-2*b.loopedSlides)/b.params.slidesPerGroup):b.snapGrid.length,i=0;i<t;i++)b.params.paginationBulletRender?e+=b.params.paginationBulletRender(b,i,b.params.bulletClass):e+="<"+b.params.paginationElement+' class="'+b.params.bulletClass+'"></'+b.params.paginationElement+">";b.paginationContainer.html(e),b.bullets=b.paginationContainer.find("."+b.params.bulletClass),b.params.paginationClickable&&b.params.a11y&&b.a11y&&b.a11y.initPagination()}"fraction"===b.params.paginationType&&(e=b.params.paginationFractionRender?b.params.paginationFractionRender(b,b.params.paginationCurrentClass,b.params.paginationTotalClass):'<span class="'+b.params.paginationCurrentClass+'"></span> / <span class="'+b.params.paginationTotalClass+'"></span>',b.paginationContainer.html(e)),"progress"===b.params.paginationType&&(e=b.params.paginationProgressRender?b.params.paginationProgressRender(b,b.params.paginationProgressbarClass):'<span class="'+b.params.paginationProgressbarClass+'"></span>',b.paginationContainer.html(e)),"custom"!==b.params.paginationType&&b.emit("onPaginationRendered",b,b.paginationContainer[0])}},b.update=function(e){function t(){b.rtl,b.translate;i=Math.min(Math.max(b.translate,b.maxTranslate()),b.minTranslate()),b.setWrapperTranslate(i),b.updateActiveIndex(),b.updateClasses()}if(b.updateContainerSize(),b.updateSlidesSize(),b.updateProgress(),b.updatePagination(),b.updateClasses(),b.params.scrollbar&&b.scrollbar&&b.scrollbar.set(),e){var i;b.controller&&b.controller.spline&&(b.controller.spline=void 0),b.params.freeMode?(t(),b.params.autoHeight&&b.updateAutoHeight()):(("auto"===b.params.slidesPerView||b.params.slidesPerView>1)&&b.isEnd&&!b.params.centeredSlides?b.slideTo(b.slides.length-1,0,!1,!0):b.slideTo(b.activeIndex,0,!1,!0))||t()}else b.params.autoHeight&&b.updateAutoHeight()},b.onResize=function(e){b.params.breakpoints&&b.setBreakpoint();var t=b.params.allowSwipeToPrev,i=b.params.allowSwipeToNext;b.params.allowSwipeToPrev=b.params.allowSwipeToNext=!0,b.updateContainerSize(),b.updateSlidesSize(),("auto"===b.params.slidesPerView||b.params.freeMode||e)&&b.updatePagination(),b.params.scrollbar&&b.scrollbar&&b.scrollbar.set(),b.controller&&b.controller.spline&&(b.controller.spline=void 0);var a=!1;if(b.params.freeMode){var n=Math.min(Math.max(b.translate,b.maxTranslate()),b.minTranslate());b.setWrapperTranslate(n),b.updateActiveIndex(),b.updateClasses(),b.params.autoHeight&&b.updateAutoHeight()}else b.updateClasses(),a=("auto"===b.params.slidesPerView||b.params.slidesPerView>1)&&b.isEnd&&!b.params.centeredSlides?b.slideTo(b.slides.length-1,0,!1,!0):b.slideTo(b.activeIndex,0,!1,!0);b.params.lazyLoading&&!a&&b.lazy&&b.lazy.load(),b.params.allowSwipeToPrev=t,b.params.allowSwipeToNext=i},b.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"},window.navigator.pointerEnabled?b.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled&&(b.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}),b.touchEvents={start:b.support.touch||!b.params.simulateTouch?"touchstart":b.touchEventsDesktop.start,move:b.support.touch||!b.params.simulateTouch?"touchmove":b.touchEventsDesktop.move,end:b.support.touch||!b.params.simulateTouch?"touchend":b.touchEventsDesktop.end},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===b.params.touchEventsTarget?b.container:b.wrapper).addClass("swiper-wp8-"+b.params.direction),b.initEvents=function(e){var t=e?"off":"on",i=e?"removeEventListener":"addEventListener",a="container"===b.params.touchEventsTarget?b.container[0]:b.wrapper[0],o=b.support.touch?a:document,s=!!b.params.nested;if(b.browser.ie)a[i](b.touchEvents.start,b.onTouchStart,!1),o[i](b.touchEvents.move,b.onTouchMove,s),o[i](b.touchEvents.end,b.onTouchEnd,!1);else{if(b.support.touch){var r=!("touchstart"!==b.touchEvents.start||!b.support.passiveListener||!b.params.passiveListeners)&&{passive:!0,capture:!1};a[i](b.touchEvents.start,b.onTouchStart,r),a[i](b.touchEvents.move,b.onTouchMove,s),a[i](b.touchEvents.end,b.onTouchEnd,r)}(n.simulateTouch&&!b.device.ios&&!b.device.android||n.simulateTouch&&!b.support.touch&&b.device.ios)&&(a[i]("mousedown",b.onTouchStart,!1),document[i]("mousemove",b.onTouchMove,s),document[i]("mouseup",b.onTouchEnd,!1))}window[i]("resize",b.onResize),b.params.nextButton&&b.nextButton&&b.nextButton.length>0&&(b.nextButton[t]("click",b.onClickNext),b.params.a11y&&b.a11y&&b.nextButton[t]("keydown",b.a11y.onEnterKey)),b.params.prevButton&&b.prevButton&&b.prevButton.length>0&&(b.prevButton[t]("click",b.onClickPrev),b.params.a11y&&b.a11y&&b.prevButton[t]("keydown",b.a11y.onEnterKey)),b.params.pagination&&b.params.paginationClickable&&(b.paginationContainer[t]("click","."+b.params.bulletClass,b.onClickIndex),b.params.a11y&&b.a11y&&b.paginationContainer[t]("keydown","."+b.params.bulletClass,b.a11y.onEnterKey)),(b.params.preventClicks||b.params.preventClicksPropagation)&&a[i]("click",b.preventClicks,!0)},b.attachEvents=function(){b.initEvents()},b.detachEvents=function(){b.initEvents(!0)},b.allowClick=!0,b.preventClicks=function(e){b.allowClick||(b.params.preventClicks&&e.preventDefault(),b.params.preventClicksPropagation&&b.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))},b.onClickNext=function(e){e.preventDefault(),b.isEnd&&!b.params.loop||b.slideNext()},b.onClickPrev=function(e){e.preventDefault(),b.isBeginning&&!b.params.loop||b.slidePrev()},b.onClickIndex=function(e){e.preventDefault();var i=t(this).index()*b.params.slidesPerGroup;b.params.loop&&(i+=b.loopedSlides),b.slideTo(i)},b.updateClickedSlide=function(e){var i=r(e,"."+b.params.slideClass),a=!1;if(i)for(var n=0;n<b.slides.length;n++)b.slides[n]===i&&(a=!0);if(!i||!a)return b.clickedSlide=void 0,void(b.clickedIndex=void 0);if(b.clickedSlide=i,b.clickedIndex=t(i).index(),b.params.slideToClickedSlide&&void 0!==b.clickedIndex&&b.clickedIndex!==b.activeIndex){var o,s=b.clickedIndex;if(b.params.loop){if(b.animating)return;o=t(b.clickedSlide).attr("data-swiper-slide-index"),b.params.centeredSlides?s<b.loopedSlides-b.params.slidesPerView/2||s>b.slides.length-b.loopedSlides+b.params.slidesPerView/2?(b.fixLoop(),s=b.wrapper.children("."+b.params.slideClass+'[data-swiper-slide-index="'+o+'"]:not(.'+b.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){b.slideTo(s)},0)):b.slideTo(s):s>b.slides.length-b.params.slidesPerView?(b.fixLoop(),s=b.wrapper.children("."+b.params.slideClass+'[data-swiper-slide-index="'+o+'"]:not(.'+b.params.slideDuplicateClass+")").eq(0).index(),setTimeout(function(){b.slideTo(s)},0)):b.slideTo(s)}else b.slideTo(s)}};var w,y,x,k,T,S,_,A,E,P,M="input, select, textarea, button, video",I=Date.now(),D=[];b.animating=!1,b.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};var L,O;b.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),(L="touchstart"===e.type)||!("which"in e)||3!==e.which){if(b.params.noSwiping&&r(e,"."+b.params.noSwipingClass))return void(b.allowClick=!0);if(!b.params.swipeHandler||r(e,b.params.swipeHandler)){var i=b.touches.currentX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,a=b.touches.currentY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY;if(!(b.device.ios&&b.params.iOSEdgeSwipeDetection&&i<=b.params.iOSEdgeSwipeThreshold)){if(w=!0,y=!1,x=!0,T=void 0,O=void 0,b.touches.startX=i,b.touches.startY=a,k=Date.now(),b.allowClick=!0,b.updateContainerSize(),b.swipeDirection=void 0,b.params.threshold>0&&(A=!1),"touchstart"!==e.type){var n=!0;t(e.target).is(M)&&(n=!1),document.activeElement&&t(document.activeElement).is(M)&&document.activeElement.blur(),n&&e.preventDefault()}b.emit("onTouchStart",b,e)}}}},b.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!L||"mousemove"!==e.type){
if(e.preventedByNestedSwiper)return b.touches.startX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,void(b.touches.startY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);if(b.params.onlyExternal)return b.allowClick=!1,void(w&&(b.touches.startX=b.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,b.touches.startY=b.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,k=Date.now()));if(L&&b.params.touchReleaseOnEdges&&!b.params.loop)if(b.isHorizontal()){if(b.touches.currentX<b.touches.startX&&b.translate<=b.maxTranslate()||b.touches.currentX>b.touches.startX&&b.translate>=b.minTranslate())return}else if(b.touches.currentY<b.touches.startY&&b.translate<=b.maxTranslate()||b.touches.currentY>b.touches.startY&&b.translate>=b.minTranslate())return;if(L&&document.activeElement&&e.target===document.activeElement&&t(e.target).is(M))return y=!0,void(b.allowClick=!1);if(x&&b.emit("onTouchMove",b,e),!(e.targetTouches&&e.targetTouches.length>1)){if(b.touches.currentX="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,b.touches.currentY="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,void 0===T){var i;b.isHorizontal()&&b.touches.currentY===b.touches.startY||!b.isHorizontal()&&b.touches.currentX!==b.touches.startX?T=!1:(i=180*Math.atan2(Math.abs(b.touches.currentY-b.touches.startY),Math.abs(b.touches.currentX-b.touches.startX))/Math.PI,T=b.isHorizontal()?i>b.params.touchAngle:90-i>b.params.touchAngle)}if(T&&b.emit("onTouchMoveOpposite",b,e),void 0===O&&b.browser.ieTouch&&(b.touches.currentX===b.touches.startX&&b.touches.currentY===b.touches.startY||(O=!0)),w){if(T)return void(w=!1);if(O||!b.browser.ieTouch){b.allowClick=!1,b.emit("onSliderMove",b,e),e.preventDefault(),b.params.touchMoveStopPropagation&&!b.params.nested&&e.stopPropagation(),y||(n.loop&&b.fixLoop(),_=b.getWrapperTranslate(),b.setWrapperTransition(0),b.animating&&b.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),b.params.autoplay&&b.autoplaying&&(b.params.autoplayDisableOnInteraction?b.stopAutoplay():b.pauseAutoplay()),P=!1,!b.params.grabCursor||!0!==b.params.allowSwipeToNext&&!0!==b.params.allowSwipeToPrev||b.setGrabCursor(!0)),y=!0;var a=b.touches.diff=b.isHorizontal()?b.touches.currentX-b.touches.startX:b.touches.currentY-b.touches.startY;a*=b.params.touchRatio,b.rtl&&(a=-a),b.swipeDirection=a>0?"prev":"next",S=a+_;var o=!0;if(a>0&&S>b.minTranslate()?(o=!1,b.params.resistance&&(S=b.minTranslate()-1+Math.pow(-b.minTranslate()+_+a,b.params.resistanceRatio))):a<0&&S<b.maxTranslate()&&(o=!1,b.params.resistance&&(S=b.maxTranslate()+1-Math.pow(b.maxTranslate()-_-a,b.params.resistanceRatio))),o&&(e.preventedByNestedSwiper=!0),!b.params.allowSwipeToNext&&"next"===b.swipeDirection&&S<_&&(S=_),!b.params.allowSwipeToPrev&&"prev"===b.swipeDirection&&S>_&&(S=_),b.params.threshold>0){if(!(Math.abs(a)>b.params.threshold||A))return void(S=_);if(!A)return A=!0,b.touches.startX=b.touches.currentX,b.touches.startY=b.touches.currentY,S=_,void(b.touches.diff=b.isHorizontal()?b.touches.currentX-b.touches.startX:b.touches.currentY-b.touches.startY)}b.params.followFinger&&((b.params.freeMode||b.params.watchSlidesProgress)&&b.updateActiveIndex(),b.params.freeMode&&(0===D.length&&D.push({position:b.touches[b.isHorizontal()?"startX":"startY"],time:k}),D.push({position:b.touches[b.isHorizontal()?"currentX":"currentY"],time:(new window.Date).getTime()})),b.updateProgress(S),b.setWrapperTranslate(S))}}}}},b.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),x&&b.emit("onTouchEnd",b,e),x=!1,w){b.params.grabCursor&&y&&w&&(!0===b.params.allowSwipeToNext||!0===b.params.allowSwipeToPrev)&&b.setGrabCursor(!1);var i=Date.now(),a=i-k;if(b.allowClick&&(b.updateClickedSlide(e),b.emit("onTap",b,e),a<300&&i-I>300&&(E&&clearTimeout(E),E=setTimeout(function(){b&&(b.params.paginationHide&&b.paginationContainer.length>0&&!t(e.target).hasClass(b.params.bulletClass)&&b.paginationContainer.toggleClass(b.params.paginationHiddenClass),b.emit("onClick",b,e))},300)),a<300&&i-I<300&&(E&&clearTimeout(E),b.emit("onDoubleTap",b,e))),I=Date.now(),setTimeout(function(){b&&(b.allowClick=!0)},0),!w||!y||!b.swipeDirection||0===b.touches.diff||S===_)return void(w=y=!1);w=y=!1;var n;if(n=b.params.followFinger?b.rtl?b.translate:-b.translate:-S,b.params.freeMode){if(n<-b.minTranslate())return void b.slideTo(b.activeIndex);if(n>-b.maxTranslate())return void(b.slides.length<b.snapGrid.length?b.slideTo(b.snapGrid.length-1):b.slideTo(b.slides.length-1));if(b.params.freeModeMomentum){if(D.length>1){var o=D.pop(),s=D.pop(),r=o.position-s.position,l=o.time-s.time;b.velocity=r/l,b.velocity=b.velocity/2,Math.abs(b.velocity)<b.params.freeModeMinimumVelocity&&(b.velocity=0),(l>150||(new window.Date).getTime()-o.time>300)&&(b.velocity=0)}else b.velocity=0;b.velocity=b.velocity*b.params.freeModeMomentumVelocityRatio,D.length=0;var c=1e3*b.params.freeModeMomentumRatio,d=b.velocity*c,p=b.translate+d;b.rtl&&(p=-p);var u,m=!1,h=20*Math.abs(b.velocity)*b.params.freeModeMomentumBounceRatio;if(p<b.maxTranslate())b.params.freeModeMomentumBounce?(p+b.maxTranslate()<-h&&(p=b.maxTranslate()-h),u=b.maxTranslate(),m=!0,P=!0):p=b.maxTranslate();else if(p>b.minTranslate())b.params.freeModeMomentumBounce?(p-b.minTranslate()>h&&(p=b.minTranslate()+h),u=b.minTranslate(),m=!0,P=!0):p=b.minTranslate();else if(b.params.freeModeSticky){var g,v=0;for(v=0;v<b.snapGrid.length;v+=1)if(b.snapGrid[v]>-p){g=v;break}p=Math.abs(b.snapGrid[g]-p)<Math.abs(b.snapGrid[g-1]-p)||"next"===b.swipeDirection?b.snapGrid[g]:b.snapGrid[g-1],b.rtl||(p=-p)}if(0!==b.velocity)c=b.rtl?Math.abs((-p-b.translate)/b.velocity):Math.abs((p-b.translate)/b.velocity);else if(b.params.freeModeSticky)return void b.slideReset();b.params.freeModeMomentumBounce&&m?(b.updateProgress(u),b.setWrapperTransition(c),b.setWrapperTranslate(p),b.onTransitionStart(),b.animating=!0,b.wrapper.transitionEnd(function(){b&&P&&(b.emit("onMomentumBounce",b),b.setWrapperTransition(b.params.speed),b.setWrapperTranslate(u),b.wrapper.transitionEnd(function(){b&&b.onTransitionEnd()}))})):b.velocity?(b.updateProgress(p),b.setWrapperTransition(c),b.setWrapperTranslate(p),b.onTransitionStart(),b.animating||(b.animating=!0,b.wrapper.transitionEnd(function(){b&&b.onTransitionEnd()}))):b.updateProgress(p),b.updateActiveIndex()}return void((!b.params.freeModeMomentum||a>=b.params.longSwipesMs)&&(b.updateProgress(),b.updateActiveIndex()))}var f,C=0,T=b.slidesSizesGrid[0];for(f=0;f<b.slidesGrid.length;f+=b.params.slidesPerGroup)void 0!==b.slidesGrid[f+b.params.slidesPerGroup]?n>=b.slidesGrid[f]&&n<b.slidesGrid[f+b.params.slidesPerGroup]&&(C=f,T=b.slidesGrid[f+b.params.slidesPerGroup]-b.slidesGrid[f]):n>=b.slidesGrid[f]&&(C=f,T=b.slidesGrid[b.slidesGrid.length-1]-b.slidesGrid[b.slidesGrid.length-2]);var A=(n-b.slidesGrid[C])/T;if(a>b.params.longSwipesMs){if(!b.params.longSwipes)return void b.slideTo(b.activeIndex);"next"===b.swipeDirection&&(A>=b.params.longSwipesRatio?b.slideTo(C+b.params.slidesPerGroup):b.slideTo(C)),"prev"===b.swipeDirection&&(A>1-b.params.longSwipesRatio?b.slideTo(C+b.params.slidesPerGroup):b.slideTo(C))}else{if(!b.params.shortSwipes)return void b.slideTo(b.activeIndex);"next"===b.swipeDirection&&b.slideTo(C+b.params.slidesPerGroup),"prev"===b.swipeDirection&&b.slideTo(C)}}},b._slideTo=function(e,t){return b.slideTo(e,t,!0,!0)},b.slideTo=function(e,t,i,a){void 0===i&&(i=!0),void 0===e&&(e=0),e<0&&(e=0),b.snapIndex=Math.floor(e/b.params.slidesPerGroup),b.snapIndex>=b.snapGrid.length&&(b.snapIndex=b.snapGrid.length-1);var n=-b.snapGrid[b.snapIndex];if(b.params.autoplay&&b.autoplaying&&(a||!b.params.autoplayDisableOnInteraction?b.pauseAutoplay(t):b.stopAutoplay()),b.updateProgress(n),b.params.normalizeSlideIndex)for(var o=0;o<b.slidesGrid.length;o++)-Math.floor(100*n)>=Math.floor(100*b.slidesGrid[o])&&(e=o);return!(!b.params.allowSwipeToNext&&n<b.translate&&n<b.minTranslate())&&(!(!b.params.allowSwipeToPrev&&n>b.translate&&n>b.maxTranslate()&&(b.activeIndex||0)!==e)&&(void 0===t&&(t=b.params.speed),b.previousIndex=b.activeIndex||0,b.activeIndex=e,b.updateRealIndex(),b.rtl&&-n===b.translate||!b.rtl&&n===b.translate?(b.params.autoHeight&&b.updateAutoHeight(),b.updateClasses(),"slide"!==b.params.effect&&b.setWrapperTranslate(n),!1):(b.updateClasses(),b.onTransitionStart(i),0===t||b.browser.lteIE9?(b.setWrapperTranslate(n),b.setWrapperTransition(0),b.onTransitionEnd(i)):(b.setWrapperTranslate(n),b.setWrapperTransition(t),b.animating||(b.animating=!0,b.wrapper.transitionEnd(function(){b&&b.onTransitionEnd(i)}))),!0)))},b.onTransitionStart=function(e){void 0===e&&(e=!0),b.params.autoHeight&&b.updateAutoHeight(),b.lazy&&b.lazy.onTransitionStart(),e&&(b.emit("onTransitionStart",b),b.activeIndex!==b.previousIndex&&(b.emit("onSlideChangeStart",b),b.activeIndex>b.previousIndex?b.emit("onSlideNextStart",b):b.emit("onSlidePrevStart",b)))},b.onTransitionEnd=function(e){b.animating=!1,b.setWrapperTransition(0),void 0===e&&(e=!0),b.lazy&&b.lazy.onTransitionEnd(),e&&(b.emit("onTransitionEnd",b),b.activeIndex!==b.previousIndex&&(b.emit("onSlideChangeEnd",b),b.activeIndex>b.previousIndex?b.emit("onSlideNextEnd",b):b.emit("onSlidePrevEnd",b))),b.params.history&&b.history&&b.history.setHistory(b.params.history,b.activeIndex),b.params.hashnav&&b.hashnav&&b.hashnav.setHash()},b.slideNext=function(e,t,i){if(b.params.loop){if(b.animating)return!1;b.fixLoop();b.container[0].clientLeft;return b.slideTo(b.activeIndex+b.params.slidesPerGroup,t,e,i)}return b.slideTo(b.activeIndex+b.params.slidesPerGroup,t,e,i)},b._slideNext=function(e){return b.slideNext(!0,e,!0)},b.slidePrev=function(e,t,i){if(b.params.loop){if(b.animating)return!1;b.fixLoop();b.container[0].clientLeft;return b.slideTo(b.activeIndex-1,t,e,i)}return b.slideTo(b.activeIndex-1,t,e,i)},b._slidePrev=function(e){return b.slidePrev(!0,e,!0)},b.slideReset=function(e,t,i){return b.slideTo(b.activeIndex,t,e)},b.disableTouchControl=function(){return b.params.onlyExternal=!0,!0},b.enableTouchControl=function(){return b.params.onlyExternal=!1,!0},b.setWrapperTransition=function(e,t){b.wrapper.transition(e),"slide"!==b.params.effect&&b.effects[b.params.effect]&&b.effects[b.params.effect].setTransition(e),b.params.parallax&&b.parallax&&b.parallax.setTransition(e),b.params.scrollbar&&b.scrollbar&&b.scrollbar.setTransition(e),b.params.control&&b.controller&&b.controller.setTransition(e,t),b.emit("onSetTransition",b,e)},b.setWrapperTranslate=function(e,t,i){var a=0,n=0;b.isHorizontal()?a=b.rtl?-e:e:n=e,b.params.roundLengths&&(a=o(a),n=o(n)),b.params.virtualTranslate||(b.support.transforms3d?b.wrapper.transform("translate3d("+a+"px, "+n+"px, 0px)"):b.wrapper.transform("translate("+a+"px, "+n+"px)")),b.translate=b.isHorizontal()?a:n;var s,r=b.maxTranslate()-b.minTranslate();s=0===r?0:(e-b.minTranslate())/r,s!==b.progress&&b.updateProgress(e),t&&b.updateActiveIndex(),"slide"!==b.params.effect&&b.effects[b.params.effect]&&b.effects[b.params.effect].setTranslate(b.translate),b.params.parallax&&b.parallax&&b.parallax.setTranslate(b.translate),b.params.scrollbar&&b.scrollbar&&b.scrollbar.setTranslate(b.translate),b.params.control&&b.controller&&b.controller.setTranslate(b.translate,i),b.emit("onSetTranslate",b,b.translate)},b.getTranslate=function(e,t){var i,a,n,o;return void 0===t&&(t="x"),b.params.virtualTranslate?b.rtl?-b.translate:b.translate:(n=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(a=n.transform||n.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),o=new window.WebKitCSSMatrix("none"===a?"":a)):(o=n.MozTransform||n.OTransform||n.MsTransform||n.msTransform||n.transform||n.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),"x"===t&&(a=window.WebKitCSSMatrix?o.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(a=window.WebKitCSSMatrix?o.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),b.rtl&&a&&(a=-a),a||0)},b.getWrapperTranslate=function(e){return void 0===e&&(e=b.isHorizontal()?"x":"y"),b.getTranslate(b.wrapper[0],e)},b.observers=[],b.initObservers=function(){if(b.params.observeParents)for(var e=b.container.parents(),t=0;t<e.length;t++)l(e[t]);l(b.container[0],{childList:!1}),l(b.wrapper[0],{attributes:!1})},b.disconnectObservers=function(){for(var e=0;e<b.observers.length;e++)b.observers[e].disconnect();b.observers=[]},b.createLoop=function(){b.wrapper.children("."+b.params.slideClass+"."+b.params.slideDuplicateClass).remove();var e=b.wrapper.children("."+b.params.slideClass);"auto"!==b.params.slidesPerView||b.params.loopedSlides||(b.params.loopedSlides=e.length),b.loopedSlides=parseInt(b.params.loopedSlides||b.params.slidesPerView,10),b.loopedSlides=b.loopedSlides+b.params.loopAdditionalSlides,b.loopedSlides>e.length&&(b.loopedSlides=e.length);var i,a=[],n=[];for(e.each(function(i,o){var s=t(this);i<b.loopedSlides&&n.push(o),i<e.length&&i>=e.length-b.loopedSlides&&a.push(o),s.attr("data-swiper-slide-index",i)}),i=0;i<n.length;i++)b.wrapper.append(t(n[i].cloneNode(!0)).addClass(b.params.slideDuplicateClass));for(i=a.length-1;i>=0;i--)b.wrapper.prepend(t(a[i].cloneNode(!0)).addClass(b.params.slideDuplicateClass))},b.destroyLoop=function(){b.wrapper.children("."+b.params.slideClass+"."+b.params.slideDuplicateClass).remove(),b.slides.removeAttr("data-swiper-slide-index")},b.reLoop=function(e){var t=b.activeIndex-b.loopedSlides;b.destroyLoop(),b.createLoop(),b.updateSlidesSize(),e&&b.slideTo(t+b.loopedSlides,0,!1)},b.fixLoop=function(){var e;b.activeIndex<b.loopedSlides?(e=b.slides.length-3*b.loopedSlides+b.activeIndex,e+=b.loopedSlides,b.slideTo(e,0,!1,!0)):("auto"===b.params.slidesPerView&&b.activeIndex>=2*b.loopedSlides||b.activeIndex>b.slides.length-2*b.params.slidesPerView)&&(e=-b.slides.length+b.activeIndex+b.loopedSlides,e+=b.loopedSlides,b.slideTo(e,0,!1,!0))},b.appendSlide=function(e){if(b.params.loop&&b.destroyLoop(),"object"==typeof e&&e.length)for(var t=0;t<e.length;t++)e[t]&&b.wrapper.append(e[t]);else b.wrapper.append(e);b.params.loop&&b.createLoop(),b.params.observer&&b.support.observer||b.update(!0)},b.prependSlide=function(e){b.params.loop&&b.destroyLoop();var t=b.activeIndex+1;if("object"==typeof e&&e.length){for(var i=0;i<e.length;i++)e[i]&&b.wrapper.prepend(e[i]);t=b.activeIndex+e.length}else b.wrapper.prepend(e);b.params.loop&&b.createLoop(),b.params.observer&&b.support.observer||b.update(!0),b.slideTo(t,0,!1)},b.removeSlide=function(e){b.params.loop&&(b.destroyLoop(),b.slides=b.wrapper.children("."+b.params.slideClass));var t,i=b.activeIndex;if("object"==typeof e&&e.length){for(var a=0;a<e.length;a++)t=e[a],b.slides[t]&&b.slides.eq(t).remove(),t<i&&i--;i=Math.max(i,0)}else t=e,b.slides[t]&&b.slides.eq(t).remove(),t<i&&i--,i=Math.max(i,0);b.params.loop&&b.createLoop(),b.params.observer&&b.support.observer||b.update(!0),b.params.loop?b.slideTo(i+b.loopedSlides,0,!1):b.slideTo(i,0,!1)},b.removeAllSlides=function(){for(var e=[],t=0;t<b.slides.length;t++)e.push(t);b.removeSlide(e)},b.effects={fade:{setTranslate:function(){for(var e=0;e<b.slides.length;e++){var t=b.slides.eq(e),i=t[0].swiperSlideOffset,a=-i;b.params.virtualTranslate||(a-=b.translate);var n=0;b.isHorizontal()||(n=a,a=0);var o=b.params.fade.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:o}).transform("translate3d("+a+"px, "+n+"px, 0px)")}},setTransition:function(e){if(b.slides.transition(e),b.params.virtualTranslate&&0!==e){var t=!1;b.slides.transitionEnd(function(){if(!t&&b){t=!0,b.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=0;i<e.length;i++)b.wrapper.trigger(e[i])}})}}},flip:{setTranslate:function(){for(var e=0;e<b.slides.length;e++){var i=b.slides.eq(e),a=i[0].progress;b.params.flip.limitRotation&&(a=Math.max(Math.min(i[0].progress,1),-1));var n=i[0].swiperSlideOffset,o=-180*a,s=o,r=0,l=-n,c=0;if(b.isHorizontal()?b.rtl&&(s=-s):(c=l,l=0,r=-s,s=0),i[0].style.zIndex=-Math.abs(Math.round(a))+b.slides.length,b.params.flip.slideShadows){var d=b.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),p=b.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===d.length&&(d=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"left":"top")+'"></div>'),i.append(d)),0===p.length&&(p=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"right":"bottom")+'"></div>'),i.append(p)),d.length&&(d[0].style.opacity=Math.max(-a,0)),p.length&&(p[0].style.opacity=Math.max(a,0))}i.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+r+"deg) rotateY("+s+"deg)")}},setTransition:function(e){if(b.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),b.params.virtualTranslate&&0!==e){var i=!1;b.slides.eq(b.activeIndex).transitionEnd(function(){if(!i&&b&&t(this).hasClass(b.params.slideActiveClass)){i=!0,b.animating=!1;for(var e=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],a=0;a<e.length;a++)b.wrapper.trigger(e[a])}})}}},cube:{setTranslate:function(){var e,i=0;b.params.cube.shadow&&(b.isHorizontal()?(e=b.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=t('<div class="swiper-cube-shadow"></div>'),b.wrapper.append(e)),e.css({height:b.width+"px"})):(e=b.container.find(".swiper-cube-shadow"),0===e.length&&(e=t('<div class="swiper-cube-shadow"></div>'),b.container.append(e))));for(var a=0;a<b.slides.length;a++){var n=b.slides.eq(a),o=90*a,s=Math.floor(o/360);b.rtl&&(o=-o,s=Math.floor(-o/360));var r=Math.max(Math.min(n[0].progress,1),-1),l=0,c=0,d=0;a%4==0?(l=4*-s*b.size,d=0):(a-1)%4==0?(l=0,d=4*-s*b.size):(a-2)%4==0?(l=b.size+4*s*b.size,d=b.size):(a-3)%4==0&&(l=-b.size,d=3*b.size+4*b.size*s),b.rtl&&(l=-l),b.isHorizontal()||(c=l,l=0);var p="rotateX("+(b.isHorizontal()?0:-o)+"deg) rotateY("+(b.isHorizontal()?o:0)+"deg) translate3d("+l+"px, "+c+"px, "+d+"px)";if(r<=1&&r>-1&&(i=90*a+90*r,b.rtl&&(i=90*-a-90*r)),n.transform(p),b.params.cube.slideShadows){var u=b.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),m=b.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===u.length&&(u=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"left":"top")+'"></div>'),n.append(u)),0===m.length&&(m=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"right":"bottom")+'"></div>'),n.append(m)),u.length&&(u[0].style.opacity=Math.max(-r,0)),m.length&&(m[0].style.opacity=Math.max(r,0))}}if(b.wrapper.css({"-webkit-transform-origin":"50% 50% -"+b.size/2+"px","-moz-transform-origin":"50% 50% -"+b.size/2+"px","-ms-transform-origin":"50% 50% -"+b.size/2+"px","transform-origin":"50% 50% -"+b.size/2+"px"}),b.params.cube.shadow)if(b.isHorizontal())e.transform("translate3d(0px, "+(b.width/2+b.params.cube.shadowOffset)+"px, "+-b.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+b.params.cube.shadowScale+")");else{var h=Math.abs(i)-90*Math.floor(Math.abs(i)/90),g=1.5-(Math.sin(2*h*Math.PI/360)/2+Math.cos(2*h*Math.PI/360)/2),v=b.params.cube.shadowScale,f=b.params.cube.shadowScale/g,C=b.params.cube.shadowOffset;e.transform("scale3d("+v+", 1, "+f+") translate3d(0px, "+(b.height/2+C)+"px, "+-b.height/2/f+"px) rotateX(-90deg)")}var w=b.isSafari||b.isUiWebView?-b.size/2:0;b.wrapper.transform("translate3d(0px,0,"+w+"px) rotateX("+(b.isHorizontal()?0:i)+"deg) rotateY("+(b.isHorizontal()?-i:0)+"deg)")},setTransition:function(e){b.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),b.params.cube.shadow&&!b.isHorizontal()&&b.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=b.translate,i=b.isHorizontal()?-e+b.width/2:-e+b.height/2,a=b.isHorizontal()?b.params.coverflow.rotate:-b.params.coverflow.rotate,n=b.params.coverflow.depth,o=0,s=b.slides.length;o<s;o++){var r=b.slides.eq(o),l=b.slidesSizesGrid[o],c=r[0].swiperSlideOffset,d=(i-c-l/2)/l*b.params.coverflow.modifier,p=b.isHorizontal()?a*d:0,u=b.isHorizontal()?0:a*d,m=-n*Math.abs(d),h=b.isHorizontal()?0:b.params.coverflow.stretch*d,g=b.isHorizontal()?b.params.coverflow.stretch*d:0;Math.abs(g)<.001&&(g=0),Math.abs(h)<.001&&(h=0),Math.abs(m)<.001&&(m=0),Math.abs(p)<.001&&(p=0),Math.abs(u)<.001&&(u=0);var v="translate3d("+g+"px,"+h+"px,"+m+"px)  rotateX("+u+"deg) rotateY("+p+"deg)";if(r.transform(v),r[0].style.zIndex=1-Math.abs(Math.round(d)),b.params.coverflow.slideShadows){var f=b.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),C=b.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===f.length&&(f=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"left":"top")+'"></div>'),r.append(f)),0===C.length&&(C=t('<div class="swiper-slide-shadow-'+(b.isHorizontal()?"right":"bottom")+'"></div>'),r.append(C)),f.length&&(f[0].style.opacity=d>0?d:0),C.length&&(C[0].style.opacity=-d>0?-d:0)}}if(b.browser.ie){b.wrapper[0].style.perspectiveOrigin=i+"px 50%"}},setTransition:function(e){b.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},b.lazy={initialImageLoaded:!1,loadImageInSlide:function(e,i){if(void 0!==e&&(void 0===i&&(i=!0),0!==b.slides.length)){var a=b.slides.eq(e),n=a.find("."+b.params.lazyLoadingClass+":not(."+b.params.lazyStatusLoadedClass+"):not(."+b.params.lazyStatusLoadingClass+")");!a.hasClass(b.params.lazyLoadingClass)||a.hasClass(b.params.lazyStatusLoadedClass)||a.hasClass(b.params.lazyStatusLoadingClass)||(n=n.add(a[0])),0!==n.length&&n.each(function(){var e=t(this);e.addClass(b.params.lazyStatusLoadingClass);var n=e.attr("data-background"),o=e.attr("data-src"),s=e.attr("data-srcset"),r=e.attr("data-sizes");b.loadImage(e[0],o||n,s,r,!1,function(){if(n?(e.css("background-image",'url("'+n+'")'),e.removeAttr("data-background")):(s&&(e.attr("srcset",s),e.removeAttr("data-srcset")),r&&(e.attr("sizes",r),e.removeAttr("data-sizes")),o&&(e.attr("src",o),e.removeAttr("data-src"))),e.addClass(b.params.lazyStatusLoadedClass).removeClass(b.params.lazyStatusLoadingClass),a.find("."+b.params.lazyPreloaderClass+", ."+b.params.preloaderClass).remove(),b.params.loop&&i){var t=a.attr("data-swiper-slide-index");if(a.hasClass(b.params.slideDuplicateClass)){var l=b.wrapper.children('[data-swiper-slide-index="'+t+'"]:not(.'+b.params.slideDuplicateClass+")");b.lazy.loadImageInSlide(l.index(),!1)}else{var c=b.wrapper.children("."+b.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');b.lazy.loadImageInSlide(c.index(),!1)}}b.emit("onLazyImageReady",b,a[0],e[0])}),b.emit("onLazyImageLoad",b,a[0],e[0])})}},load:function(){var e,i=b.params.slidesPerView;if("auto"===i&&(i=0),b.lazy.initialImageLoaded||(b.lazy.initialImageLoaded=!0),b.params.watchSlidesVisibility)b.wrapper.children("."+b.params.slideVisibleClass).each(function(){b.lazy.loadImageInSlide(t(this).index())});else if(i>1)for(e=b.activeIndex;e<b.activeIndex+i;e++)b.slides[e]&&b.lazy.loadImageInSlide(e);else b.lazy.loadImageInSlide(b.activeIndex);if(b.params.lazyLoadingInPrevNext)if(i>1||b.params.lazyLoadingInPrevNextAmount&&b.params.lazyLoadingInPrevNextAmount>1){var a=b.params.lazyLoadingInPrevNextAmount,n=i,o=Math.min(b.activeIndex+n+Math.max(a,n),b.slides.length),s=Math.max(b.activeIndex-Math.max(n,a),0);for(e=b.activeIndex+i;e<o;e++)b.slides[e]&&b.lazy.loadImageInSlide(e);for(e=s;e<b.activeIndex;e++)b.slides[e]&&b.lazy.loadImageInSlide(e)}else{var r=b.wrapper.children("."+b.params.slideNextClass);r.length>0&&b.lazy.loadImageInSlide(r.index());var l=b.wrapper.children("."+b.params.slidePrevClass);l.length>0&&b.lazy.loadImageInSlide(l.index())}},onTransitionStart:function(){b.params.lazyLoading&&(b.params.lazyLoadingOnTransitionStart||!b.params.lazyLoadingOnTransitionStart&&!b.lazy.initialImageLoaded)&&b.lazy.load()},onTransitionEnd:function(){b.params.lazyLoading&&!b.params.lazyLoadingOnTransitionStart&&b.lazy.load()}},b.scrollbar={isTouched:!1,setDragPosition:function(e){var t=b.scrollbar,i=b.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY,a=i-t.track.offset()[b.isHorizontal()?"left":"top"]-t.dragSize/2,n=-b.minTranslate()*t.moveDivider,o=-b.maxTranslate()*t.moveDivider;a<n?a=n:a>o&&(a=o),a=-a/t.moveDivider,b.updateProgress(a),b.setWrapperTranslate(a,!0)},dragStart:function(e){var t=b.scrollbar;t.isTouched=!0,e.preventDefault(),e.stopPropagation(),t.setDragPosition(e),clearTimeout(t.dragTimeout),t.track.transition(0),b.params.scrollbarHide&&t.track.css("opacity",1),b.wrapper.transition(100),t.drag.transition(100),b.emit("onScrollbarDragStart",b)},dragMove:function(e){var t=b.scrollbar;t.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),b.wrapper.transition(0),t.track.transition(0),t.drag.transition(0),b.emit("onScrollbarDragMove",b))},dragEnd:function(e){var t=b.scrollbar;t.isTouched&&(t.isTouched=!1,b.params.scrollbarHide&&(clearTimeout(t.dragTimeout),t.dragTimeout=setTimeout(function(){t.track.css("opacity",0),t.track.transition(400)},1e3)),b.emit("onScrollbarDragEnd",b),b.params.scrollbarSnapOnRelease&&b.slideReset())},draggableEvents:function(){return!1!==b.params.simulateTouch||b.support.touch?b.touchEvents:b.touchEventsDesktop}(),enableDraggable:function(){var e=b.scrollbar,i=b.support.touch?e.track:document;t(e.track).on(e.draggableEvents.start,e.dragStart),t(i).on(e.draggableEvents.move,e.dragMove),t(i).on(e.draggableEvents.end,e.dragEnd)},disableDraggable:function(){var e=b.scrollbar,i=b.support.touch?e.track:document;t(e.track).off(b.draggableEvents.start,e.dragStart),t(i).off(b.draggableEvents.move,e.dragMove),t(i).off(b.draggableEvents.end,e.dragEnd)},set:function(){if(b.params.scrollbar){var e=b.scrollbar;e.track=t(b.params.scrollbar),b.params.uniqueNavElements&&"string"==typeof b.params.scrollbar&&e.track.length>1&&1===b.container.find(b.params.scrollbar).length&&(e.track=b.container.find(b.params.scrollbar)),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=t('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=b.isHorizontal()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=b.size/b.virtualSize,e.moveDivider=e.divider*(e.trackSize/b.size),e.dragSize=e.trackSize*e.divider,b.isHorizontal()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.divider>=1?e.track[0].style.display="none":e.track[0].style.display="",b.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(b.params.scrollbar){var e,t=b.scrollbar,i=(b.translate,t.dragSize);e=(t.trackSize-t.dragSize)*b.progress,b.rtl&&b.isHorizontal()?(e=-e,e>0?(i=t.dragSize-e,e=0):-e+t.dragSize>t.trackSize&&(i=t.trackSize+e)):e<0?(i=t.dragSize+e,e=0):e+t.dragSize>t.trackSize&&(i=t.trackSize-e),b.isHorizontal()?(b.support.transforms3d?t.drag.transform("translate3d("+e+"px, 0, 0)"):t.drag.transform("translateX("+e+"px)"),t.drag[0].style.width=i+"px"):(b.support.transforms3d?t.drag.transform("translate3d(0px, "+e+"px, 0)"):t.drag.transform("translateY("+e+"px)"),t.drag[0].style.height=i+"px"),b.params.scrollbarHide&&(clearTimeout(t.timeout),t.track[0].style.opacity=1,t.timeout=setTimeout(function(){t.track[0].style.opacity=0,t.track.transition(400)},1e3))}},setTransition:function(e){b.params.scrollbar&&b.scrollbar.drag.transition(e)}},b.controller={LinearSpline:function(e,t){this.x=e,this.y=t,this.lastIndex=e.length-1;var i,a;this.x.length;this.interpolate=function(e){return e?(a=n(this.x,e),i=a-1,(e-this.x[i])*(this.y[a]-this.y[i])/(this.x[a]-this.x[i])+this.y[i]):0};var n=function(){var e,t,i;return function(a,n){for(t=-1,e=a.length;e-t>1;)a[i=e+t>>1]<=n?t=i:e=i;return e}}()},getInterpolateFunction:function(e){b.controller.spline||(b.controller.spline=b.params.loop?new b.controller.LinearSpline(b.slidesGrid,e.slidesGrid):new b.controller.LinearSpline(b.snapGrid,e.snapGrid))},setTranslate:function(e,t){function i(t){e=t.rtl&&"horizontal"===t.params.direction?-b.translate:b.translate,"slide"===b.params.controlBy&&(b.controller.getInterpolateFunction(t),n=-b.controller.spline.interpolate(-e)),n&&"container"!==b.params.controlBy||(a=(t.maxTranslate()-t.minTranslate())/(b.maxTranslate()-b.minTranslate()),n=(e-b.minTranslate())*a+t.minTranslate()),b.params.controlInverse&&(n=t.maxTranslate()-n),t.updateProgress(n),t.setWrapperTranslate(n,!1,b),t.updateActiveIndex()}var a,n,o=b.params.control;if(b.isArray(o))for(var s=0;s<o.length;s++)o[s]!==t&&o[s]instanceof Swiper&&i(o[s]);else o instanceof Swiper&&t!==o&&i(o)},setTransition:function(e,t){function i(t){t.setWrapperTransition(e,b),0!==e&&(t.onTransitionStart(),t.wrapper.transitionEnd(function(){n&&(t.params.loop&&"slide"===b.params.controlBy&&t.fixLoop(),t.onTransitionEnd())}))}var a,n=b.params.control;if(b.isArray(n))for(a=0;a<n.length;a++)n[a]!==t&&n[a]instanceof Swiper&&i(n[a]);else n instanceof Swiper&&t!==n&&i(n)}},b.parallax={setTranslate:function(){b.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){c(this,b.progress)}),b.slides.each(function(){var e=t(this);e.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){c(this,Math.min(Math.max(e[0].progress,-1),1))})})},setTransition:function(e){void 0===e&&(e=b.params.speed),b.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var i=t(this),a=parseInt(i.attr("data-swiper-parallax-duration"),10)||e;0===e&&(a=0),i.transition(a)})}},b.zoom={scale:1,currentScale:1,isScaling:!1,gesture:{slide:void 0,slideWidth:void 0,slideHeight:void 0,image:void 0,imageWrap:void 0,zoomMax:b.params.zoomMax},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,a=e.targetTouches[1].pageX,n=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(a-t,2)+Math.pow(n-i,2))},onGestureStart:function(e){var i=b.zoom;if(!b.support.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.gesture.scaleStart=i.getDistanceBetweenTouches(e)}if(!(i.gesture.slide&&i.gesture.slide.length||(i.gesture.slide=t(this),0===i.gesture.slide.length&&(i.gesture.slide=b.slides.eq(b.activeIndex)),i.gesture.image=i.gesture.slide.find("img, svg, canvas"),i.gesture.imageWrap=i.gesture.image.parent("."+b.params.zoomContainerClass),i.gesture.zoomMax=i.gesture.imageWrap.attr("data-swiper-zoom")||b.params.zoomMax,0!==i.gesture.imageWrap.length)))return void(i.gesture.image=void 0);i.gesture.image.transition(0),i.isScaling=!0},onGestureChange:function(e){var t=b.zoom;if(!b.support.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;t.gesture.scaleMove=t.getDistanceBetweenTouches(e)}t.gesture.image&&0!==t.gesture.image.length&&(b.support.gestures?t.scale=e.scale*t.currentScale:t.scale=t.gesture.scaleMove/t.gesture.scaleStart*t.currentScale,t.scale>t.gesture.zoomMax&&(t.scale=t.gesture.zoomMax-1+Math.pow(t.scale-t.gesture.zoomMax+1,.5)),t.scale<b.params.zoomMin&&(t.scale=b.params.zoomMin+1-Math.pow(b.params.zoomMin-t.scale+1,.5)),t.gesture.image.transform("translate3d(0,0,0) scale("+t.scale+")"))},
onGestureEnd:function(e){var t=b.zoom;!b.support.gestures&&("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2)||t.gesture.image&&0!==t.gesture.image.length&&(t.scale=Math.max(Math.min(t.scale,t.gesture.zoomMax),b.params.zoomMin),t.gesture.image.transition(b.params.speed).transform("translate3d(0,0,0) scale("+t.scale+")"),t.currentScale=t.scale,t.isScaling=!1,1===t.scale&&(t.gesture.slide=void 0))},onTouchStart:function(e,t){var i=e.zoom;i.gesture.image&&0!==i.gesture.image.length&&(i.image.isTouched||("android"===e.device.os&&t.preventDefault(),i.image.isTouched=!0,i.image.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,i.image.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(e){var t=b.zoom;if(t.gesture.image&&0!==t.gesture.image.length&&(b.allowClick=!1,t.image.isTouched&&t.gesture.slide)){t.image.isMoved||(t.image.width=t.gesture.image[0].offsetWidth,t.image.height=t.gesture.image[0].offsetHeight,t.image.startX=b.getTranslate(t.gesture.imageWrap[0],"x")||0,t.image.startY=b.getTranslate(t.gesture.imageWrap[0],"y")||0,t.gesture.slideWidth=t.gesture.slide[0].offsetWidth,t.gesture.slideHeight=t.gesture.slide[0].offsetHeight,t.gesture.imageWrap.transition(0));var i=t.image.width*t.scale,a=t.image.height*t.scale;if(!(i<t.gesture.slideWidth&&a<t.gesture.slideHeight)){if(t.image.minX=Math.min(t.gesture.slideWidth/2-i/2,0),t.image.maxX=-t.image.minX,t.image.minY=Math.min(t.gesture.slideHeight/2-a/2,0),t.image.maxY=-t.image.minY,t.image.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,t.image.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!t.image.isMoved&&!t.isScaling){if(b.isHorizontal()&&Math.floor(t.image.minX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x<t.image.touchesStart.x||Math.floor(t.image.maxX)===Math.floor(t.image.startX)&&t.image.touchesCurrent.x>t.image.touchesStart.x)return void(t.image.isTouched=!1);if(!b.isHorizontal()&&Math.floor(t.image.minY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y<t.image.touchesStart.y||Math.floor(t.image.maxY)===Math.floor(t.image.startY)&&t.image.touchesCurrent.y>t.image.touchesStart.y)return void(t.image.isTouched=!1)}e.preventDefault(),e.stopPropagation(),t.image.isMoved=!0,t.image.currentX=t.image.touchesCurrent.x-t.image.touchesStart.x+t.image.startX,t.image.currentY=t.image.touchesCurrent.y-t.image.touchesStart.y+t.image.startY,t.image.currentX<t.image.minX&&(t.image.currentX=t.image.minX+1-Math.pow(t.image.minX-t.image.currentX+1,.8)),t.image.currentX>t.image.maxX&&(t.image.currentX=t.image.maxX-1+Math.pow(t.image.currentX-t.image.maxX+1,.8)),t.image.currentY<t.image.minY&&(t.image.currentY=t.image.minY+1-Math.pow(t.image.minY-t.image.currentY+1,.8)),t.image.currentY>t.image.maxY&&(t.image.currentY=t.image.maxY-1+Math.pow(t.image.currentY-t.image.maxY+1,.8)),t.velocity.prevPositionX||(t.velocity.prevPositionX=t.image.touchesCurrent.x),t.velocity.prevPositionY||(t.velocity.prevPositionY=t.image.touchesCurrent.y),t.velocity.prevTime||(t.velocity.prevTime=Date.now()),t.velocity.x=(t.image.touchesCurrent.x-t.velocity.prevPositionX)/(Date.now()-t.velocity.prevTime)/2,t.velocity.y=(t.image.touchesCurrent.y-t.velocity.prevPositionY)/(Date.now()-t.velocity.prevTime)/2,Math.abs(t.image.touchesCurrent.x-t.velocity.prevPositionX)<2&&(t.velocity.x=0),Math.abs(t.image.touchesCurrent.y-t.velocity.prevPositionY)<2&&(t.velocity.y=0),t.velocity.prevPositionX=t.image.touchesCurrent.x,t.velocity.prevPositionY=t.image.touchesCurrent.y,t.velocity.prevTime=Date.now(),t.gesture.imageWrap.transform("translate3d("+t.image.currentX+"px, "+t.image.currentY+"px,0)")}}},onTouchEnd:function(e,t){var i=e.zoom;if(i.gesture.image&&0!==i.gesture.image.length){if(!i.image.isTouched||!i.image.isMoved)return i.image.isTouched=!1,void(i.image.isMoved=!1);i.image.isTouched=!1,i.image.isMoved=!1;var a=300,n=300,o=i.velocity.x*a,s=i.image.currentX+o,r=i.velocity.y*n,l=i.image.currentY+r;0!==i.velocity.x&&(a=Math.abs((s-i.image.currentX)/i.velocity.x)),0!==i.velocity.y&&(n=Math.abs((l-i.image.currentY)/i.velocity.y));var c=Math.max(a,n);i.image.currentX=s,i.image.currentY=l;var d=i.image.width*i.scale,p=i.image.height*i.scale;i.image.minX=Math.min(i.gesture.slideWidth/2-d/2,0),i.image.maxX=-i.image.minX,i.image.minY=Math.min(i.gesture.slideHeight/2-p/2,0),i.image.maxY=-i.image.minY,i.image.currentX=Math.max(Math.min(i.image.currentX,i.image.maxX),i.image.minX),i.image.currentY=Math.max(Math.min(i.image.currentY,i.image.maxY),i.image.minY),i.gesture.imageWrap.transition(c).transform("translate3d("+i.image.currentX+"px, "+i.image.currentY+"px,0)")}},onTransitionEnd:function(e){var t=e.zoom;t.gesture.slide&&e.previousIndex!==e.activeIndex&&(t.gesture.image.transform("translate3d(0,0,0) scale(1)"),t.gesture.imageWrap.transform("translate3d(0,0,0)"),t.gesture.slide=t.gesture.image=t.gesture.imageWrap=void 0,t.scale=t.currentScale=1)},toggleZoom:function(e,i){var a=e.zoom;if(a.gesture.slide||(a.gesture.slide=e.clickedSlide?t(e.clickedSlide):e.slides.eq(e.activeIndex),a.gesture.image=a.gesture.slide.find("img, svg, canvas"),a.gesture.imageWrap=a.gesture.image.parent("."+e.params.zoomContainerClass)),a.gesture.image&&0!==a.gesture.image.length){var n,o,s,r,l,c,d,p,u,m,h,g,v,f,b,C,w,y;void 0===a.image.touchesStart.x&&i?(n="touchend"===i.type?i.changedTouches[0].pageX:i.pageX,o="touchend"===i.type?i.changedTouches[0].pageY:i.pageY):(n=a.image.touchesStart.x,o=a.image.touchesStart.y),a.scale&&1!==a.scale?(a.scale=a.currentScale=1,a.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)"),a.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)"),a.gesture.slide=void 0):(a.scale=a.currentScale=a.gesture.imageWrap.attr("data-swiper-zoom")||e.params.zoomMax,i?(w=a.gesture.slide[0].offsetWidth,y=a.gesture.slide[0].offsetHeight,s=a.gesture.slide.offset().left,r=a.gesture.slide.offset().top,l=s+w/2-n,c=r+y/2-o,u=a.gesture.image[0].offsetWidth,m=a.gesture.image[0].offsetHeight,h=u*a.scale,g=m*a.scale,v=Math.min(w/2-h/2,0),f=Math.min(y/2-g/2,0),b=-v,C=-f,d=l*a.scale,p=c*a.scale,d<v&&(d=v),d>b&&(d=b),p<f&&(p=f),p>C&&(p=C)):(d=0,p=0),a.gesture.imageWrap.transition(300).transform("translate3d("+d+"px, "+p+"px,0)"),a.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+a.scale+")"))}},attachEvents:function(e){var i=e?"off":"on";if(b.params.zoom){var a=(b.slides,!("touchstart"!==b.touchEvents.start||!b.support.passiveListener||!b.params.passiveListeners)&&{passive:!0,capture:!1});b.support.gestures?(b.slides[i]("gesturestart",b.zoom.onGestureStart,a),b.slides[i]("gesturechange",b.zoom.onGestureChange,a),b.slides[i]("gestureend",b.zoom.onGestureEnd,a)):"touchstart"===b.touchEvents.start&&(b.slides[i](b.touchEvents.start,b.zoom.onGestureStart,a),b.slides[i](b.touchEvents.move,b.zoom.onGestureChange,a),b.slides[i](b.touchEvents.end,b.zoom.onGestureEnd,a)),b[i]("touchStart",b.zoom.onTouchStart),b.slides.each(function(e,a){t(a).find("."+b.params.zoomContainerClass).length>0&&t(a)[i](b.touchEvents.move,b.zoom.onTouchMove)}),b[i]("touchEnd",b.zoom.onTouchEnd),b[i]("transitionEnd",b.zoom.onTransitionEnd),b.params.zoomToggle&&b.on("doubleTap",b.zoom.toggleZoom)}},init:function(){b.zoom.attachEvents()},destroy:function(){b.zoom.attachEvents(!0)}},b._plugins=[];for(var B in b.plugins){var R=b.plugins[B](b,b.params[B]);R&&b._plugins.push(R)}return b.callPlugins=function(e){for(var t=0;t<b._plugins.length;t++)e in b._plugins[t]&&b._plugins[t][e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},b.emitterEventListeners={},b.emit=function(e){b.params[e]&&b.params[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);var t;if(b.emitterEventListeners[e])for(t=0;t<b.emitterEventListeners[e].length;t++)b.emitterEventListeners[e][t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);b.callPlugins&&b.callPlugins(e,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},b.on=function(e,t){return e=d(e),b.emitterEventListeners[e]||(b.emitterEventListeners[e]=[]),b.emitterEventListeners[e].push(t),b},b.off=function(e,t){var i;if(e=d(e),void 0===t)return b.emitterEventListeners[e]=[],b;if(b.emitterEventListeners[e]&&0!==b.emitterEventListeners[e].length){for(i=0;i<b.emitterEventListeners[e].length;i++)b.emitterEventListeners[e][i]===t&&b.emitterEventListeners[e].splice(i,1);return b}},b.once=function(e,t){e=d(e);var i=function(){t(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),b.off(e,i)};return b.on(e,i),b},b.a11y={makeFocusable:function(e){return e.attr("tabIndex","0"),e},addRole:function(e,t){return e.attr("role",t),e},addLabel:function(e,t){return e.attr("aria-label",t),e},disable:function(e){return e.attr("aria-disabled",!0),e},enable:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){13===e.keyCode&&(t(e.target).is(b.params.nextButton)?(b.onClickNext(e),b.isEnd?b.a11y.notify(b.params.lastSlideMessage):b.a11y.notify(b.params.nextSlideMessage)):t(e.target).is(b.params.prevButton)&&(b.onClickPrev(e),b.isBeginning?b.a11y.notify(b.params.firstSlideMessage):b.a11y.notify(b.params.prevSlideMessage)),t(e.target).is("."+b.params.bulletClass)&&t(e.target)[0].click())},liveRegion:t('<span class="'+b.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(e){var t=b.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},init:function(){b.params.nextButton&&b.nextButton&&b.nextButton.length>0&&(b.a11y.makeFocusable(b.nextButton),b.a11y.addRole(b.nextButton,"button"),b.a11y.addLabel(b.nextButton,b.params.nextSlideMessage)),b.params.prevButton&&b.prevButton&&b.prevButton.length>0&&(b.a11y.makeFocusable(b.prevButton),b.a11y.addRole(b.prevButton,"button"),b.a11y.addLabel(b.prevButton,b.params.prevSlideMessage)),t(b.container).append(b.a11y.liveRegion)},initPagination:function(){b.params.pagination&&b.params.paginationClickable&&b.bullets&&b.bullets.length&&b.bullets.each(function(){var e=t(this);b.a11y.makeFocusable(e),b.a11y.addRole(e,"button"),b.a11y.addLabel(e,b.params.paginationBulletMessage.replace(/{{index}}/,e.index()+1))})},destroy:function(){b.a11y.liveRegion&&b.a11y.liveRegion.length>0&&b.a11y.liveRegion.remove()}},b.init=function(){b.params.loop&&b.createLoop(),b.updateContainerSize(),b.updateSlidesSize(),b.updatePagination(),b.params.scrollbar&&b.scrollbar&&(b.scrollbar.set(),b.params.scrollbarDraggable&&b.scrollbar.enableDraggable()),"slide"!==b.params.effect&&b.effects[b.params.effect]&&(b.params.loop||b.updateProgress(),b.effects[b.params.effect].setTranslate()),b.params.loop?b.slideTo(b.params.initialSlide+b.loopedSlides,0,b.params.runCallbacksOnInit):(b.slideTo(b.params.initialSlide,0,b.params.runCallbacksOnInit),0===b.params.initialSlide&&(b.parallax&&b.params.parallax&&b.parallax.setTranslate(),b.lazy&&b.params.lazyLoading&&(b.lazy.load(),b.lazy.initialImageLoaded=!0))),b.attachEvents(),b.params.observer&&b.support.observer&&b.initObservers(),b.params.preloadImages&&!b.params.lazyLoading&&b.preloadImages(),b.params.zoom&&b.zoom&&b.zoom.init(),b.params.autoplay&&b.startAutoplay(),b.params.keyboardControl&&b.enableKeyboardControl&&b.enableKeyboardControl(),b.params.mousewheelControl&&b.enableMousewheelControl&&b.enableMousewheelControl(),b.params.hashnavReplaceState&&(b.params.replaceState=b.params.hashnavReplaceState),b.params.history&&b.history&&b.history.init(),b.params.hashnav&&b.hashnav&&b.hashnav.init(),b.params.a11y&&b.a11y&&b.a11y.init(),b.emit("onInit",b)},b.cleanupStyles=function(){b.container.removeClass(b.classNames.join(" ")).removeAttr("style"),b.wrapper.removeAttr("style"),b.slides&&b.slides.length&&b.slides.removeClass([b.params.slideVisibleClass,b.params.slideActiveClass,b.params.slideNextClass,b.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row"),b.paginationContainer&&b.paginationContainer.length&&b.paginationContainer.removeClass(b.params.paginationHiddenClass),b.bullets&&b.bullets.length&&b.bullets.removeClass(b.params.bulletActiveClass),b.params.prevButton&&t(b.params.prevButton).removeClass(b.params.buttonDisabledClass),b.params.nextButton&&t(b.params.nextButton).removeClass(b.params.buttonDisabledClass),b.params.scrollbar&&b.scrollbar&&(b.scrollbar.track&&b.scrollbar.track.length&&b.scrollbar.track.removeAttr("style"),b.scrollbar.drag&&b.scrollbar.drag.length&&b.scrollbar.drag.removeAttr("style"))},b.destroy=function(e,t){b.detachEvents(),b.stopAutoplay(),b.params.scrollbar&&b.scrollbar&&b.params.scrollbarDraggable&&b.scrollbar.disableDraggable(),b.params.loop&&b.destroyLoop(),t&&b.cleanupStyles(),b.disconnectObservers(),b.params.zoom&&b.zoom&&b.zoom.destroy(),b.params.keyboardControl&&b.disableKeyboardControl&&b.disableKeyboardControl(),b.params.mousewheelControl&&b.disableMousewheelControl&&b.disableMousewheelControl(),b.params.a11y&&b.a11y&&b.a11y.destroy(),b.params.history&&!b.params.replaceState&&window.removeEventListener("popstate",b.history.setHistoryPopState),b.params.hashnav&&b.hashnav&&b.hashnav.destroy(),b.emit("onDestroy"),!1!==e&&(b=null)},b.init(),b}},Swiper.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1,lteIE9:function(){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}()},device:function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),i=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),n=!i&&e.match(/(iPhone\sOS)\s([\d_]+)/);return{ios:i||n||a,android:t}}(),support:{touch:window.Modernizr&&!0===Modernizr.touch||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&!0===Modernizr.csstransforms3d||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<t.length;i++)if(t[i]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}(),passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:function(){return"ongesturestart"in window}()},plugins:{}}}(),define("framework7",function(e){return function(){return e.Framework7}}(this)),void 0===Common)var Common={};if(define("notification",["backbone"],function(e){"use strict";var t=function(){};if(_.extend(t.prototype,e.Events),void 0!==Common.NotificationCenter)throw"Native Common.NotificationCenter instance already defined.";t.extend=e.Model.extend,Common.NotificationCenter=new t}),void 0===Common)var Common={};if(Common.IrregularStack=function(e){var t=[],i=function(e,t){return"object"==typeof e&&"object"==typeof t&&window.JSON?window.JSON.stringify(e)===window.JSON.stringify(t):e===t};e=e||{};var a=e.strongCompare||i,n=e.weakCompare||i,o=function(e,i){for(var a=t.length-1;a>=0;a--)if(i(t[a],e))return a;return-1};return{push:function(e){t.push(e)},pop:function(e){var i=o(e,a);if(-1!=i)return t.splice(i,1)[0]},get:function(e){var i=o(e,n);if(-1!=i)return t[i]},exist:function(e){return!(o(e,a)<0)}}},define("irregularstack",function(){}),void 0===Common)var Common={};if(Common.SharedSettings=new function(){var e=[],t={};return{set:function(i,a){void 0===t[i]&&e.push(i),t[i]=a},get:function(e){return t[e]},remove:function(i){var a=e.indexOf(i);-1!=a&&e.splice(a,1),delete t[i]},size:function(){return e.length}}},define("sharedsettings",function(){}),function(){var e=function(e,t){for(var i=e.split("."),a=t||window,n=0,o=i.length;n<o;n++)a=a[i[n]]||{};return a},t=function(e){_.extend(this,e||{}),this.eventbus=new a({application:this}),this.createApplicationNamespace(),this.initialize.apply(this,arguments),!1!==this.autoCreate&&$($.proxy(this.onReady,this))};if(_.extend(t.prototype,{nameSpace:"Application",models:{},collections:{},controllers:{},allocationMap:{model:"Models",collection:"Collections",controller:"Controllers",view:"Views"},createApplicationNamespace:function(){var e=window;this.nameSpace&&void 0===e[this.nameSpace]&&(e[this.nameSpace]={}),e[this.nameSpace]=this,_.each(this.allocationMap,function(e,t){this[e]=this[e]||{}},this)},initialize:function(){},onReady:function(){this.start()},start:function(){this.initializeControllers(this.controllers||{}),this.launchControllers(),this.launch.call(this)},getClasseRefs:function(t,i){var a={},n=this.allocationMap[t],o=this[n];return _.each(i,function(t){a[t]=e(t,t.indexOf(".")>-1?window:o)},this),a},initializeControllers:function(t){this.controllers={},_.each(t,function(t){var i=t.indexOf(".")>-1?window:this[this.allocationMap.controller],a=e(t,i),n=(t.split(".").pop(),new a({id:t,application:this}));n.views=this.getClasseRefs("view",n.views||[]),_.extend(this.models,this.getClasseRefs("model",n.models||[])),_.extend(this.collections,this.getClasseRefs("collection",n.collections||{})),this.buildCollections(),this.controllers[t]=n},this)},launchControllers:function(){_.each(this.controllers,function(e,t){e.onLaunch(this)},this)},launch:function(){},addListeners:function(e,t){this.eventbus.addListeners(e,t)},getController:function(e){return this.controllers[e]},getModel:function(e){this._modelsCache=this._modelsCache||{};var t=this._modelsCache[e],i=this.getModelConstructor(e);return!t&&i&&(t=this.createModel(e),this._modelsCache[e]=t),t||null},getModelConstructor:function(e){return this.models[e]},createModel:function(e,t){var i=this.getModelConstructor(e),a=null;return i&&(a=new i(_.extend(t||{}))),a},getCollection:function(e){this._collectionsCache=this._collectionsCache||{};var t=this._collectionsCache[e],i=this.getCollectionConstructor(e);return!t&&i&&(t=this.createCollection(e),this._collectionsCache[e]=t),t||null},getCollectionConstructor:function(e){return this.collections[e]},createCollection:function(e){var t=this.getCollectionConstructor(e),i=null;return t&&(i=new t),i},buildCollections:function(){_.each(this.collections,function(e,t){this.getCollection(t)},this)}}),void 0!==Backbone.Application)throw"Native Backbone.Application instance already defined.";Backbone.Application=t,Backbone.Application.extend=Backbone.Model.extend;var i=function(e){_.extend(this,e||{}),this.initialize.apply(this,arguments)};if(_.extend(i.prototype,{name:null,views:{},models:{},collections:{},initialize:function(e){},addListeners:function(e){this.getApplication().addListeners(e,this)},onLaunch:function(e){},getApplication:function(){return this.application},getView:function(e){return this._viewsCache[e]},getViewConstructor:function(e){return this.views[e]},createView:function(e,t){var i=this.getViewConstructor(e),a=_.extend(t||{},{alias:e});return this._viewsCache=this._viewsCache||{},this._viewsCache[e]=new i(a),this._viewsCache[e].options=_.extend({},a),this._viewsCache[e]},getModel:function(e){return this.application.getModel(e)},getModelConstructor:function(e){return this.application.getModelConstructor(e)},createModel:function(e,t){return this.application.createModel(e)},getCollection:function(e){return this.application.getCollection(e)},getCollectionConstructor:function(e){return this.application.getCollectionConstructor(e)},createCollection:function(e){return this.application.createCollection(e)},fireEvent:function(e,t,i){this.application.eventbus.fireEvent(e,t,i)},bindViewEvents:function(e,t){this.unbindViewEvents(e),t=_.isFunction(t)?t.call(this):t;for(var i in t){var a=t[i];_.isFunction(a)||(a=this[t[i]]);var n=i.match(/^(\S+)\s*(.*)$/),o=n[1],s=n[2];a=_.bind(a,this),o+=".bindViewEvents"+e.cid,e.$el.on(o,s,a)}return this},unbindViewEvents:function(e){return e.$el.off(".bindViewEvents"+e.cid),this}}),void 0!==Backbone.Controller)throw"Native Backbone.Controller instance already defined.";Backbone.Controller=i,Backbone.Controller.extend=Backbone.Model.extend;var a=function(e){var t=this;_.extend(this,e||{}),_.extend(Backbone.View.prototype,{alias:null,hidden:!1,getAlias:function(){return this.options.alias},fireEvent:function(e,i){this.trigger.apply(this,arguments),t.fireEvent(this.getAlias(),e,i)},hide:function(){this.$el.hide(),this.hidden=!0},show:function(){this.$el.show(),this.hidden=!1}})};if(_.extend(a.prototype,{pool:{},addListeners:function(e,t){this.pool[t.id]=this.pool[t.id]||{};var i=this.pool[t.id];_.isArray(e)?_.each(e,function(e){this.addListeners(e,t)},this):_.isObject(e)&&_.each(e,function(e,t){_.each(e,function(e,a){i[t]=i[t]||{},i[t][a]=i[t][a]||[],i[t][a].push(e)},this)},this)},fireEvent:function(e,t,i){var a=this.getApplication();_.each(this.pool,function(n,o){var s=n[e];if(s){var r=s[t],l=a.getController(o);_.each(r,function(e){e.apply(l,i)})}},this)},getApplication:function(){return this.application}}),void 0!==Backbone.EventBus)throw"Native Backbone.Application instance already defined.";Backbone.EventBus=a}(),define("core",["backbone","notification","irregularstack","sharedsettings"],function(){}),define("extendes",["jquery","underscore","framework7"],function(){String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})}),jQuery.fn.extend({single:function(e,t,i,a){return this.off(e).on(e,t,i,a)}});var e=["addClass","toggleClass","removeClass"];_.each(e,function(e,t){var i=Dom7.fn[e];Dom7.fn[e]=function(t){var a=i.apply(this,arguments);return this.trigger(e,t),a}}),_.buffered=function(e,t,i,a){var n;return function(){var o=a||Array.prototype.slice.call(arguments,0),s=i||this;n&&clearTimeout(n),n=setTimeout(function(){e.apply(s,o)},t)}}}),void 0===Common)var Common={};if(Common.component=Common.component||{},Common.Analytics=Common.component.Analytics=new function(){var e;return{initialize:function(t,i){if(void 0===t)throw"Analytics: invalid id.";if(void 0===i||"[object String]"!==Object.prototype.toString.apply(i))throw"Analytics: invalid category type.";e=i,$("head").append('<script type="text/javascript">var _gaq = _gaq || [];_gaq.push(["_setAccount", "'+t+'"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);})();<\/script>')},trackEvent:function(t,i,a){if(void 0!==t&&"[object String]"!==Object.prototype.toString.apply(t))throw"Analytics: invalid action type.";if(void 0!==i&&"[object String]"!==Object.prototype.toString.apply(i))throw"Analytics: invalid label type.";if(void 0!==a&&("[object Number]"!==Object.prototype.toString.apply(a)||!isFinite(a)))throw"Analytics: invalid value type.";if("undefined"!=typeof _gaq){if("undefined"===e)throw"Analytics is not initialized.";_gaq.push(["_trackEvent",e,t,i,a])}}}},define("analytics",["jquery"],function(){}),void 0===Common)var Common={};if(Common.Gateway=new function(){var e=this,t=$(e),i={init:function(e){t.trigger("init",e)},openDocument:function(e){t.trigger("opendocument",e)},showMessage:function(e){t.trigger("showmessage",e)},applyEditRights:function(e){t.trigger("applyeditrights",e)},processSaveResult:function(e){t.trigger("processsaveresult",e)},processRightsChange:function(e){t.trigger("processrightschange",e)},refreshHistory:function(e){t.trigger("refreshhistory",e)},setHistoryData:function(e){t.trigger("sethistorydata",e)},setEmailAddresses:function(e){t.trigger("setemailaddresses",e)},setActionLink:function(e){t.trigger("setactionlink",e.url)},processMailMerge:function(e){t.trigger("processmailmerge",e)},downloadAs:function(e){t.trigger("downloadas",e)},processMouse:function(e){t.trigger("processmouse",e)},internalCommand:function(e){t.trigger("internalcommand",e)},resetFocus:function(e){t.trigger("resetfocus",e)},setUsers:function(e){t.trigger("setusers",e)},showSharingSettings:function(e){t.trigger("showsharingsettings",e)},setSharingSettings:function(e){t.trigger("setsharingsettings",e)},insertImage:function(e){t.trigger("insertimage",e)},setMailMergeRecipients:function(e){t.trigger("setmailmergerecipients",e)}},a=function(e){window.parent&&window.JSON&&(e.frameEditorId=window.frameEditorId,window.parent.postMessage(window.JSON.stringify(e),"*"))},n=function(e){var t=e.data;if("[object String]"===Object.prototype.toString.apply(t)&&window.JSON){var a,n;try{a=window.JSON.parse(t)}catch(e){a=""}a&&(n=i[a.command])&&n.call(this,a.data)}},o=function(e){n(e)};return window.attachEvent?window.attachEvent("onmessage",o):window.addEventListener("message",o,!1),{appReady:function(){a({event:"onAppReady"})},requestEditRights:function(){a({event:"onRequestEditRights"})},requestHistory:function(){a({event:"onRequestHistory"})},requestHistoryData:function(e){a({event:"onRequestHistoryData",data:e})},requestRestore:function(e,t){a({event:"onRequestRestore",data:{version:e,url:t}})},requestEmailAddresses:function(){a({event:"onRequestEmailAddresses"})},requestStartMailMerge:function(){a({event:"onRequestStartMailMerge"})},requestHistoryClose:function(e){a({event:"onRequestHistoryClose"})},reportError:function(e,t){a({event:"onError",data:{errorCode:e,errorDescription:t}})},reportWarning:function(e,t){a({event:"onWarning",data:{warningCode:e,warningDescription:t}})},sendInfo:function(e){a({event:"onInfo",data:e})},setDocumentModified:function(e){a({event:"onDocumentStateChange",data:e})},internalMessage:function(e,t){a({event:"onInternalMessage",data:{type:e,data:t}})},updateVersion:function(){a({event:"onOutdatedVersion"})},downloadAs:function(e){a({event:"onDownloadAs",data:e})},requestSaveAs:function(e,t){a({event:"onRequestSaveAs",data:{url:e,title:t}})},collaborativeChanges:function(){a({event:"onCollaborativeChanges"})},requestRename:function(e){a({event:"onRequestRename",data:e})},metaChange:function(e){a({event:"onMetaChange",data:e})},documentReady:function(){a({event:"onDocumentReady"})},requestClose:function(){a({event:"onRequestClose"})},requestMakeActionLink:function(e){a({event:"onMakeActionLink",data:e})},requestUsers:function(){a({event:"onRequestUsers"})},requestSendNotify:function(e){a({event:"onRequestSendNotify",data:e})},requestInsertImage:function(){a({event:"onRequestInsertImage"})},requestMailMergeRecipients:function(){a({event:"onRequestMailMergeRecipients"})},on:function(i,a){var n=function(t,i){a.call(e,i)};t.on(i,n)}}},define("gateway",["jquery"],function(){}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("../vendor/es6-promise/es6-promise.auto.min.js",t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}function i(e){N=e}function a(e){F=e}function n(){return void 0!==R?function(){R(s)}:o()}function o(){var e=setTimeout;return function(){return e(s,1)}}function s(){for(var e=0;e<B;e+=2){(0,q[e])(q[e+1]),q[e]=void 0,q[e+1]=void 0}B=0}function r(e,t){var i=this,a=new this.constructor(c);void 0===a[G]&&S(a);var n=i._state;if(n){var o=arguments[n-1];F(function(){return x(n,a,o,i._result)})}else w(i,a,e,t);return a}function l(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(c);return v(i,e),i}function c(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function u(e,t,i,a){try{e.call(t,i,a)}catch(e){return e}}function m(e,t,i){F(function(e){var a=!1,n=u(i,t,function(i){a||(a=!0,t!==i?v(e,i):b(e,i))},function(t){a||(a=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!a&&n&&(a=!0,C(e,n))},e)}function h(e,t){t._state===Y?b(e,t._result):t._state===X?C(e,t._result):w(t,void 0,function(t){return v(e,t)},function(t){return C(e,t)})}function g(e,i,a){i.constructor===e.constructor&&a===r&&i.constructor.resolve===l?h(e,i):void 0===a?b(e,i):t(a)?m(e,i,a):b(e,i)}function v(t,i){if(t===i)C(t,d());else if(e(i)){var a=void 0;try{a=i.then}catch(e){return void C(t,e)}g(t,i,a)}else b(t,i)}function f(e){e._onerror&&e._onerror(e._result),y(e)}function b(e,t){e._state===$&&(e._result=t,e._state=Y,0!==e._subscribers.length&&F(y,e))}function C(e,t){e._state===$&&(e._state=X,e._result=t,F(f,e))}function w(e,t,i,a){var n=e._subscribers,o=n.length;e._onerror=null,n[o]=t,n[o+Y]=i,n[o+X]=a,0===o&&e._state&&F(y,e)}function y(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var a=void 0,n=void 0,o=e._result,s=0;s<t.length;s+=3)a=t[s],n=t[s+i],a?x(i,a,n,o):n(o);e._subscribers.length=0}}function x(e,i,a,n){var o=t(a),s=void 0,r=void 0,l=!0;if(o){try{s=a(n)}catch(e){l=!1,r=e}if(i===s)return void C(i,p())}else s=n;i._state!==$||(o&&l?v(i,s):!1===l?C(i,r):e===Y?b(i,s):e===X&&C(i,s))}function k(e,t){try{t(function(t){v(e,t)},function(t){C(e,t)})}catch(t){C(e,t)}}function T(){return K++}function S(e){e[G]=K++,e._state=void 0,e._result=void 0,e._subscribers=[]}function _(){return new Error("Array Methods must be provided an Array")}function A(e){return new J(this,e).promise}function E(e){var t=this;return new t(O(e)?function(i,a){for(var n=e.length,o=0;o<n;o++)t.resolve(e[o]).then(i,a)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function P(e){var t=this,i=new t(c);return C(i,e),i}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=Q}var L=void 0;L=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var O=L,B=0,R=void 0,N=void 0,F=function(e,t){q[B]=e,q[B+1]=t,2===(B+=2)&&(N?N(s):W())},H="undefined"!=typeof window?window:void 0,z=H||{},U=z.MutationObserver||z.WebKitMutationObserver,V="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),j="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,q=new Array(1e3),W=void 0;W=V?function(){return function(){return process.nextTick(s)}}():U?function(){var e=0,t=new U(s),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}():j?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){return e.port2.postMessage(0)}}():void 0===H&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx");return R=e.runOnLoop||e.runOnContext,n()}catch(e){return o()}}():o()
;var G=Math.random().toString(36).substring(2),$=void 0,Y=1,X=2,K=0,J=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(c),this.promise[G]||S(this.promise),O(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&b(this.promise,this._result))):C(this.promise,_())}return e.prototype._enumerate=function(e){for(var t=0;this._state===$&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,a=i.resolve;if(a===l){var n=void 0,o=void 0,s=!1;try{n=e.then}catch(e){s=!0,o=e}if(n===r&&e._state!==$)this._settledAt(e._state,t,e._result);else if("function"!=typeof n)this._remaining--,this._result[t]=e;else if(i===Q){var d=new i(c);s?C(d,o):g(d,e,n),this._willSettleAt(d,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(a(e),t)},e.prototype._settledAt=function(e,t,i){var a=this.promise;a._state===$&&(this._remaining--,e===X?C(a,i):this._result[t]=i),0===this._remaining&&b(a,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;w(e,void 0,function(e){return i._settledAt(Y,t,e)},function(e){return i._settledAt(X,t,e)})},e}(),Q=function(){function e(t){this[G]=T(),this._result=this._state=void 0,this._subscribers=[],c!==t&&("function"!=typeof t&&M(),this instanceof e?k(this,t):I())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var i=this,a=i.constructor;return t(e)?i.then(function(t){return a.resolve(e()).then(function(){return t})},function(t){return a.resolve(e()).then(function(){throw t})}):i.then(e,e)},e}();return Q.prototype.then=r,Q.all=A,Q.race=E,Q.resolve=l,Q.reject=P,Q._setScheduler=i,Q._setAsap=a,Q._asap=F,Q.polyfill=D,Q.Promise=Q,Q.polyfill(),Q}),void 0===Common)var Common={};if(Common.Locale=new function(){"use strict";var l10n=null,loadcallback,apply=!1,_applyLocalization=function(e){try{if(e&&(loadcallback=e),l10n){for(var t in l10n){var i=t.split(".");if(i&&i.length>2){for(var a=window,n=0;n<i.length-1;++n)void 0===a[i[n]]&&(a[i[n]]=new Object),a=a[i[n]];a&&(a[i[i.length-1]]=l10n[t])}}loadcallback&&loadcallback()}else apply=!0}catch(e){}},_get=function(prop,scope){var res="";return l10n&&scope&&scope.name&&(res=l10n[scope.name+"."+prop]),res||(scope?eval(scope.name).prototype[prop]:"")},_getUrlParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))},_requireLang=function(){var e=(_getUrlParameterByName("lang")||"en").split(/[\-_]/)[0];fetch("locale/"+e+".json").then(function(t){if(!t.ok){if("en"!=e)return fetch("locale/en.json");throw new Error("server error")}return t.json()}).then(function(e){if(e.then)return e.json();throw l10n=e,new Error("loaded")}).then(function(e){l10n=e||{},apply&&_applyLocalization()}).catch(function(e){l10n=l10n||{},apply&&_applyLocalization(),"loaded"==e.message||console.log("fetch error: "+e)})};if(window.fetch)_requireLang();else{var polyfills=["../vendor/fetch/fetch.umd"];window.Promise?require(polyfills,_requireLang):require(["../vendor/es6-promise/es6-promise.auto.min.js"],function(){require(polyfills,_requireLang)})}return{apply:_applyLocalization,get:_get}},define("locale",function(){}),define("common/main/lib/util/LocalStorage",["gateway"],function(){Common.localStorage=new function(){var e,t,i={},a=function(e){"localstorage"==e.type&&(i=e.keys)};Common.Gateway.on("internalcommand",a);var n=function(){p||Common.Gateway.internalMessage("localstorage",{cmd:"get",keys:t})},o=function(){p||Common.Gateway.internalMessage("localstorage",{cmd:"set",keys:i})},s=function(e,t,a){if(p)try{localStorage.setItem(e,t)}catch(e){}else i[e]=t,!0===a&&Common.Gateway.internalMessage("localstorage",{cmd:"set",keys:{name:t}})},r=function(e,t,i){s(e,t?1:0,i)},l=function(e){return p?localStorage.getItem(e):void 0===i[e]?null:i[e]},c=function(e,t){var i=l(e);return t=t||!1,null!==i?0!=parseInt(i):t},d=function(e){return null!==l(e)};try{var p=!!window.localStorage}catch(e){p=!1}return{getId:function(){return e},setId:function(t){e=t},getItem:l,getBool:c,setBool:r,setItem:s,setKeysFilter:function(e){t=e},getKeysFilter:function(){return t},itemExists:d,sync:n,save:o}}}),void 0===Common)var Common={};if(void 0===Common.Utils&&(Common.Utils={}),Common.Utils=_.extend(new function(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},i="CSS1Compat"==document.compatMode,a=function(t,i){var a;return t&&(a=i.exec(e))?parseFloat(a[1]):0},n=document.documentMode,o=(t(/edge/),t(/opera/)),s=o&&t(/version\/10\.5/),r=!o&&(t(/msie/)||t(/trident/)||t(/edge/)),l=r&&(t(/msie 7/)&&8!=n&&9!=n&&10!=n||7==n),c=r&&(t(/msie 8/)&&7!=n&&9!=n&&10!=n||8==n),d=r&&(t(/msie 9/)&&7!=n&&8!=n&&10!=n||9==n),p=r&&(t(/msie 10/)&&7!=n&&8!=n&&9!=n||10==n),u=r&&(t(/trident\/7\.0/)&&7!=n&&8!=n&&9!=n&&10!=n||11==n),m=r&&t(/msie 6/),h=!r&&t(/\bchrome\b/),g=!r&&t(/webkit/),v=!r&&!h&&t(/safari/),f=v&&t(/applewebkit\/4/),b=v&&t(/version\/3/),C=v&&t(/version\/4/),w=v&&t(/version\/5\.0/),y=v&&t(/version\/5/),x=!g&&!r&&t(/gecko/),k=x&&t(/rv:1\.9/),T=x&&t(/rv:2\.0/),S=x&&t(/rv:5\./),_=x&&t(/rv:10\./),A=k&&t(/rv:1\.9\.0/),E=k&&t(/rv:1\.9\.1/),P=k&&t(/rv:1\.9\.2/),M=t(/windows|win32/),I=t(/macintosh|mac os x/),D=t(/linux/),L=a(!0,/\bchrome\/(\d+\.\d+)/),O=a(!0,/\bfirefox\/(\d+\.\d+)/),B=a(r,/msie (\d+\.\d+)/),R=a(o,/version\/(\d+\.\d+)/),N=a(v,/version\/(\d+\.\d+)/),F=a(g,/webkit\/(\d+\.\d+)/),H=/^https/i.test(window.location.protocol),z=/^(mailto:)?([a-z0-9'\._-]+@[a-z0-9\.-]+\.[a-z0-9]{2,4})([a-яё0-9\._%+-=\? :&]*)/i,U=/^(((https?)|(ftps?)):\/\/)?([\-\wа-яё]*:?[\-\wа-яё]*@)?(((1[0-9]{2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[0-9])\.){3}(1[0-9]{2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[0-9]))(:\d+)?(\/[%\-\wа-яё]*(\.[\wа-яё]{2,})?(([\wа-яё\-\.\?\\\/+@&#;:`~=%!,\(\)]*)(\.[\wа-яё]{2,})?)*)*\/?/i,V=/^(((https?)|(ftps?)):\/\/)?([\-\wа-яё]*:?[\-\wа-яё]*@)?(([\-\wа-яё]+\.)+[\wа-яё\-]{2,}(:\d+)?(\/[%\-\wа-яё]*(\.[\wа-яё]{2,})?(([\wа-яё\-\.\?\\\/+@&#;:`'~=%!,\(\)]*)(\.[\wа-яё]{2,})?)*)*\/?)/i,j=/^(((https?)|(ftps?)):\/\/)([\-\wа-яё]*:?[\-\wа-яё]*@)?(([\-\wа-яё]+)(:\d+)?(\/[%\-\wа-яё]*(\.[\wа-яё]{2,})?(([\wа-яё\-\.\?\\\/+@&#;:`'~=%!,\(\)]*)(\.[\wа-яё]{2,})?)*)*\/?)/i,q=/(mailto:)?([a-z0-9'\._-]+@[a-z0-9\.-]+\.[a-z0-9]{2,4})([a-яё0-9\._%+-=\?:&]*)/gi,W=/(mailto:|\s[@]|\s[+])?([a-z0-9'\._-]+@[a-z0-9\.-]+\.[a-z0-9]{2,4})([a-яё0-9\._%+-=\?:&]*)/gi,G=/(((https?)|(ftps?)):\/\/([\-\wа-яё]*:?[\-\wа-яё]*@)?)(((1[0-9]{2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[0-9])\.){3}(1[0-9]{2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[0-9]))(:\d+)?(\/[%\-\wа-яё]*(\.[\wа-яё]{2,})?(([\wа-яё\-\.\?\\\/+@&#;:`~=%!,\(\)]*)(\.[\wа-яё]{2,})?)*)*\/?/gi,Y=/((((https?)|(ftps?)):\/\/([\-\wа-яё]*:?[\-\wа-яё]*@)?)|(([\-\wа-яё]*:?[\-\wа-яё]*@)?www\.))((([\-\wа-яё]+\.)+[\wа-яё\-]{2,}|([\-\wа-яё]+))(:\d+)?(\/[%\-\wа-яё]*(\.[\wа-яё]{2,})?(([\wа-яё\-\.\?\\\/+@&#;:`~=%!,\(\)]*)(\.[\wа-яё]{2,})?)*)*\/?)/gi,X={Paragraph:0,Table:1,Header:2,TextArt:3,Shape:4,Image:5,Slide:6,Chart:7,MailMerge:8,Signature:9,Pivot:10,Cell:11},K={DRM:0,CSV:1,TXT:2,Paste:3,Columns:4},J=/android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent||navigator.vendor||window.opera),Q=this,Z=function(){if(Q.zoom=1,h&&!o&&!J&&document&&document.firstElementChild&&document.body)if(window.devicePixelRatio>.1){if(window.devicePixelRatio<1.99){var e=1;Q.zoom=window.devicePixelRatio/e}else{var e=2;Q.zoom=window.devicePixelRatio/e}document.firstElementChild.style.zoom=1/Q.zoom}else document.firstElementChild.style.zoom="normal";Q.innerWidth=window.innerWidth*Q.zoom,Q.innerHeight=window.innerHeight*Q.zoom};return Q.zoom=1,Q.innerWidth=window.innerWidth,Q.innerHeight=window.innerHeight,Z(),$(window).on("resize",Z),{userAgent:e,isStrict:i,isIEQuirks:r&&!i&&(m||l||c||d),isOpera:o,isOpera10_5:s,isWebKit:g,isChrome:h,isSafari:v,isSafari3:b,isSafari4:C,isSafari5:y,isSafari5_0:w,isSafari2:f,isIE:r,isIE6:m,isIE7:l,isIE7m:m||l,isIE7p:r&&!m,isIE8:c,isIE8m:m||l||c,isIE8p:r&&!(m||l),isIE9:d,isIE9m:m||l||c||d,isIE9p:r&&!(m||l||c),isIE10:p,isIE10m:m||l||c||d||p,isIE10p:r&&!(m||l||c||d),isIE11:u,isIE11m:m||l||c||d||p||u,isIE11p:r&&!(m||l||c||d||p),isGecko:x,isGecko3:k,isGecko4:T,isGecko5:S,isGecko10:_,isFF3_0:A,isFF3_5:E,isFF3_6:P,isFF4:4<=O&&O<5,isFF5:5<=O&&O<6,isFF10:10<=O&&O<11,isLinux:D,isWindows:M,isMac:I,chromeVersion:L,firefoxVersion:O,ieVersion:B,operaVersion:R,safariVersion:N,webKitVersion:F,isSecure:H,emailRe:z,ipRe:U,hostnameRe:V,localRe:j,emailStrongRe:q,emailAddStrongRe:W,ipStrongRe:G,hostnameStrongRe:Y,documentSettingsType:X,importTextType:K,zoom:function(){return Q.zoom},innerWidth:function(){return Q.innerWidth},innerHeight:function(){return Q.innerHeight}}},Common.Utils||{}),Common.Utils.ThemeColor=new function(){return{ThemeValues:[6,15,7,16,0,1,2,3,4,5],setColors:function(e,t){var i,a,n;if(t&&t.length>0){var o=[];for(i=0;i<t.length;i++)n=this.getHexColor(t[i].get_r(),t[i].get_g(),t[i].get_b()),o.push(n);this.standartcolors=o}var s=[];for(i=0;i<6;i++)for(a=0;a<10;a++){var r=i+6*a;n={color:this.getHexColor(e[r].get_r(),e[r].get_g(),e[r].get_b()),effectId:r,effectValue:this.ThemeValues[a]},s.push(n)}this.effectcolors=s},getEffectColors:function(){return this.effectcolors},getStandartColors:function(){return this.standartcolors},getHexColor:function(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),e+t+i},getRgbColor:function(e){var t="object"==typeof e?e.color:e;t=t.replace(/#/,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),t=parseInt(t,16);var i=new Asc.asc_CColor;return i.put_type("object"==typeof e&&void 0!==e.effectId?Asc.c_oAscColor.COLOR_TYPE_SCHEME:Asc.c_oAscColor.COLOR_TYPE_SRGB),i.put_r(t>>16),i.put_g((65280&t)>>8),i.put_b(255&t),i.put_a(255),void 0!==e.effectId&&i.put_value(e.effectId),i},colorValue2EffectId:function(e){if("object"==typeof e&&void 0!==e.effectValue&&this.effectcolors)for(var t=0;t<this.effectcolors.length;t++)if(this.effectcolors[t].effectValue===e.effectValue&&e.color.toUpperCase()===this.effectcolors[t].color.toUpperCase()){e.effectId=this.effectcolors[t].effectId;break}return e}}},Common.Utils.Metric=_.extend(new function(){var e=this;return e.c_MetricUnits={cm:0,pt:1,inch:2},e.currentMetric=e.c_MetricUnits.pt,e.metricName=["Cm","Pt","Inch"],e.defaultMetric=e.c_MetricUnits.cm,{c_MetricUnits:e.c_MetricUnits,txtCm:"cm",txtPt:"pt",txtInch:'"',setCurrentMetric:function(t){e.currentMetric=t},getCurrentMetric:function(){return e.currentMetric},getCurrentMetricName:function(){return this["txt"+e.metricName[e.currentMetric]]},getMetricName:function(t){return this["txt"+e.metricName[void 0!==t?t:0]]},setDefaultMetric:function(t){e.defaultMetric=t},getDefaultMetric:function(){return e.defaultMetric},fnRecalcToMM:function(t){if(null!==t&&void 0!==t)switch(e.currentMetric){case e.c_MetricUnits.cm:return 10*t;case e.c_MetricUnits.pt:return 25.4*t/72;case e.c_MetricUnits.inch:return 25.4*t}return t},fnRecalcFromMM:function(t){switch(e.currentMetric){case e.c_MetricUnits.cm:return parseFloat((t/10).toFixed(4));case e.c_MetricUnits.pt:return parseFloat((72*t/25.4).toFixed(3));case e.c_MetricUnits.inch:return parseFloat((t/25.4).toFixed(3))}return t}}},Common.Utils.Metric||{}),Common.Utils.RGBColor=function(e){var t,i,a;"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^hsb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){var t={},i=Math.round(e[1]),a=Math.round(255*e[2]/100),n=Math.round(255*e[3]/100);if(0==a)t.r=t.g=t.b=n;else{var o=n,s=(255-a)*n/255,r=i%60*(o-s)/60;360==i&&(i=0),i<60?(t.r=o,t.b=s,t.g=s+r):i<120?(t.g=o,t.b=s,t.r=o-r):i<180?(t.g=o,t.r=s,t.b=s+r):i<240?(t.b=o,t.r=s,t.g=o-r):i<300?(t.b=o,t.g=s,t.r=s+r):i<360?(t.r=o,t.g=s,t.b=o-r):(t.r=0,t.g=0,t.b=0)}return[Math.round(t.r),Math.round(t.g),Math.round(t.b)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],o=0;o<n.length;o++){var s=n[o].re,r=n[o].process,l=s.exec(e);if(l){var c=r(l);t=c[0],i=c[1],a=c[2]}}return t=t<0||isNaN(t)?0:t>255?255:t,i=i<0||isNaN(i)?0:i>255?255:i,a=a<0||isNaN(a)?0:a>255?255:a,{r:t,g:i,b:a,isEqual:function(e){return t==e.r&&i==e.g&&a==e.b},toRGB:function(){return"rgb("+t+", "+i+", "+a+")"},toRGBA:function(e){return void 0===e&&(e=1),"rgba("+t+", "+i+", "+a+", "+e+")"},toHex:function(){var e=t.toString(16),n=i.toString(16),o=a.toString(16);return 1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),"#"+e+n+o},toHSB:function(){var e={h:0,s:0,b:0},n=Math.min(t,i,a),o=Math.max(t,i,a),s=o-n;return e.b=o,e.s=0!=o?255*s/o:0,0!=e.s?e.h=t==o?0+(i-a)/s:i==o?2+(a-t)/s:4+(t-i)/s:e.h=0,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e.h=parseInt(e.h),e.s=parseInt(e.s),e.b=parseInt(e.b),e}}},Common.Utils.String=new function(){return{format:function(e){var t=_.toArray(arguments).slice(1);return t.length&&"object"==typeof t[0]&&(t=t[0]),e.replace(/\{(\d+)\}/g,function(e,i){return t[i]})},htmlEncode:function(e){return _.escape(e)},htmlDecode:function(e){return _.unescape(e)},ellipsis:function(e,t,i){if(e&&e.length>t){if(i){var a=e.substr(0,t-2),n=Math.max(a.lastIndexOf(" "),a.lastIndexOf("."),a.lastIndexOf("!"),a.lastIndexOf("?"));if(-1!==n&&n>=t-15)return a.substr(0,n)+"..."}return e.substr(0,t-3)+"..."}return e},platformKey:function(e,t,i){return _.isEmpty(t)&&(t=" ({0})"),Common.Utils.isMac?(_.isFunction(i)&&(e=i.call(this,e)),Common.Utils.String.format(t,e.replace(/\+(?=\S)/g,"").replace(/Ctrl|ctrl/g,"⌘").replace(/Alt|alt/g,"⌥").replace(/Shift|shift/g,"⇧"))):Common.Utils.String.format(t,e)}}},Common.Utils.isBrowserSupported=function(){return!(0!=Common.Utils.ieVersion&&Common.Utils.ieVersion<10||0!=Common.Utils.safariVersion&&Common.Utils.safariVersion<5||0!=Common.Utils.firefoxVersion&&Common.Utils.firefoxVersion<4||0!=Common.Utils.chromeVersion&&Common.Utils.chromeVersion<7||0!=Common.Utils.operaVersion&&Common.Utils.operaVersion<10.5)},Common.Utils.showBrowserRestriction=function(){if(!(document.getElementsByClassName&&document.getElementsByClassName("app-error-panel").length>0)){var e=window.DE?"Document":window.SSE?"Spreadsheet":window.PE?"Presentation":"that",t=document.createElement("div");t.innerHTML='<div class="app-error-panel"><div class="message-block"><div class="message-inner"><div class="title">Your browser is not supported.</div><div class="text">Sorry, '+e+' Editor is currently only supported in the latest versions of the Chrome, Firefox, Safari or Internet Explorer web browsers.</div></div></div><div class="message-auxiliary"></div></div>',document.body.appendChild(t),$("#loading-mask").hide().remove(),$("#viewport").hide().remove()}},Common.Utils.applyCustomization=function(e,t){for(var i in e){var a;if(t[i]&&(a=$(t[i]),a.length)){var n=e[i];!1===n||!1===n.visible?a.hide():(n.text&&a.text(n.text),!1===n.visible&&a.hide())}}},Common.Utils.applyCustomizationPlugins=function(plugins){if(plugins&&!(plugins.length<1)){var _createXMLHTTPObject=function(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e},_getPluginCode=function(url){if(!url)return"";try{var xhrObj=_createXMLHTTPObject();xhrObj&&url&&(xhrObj.open("GET",url,!1),xhrObj.send(""),200==xhrObj.status&&eval(xhrObj.responseText))}catch(e){}return null};plugins.forEach(function(e){e&&_getPluginCode(e)})}},Common.Utils.fillUserInfo=function(e,t,i){var a=e||{};return!a.id&&(a.id="uid-"+Date.now()),a.fullname=_.isEmpty(a.name)?i:a.name,a},Common.Utils.createXhr=function(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e},Common.Utils.getConfigJson=function(e){if(e)try{var t=Common.Utils.createXhr();if(t)return t.open("GET",e,!1),t.send(""),JSON.parse(t.responseText)}catch(e){}return null},Common.Utils.loadConfig=function(e,t){"use strict";fetch(e).then(function(e){return e.ok?e.json():"error"}).then(function(e){t(e)})},Common.Utils.asyncCall=function(e,t,i){new Promise(function(e,t){e()}).then(function(){e.call(t,i)})},String.prototype.strongMatch=function(e){if(e&&e instanceof RegExp){var t=this.toString().match(e);return!!(t&&t.length>0&&t[0].length==this.length)}return!1},Common.Utils.InternalSettings=new function(){var e={};return{get:function(t){return e[t]},set:function(t,i){e[t]=i}}},Common.Utils.lockControls=function(e,t,i,a){function n(e,i){if(e&&_.contains(e.options.lock,i)){var a=e.keepState.indexOf(i);t?a<0&&e.keepState.push(i):a<0||e.keepState.splice(a,1)}}!i&&(i={});var o=i.array||a;i.merge&&(o=_.union(a,o)),_.each(o,function(t){t&&_.isFunction(t.setDisabled)&&(!t.keepState&&(t.keepState=[]),i.clear&&i.clear.length>0&&t.keepState.length>0&&(t.keepState=_.difference(t.keepState,i.clear)),_.isArray(e)?_.each(e,function(e){n(t,e)}):n(t,e),t.keepState.length>0?!t.isDisabled()&&t.setDisabled(!0):t.isDisabled()&&t.setDisabled(!1))})},Common.Utils.injectButtons=function(e,t,i,a,n,o,s,r){var l=createButtonSet();return l.setDisabled(!0),t=t||"id-toolbar-"+i,e.each(function(c,d){var p="btn-toolbar";/x-huge/.test(d.className)&&(p+=" x-huge icon-top");var u=new Common.UI.Button({id:t+c,cls:p,iconCls:i,caption:a,split:o||!1,menu:s||!1,enableToggle:r||!1,lock:n,disabled:!0}).render(e.eq(c));l.add(u)}),l},Common.Utils.injectComponent=function(e,t){t&&e.length&&(t.rendered?e.append(t.$el):t.render(e))},Common.Utils.InternalSettings.set("toolbar-height-tabs",32),Common.Utils.InternalSettings.set("toolbar-height-tabs-top-title",28),Common.Utils.InternalSettings.set("toolbar-height-controls",67),Common.Utils.InternalSettings.set("document-title-height",28),Common.Utils.InternalSettings.set("toolbar-height-compact",Common.Utils.InternalSettings.get("toolbar-height-tabs")),Common.Utils.InternalSettings.set("toolbar-height-normal",Common.Utils.InternalSettings.get("toolbar-height-tabs")+Common.Utils.InternalSettings.get("toolbar-height-controls")),define("common/main/lib/util/utils",function(){}),void 0===Common)var Common={};if(Common.Controllers=Common.Controllers||{},define("common/mobile/lib/controller/Plugins",["core","jquery","underscore","backbone"],function(e,t,i,a){"use strict";Common.Controllers.Plugins=a.Controller.extend(i.extend(function(){var e;return{configPlugins:{autostart:[]},serverPlugins:{autostart:[]},models:[],collections:[],views:[],initialize:function(){},setApi:function(e){this.api=e,this.api.asc_registerCallback("asc_onPluginShow",i.bind(this.showPluginModal,this)),this.api.asc_registerCallback("asc_onPluginClose",i.bind(this.pluginClose,this)),this.api.asc_registerCallback("asc_onPluginResize",i.bind(this.pluginResize,this)),this.api.asc_registerCallback("asc_onPluginsInit",i.bind(this.registerPlugins,this))},onLaunch:function(){Common.Gateway.on("init",this.loadConfig.bind(this))},setMode:function(e){this.appConfig=e,this.loadPlugins()},showPluginModal:function(a,n,o,s){var r=this,l=(Framework7.prototype.device.android,a.get_Variations()[n]);if(l.get_Visual()){var c=l.get_Url();c=(0==a.get_BaseUrl().length?c:a.get_BaseUrl())+c,s&&(c+=s);var d=l.get_CustomWindow(),p=l.get_Buttons(),u=[],m=l.get_Size();if(i.isArray(p)&&i.each(p,function(e,t){(r.appConfig.isEdit||!1!==e.isViewer)&&(u[t]={text:e.text,attributes:{result:t}})}),uiApp.closeModal(),e=uiApp.modal({title:"",text:"",afterText:'<div id="plugin-frame" class=""></div>',buttons:d?void 0:u}),t("#plugin-frame").html('<div class="preloader"></div>'),r.iframe=document.createElement("iframe"),r.iframe.id=o,r.iframe.name="pluginFrameEditor",r.iframe.width="100%",r.iframe.height="100%",r.iframe.align="top",r.iframe.frameBorder=0,r.iframe.scrolling="no",r.iframe.src=c,setTimeout(function(){t("#plugin-frame").html(r.iframe)},100),$$(e).find(".modal-button").on("click",i.bind(r.onDlgBtnClick,r)),$$(e).css({margin:"0",width:"90%",left:"5%",height:"auto",top:"20px"}),$$(e).find(".modal-inner").css({padding:"0"}),Common.SharedSettings.get("phone")){var h=Math.min(m[1],240);$$(e).find("#plugin-frame").css({height:h+"px"})}else{var h=Math.min(m[1],500);$$(e).find("#plugin-frame").css({height:h+"px"})}!0===Framework7.prototype.device.android&&($$(".view.collaboration-root-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.collaboration-root-view .navbar").prependTo(".view.collaboration-root-view > .pages > .page"))}},onDlgBtnClick:function(e){var i=t(e.currentTarget).index();this.api.asc_pluginButtonClick(i)},pluginClose:function(e){this.iframe&&(this.iframe=null)},pluginResize:function(t){if(Common.SharedSettings.get("phone")){var i=Math.min(t[1],240);$$(e).find("#plugin-frame").css({height:i+"px"})}else{var i=Math.min(t[1],500);$$(e).find("#plugin-frame").css({height:i+"px"})}},loadConfig:function(e){this.configPlugins.config=e.config.plugins},loadPlugins:function(){var e=this;e.configPlugins.config?e.getPlugins(e.configPlugins.config.pluginsData).then(function(t){e.configPlugins.plugins=t,e.mergePlugins()}):e.configPlugins.plugins=!1;Common.Utils.loadConfig("../../../../plugins.json",function(t){"error"!=t?(e.serverPlugins.config=t,e.getPlugins(e.serverPlugins.config.pluginsData).then(function(t){e.serverPlugins.plugins=t,e.mergePlugins()})):e.serverPlugins.plugins=!1})},mergePlugins:function(){var e=this;if(void 0!==e.serverPlugins.plugins&&void 0!==e.configPlugins.plugins){var t=[],i=this.configPlugins;i.plugins&&i.plugins.length>0&&(t=i.plugins),i=this.serverPlugins,i.plugins&&i.plugins.length>0&&(t=t.concat(i.plugins)),this.registerPlugins(t)}},registerPlugins:function(e){var t=this,i=[];e.forEach(function(e){var t=new Asc.CPlugin;t.set_Name(e.name),t.set_Guid(e.guid),t.set_BaseUrl(e.baseUrl);var a=e.variations,n=[];a.forEach(function(e){var t=new Asc.CPluginVariation;t.set_Description(e.description),t.set_Url(e.url),t.set_Icons(e.icons),t.set_Visual(e.isVisual),t.set_CustomWindow(e.isCustomWindow),t.set_System(e.isSystem),t.set_Viewer(e.isViewer),t.set_EditorsSupport(e.EditorsSupport),t.set_Modal(e.isModal),t.set_InsideMode(e.isInsideMode),t.set_InitDataType(e.initDataType),t.set_InitData(e.initData),t.set_UpdateOleOnResize(e.isUpdateOleOnResize),t.set_Buttons(e.buttons),t.set_Size(e.size),t.set_InitOnSelectionChanged(e.initOnSelectionChanged),t.set_Events(e.events),n.push(t)}),t.set_Variations(n),i.push(t)}),t.api.asc_pluginsRegister("",i)},getPlugins:function(e,t){if(!e||e.length<1)return Promise.resolve([]);t=t||function(e){return fetch(e).then(function(t){return t.ok?t.json():Promise.reject(e)}).then(function(t){return t.baseUrl=e.substring(0,e.lastIndexOf("config.json")),t})};var i=[];return e.map(t).reduce(function(e,t){return e.then(function(){return t}).then(function(e){return i.push(e),Promise.resolve(e)}).catch(function(e){return Promise.resolve(e)})},Promise.resolve()).then(function(){return Promise.resolve(i)})},textCancel:"Cancel",textLoading:"Loading"}}(),Common.Controllers.Plugins||{}))}),define("text",["module"],function(e){"use strict";var t,i,a,n,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,u=c&&(location.port||void 0),m={},h=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){i=s[t];try{e=new ActiveXObject(i)}catch(e){}if(e){s=[i];break}}return e},parseName:function(e){var t,i,a,n=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),i=e.substring(o+1,e.length)):t=e,a=i||t,o=a.indexOf("!"),-1!==o&&(n="strip"===a.substring(o+1),a=a.substring(0,o),i?i=a:t=a),{moduleName:t,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,a,n){var o,s,r,l=t.xdRegExp.exec(e);return!l||(o=l[2],s=l[3],s=s.split(":"),r=s[1],s=s[0],!(o&&o!==i||s&&s.toLowerCase()!==a.toLowerCase()||(r||s)&&r!==n))},finishLoad:function(e,i,a,n){a=i?t.strip(a):a,h.isBuild&&(m[e]=a),n(a)},load:function(e,i,a,n){if(n.isBuild&&!n.inlineText)return void a();h.isBuild=n.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),r=i.toUrl(s),l=h.useXhr||t.useXhr;if(0===r.indexOf("empty:"))return void a();!c||l(r,d,p,u)?t.get(r,function(i){t.finishLoad(e,o.strip,i,a)},function(e){a.error&&a.error(e)}):i([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,a)})},write:function(e,i,a,n){if(m.hasOwnProperty(i)){var o=t.jsEscape(m[i]);a.asModule(e+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,i,a,n,o){var s=t.parseName(i),r=s.ext?"."+s.ext:"",l=s.moduleName+r,c=a.toUrl(s.moduleName+r)+".js";t.load(l,a,function(i){var a=function(e){return n(c,e)};a.asModule=function(e,t){return n.asModule(e,c,t)},t.write(e,l,a,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,a){try{var n=i.readFileSync(e,"utf8");0===n.indexOf("\ufeff")&&(n=n.substring(1)),t(n)}catch(e){a(e)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,i,a,n){var o,s=t.createXhr();if(s.open("GET",e,!0),n)for(o in n)n.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),n[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(t){var n,o;4===s.readyState&&(n=s.status,n>399&&n<600?(o=new Error(e+" HTTP status: "+n),o.xhr=s,a(o)):i(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,a,n=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),r="";try{for(i=new java.lang.StringBuffer,a=s.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&i.append(a);null!==(a=s.readLine());)i.append(o),i.append(a);r=String(i.toString())}finally{s.close()}t(r)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,n=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in a,t.get=function(e,t){var i,s,r,l={};o&&(e=e.replace(/\//g,"\\")),r=new FileUtils.File(e);try{i=a["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),i.init(r,1,0,!1),s=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),s.init(i,"utf-8",i.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(i.available(),l),s.close(),i.close(),t(l.value)}catch(e){throw new Error((r&&r.path||"")+": "+e)}}),t}),define("text!documenteditor/mobile/app/template/Editor.template",[],function(){return'<div class="views"><div class="view view-main"><div class="pages navbar-through"><div data-page="index" class="page"><div id="editor_sdk" class="page-content no-fastclick"></div></div></div></div></div>'}),define("documenteditor/mobile/app/view/Editor",["text!documenteditor/mobile/app/template/Editor.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.Editor=a.View.extend({el:"body",template:i.template(e),events:{},initialize:function(){},render:function(){return t(this.el).html(this.template({backTitle:(Framework7.prototype.device.android,"")})),this.f7View=uiApp.addView(".view-main",{}),this}})}),define("documenteditor/mobile/app/controller/Editor",["core","documenteditor/mobile/app/view/Editor"],function(e){"use strict";DE.Controllers.Editor=Backbone.Controller.extend(function(){function e(){var e=navigator.userAgent,t=/Mobile(\/|\s)/.test(e);return/(iPhone|iPod)/.test(e)||!/(Silk)/.test(e)&&/(Android)/.test(e)&&(/(Android 2)/.test(e)||t)||/(BlackBerry|BB)/.test(e)&&t||/(Windows Phone)/.test(e)}function t(){var e=navigator.userAgent;return/Sailfish/.test(e)||/Jolla/.test(e)}return{models:[],collections:[],views:["Editor"],initialize:function(){},setApi:function(e){this.api=e},onLaunch:function(){var i=e();t()&&(Common.SharedSettings.set("sailfish",!0),$("html").addClass("sailfish")),Common.SharedSettings.set("android",Framework7.prototype.device.android),Common.SharedSettings.set("phone",i),$("html").addClass(i?"phone":"tablet"),this.editorView=this.createView("Editor").render(),$$(window).on("resize",_.bind(this.onWindowResize,this))},onWindowResize:function(e){this.api&&this.api.Resize()}}}())}),define("text!documenteditor/mobile/app/template/Toolbar.template",[],function(){return'<div class="navbar" id="editor-navbar"><div class="navbar-inner"><div class="left"><a id="document-back" href="#" class="link" style="min-width: 22px; display: none;"><i class="icon icon-back"></i> <% if (backTitle && !phone) { %> <span class="subtitle"><%= backTitle %></span> <% } %> </a> <% if (!android) { %> <a href="#" id="toolbar-undo" class="link icon-only disabled" style="display: none;"><i class="icon icon-undo"></i> </a><a href="#" id="toolbar-redo" class="link icon-only disabled" style="display: none;"><i class="icon icon-redo"></i> </a> <% } %> </div> <% if (!phone) { %> <div class="center" id="toolbar-title"></div> <% } %> <div class="right"> <% if (android) { %> <a href="#" id="toolbar-undo" class="link icon-only disabled" style="display: none;"><i class="icon icon-undo"></i> </a><a href="#" id="toolbar-redo" class="link icon-only disabled" style="display: none;"><i class="icon icon-redo"></i> </a> <% } %> <a href="#" id="toolbar-edit" class="link icon-only" style="display: none;"><i class="icon icon-edit-settings"></i> </a><a href="#" id="toolbar-add" class="link icon-only" style="display: none;"><i class="icon icon-plus"></i> </a><a href="#" id="toolbar-edit-document" class="link icon-only" style="display: none;"><i class="icon icon-edit"></i> </a> <% if (!phone) { %> <a href="#" id="toolbar-search" class="link icon-only"><i class="icon icon-search"></i> </a> <% } %> <% if (width >= 360) { %> <a href="#" id="toolbar-collaboration" class="link icon-only disabled" style="display: none;"><i class="icon icon-collaboration"></i> </a> <% } %> <a href="#" id="toolbar-settings" class="link icon-only"><i class="icon icon-settings"></i></a></div></div></div>'}),define("documenteditor/mobile/app/view/Toolbar",["text!documenteditor/mobile/app/template/Toolbar.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.Toolbar=a.View.extend(i.extend(function(){return{el:".view-main",template:i.template(e),events:{"click #toolbar-search":"searchToggle","click #toolbar-edit":"showEdition","click #toolbar-add":"showInserts","click #toolbar-settings":"showSettings",
"click #toolbar-edit-document":"editDocument","click #toolbar-collaboration":"showCollaboration"},initialize:function(){var e=this;Common.NotificationCenter.on("readermode:change",function(i){i?(e.hideSearch(),t("#toolbar-search").addClass("disabled")):t("#toolbar-search").removeClass("disabled")})},render:function(){var e=this;return t(e.el).prepend(e.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),backTitle:Common.SharedSettings.get("android")?"":e.textBack,scope:e,width:t(window).width()})),t(".view-main .navbar").on("addClass removeClass",i.bind(e.onDisplayMainNavbar,e)),t("#toolbar-edit, #toolbar-add, #toolbar-settings, #toolbar-search, #document-back, #toolbar-edit-document").addClass("disabled"),e},setMode:function(e){e.isEdit?t("#toolbar-edit, #toolbar-add, #toolbar-undo, #toolbar-redo").show():e.canEdit&&e.canRequestEditRights&&t("#toolbar-edit-document").show()},onDisplayMainNavbar:function(e){var i=t(e.currentTarget),a=i.hasClass("navbar-hidden"),n=t(".picker-modal").height()||260;t("#editor_sdk").css({top:a?0:"",bottom:a?n:""})},searchToggle:function(){$$(".searchbar.document").length>0?this.hideSearch():this.showSearch()},showSearch:function(){DE.getController("Search").showSearch()},hideSearch:function(){DE.getController("Search").hideSearch()},showEdition:function(){DE.getController("EditContainer").showModal()},showInserts:function(){DE.getController("AddContainer").showModal()},showSettings:function(){DE.getController("Settings").showModal()},showCollaboration:function(){DE.getController("Common.Controllers.Collaboration").showModal()},editDocument:function(){Common.Gateway.requestEditRights()},textBack:"Back"}}(),DE.Views.Toolbar||{}))}),define("documenteditor/mobile/app/controller/Toolbar",["core","jquery","underscore","backbone","documenteditor/mobile/app/view/Toolbar"],function(e,t,i,a){"use strict";DE.Controllers.Toolbar=a.Controller.extend(i.extend(function(){var e,a=!1;return{models:[],collections:[],views:["Toolbar"],initialize:function(){Common.Gateway.on("init",i.bind(this.loadConfig,this))},loadConfig:function(a){a&&a.config&&!1!==a.config.canBackToFolder&&a.config.customization&&a.config.customization.goback&&a.config.customization.goback.url&&(e=a.config.customization.goback.url,t("#document-back").show().single("click",i.bind(this.onBack,this)))},setApi:function(e){this.api=e,this.api.asc_registerCallback("asc_onCanUndo",i.bind(this.onApiCanRevert,this,"undo")),this.api.asc_registerCallback("asc_onCanRedo",i.bind(this.onApiCanRevert,this,"redo")),this.api.asc_registerCallback("asc_onFocusObject",i.bind(this.onApiFocusObject,this)),this.api.asc_registerCallback("asc_onCoAuthoringDisconnect",i.bind(this.onCoAuthoringDisconnect,this)),this.api.asc_registerCallback("asc_onAuthParticipantsChanged",i.bind(this.displayCollaboration,this)),this.api.asc_registerCallback("asc_onParticipantsChanged",i.bind(this.displayCollaboration,this)),Common.NotificationCenter.on("api:disconnect",i.bind(this.onCoAuthoringDisconnect,this))},setMode:function(e){this.getView("Toolbar").setMode(e)},onLaunch:function(){var e=this;e.createView("Toolbar").render(),t("#toolbar-undo").single("click",i.bind(e.onUndo,e)),t("#toolbar-redo").single("click",i.bind(e.onRedo,e))},setDocumentTitle:function(e){t("#toolbar-title").html(e)},onBack:function(t){var i=this;i.api.isDocumentModified()?uiApp.modal({title:i.dlgLeaveTitleText,text:i.dlgLeaveMsgText,verticalButtons:!0,buttons:[{text:i.leaveButtonText,onClick:function(){window.parent.location.href=e}},{text:i.stayButtonText,bold:!0}]}):window.parent.location.href=e},onUndo:function(e){this.api&&this.api.Undo()},onRedo:function(e){this.api&&this.api.Redo()},onApiCanRevert:function(e,i){this.isDisconnected||("undo"==e?t("#toolbar-undo").toggleClass("disabled",!i):t("#toolbar-redo").toggleClass("disabled",!i))},setDisplayMode:function(e){a="final"==e||"original"==e;var t=this.api.getSelectedElements();this.onApiFocusObject(t)},onApiFocusObject:function(e){if(!this.isDisconnected&&e.length>0){var n=i.find(e.reverse(),function(e){return e.get_ObjectType()!=Asc.c_oAscTypeSelectElement.SpellCheck}),o=n.get_ObjectValue(),s=!!i.isFunction(o.get_Locked)&&o.get_Locked();t("#toolbar-add, #toolbar-edit").toggleClass("disabled",s||a)}},activateControls:function(){t("#toolbar-edit, #toolbar-add, #toolbar-settings, #toolbar-search, #document-back, #toolbar-edit-document, #toolbar-collaboration").removeClass("disabled")},activateViewControls:function(){t("#toolbar-search, #document-back, #toolbar-collaboration").removeClass("disabled")},deactivateEditControls:function(){t("#toolbar-edit, #toolbar-add, #toolbar-settings").addClass("disabled")},onCoAuthoringDisconnect:function(){this.isDisconnected=!0,this.deactivateEditControls(),t("#toolbar-undo").toggleClass("disabled",!0),t("#toolbar-redo").toggleClass("disabled",!0),DE.getController("AddContainer").hideModal(),DE.getController("EditContainer").hideModal(),DE.getController("Settings").hideModal()},displayCollaboration:function(e){if(void 0!==e){var a=0;i.each(e,function(e){e.asc_getView()||a++}),a>0?t("#toolbar-collaboration").show():t("#toolbar-collaboration").hide()}},dlgLeaveTitleText:"You leave the application",dlgLeaveMsgText:"You have unsaved changes in this document. Click 'Stay on this Page' to await the autosave of the document. Click 'Leave this Page' to discard all the unsaved changes.",leaveButtonText:"Leave this Page",stayButtonText:"Stay on this Page"}}(),DE.Controllers.Toolbar||{}))}),define("text!documenteditor/mobile/app/template/Search.template",[],function(){return'<div id="search-panel-view"><div class="searchbar document navbar navbar-hidden"><div class="navbar-inner"><div class="left"><a id="search-settings" href="#" class="link icon-only"><i class="icon icon-settings"></i></a></div><div class="center"><form class="searchbar search"><div class="searchbar-input search"><input type="search" placeholder="<%= scope.textSearch %>"><a href="#" class="searchbar-clear"></a></div></form><form class="searchbar replace"><div class="searchbar-input replace"><input type="search" placeholder="<%= scope.textReplace %>"><a href="#" class="searchbar-clear"></a></div></form></div><div class="right"> <% if (phone) { %> <p class="buttons-row"><a href="#" class="link icon-only prev disabled"><i class="icon icon-prev"></i></a> <a href="#" class="link icon-only next disabled"><i class="icon icon-next"></i></a></p><p class="buttons-row replace"><a href="#" class="link replace disabled"><%= scope.textReplace %></a></p> <% } else { %> <p class="buttons-row"><a href="#" class="link replace disabled"><%= scope.textReplace %></a><a href="#" class="link icon-only prev disabled"><i class="icon icon-prev"></i></a> <a href="#" class="link icon-only next disabled"><i class="icon icon-next"></i></a></p> <% } %> </div></div></div></div><div id="search-settings-view"><div class="navbar"><div class="navbar-inner"><div class="center sliding"><%= isEdit ? scope.textFindAndReplace : scope.textFind %></div><div class="right"><% if (phone) { %><a href="#" class="link close-popup"><b><%= scope.textDone %></b></a><% } %></div></div></div><div class="page" data-page="search-settings"><div class="page-content"> <% if (isEdit) { %> <div class="list-block"><ul><li><label class="label-radio item-content"><input type="radio" name="search-type" value="search"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textFind %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="search-type" value="replace"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textFindAndReplace %></div></div></label></li></ul></div> <% } %> <div class="list-block"><ul><li><div id="search-case-sensitive" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textCase %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li><div id="search-highlight-results" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textHighlight %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div></div></div></div>'}),define("documenteditor/mobile/app/view/Search",["text!documenteditor/mobile/app/template/Search.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.Search=a.View.extend(i.extend(function(){var a,n=!1;return{el:".view-main",template:i.template(e),events:{},initialize:function(){this.on("searchbar:show",i.bind(this.initEvents,this))},initEvents:function(){t("#search-settings").single("click",i.bind(this.showSettings,this))},render:function(){return a=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),isEdit:n,scope:this})),this},setMode:function(e){n=e.isEdit,this.render()},showSettings:function(e){var i=this;if(uiApp.closeModal(),Common.SharedSettings.get("phone"))i.picker=$$(uiApp.popup(['<div class="popup settings">','<div class="view search-settings-view navbar-through">',a.find("#search-settings-view").html(),"</div>","</div>"].join("")));else{i.picker=uiApp.popover(['<div class="popover settings" style="width: 280px; height: 300px;">','<div class="popover-angle"></div>','<div class="popover-inner">','<div class="content-block">','<div class="view popover-view search-settings-view navbar-through" style="height: 300px;">',a.find("#search-settings-view").html(),"</div>","</div>","</div>","</div>"].join(""),$$("#search-settings"));var n=t(".modal-overlay");$$(i.picker).on("opened",function(){n.on("removeClass",function(){n.hasClass("modal-overlay-visible")||n.addClass("modal-overlay-visible")})}).on("close",function(){n.off("removeClass"),n.removeClass("modal-overlay-visible")})}Common.SharedSettings.get("android")&&($$(".view.search-settings-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.search-settings-view .navbar").prependTo(".view.search-settings-view > .pages > .page")),i.fireEvent("searchbar:showsettings",i)},showSearch:function(){var e=this,n=$$(".searchbar.document");if(n.length<1){t(e.el).find(".pages .page").first().prepend(a.find("#search-panel-view").html());var o=Common.SharedSettings.get("search-is-replace");t(".searchbar.document").toggleClass("replace",!i.isUndefined(o)&&!0===o),e.fireEvent("searchbar:render",e),e.fireEvent("searchbar:show",e),n=$$(".searchbar.document"),i.defer(function(){uiApp.showNavbar(n),n.transitionEnd(function(){n.hasClass("navbar-hidden")||t(".searchbar.search input").focus()})},10)}},hideSearch:function(){var e=this,t=$$(".searchbar.document");if(t.length>0){if(t.hasClass(".navbar-hidding"))return;i.defer(function(){t.transitionEnd(function(){e.fireEvent("searchbar:hide",e),t.remove()}),uiApp.hideNavbar(t)},10)}},textFind:"Find",textFindAndReplace:"Find and Replace",textDone:"Done",textSearch:"Search",textReplace:"Replace",textCase:"Case sensitive",textHighlight:"Highlight results"}}(),DE.Views.Search||{}))}),define("documenteditor/mobile/app/controller/Search",["core","jquery","underscore","backbone","documenteditor/mobile/app/view/Search"],function(e,t,i,a){"use strict";DE.Controllers.Search=a.Controller.extend(i.extend(function(){var e=!1,a={},n=function(e){var t={x:0,y:0};if("touchstart"==e.type||"touchend"==e.type){var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=i.pageX,t.y=i.pageY}else"mousedown"!=e.type&&"mouseup"!=e.type||(t.x=e.pageX,t.y=e.pageY);return t};return{models:[],collections:[],views:["Search"],initialize:function(){this.addListeners({Search:{"searchbar:show":this.onSearchbarShow,"searchbar:hide":this.onSearchbarHide,"searchbar:render":this.onSearchbarRender,"searchbar:showsettings":this.onSearchbarSettings}})},setApi:function(e){this.api=e},setMode:function(e){this.getView("Search").setMode(e)},onLaunch:function(){var e=this;e.createView("Search").render(),t("#editor_sdk").single("mousedown touchstart",i.bind(e.onEditorTouchStart,e)),t("#editor_sdk").single("mouseup touchend",i.bind(e.onEditorTouchEnd,e)),Common.NotificationCenter.on("readermode:change",function(e){a={}})},showSearch:function(){this.getView("Search").showSearch()},hideSearch:function(){this.getView("Search").hideSearch()},onEditorTouchStart:function(e){a=n(e)},onEditorTouchEnd:function(t){var i=n(t);if(e){(void 0===a.x||void 0===a.y?0:Math.sqrt((i.x-=a.x)*i.x+(i.y-=a.y)*i.y))<1&&this.hideSearch()}},onSearchbarRender:function(e){var a=this,n=Common.SharedSettings.get("search-search")||"",o=Common.SharedSettings.get("search-replace")||"";a.searchBar=uiApp.searchbar(".searchbar.document .searchbar.search",{customSearch:!0,onSearch:i.bind(a.onSearchChange,a),onEnable:i.bind(a.onSearchEnable,a),onClear:i.bind(a.onSearchClear,a)}),a.replaceBar=uiApp.searchbar(".searchbar.document .searchbar.replace",{customSearch:!0,onSearch:i.bind(a.onReplaceChange,a),onEnable:i.bind(a.onReplaceEnable,a),onClear:i.bind(a.onReplaceClear,a)}),a.searchPrev=t(".searchbar.document .prev"),a.searchNext=t(".searchbar.document .next"),a.replaceBtn=t(".searchbar.document .link.replace"),a.searchPrev.single("click",i.bind(a.onSearchPrev,a)),a.searchNext.single("click",i.bind(a.onSearchNext,a)),a.replaceBtn.single("click",i.bind(a.onReplace,a)),$$(".searchbar.document .link.replace").on("taphold",i.bind(a.onReplaceAll,a)),a.searchBar.search(n),a.replaceBar.search(o)},onSearchbarSettings:function(e){var a=function(e){var t=Common.SharedSettings.get(e);return!i.isUndefined(t)&&!0===t},n=this,o=a("search-is-replace"),s=a("search-case-sensitive"),r=a("search-highlight"),l=t(".page[data-page=search-settings]"),c=l.find("input[name=search-type]"),d=l.find("#search-case-sensitive input:checkbox"),p=l.find("#search-highlight-results input:checkbox");c.val([o?"replace":"search"]),d.prop("checked",s),p.prop("checked",r),c.single("change",i.bind(n.onTypeChange,n)),d.single("change",i.bind(n.onCaseClick,n)),p.single("change",i.bind(n.onHighlightClick,n))},onSearchbarShow:function(t){e=!0,this.api.asc_selectSearchingResults(Common.SharedSettings.get("search-highlight"))},onSearchEnable:function(e){this.replaceBar.container.removeClass("searchbar-active")},onSearchbarHide:function(t){e=!1,this.api.asc_selectSearchingResults(!1)},onSearchChange:function(e){var t=this,a=e.query.trim().length<1;Common.SharedSettings.set("search-search",e.query),i.each([t.searchPrev,t.searchNext,t.replaceBtn],function(e){e.toggleClass("disabled",a)})},onSearchClear:function(e){Common.SharedSettings.set("search-search","")},onReplaceChange:function(e){e.query.trim().length;Common.SharedSettings.set("search-replace",e.query)},onReplaceEnable:function(e){this.searchBar.container.removeClass("searchbar-active")},onReplaceClear:function(e){Common.SharedSettings.set("search-replace","")},onSearchPrev:function(e){this.onQuerySearch(this.searchBar.query,"back")},onSearchNext:function(e){this.onQuerySearch(this.searchBar.query,"next")},onReplace:function(e){this.onQueryReplace(this.searchBar.query,this.replaceBar.query)},onReplaceAll:function(e){var a=this,n=['<div class="popover" style="width: auto;">','<div class="popover-inner">','<div class="list-block">',"<ul>",'<li><a href="#" id="replace-all" class="item-link list-button">{0}</li>'.format(a.textReplaceAll),"</ul>","</div>","</div>","</div>"].join("");n=uiApp.popover(n,$$(e.currentTarget)),t("#replace-all").single("click",i.bind(function(){a.onQueryReplaceAll(this.searchBar.query,this.replaceBar.query),uiApp.closeModal(n)},a))},onQuerySearch:function(e,t){var i=Common.SharedSettings.get("search-case-sensitive")||!1,a=Common.SharedSettings.get("search-highlight")||!1;if(e&&e.length&&!this.api.asc_findText(e,"back"!=t,i,a)){var n=this;uiApp.alert("",n.textNoTextFound,function(){n.searchBar.input.focus()})}},onQueryReplace:function(e,t){var i=Common.SharedSettings.get("search-case-sensitive")||!1,a=Common.SharedSettings.get("search-highlight")||!1;if(e&&e.length&&!this.api.asc_replaceText(e,t,!1,i,a)){var n=this;uiApp.alert("",n.textNoTextFound,function(){n.searchBar.input.focus()})}},onQueryReplaceAll:function(e,t){var i=Common.SharedSettings.get("search-case-sensitive")||!1,a=Common.SharedSettings.get("search-highlight")||!1;e&&e.length&&this.api.asc_replaceText(e,t,!0,i,a)},onTypeChange:function(e){var i=t(e.currentTarget),a="replace"===i.val();Common.SharedSettings.set("search-is-replace",a),t(".searchbar.document").toggleClass("replace",a)},onCaseClick:function(e){Common.SharedSettings.set("search-case-sensitive",t(e.currentTarget).is(":checked"))},onHighlightClick:function(e){Common.SharedSettings.set("search-highlight",t(e.currentTarget).is(":checked")),this.api.asc_selectSearchingResults(Common.SharedSettings.get("search-highlight"))},textNoTextFound:"Text not found",textReplaceAll:"Replace All"}}(),DE.Controllers.Search||{}))}),define("documenteditor/mobile/app/controller/Main",["core","jquery","underscore","backbone","irregularstack","common/main/lib/util/LocalStorage"],function(core,$,_,Backbone){"use strict";DE.Controllers.Main=Backbone.Controller.extend(_.extend(function(){var ApplyEditRights=-255,LoadingDocument=-256;return Common.localStorage.setId("text"),Common.localStorage.setKeysFilter("de-,asc.text"),Common.localStorage.sync(),{models:[],collections:[],views:[],initialize:function(){},onLaunch:function(){var e=this;e.stackLongActions=new Common.IrregularStack({strongCompare:function(e,t){return e.id===t.id&&e.type===t.type},weakCompare:function(e,t){return e.type===t.type}}),this._state={isDisconnected:!1,usersCount:1,fastCoauth:!0,lostEditingRights:!1,licenseType:!1};var t=Common.localStorage.getItem("de-settings-fontrender");null===t&&window.devicePixelRatio>1&&(t="1"),window.flat_desine=!0;var i=["Normal","No Spacing","Heading 1","Heading 2","Heading 3","Heading 4","Heading 5","Heading 6","Heading 7","Heading 8","Heading 9","Title","Subtitle","Quote","Intense Quote","List Paragraph","footnote text"],a={Series:this.txtSeries,"Diagram Title":this.txtDiagramTitle,"X Axis":this.txtXAxis,"Y Axis":this.txtYAxis,"Your text here":this.txtArt,Header:this.txtHeader,Footer:this.txtFooter};if(i.forEach(function(t){a[t]=e["txtStyle_"+t.replace(/ /g,"_")]||t}),e.api=new Asc.asc_docs_api({"id-view":"editor_sdk",mobile:!0,translate:a}),uiApp.params.modalButtonOk=e.textOK,uiApp.params.modalButtonCancel=e.textCancel,uiApp.params.modalPreloaderTitle=e.textPreloader,uiApp.params.modalUsernamePlaceholder=e.textUsername,uiApp.params.modalPasswordPlaceholder=e.textPassword,uiApp.params.smartSelectBackText=e.textBack,uiApp.params.smartSelectPopupCloseText=e.textClose,uiApp.params.smartSelectPickerCloseText=e.textDone,uiApp.params.notificationCloseButtonText=e.textClose,e.api){switch(t){case"0":e.api.SetFontRenderingMode(3);break;case"1":e.api.SetFontRenderingMode(1);break;case"2":e.api.SetFontRenderingMode(2)}Common.Utils.Metric.setCurrentMetric(1),e.api.asc_registerCallback("asc_onError",_.bind(e.onError,e)),e.api.asc_registerCallback("asc_onDocumentContentReady",_.bind(e.onDocumentContentReady,e)),e.api.asc_registerCallback("asc_onOpenDocumentProgress",_.bind(e.onOpenDocument,e)),e.api.asc_registerCallback("asc_onDocumentUpdateVersion",_.bind(e.onUpdateVersion,e)),e.api.asc_registerCallback("asc_onServerVersion",_.bind(e.onServerVersion,e)),e.api.asc_registerCallback("asc_onAdvancedOptions",_.bind(e.onAdvancedOptions,e)),e.api.asc_registerCallback("asc_onDocumentName",_.bind(e.onDocumentName,e)),e.api.asc_registerCallback("asc_onPrintUrl",_.bind(e.onPrintUrl,e)),Common.NotificationCenter.on("api:disconnect",_.bind(e.onCoAuthoringDisconnect,e)),Common.NotificationCenter.on("goback",_.bind(e.goBack,e)),Common.NotificationCenter.on("download:advanced",_.bind(e.onAdvancedOptions,e)),_.each(e.getApplication().controllers,function(t){t&&_.isFunction(t.setApi)&&t.setApi(e.api)}),e.editorConfig={},e.appOptions={},e.plugins=void 0,Common.Gateway.on("init",_.bind(e.loadConfig,e)),Common.Gateway.on("showmessage",_.bind(e.onExternalMessage,e)),Common.Gateway.on("opendocument",_.bind(e.loadDocument,e)),Common.Gateway.appReady(),Common.Gateway.on("internalcommand",function(t){"hardBack"==t.command&&($(".modal-in").length>0?($(e.loadMask).hasClass("modal-in")||uiApp.closeModal(),Common.Gateway.internalMessage("hardBack",!1)):Common.Gateway.internalMessage("hardBack",!0))}),Common.Gateway.internalMessage("listenHardBack")}e.defaultTitleText="ONLYOFFICE",e.warnNoLicense=e.warnNoLicense.replace("%1","ONLYOFFICE"),e.warnNoLicenseUsers=e.warnNoLicenseUsers.replace("%1","ONLYOFFICE"),e.textNoLicenseTitle=e.textNoLicenseTitle.replace("%1","ONLYOFFICE")},loadConfig:function(e){var t=this;t.editorConfig=$.extend(t.editorConfig,e.config),t.editorConfig.user=t.appOptions.user=Common.Utils.fillUserInfo(t.editorConfig.user,t.editorConfig.lang,t.textAnonymous),t.appOptions.isDesktopApp="desktop"==t.editorConfig.targetApp,t.appOptions.canCreateNew=!_.isEmpty(t.editorConfig.createUrl)&&!t.appOptions.isDesktopApp,t.appOptions.canOpenRecent=void 0!==t.editorConfig.recent&&!t.appOptions.isDesktopApp,t.appOptions.templates=t.editorConfig.templates,t.appOptions.recent=t.editorConfig.recent,t.appOptions.createUrl=t.editorConfig.createUrl,t.appOptions.lang=t.editorConfig.lang,t.appOptions.location="string"==typeof t.editorConfig.location?t.editorConfig.location.toLowerCase():"",t.appOptions.sharingSettingsUrl=t.editorConfig.sharingSettingsUrl,t.appOptions.fileChoiceUrl=t.editorConfig.fileChoiceUrl,t.appOptions.mergeFolderUrl=t.editorConfig.mergeFolderUrl,t.appOptions.canAnalytics=!1,t.appOptions.customization=t.editorConfig.customization,t.appOptions.canBackToFolder=!1!==t.editorConfig.canBackToFolder&&"object"==typeof t.editorConfig.customization&&"object"==typeof t.editorConfig.customization.goback&&!_.isEmpty(t.editorConfig.customization.goback.url),t.appOptions.canBack=!0===t.appOptions.canBackToFolder,t.appOptions.canPlugins=!1,t.plugins=t.editorConfig.plugins,t.editorConfig.lang&&t.api.asc_setLocale(t.editorConfig.lang)},loadDocument:function(e){this.permissions={},this.document=e.doc;var t={};if(e.doc){this.permissions=$.extend(this.permissions,e.doc.permissions);var i=$.extend({},e.doc.permissions),a=new Asc.asc_CUserInfo;a.put_Id(this.appOptions.user.id),a.put_FullName(this.appOptions.user.fullname),t=new Asc.asc_CDocInfo,t.put_Id(e.doc.key),t.put_Url(e.doc.url),t.put_Title(e.doc.title),t.put_Format(e.doc.fileType),t.put_VKey(e.doc.vkey),t.put_Options(e.doc.options),t.put_UserInfo(a),t.put_CallbackUrl(this.editorConfig.callbackUrl),t.put_Token(e.doc.token),t.put_Permissions(i);var n=/^(?:(pdf|djvu|xps))$/.exec(e.doc.fileType);n&&"string"==typeof n[1]&&(this.permissions.edit=this.permissions.review=!1)}this.api.asc_registerCallback("asc_onGetEditorPermissions",_.bind(this.onEditorPermissions,this)),this.api.asc_registerCallback("asc_onLicenseChanged",_.bind(this.onLicenseChanged,this)),this.api.asc_setDocInfo(t),this.api.asc_getEditorPermissions(this.editorConfig.licenseUrl,this.editorConfig.customerId),Common.SharedSettings.set("document",e.doc),e.doc&&(DE.getController("Toolbar").setDocumentTitle(e.doc.title),e.doc.info&&(e.doc.info.author&&console.log("Obsolete: The 'author' parameter of the document 'info' section is deprecated. Please use 'owner' instead."),e.doc.info.created&&console.log("Obsolete: The 'created' parameter of the document 'info' section is deprecated. Please use 'uploaded' instead.")))},setMode:function(e){var t=this;Common.SharedSettings.set("mode",e.isEdit?"edit":"view"),t.api&&(t.api.asc_enableKeyEvents(e.isEdit),t.api.asc_setViewMode(!e.isEdit))},onProcessSaveResult:function(e){this.api.asc_OnSaveEnd(e.result),e&&!1===e.result&&uiApp.alert(_.isEmpty(e.message)?this.errorProcessSaveResult:e.message,this.criticalErrorTitle)},onProcessRightsChange:function(e){if(e&&!1===e.enabled){var t=this,i=this._state.lostEditingRights;this._state.lostEditingRights=!this._state.lostEditingRights,this.api.asc_coAuthoringDisconnect(),Common.NotificationCenter.trigger("api:disconnect"),i||uiApp.alert(_.isEmpty(e.message)?this.warnProcessRightsChange:e.message,this.notcriticalErrorTitle,function(){t._state.lostEditingRights=!1,t.onEditComplete()})}},onDownloadAs:function(){if(!this.appOptions.canDownload&&!this.appOptions.canDownloadOrigin)return void Common.Gateway.reportError(Asc.c_oAscError.ID.AccessDeny,this.errorAccessDeny);this._state.isFromGatewayDownloadAs=!0;var e=/^(?:(pdf|djvu|xps))$/.exec(this.document.fileType);e&&"string"==typeof e[1]?this.api.asc_DownloadOrigin(!0):this.api.asc_DownloadAs(new Asc.asc_CDownloadOptions(Asc.c_oAscFileType.DOCX,!0))},goBack:function(e){var t=this.appOptions.customization.goback.url;e||!1===this.appOptions.customization.goback.blank?parent.location.href=t:window.open(t,"_blank")},onEditComplete:function(e){},onLongActionBegin:function(e,t){var i={id:t,type:e};this.stackLongActions.push(i),this.setLongActionView(i)},onLongActionEnd:function(e,t){var i=this,a={id:t,type:e};i.stackLongActions.pop(a),i.updateWindowTitle(!0),a=i.stackLongActions.get({type:Asc.c_oAscAsyncActionType.Information}),a?i.setLongActionView(a):i._state.fastCoauth&&i._state.usersCount>1&&Asc.c_oAscAsyncAction.Save,a=i.stackLongActions.get({type:Asc.c_oAscAsyncActionType.BlockInteraction}),a?i.setLongActionView(a):_.delay(function(){$(i.loadMask).hasClass("modal-in")&&uiApp.closeModal(i.loadMask)},300),t==Asc.c_oAscAsyncAction.Save&&(!i._state.fastCoauth||i._state.usersCount)},setLongActionView:function(e){var t=this,i="";switch(e.id){case Asc.c_oAscAsyncAction.Open:i=t.openTitleText,t.openTextText;break;case Asc.c_oAscAsyncAction.Save:i=t.saveTitleText,t.saveTextText;break;case Asc.c_oAscAsyncAction.LoadDocumentFonts:i=t.loadFontsTitleText,t.loadFontsTextText;break;case Asc.c_oAscAsyncAction.LoadDocumentImages:i=t.loadImagesTitleText,t.loadImagesTextText;break;case Asc.c_oAscAsyncAction.LoadFont:i=t.loadFontTitleText,t.loadFontTextText;break;case Asc.c_oAscAsyncAction.LoadImage:i=t.loadImageTitleText,t.loadImageTextText;break;case Asc.c_oAscAsyncAction.DownloadAs:i=t.downloadTitleText,t.downloadTextText;break;case Asc.c_oAscAsyncAction.Print:i=t.printTitleText,t.printTextText;break;case Asc.c_oAscAsyncAction.UploadImage:i=t.uploadImageTitleText,t.uploadImageTextText;break;case Asc.c_oAscAsyncAction.ApplyChanges:i=t.applyChangesTitleText,t.applyChangesTextText;break;case Asc.c_oAscAsyncAction.PrepareToSave:i=t.savePreparingText,t.savePreparingTitle;break;case Asc.c_oAscAsyncAction.MailMergeLoadFile:i=t.mailMergeLoadFileText,t.mailMergeLoadFileTitle;break;case Asc.c_oAscAsyncAction.DownloadMerge:i=t.downloadMergeTitle,t.downloadMergeText;break;case Asc.c_oAscAsyncAction.SendMailMerge:i=t.sendMergeTitle,t.sendMergeText;break;case Asc.c_oAscAsyncAction.Waiting:i=t.waitText,t.waitText;break;case ApplyEditRights:i=t.txtEditingMode,t.txtEditingMode;break;case LoadingDocument:i=t.loadingDocumentTitleText,t.loadingDocumentTextText;break;default:"string"==typeof e.id&&(i=e.id,e.id)}if(e.type==Asc.c_oAscAsyncActionType.BlockInteraction){if(e.id==Asc.c_oAscAsyncAction.ApplyChanges)return;t.loadMask&&$(t.loadMask).hasClass("modal-in")?$$(t.loadMask).find(".modal-title").text(i):t.loadMask=uiApp.showPreloader(i)}},onDocumentContentReady:function(){if(!this._isDocReady){this._state.openDlg&&uiApp.closeModal(this._state.openDlg);var me=this,value;me._isDocReady=!0,me.api.SetDrawingFreeze(!1),me.hidePreloader(),me.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument),me.api.asc_SetTrackRevisions(me.appOptions.isReviewOnly||Common.localStorage.getBool("de-mobile-track-changes-"+(me.appOptions.fileKey||""))),this.isLiveCommenting=Common.localStorage.getBool("de-settings-livecomment",!0);var resolved=Common.localStorage.getBool("de-settings-resolvedcomment",!0);this.isLiveCommenting?this.api.asc_showComments(resolved):this.api.asc_hideComments(),value=Common.localStorage.getItem("de-settings-zoom");var zf=null!==value?parseInt(value):this.appOptions.customization&&this.appOptions.customization.zoom?parseInt(this.appOptions.customization.zoom):100;if(-1==zf?this.api.zoomFitToPage():-2==zf?this.api.zoomFitToWidth():this.api.zoom(zf>0?zf:100),value=Common.localStorage.getItem("de-show-hiddenchars"),me.api.put_ShowParaMarks(null!==value&&eval(value)),value=Common.localStorage.getItem("de-show-tableline"),me.api.put_ShowTableEmptyLine(null===value||eval(value)),value=Common.localStorage.getBool("de-mobile-spellcheck",!1),me.api.asc_setSpellCheck(value),me.api.asc_registerCallback("asc_onStartAction",_.bind(me.onLongActionBegin,me)),me.api.asc_registerCallback("asc_onEndAction",_.bind(me.onLongActionEnd,me)),me.api.asc_registerCallback("asc_onCoAuthoringDisconnect",_.bind(me.onCoAuthoringDisconnect,me)),me.api.asc_registerCallback("asc_onPrint",_.bind(me.onPrint,me)),me.updateWindowTitle(!0),me.api.SetTextBoxInputMode(Common.localStorage.getBool("de-settings-inputmode")),value=Common.localStorage.getItem("de-mobile-no-characters"),me.api.put_ShowParaMarks(null!==value&&eval(value)),value=Common.localStorage.getItem("de-mobile-hidden-borders"),me.api.put_ShowTableEmptyLine(null===value||eval(value)),me.appOptions.isEdit&&me.appOptions.canLicense&&!me.appOptions.isOffline&&me.appOptions.canCoAuthoring?(me._state.fastCoauth=!0,me.api.asc_SetFastCollaborative(me._state.fastCoauth),value=Common.localStorage.getItem(me._state.fastCoauth?"de-settings-showchanges-fast":"de-settings-showchanges-strict"),null!==value?me.api.SetCollaborativeMarksShowType("all"==value?Asc.c_oAscCollaborativeMarksShowType.All:"none"==value?Asc.c_oAscCollaborativeMarksShowType.None:Asc.c_oAscCollaborativeMarksShowType.LastChanges):me.api.SetCollaborativeMarksShowType(me._state.fastCoauth?Asc.c_oAscCollaborativeMarksShowType.None:Asc.c_oAscCollaborativeMarksShowType.LastChanges)):(me._state.fastCoauth=!1,me.api.asc_SetFastCollaborative(me._state.fastCoauth),me.api.SetCollaborativeMarksShowType(Asc.c_oAscCollaborativeMarksShowType.None)),me.appOptions.isEdit&&(value=me._state.fastCoauth,value=me._state.fastCoauth||null===value?me.appOptions.canCoAuthoring?1:0:parseInt(value),me.api.asc_setAutoSaveGap(value),me.needToUpdateVersion&&Common.NotificationCenter.trigger("api:disconnect")),Common.Gateway.on("processsaveresult",_.bind(me.onProcessSaveResult,me)),Common.Gateway.on("processrightschange",_.bind(me.onProcessRightsChange,me)),Common.Gateway.on("downloadas",_.bind(me.onDownloadAs,me)),Common.Gateway.sendInfo({mode:me.appOptions.isEdit?"edit":"view"}),me.api&&(me.api.Resize(),me.api.zoomFitToWidth()),me.applyLicense(),$(document).on("contextmenu",_.bind(me.onContextMenu,me)),!me.appOptions.canReview){var canViewReview=me.appOptions.isEdit||me.api.asc_HaveRevisionsChanges(!0);if(DE.getController("Common.Controllers.Collaboration").setCanViewReview(canViewReview),canViewReview){var viewReviewMode=Common.localStorage.getItem("de-view-review-mode");null===viewReviewMode&&(viewReviewMode=me.appOptions.customization&&/^(original|final|markup)$/i.test(me.appOptions.customization.reviewDisplay)?me.appOptions.customization.reviewDisplay.toLocaleLowerCase():"original"),viewReviewMode=me.appOptions.isEdit?"markup":viewReviewMode,DE.getController("Common.Controllers.Collaboration").turnDisplayMode(viewReviewMode)}}Common.Gateway.documentReady()}},onLicenseChanged:function(e){var t=e.asc_getLicenseType();void 0===t||!this.appOptions.canEdit||"view"===this.editorConfig.mode||t!==Asc.c_oLicenseResult.Connections&&t!==Asc.c_oLicenseResult.UsersCount&&t!==Asc.c_oLicenseResult.ConnectionsOS&&t!==Asc.c_oLicenseResult.UsersCountOS||(this._state.licenseType=t),
this._isDocReady&&this._state.licenseType&&this.applyLicense()},applyLicense:function(){var e=this;if(this._state.licenseType){var t=this._state.licenseType,i=[{text:"OK"}];t===Asc.c_oLicenseResult.Connections||t===Asc.c_oLicenseResult.UsersCount?t=t===Asc.c_oLicenseResult.Connections?this.warnLicenseExceeded:this.warnLicenseUsersExceeded:(t=t===Asc.c_oLicenseResult.ConnectionsOS?this.warnNoLicense:this.warnNoLicenseUsers,i=[{text:e.textBuyNow,bold:!0,onClick:function(){window.open("https://www.onlyoffice.com/","_blank")}},{text:e.textContactUs,onClick:function(){window.open("mailto:sales@onlyoffice.com","_blank")}}]),DE.getController("Toolbar").activateViewControls(),DE.getController("Toolbar").deactivateEditControls(),Common.NotificationCenter.trigger("api:disconnect");var a=Common.localStorage.getItem("de-license-warning");a=null!==a?parseInt(a):0;var n=(new Date).getTime();n-a>864e5&&(Common.localStorage.setItem("de-license-warning",n),uiApp.modal({title:e.textNoLicenseTitle,text:t,buttons:i}))}else!e.appOptions.isDesktopApp&&!e.appOptions.canBrandingExt&&e.editorConfig&&e.editorConfig.customization&&(e.editorConfig.customization.loaderName||e.editorConfig.customization.loaderLogo)&&uiApp.modal({title:e.textPaidFeature,text:e.textCustomLoader,buttons:[{text:e.textContactUs,bold:!0,onClick:function(){window.open("mailto:sales@onlyoffice.com","_blank")}},{text:e.textClose}]}),DE.getController("Toolbar").activateControls()},onOpenDocument:function(e){if(this.loadMask){var t=$$(this.loadMask).find(".modal-title"),i=(e.asc_getCurrentFont()+e.asc_getCurrentImage())/(e.asc_getFontsCount()+e.asc_getImagesCount());t.text(this.textLoadingDocument+": "+Math.min(Math.round(100*i),100)+"%")}},onEditorPermissions:function(e){var t=this,i=e.asc_getLicenseType();if(Asc.c_oLicenseResult.Expired===i||Asc.c_oLicenseResult.Error===i||Asc.c_oLicenseResult.ExpiredTrial===i)return void uiApp.modal({title:t.titleLicenseExp,text:t.warnLicenseExp});if(!t.onServerVersion(e.asc_getBuildVersion())){t.permissions.review=void 0===t.permissions.review?!1!==t.permissions.edit:t.permissions.review,t.appOptions.canAnalytics=e.asc_getIsAnalyticsEnable(),t.appOptions.canLicense=i===Asc.c_oLicenseResult.Success||i===Asc.c_oLicenseResult.SuccessLimit,t.appOptions.isLightVersion=e.asc_getIsLight(),t.appOptions.canCoAuthoring=!t.appOptions.isLightVersion,t.appOptions.isOffline=t.api.asc_isOffline(),t.appOptions.isReviewOnly=!0===t.permissions.review&&!1===t.permissions.edit,t.appOptions.canRequestEditRights=t.editorConfig.canRequestEditRights,t.appOptions.canRequestClose=t.editorConfig.canRequestClose,t.appOptions.canEdit=(!1!==t.permissions.edit||!0===t.permissions.review)&&(t.editorConfig.canRequestEditRights||"view"!==t.editorConfig.mode)&&(!t.appOptions.isReviewOnly||t.appOptions.canLicense),t.appOptions.isEdit=t.appOptions.canLicense&&t.appOptions.canEdit&&"view"!==t.editorConfig.mode,t.appOptions.canReview=t.appOptions.canLicense&&t.appOptions.isEdit&&!0===t.permissions.review,t.appOptions.canUseHistory=t.appOptions.canLicense&&!t.appOptions.isLightVersion&&t.editorConfig.canUseHistory&&t.appOptions.canCoAuthoring&&!t.appOptions.isDesktopApp,t.appOptions.canHistoryClose=t.editorConfig.canHistoryClose,t.appOptions.canHistoryRestore=t.editorConfig.canHistoryRestore&&!!t.permissions.changeHistory,t.appOptions.canUseMailMerge=t.appOptions.canLicense&&t.appOptions.canEdit&&!t.appOptions.isDesktopApp,t.appOptions.canSendEmailAddresses=t.appOptions.canLicense&&t.editorConfig.canSendEmailAddresses&&t.appOptions.canEdit&&t.appOptions.canCoAuthoring,t.appOptions.canComments=t.appOptions.canLicense&&!("object"==typeof t.editorConfig.customization&&!1===t.editorConfig.customization.comments),t.appOptions.canChat=t.appOptions.canLicense&&!t.appOptions.isOffline&&!("object"==typeof t.editorConfig.customization&&!1===t.editorConfig.customization.chat),t.appOptions.canEditStyles=t.appOptions.canLicense&&t.appOptions.canEdit,t.appOptions.canPrint=!1!==t.permissions.print,t.appOptions.fileKey=t.document.key;var a=/^(?:(pdf|djvu|xps))$/.exec(t.document.fileType);t.appOptions.canDownloadOrigin=!1!==t.permissions.download&&a&&"string"==typeof a[1],t.appOptions.canDownload=!1!==t.permissions.download&&(!a||"string"!=typeof a[1]),t.appOptions.canReader=!a||"string"!=typeof a[1],t.appOptions.canBranding=e.asc_getCustomization(),t.appOptions.canBrandingExt=e.asc_getCanBranding()&&"object"==typeof t.editorConfig.customization,t.appOptions.isLightVersion&&(t.appOptions.canUseHistory=t.appOptions.canReview=t.appOptions.isReviewOnly=!1),t.applyModeCommonElements(),t.applyModeEditorElements(),t.api.asc_setViewMode(!t.appOptions.isEdit),t.api.asc_LoadDocument(),t.api.Resize(),t.appOptions.isEdit||(t.hidePreloader(),t.onLongActionBegin(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument))}},applyModeCommonElements:function(){var e=this;window.editor_elements_prepared=!0,_.each(e.getApplication().controllers,function(t){t&&_.isFunction(t.setMode)&&t.setMode(e.appOptions)}),e.api&&(e.api.asc_registerCallback("asc_onSendThemeColors",_.bind(e.onSendThemeColors,e)),e.api.asc_registerCallback("asc_onDownloadUrl",_.bind(e.onDownloadUrl,e)),e.api.asc_registerCallback("asc_onAuthParticipantsChanged",_.bind(e.onAuthParticipantsChanged,e)),e.api.asc_registerCallback("asc_onParticipantsChanged",_.bind(e.onAuthParticipantsChanged,e)))},applyModeEditorElements:function(){if(this.appOptions.isEdit){var e=this,t=Common.localStorage.getItem("de-mobile-settings-unit");t=null!==t?parseInt(t):Common.Utils.Metric.getDefaultMetric(),Common.Utils.Metric.setCurrentMetric(t),e.api.asc_SetDocumentUnits(t==Common.Utils.Metric.c_MetricUnits.inch?Asc.c_oAscDocumentUnits.Inch:t==Common.Utils.Metric.c_MetricUnits.pt?Asc.c_oAscDocumentUnits.Point:Asc.c_oAscDocumentUnits.Millimeter),e.api.asc_registerCallback("asc_onDocumentModifiedChanged",_.bind(e.onDocumentModifiedChanged,e)),e.api.asc_registerCallback("asc_onDocumentCanSaveChanged",_.bind(e.onDocumentCanSaveChanged,e)),e.api.asc_registerCallback("asc_onCollaborativeChanges",_.bind(e.onCollaborativeChanges,e)),e.api.asc_registerCallback("asc_OnTryUndoInFastCollaborative",_.bind(e.onTryUndoInFastCollaborative,e)),e.stackLongActions.exist({id:ApplyEditRights,type:Asc.c_oAscAsyncActionType.BlockInteraction})?e.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,ApplyEditRights):this._isDocReady||(e.hidePreloader(),e.onLongActionBegin(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument)),window.onbeforeunload=_.bind(e.onBeforeUnload,e),window.onunload=_.bind(e.onUnload,e)}},returnUserCount:function(){return this._state.usersCount},onExternalMessage:function(e){e&&e.msg&&(e.msg=e.msg.toString(),uiApp.addNotification({title:uiApp.params.modalTitle,message:[e.msg.charAt(0).toUpperCase()+e.msg.substring(1)]}),Common.component.Analytics.trackEvent("External Error"))},onError:function(e,t,i){if(e==Asc.c_oAscError.ID.LoadingScriptError)return void uiApp.addNotification({title:this.criticalErrorTitle,message:this.scriptLoadError});this.hidePreloader(),this.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument);var a={closable:!1};switch(e){case Asc.c_oAscError.ID.Unknown:a.msg=this.unknownErrorText;break;case Asc.c_oAscError.ID.ConvertationTimeout:a.msg=this.convertationTimeoutText;break;case Asc.c_oAscError.ID.ConvertationOpenError:a.msg=this.openErrorText;break;case Asc.c_oAscError.ID.ConvertationSaveError:a.msg=this.saveErrorText;break;case Asc.c_oAscError.ID.DownloadError:a.msg=this.downloadErrorText;break;case Asc.c_oAscError.ID.UplImageSize:a.msg=this.uploadImageSizeMessage;break;case Asc.c_oAscError.ID.UplImageExt:a.msg=this.uploadImageExtMessage;break;case Asc.c_oAscError.ID.UplImageFileCount:a.msg=this.uploadImageFileCountMessage;break;case Asc.c_oAscError.ID.SplitCellMaxRows:a.msg=this.splitMaxRowsErrorText.replace("%1",i.get_Value());break;case Asc.c_oAscError.ID.SplitCellMaxCols:a.msg=this.splitMaxColsErrorText.replace("%1",i.get_Value());break;case Asc.c_oAscError.ID.SplitCellRowsDivider:a.msg=this.splitDividerErrorText.replace("%1",i.get_Value());break;case Asc.c_oAscError.ID.VKeyEncrypt:a.msg=this.errorKeyEncrypt;break;case Asc.c_oAscError.ID.KeyExpire:a.msg=this.errorKeyExpire;break;case Asc.c_oAscError.ID.UserCountExceed:a.msg=this.errorUsersExceed;break;case Asc.c_oAscError.ID.CoAuthoringDisconnect:a.msg=this.errorViewerDisconnect;break;case Asc.c_oAscError.ID.ConvertationPassword:a.msg=this.errorFilePassProtect;break;case Asc.c_oAscError.ID.StockChartError:a.msg=this.errorStockChart;break;case Asc.c_oAscError.ID.DataRangeError:a.msg=this.errorDataRange;break;case Asc.c_oAscError.ID.Database:a.msg=this.errorDatabaseConnection;break;case Asc.c_oAscError.ID.UserDrop:if(this._state.lostEditingRights)return void(this._state.lostEditingRights=!1);this._state.lostEditingRights=!0,a.msg=this.errorUserDrop;break;case Asc.c_oAscError.ID.MailMergeLoadFile:a.msg=this.errorMailMergeLoadFile;break;case Asc.c_oAscError.ID.MailMergeSaveFile:a.msg=this.errorMailMergeSaveFile;break;case Asc.c_oAscError.ID.Warning:a.msg=this.errorConnectToServer.replace("%1","https://api.onlyoffice.com/editors/callback");break;case Asc.c_oAscError.ID.UplImageUrl:a.msg=this.errorBadImageUrl;break;case Asc.c_oAscError.ID.DataEncrypted:a.msg=this.errorDataEncrypted;break;case Asc.c_oAscError.ID.AccessDeny:a.msg=this.errorAccessDeny;break;case Asc.c_oAscError.ID.EditingError:a.msg=this.errorEditingDownloadas;break;default:a.msg=this.errorDefaultMessage.replace("%1",e)}t==Asc.c_oAscError.Level.Critical?(Common.Gateway.reportError(e,a.msg),a.title=this.criticalErrorTitle,this.appOptions.canBackToFolder&&!this.appOptions.isDesktopApp&&(a.msg+="</br></br>"+this.criticalErrorExtText,a.callback=function(){Common.NotificationCenter.trigger("goback",!0)}),e==Asc.c_oAscError.ID.DataEncrypted&&(this.api.asc_coAuthoringDisconnect(),Common.NotificationCenter.trigger("api:disconnect"))):(Common.Gateway.reportWarning(e,a.msg),a.title=this.notcriticalErrorTitle,a.callback=_.bind(function(t){e==Asc.c_oAscError.ID.Warning&&"ok"==t&&(this.appOptions.canDownload||this.appOptions.canDownloadOrigin)&&(Common.UI.Menu.Manager.hideAll(),this.appOptions.isDesktopApp&&this.appOptions.isOffline?this.api.asc_DownloadAs():this.appOptions.canDownload?this.getApplication().getController("LeftMenu").leftMenu.showMenu("file:saveas"):this.api.asc_DownloadOrigin()),this._state.lostEditingRights=!1,this.onEditComplete()},this)),uiApp.modal({title:a.title,text:a.msg,buttons:[{text:"OK",onClick:a.callback}]}),Common.component.Analytics.trackEvent("Internal Error",e.toString())},onCoAuthoringDisconnect:function(){this._state.isDisconnected=!0},updateWindowTitle:function(e){var t=this.api.isDocumentModified();if(this._state.isDocModified!==t||e){var i=this.defaultTitleText;window.document.title!=i&&(window.document.title=i),Common.Gateway.setDocumentModified(t),this._state.isDocModified=t}},onDocumentModifiedChanged:function(){var e=this.api.asc_isDocumentCanSave();this._state.isDocModified!==e&&Common.Gateway.setDocumentModified(this.api.isDocumentModified()),this.updateWindowTitle()},onDocumentCanSaveChanged:function(e){},onBeforeUnload:function(){if(Common.localStorage.save(),this.api.isDocumentModified()){var e=this;return this.api.asc_stopSaving(),this.continueSavingTimer=window.setTimeout(function(){e.api.asc_continueSaving()},500),this.leavePageText}},onUnload:function(){this.continueSavingTimer&&clearTimeout(this.continueSavingTimer)},hidePreloader:function(){$("#loading-mask").hide().remove()},onDownloadUrl:function(e){this._state.isFromGatewayDownloadAs&&Common.Gateway.downloadAs(e),this._state.isFromGatewayDownloadAs=!1},onUpdateVersion:function(e){var t=this;t.needToUpdateVersion=!0,t.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument),uiApp.alert(t.errorUpdateVersion,t.titleUpdateVersion,function(){_.defer(function(){Common.Gateway.updateVersion(),e&&e.call(t),t.onLongActionBegin(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument)})})},onServerVersion:function(e){var t=this;return!!t.changeServerVersion||DocsAPI.DocEditor.version()!==e&&!window.compareVersions&&(t.changeServerVersion=!0,uiApp.alert(t.errorServerVersion,t.titleServerVersion,function(){_.defer(function(){Common.Gateway.updateVersion()})}),!0)},onCollaborativeChanges:function(){},updateThemeColors:function(){},onSendThemeColors:function(e,t){Common.Utils.ThemeColor.setColors(e,t)},onAdvancedOptions:function(e,t,i,a){if(!this._state.openDlg){var n=this;if(e==Asc.c_oAscAdvancedOptionsID.TXT){var o,s=[],r=[];_.each(t.asc_getCodePages(),function(e){s.push(e.asc_getCodePage()),r.push(e.asc_getCodePageName())}),$(n.loadMask).hasClass("modal-in")&&uiApp.closeModal(n.loadMask),n.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument);var l=[];2===i&&l.push({text:n.textCancel,onClick:function(){n._state.openDlg=null}}),l.push({text:"OK",bold:!0,onClick:function(){var t=o.value;n.api&&(2==i?(a&&a.asc_setAdvancedOptions(new Asc.asc_CTextOptions(t)),n.api.asc_DownloadAs(a)):n.api.asc_setAdvancedOptions(e,new Asc.asc_CTextOptions(t)),n._isDocReady||n.onLongActionBegin(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument)),n._state.openDlg=null}}),n._state.openDlg=uiApp.modal({title:n.advTxtOptions,text:"",afterText:'<div class="content-block"><div class="row"><div class="col-100">Encoding</div></div><div id="txt-encoding"></div></div>',buttons:l}),o=uiApp.picker({container:"#txt-encoding",toolbar:!1,rotateEffect:!0,value:[t.asc_getRecommendedSettings().asc_getCodePage()],cols:[{values:s,displayValues:r}]}),$$(n._state.openDlg).css({marginTop:-Math.round($$(n._state.openDlg).outerHeight()/2)+"px"})}else if(e==Asc.c_oAscAdvancedOptionsID.DRM){$(n.loadMask).hasClass("modal-in")&&uiApp.closeModal(n.loadMask),n.onLongActionEnd(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument);var l=[{text:"OK",bold:!0,onClick:function(){var t=$(n._state.openDlg).find('.modal-text-input[name="modal-password"]').val();n.api.asc_setAdvancedOptions(e,new Asc.asc_CDRMAdvancedOptions(t)),n._isDocReady||n.onLongActionBegin(Asc.c_oAscAsyncActionType.BlockInteraction,LoadingDocument),n._state.openDlg=null}}];n.appOptions.canRequestClose&&l.push({text:n.closeButtonText,onClick:function(){Common.Gateway.requestClose(),n._state.openDlg=null}}),n._state.openDlg=uiApp.modal({title:n.advDRMOptions,text:n.txtProtected,afterText:'<div class="input-field"><input type="password" name="modal-password" placeholder="'+n.advDRMPassword+'" class="modal-text-input"></div>',buttons:l}),$$(n._state.openDlg).css({marginTop:-Math.round($$(n._state.openDlg).outerHeight()/2)+"px"})}}},onTryUndoInFastCollaborative:function(){uiApp.alert(this.textTryUndoRedo,this.notcriticalErrorTitle)},onAuthParticipantsChanged:function(e){var t=0;_.each(e,function(e){e.asc_getView()||t++}),this._state.usersCount=t},onDocumentName:function(e){this.updateWindowTitle(!0)},onPrint:function(){this.appOptions.canPrint&&(this.api&&this.api.asc_Print(),Common.component.Analytics.trackEvent("Print"))},onPrintUrl:function(e){var t=this;t.iframePrint&&(t.iframePrint.parentNode.removeChild(t.iframePrint),t.iframePrint=null),t.iframePrint||(t.iframePrint=document.createElement("iframe"),t.iframePrint.id="id-print-frame",t.iframePrint.style.display="none",t.iframePrint.style.visibility="hidden",t.iframePrint.style.position="fixed",t.iframePrint.style.right="0",t.iframePrint.style.bottom="0",document.body.appendChild(t.iframePrint),t.iframePrint.onload=function(){t.iframePrint.contentWindow.focus(),t.iframePrint.contentWindow.print(),t.iframePrint.contentWindow.blur(),window.focus()}),e&&(t.iframePrint.src=e)},onContextMenu:function(e){var t=e.target.getAttribute("data-can-copy"),i=e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement;if(i&&"false"===t||!i&&"true"!==t)return e.stopPropagation(),e.preventDefault(),!1},leavePageText:"You have unsaved changes in this document. Click 'Stay on this Page' to await the autosave of the document. Click 'Leave this Page' to discard all the unsaved changes.",criticalErrorTitle:"Error",notcriticalErrorTitle:"Warning",errorDefaultMessage:"Error code: %1",criticalErrorExtText:'Press "OK" to back to document list.',openTitleText:"Opening Document",openTextText:"Opening document...",saveTitleText:"Saving Document",saveTextText:"Saving document...",loadFontsTitleText:"Loading Data",loadFontsTextText:"Loading data...",loadImagesTitleText:"Loading Images",loadImagesTextText:"Loading images...",loadFontTitleText:"Loading Data",loadFontTextText:"Loading data...",loadImageTitleText:"Loading Image",loadImageTextText:"Loading image...",downloadTitleText:"Downloading Document",downloadTextText:"Downloading document...",printTitleText:"Printing Document",printTextText:"Printing document...",uploadImageTitleText:"Uploading Image",uploadImageTextText:"Uploading image...",savePreparingText:"Preparing to save",savePreparingTitle:"Preparing to save. Please wait...",uploadImageSizeMessage:"Maximium image size limit exceeded.",uploadImageExtMessage:"Unknown image format.",uploadImageFileCountMessage:"No images uploaded.",unknownErrorText:"Unknown error.",convertationTimeoutText:"Convertation timeout exceeded.",downloadErrorText:"Download failed.",unsupportedBrowserErrorText:"Your browser is not supported.",splitMaxRowsErrorText:"The number of rows must be less than %1",splitMaxColsErrorText:"The number of columns must be less than %1",splitDividerErrorText:"The number of rows must be a divisor of %1",textLoadingDocument:"Loading document",applyChangesTitleText:"Loading Data",applyChangesTextText:"Loading data...",errorKeyEncrypt:"Unknown key descriptor",errorKeyExpire:"Key descriptor expired",errorUsersExceed:"Count of users was exceed",errorCoAuthoringDisconnect:"Server connection lost. You can't edit anymore.",errorFilePassProtect:"The file is password protected and could not be opened.",txtEditingMode:"Set editing mode...",textAnonymous:"Anonymous",loadingDocumentTitleText:"Loading document",loadingDocumentTextText:"Loading document...",warnProcessRightsChange:"You have been denied the right to edit the file.",errorProcessSaveResult:"Saving is failed.",errorStockChart:"Incorrect row order. To build a stock chart place the data on the sheet in the following order:<br> opening price, max price, min price, closing price.",errorDataRange:"Incorrect data range.",errorDatabaseConnection:"External error.<br>Database connection error. Please, contact support.",titleUpdateVersion:"Version changed",errorUpdateVersion:"The file version has been changed. The page will be reloaded.",errorUserDrop:"The file cannot be accessed right now.",txtDiagramTitle:"Chart Title",txtXAxis:"X Axis",txtYAxis:"Y Axis",txtSeries:"Seria",errorMailMergeLoadFile:"Loading failed",mailMergeLoadFileText:"Loading Data Source...",mailMergeLoadFileTitle:"Loading Data Source",errorMailMergeSaveFile:"Merge failed.",downloadMergeText:"Downloading...",downloadMergeTitle:"Downloading",sendMergeTitle:"Sending Merge",sendMergeText:"Sending Merge...",txtArt:"Your text here",errorConnectToServer:' The document could not be saved. Please check connection settings or contact your administrator.<br>When you click the \'OK\' button, you will be prompted to download the document.<br><br>Find more information about connecting Document Server <a href="%1" target="_blank">here</a>',textTryUndoRedo:"The Undo/Redo functions are disabled for the Fast co-editing mode.",textBuyNow:"Visit website",textNoLicenseTitle:"%1 open source version",textContactUs:"Contact sales",errorViewerDisconnect:"Connection is lost. You can still view the document,<br>but will not be able to download until the connection is restored.",warnLicenseExp:"Your license has expired.<br>Please update your license and refresh the page.",titleLicenseExp:"License expired",openErrorText:"An error has occurred while opening the file",saveErrorText:"An error has occurred while saving the file",advTxtOptions:"Choose TXT Options",advDRMOptions:"Protected File",advDRMEnterPassword:"You password please:",advDRMPassword:"Password",textOK:"OK",textCancel:"Cancel",textPreloader:"Loading... ",textUsername:"Username",textPassword:"Password",textBack:"Back",textClose:"Close",textDone:"Done",titleServerVersion:"Editor updated",errorServerVersion:"The editor version has been updated. The page will be reloaded to apply the changes.",errorBadImageUrl:"Image url is incorrect",txtStyle_Normal:"Normal",txtStyle_No_Spacing:"No Spacing",txtStyle_Heading_1:"Heading 1",txtStyle_Heading_2:"Heading 2",txtStyle_Heading_3:"Heading 3",txtStyle_Heading_4:"Heading 4",txtStyle_Heading_5:"Heading 5",txtStyle_Heading_6:"Heading 6",txtStyle_Heading_7:"Heading 7",txtStyle_Heading_8:"Heading 8",txtStyle_Heading_9:"Heading 9",txtStyle_Title:"Title",txtStyle_Subtitle:"Subtitle",txtStyle_Quote:"Quote",txtStyle_Intense_Quote:"Intense Quote",txtStyle_List_Paragraph:"List Paragraph",txtStyle_footnote_text:"Footnote Text",txtHeader:"Header",txtFooter:"Footer",txtProtected:"Once you enter the password and open the file, the current password to the file will be reset",warnNoLicense:"This version of %1 editors has certain limitations for concurrent connections to the document server.<br>If you need more please consider purchasing a commercial license.",warnNoLicenseUsers:"This version of %1 editors has certain limitations for concurrent users.<br>If you need more please consider purchasing a commercial license.",warnLicenseExceeded:"The number of concurrent connections to the document server has been exceeded and the document will be opened for viewing only.<br>Please contact your administrator for more information.",warnLicenseUsersExceeded:"The number of concurrent users has been exceeded and the document will be opened for viewing only.<br>Please contact your administrator for more information.",errorDataEncrypted:"Encrypted changes have been received, they cannot be deciphered.",closeButtonText:"Close File",scriptLoadError:"The connection is too slow, some of the components could not be loaded. Please reload the page.",errorAccessDeny:"You are trying to perform an action you do not have rights for.<br>Please contact your Document Server administrator.",errorEditingDownloadas:"An error occurred during the work with the document.<br>Use the 'Download' option to save the file backup copy to your computer hard drive.",textPaidFeature:"Paid feature",textCustomLoader:"Please note that according to the terms of the license you are not entitled to change the loader.<br>Please contact our Sales Department to get a quote.",waitText:"Please, wait..."}}(),DE.Controllers.Main||{}))}),define("common/mobile/utils/utils",["jquery","underscore"],function(e,t){"use strict";!Common&&(Common={}),!Common.Utils&&(Common.Utils={}),Common.Utils.androidMenuTop=function(t,i){t.css({left:"",top:""});var a=t.width(),n=t.height(),o=i.outerWidth(),s=i.outerHeight(),r=i.offset(),l=i.parents(".page");l.length>0&&(r.top=r.top-l[0].scrollTop);var c=e(window).height(),d=e(window).width(),p=0,u=0,m="top";n+10<r.top?p=r.top-n-10:n+10<c-r.top-s?(m="bottom",p=r.top+s+10):(m="middle",p=s/2+r.top-n/2,p<=0?p=5:p+n>=c&&(p=c-n-5)),"top"===m||"bottom"===m?(u=o/2+r.left-a/2,u<5&&(u=5),u+a>d&&(u=d-a-5)):"middle"===m&&((u=r.left-a-10)<5||u+a>d)&&(u<5&&(u=r.left+o+10),u+a>d&&(u=d-a-5)),t.css({top:p+"px",left:u+"px"})},Common.Utils.addScrollIfNeed=function(i,a){Common.SharedSettings.get("sailfish")&&t.delay(function(){var t=e(i),n=e(a);0!=t.length&&0!=n&&(n.css("height","auto"),new IScroll(i))},500)}}),define("documenteditor/mobile/app/view/DocumentHolder",["jquery","underscore","backbone","common/mobile/utils/utils"],function(e,t,i){"use strict";DE.Views.DocumentHolder=i.View.extend(function(){var i="context-menu-target";return{el:"#editor_sdk",template:t.template('<div id="'+i+'" style="position: absolute;"></div>'),events:{},initialize:function(){},render:function(){var t=e(this.el);return t.length>0&&t.find("#"+i).length<1&&t.append(this.template()),this},showMenu:function(a,n,o){if(!(a.length<1)){var s=t.template(["<% if(menuItems.itemsIcon) {%>","<% _.each(menuItems.itemsIcon, function(item) { %>",'<li data-event="<%= item.event %>"><a href="#" class="item-link list-button"><i class="icon <%= item.icon %>"></i></a></li>',"<% }); }%>","<% if(menuItems.items) {%>","<% _.each(menuItems.items, function(item) { %>",'<li data-event="<%= item.event %>"><a href="#" class="item-link list-button"><%= item.caption %></a></li>',"<% }); }%>"].join(""));e("#"+i).css("left",n).css("top",Math.max(0,o)),uiApp.closeModal(".document-menu.modal-in");var r='<div class="popover document-menu"><div class="popover-inner"><div class="list-block"><ul>'+s({menuItems:a})+"</ul></div></div></div>",l=uiApp.popover(r,e("#"+i));Common.SharedSettings.get("android")&&Common.Utils.androidMenuTop(e(l),e("#"+i)),e(".modal-overlay").removeClass("modal-overlay-visible"),e(".document-menu li").single("click",t.buffered(function(t){var i=e(t.currentTarget),a=i.data("event");this.fireEvent("contextmenu:click",[this,a])},100,this))}},hideMenu:function(){e("#"+i).css("left",-1e3).css("top",-1e3),uiApp.closeModal(".document-menu.modal-in")}}}())}),void 0===Common)var Common={};if(define("common/main/lib/component/BaseView",["backbone"],function(e){"use strict";Common.UI=_.extend(Common.UI||{},{Keys:{BACKSPACE:8,TAB:9,RETURN:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,SPACE:32,PAGEUP:33,PAGEDOWN:34,INSERT:45,EQUALITY_FF:61,NUM_PLUS:107,NUM_MINUS:109,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,MINUS_FF:173,EQUALITY:187,MINUS:189},BaseView:e.View.extend({isSuspendEvents:!1,initialize:function(e){this.options=this.options?_({}).extend(this.options,e):e},setVisible:function(e){return this[e?"show":"hide"]()},isVisible:function(){return $(this.el).is(":visible")},suspendEvents:function(){this.isSuspendEvents=!0},resumeEvents:function(){this.isSuspendEvents=!1}}),getId:function(e){return _.uniqueId(e||"asc-gen")}})}),void 0===Common)var Common={};if(Common.Models=Common.Models||{},define("common/main/lib/model/User",["underscore","backbone","common/main/lib/component/BaseView"],function(e,t){"use strict";Common.Models.User=t.Model.extend({defaults:function(){return{iid:Common.UI.getId(),id:void 0,idOriginal:void 0,username:"Guest",color:"#fff",colorval:null,online:!1,view:!1}}})}),define("common/main/lib/collection/Users",["backbone","common/main/lib/model/User"],function(e){"use strict";Common.Collections=Common.Collections||{},Common.Collections.Users=e.Collection.extend({model:Common.Models.User,getOnlineCount:function(){var e=0;return this.each(function(t){t.get("online")&&++e}),e},getEditingCount:function(){return this.filter(function(e){return e.get("online")&&!e.get("view")}).length},getEditingOriginalCount:function(){return this.chain().filter(function(e){return e.get("online")&&!e.get("view")}).groupBy(function(e){return e.get("idOriginal")}).size().value()},findUser:function(e){return this.find(function(t){return t.get("id")==e})},findOriginalUser:function(e){return this.find(function(t){return t.get("idOriginal")==e})}}),Common.Collections.HistoryUsers=e.Collection.extend({model:Common.Models.User,findUser:function(e){return this.find(function(t){return t.get("id")==e})}})}),define("documenteditor/mobile/app/controller/DocumentHolder",["core","jquery","underscore","backbone","documenteditor/mobile/app/view/DocumentHolder","common/main/lib/collection/Users"],function(e,t,i,a){"use strict";DE.Controllers.DocumentHolder=a.Controller.extend(i.extend(function(){var e,a,n=[],o=[],s=!1,r=!1,l=!1,c=[],d=0;return{models:[],collections:["Common.Collections.Users"],views:["DocumentHolder"],initialize:function(){this.addListeners({DocumentHolder:{"contextmenu:click":this.onContextMenuClick}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onShowPopMenu",i.bind(t.onApiShowPopMenu,t)),t.api.asc_registerCallback("asc_onHidePopMenu",i.bind(t.onApiHidePopMenu,t)),t.api.asc_registerCallback("asc_onShowForeignCursorLabel",i.bind(t.onApiShowForeignCursorLabel,t)),t.api.asc_registerCallback("asc_onHideForeignCursorLabel",i.bind(t.onApiHideForeignCursorLabel,t)),t.api.asc_registerCallback("asc_onAuthParticipantsChanged",i.bind(t.onApiUsersChanged,t)),t.api.asc_registerCallback("asc_onConnectionStateChanged",i.bind(t.onApiUserConnection,t)),t.api.asc_registerCallback("asc_onDocumentContentReady",i.bind(t.onApiDocumentContentReady,t)),Common.NotificationCenter.on("api:disconnect",i.bind(t.onCoAuthoringDisconnect,t)),t.api.asc_registerCallback("asc_onCoAuthoringDisconnect",i.bind(t.onCoAuthoringDisconnect,t)),t.api.asc_registerCallback("asc_onShowRevisionsChange",i.bind(t.onApiShowChange,t)),t.api.asc_coAuthoringGetUsers()},setMode:function(e){s=e.isEdit,r=e.canReview},onLaunch:function(){var e=this;a=e.createView("DocumentHolder").render(),$$(window).on("resize",i.bind(e.onEditorResize,e))},onContextMenuClick:function(t,n){var s=this;if("cut"==n)s.api.Cut();else if("copy"==n)s.api.Copy();else if("paste"==n)s.api.Paste();else if("merge"==n)s.api.MergeCells();else if("split"==n)a.hideMenu(),s.showSplitModal();else if("delete"==n)s.api.asc_Remove();else if("deletetable"==n)s.api.remTable();else if("edit"==n)a.hideMenu(),DE.getController("EditContainer").showModal();else if("addlink"==n)a.hideMenu(),DE.getController("AddContainer").showModal(),DE.getController("AddOther").getView("AddOther").showLink(!1);else if("openlink"==n)i.some(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Hyperlink)return s._openLink(e.get_ObjectValue().get_Value()),!0});else if("review"==n){var r=DE.getController("Common.Controllers.Collaboration");r.showModal(),r.getView("Common.Views.Collaboration").showPage("#reviewing-settings-view",!1)}else if("reviewchange"==n){var r=DE.getController("Common.Controllers.Collaboration");r.showModal(),r.getView("Common.Views.Collaboration").showPage("#reviewing-settings-view",!1),r.getView("Common.Views.Collaboration").showPage("#change-view",!1)}else"showActionSheet"==n&&o.length>0&&i.delay(function(){i.each(o,function(e){e.text=e.caption,e.onClick=function(){s.onContextMenuClick(null,e.event)}}),uiApp.actions([o,[{text:s.sheetCancel,bold:!0}]])},100);a.hideMenu()},showSplitModal:function(){var e,t=this;uiApp.modal({title:t.menuSplit,text:"",afterText:'<div class="content-block"><div class="row no-gutter" style="text-align: center;"><div class="col-50 size-columns">'+t.textColumns+'</div><div class="col-50 size-rows">'+t.textRows+'</div></div><div id="picker-split-size"></div></div>',buttons:[{text:t.textCancel},{text:"OK",bold:!0,onClick:function(){var i=e.value;t.api&&t.api.SplitCell(parseInt(i[0]),parseInt(i[1]))}}]}),e=uiApp.picker({container:"#picker-split-size",toolbar:!1,rotateEffect:!0,value:[3,3],cols:[{textAlign:"center",width:"100%",values:[1,2,3,4,5,6,7,8,9,10]},{textAlign:"center",width:"100%",values:[1,2,3,4,5,6,7,8,9,10]}]})},onEditorResize:function(e){},onApiShowPopMenu:function(i,n){if(!(t(".popover.settings, .popup.settings, .picker-modal.settings, .modal.modal-in, .actions-modal").length>0)){if(!((new Date).getTime()-d<1e3)){d=0,c=[i,n];var o,s=this;e=s.api.getSelectedElements(),o=s._initMenu(e),a.showMenu(o,i,n)}}},onApiHidePopMenu:function(){(new Date).getTime()-d<1e3||a&&a.hideMenu()},onApiShowForeignCursorLabel:function(e,a,o,s){var r=this,l=i.find(n,function(t){return t.attr("userid")==e});l||(l=t(document.createElement("div")),l.addClass("username-tip"),l.attr("userid",e),l.css({height:"20px",position:"absolute",zIndex:"900",display:"none","pointer-events":"none","background-color":"#"+Common.Utils.ThemeColor.getHexColor(s.get_r(),s.get_g(),s.get_b())}),l.text(function(e){var t=DE.getCollection("Common.Collections.Users");if(t){var i=t.findUser(e);if(i)return i.get("username")}return r.textGuest}(e)),t("#id_main_view").append(l),n.push(l),l.fadeIn(150)),l.css({
top:o-20+"px",left:a+"px"})},onApiHideForeignCursorLabel:function(e){for(var t=0;t<n.length;t++)if(n[t].attr("userid")==e){var i=n[t];n[t].fadeOut(150,function(){i.remove()}),n.splice(t,1);break}},onApiUsersChanged:function(e){var t=this.getApplication().getCollection("Common.Collections.Users");if(t){var i,a,n=[];for(i in e)void 0!==i&&(a=e[i])&&n.push(new Common.Models.User({id:a.asc_getId(),username:a.asc_getUserName(),online:!0,color:a.asc_getColor(),view:a.asc_getView()}));t[t.size()>0?"add":"reset"](n)}},onApiUserConnection:function(e){var t=this.getApplication().getCollection("Common.Collections.Users");if(t){var i=t.findUser(e.asc_getId());i?i.set({online:e.asc_getState()}):t.add(new Common.Models.User({id:e.asc_getId(),username:e.asc_getUserName(),online:e.asc_getState(),color:e.asc_getColor(),view:e.asc_getView()}))}},onApiDocumentContentReady:function(){a=this.createView("DocumentHolder").render()},onApiShowChange:function(e){l=e&&e.length>0},_openLink:function(e){if(this.api.asc_getUrlType(e)>0){var t=window.open(e,"_blank");t&&t.focus()}},_initMenu:function(e){var t=this,a=[],n=[],c=t.api.can_CopyCut();o=[],c&&n.push({caption:t.menuCopy,event:"copy",icon:"icon-copy"});var d=!1,p=!1,u=!1,m=!1,h=!1,g=!1,v=!1,f=!1,b=!1,C=!1;if(i.each(e,function(e){var t=e.get_ObjectType(),i=e.get_ObjectValue();t==Asc.c_oAscTypeSelectElement.Header&&(C=i.get_Locked()),t==Asc.c_oAscTypeSelectElement.Text?(d=!0,v=i.get_Locked()):t==Asc.c_oAscTypeSelectElement.Image?(b=i.get_Locked(),i&&i.get_ChartProperties()?m=!0:t&&i.get_ShapeProperties()?h=!0:u=!0):t==Asc.c_oAscTypeSelectElement.Table?(p=!0,f=i.get_Locked()):t==Asc.c_oAscTypeSelectElement.Hyperlink&&(g=!0)}),e.length>0){s&&!t.isDisconnected&&(v||f||b||C||!c||(n.push({caption:t.menuCut,event:"cut",icon:"icon-cut"}),function(e,t,i){e[i]=e.splice(t,1,e[i])[0]}(n,0,1)),v||f||b||C||n.push({caption:t.menuPaste,event:"paste",icon:"icon-paste"}),p&&t.api.CheckBeforeMergeCells()&&!f&&!C&&a.push({caption:t.menuMerge,event:"merge"}),p&&t.api.CheckBeforeSplitCells()&&!f&&!C&&a.push({caption:t.menuSplit,event:"split"}),v||f||b||C||a.push({caption:t.menuDelete,event:"delete"}),!p||f||v||C||a.push({caption:t.menuDeleteTable,event:"deletetable"}),v||f||b||C||a.push({caption:t.menuEdit,event:"edit"}),i.isEmpty(t.api.can_AddHyperlink())||C||a.push({caption:t.menuAddLink,event:"addlink"}),r&&(l?a.push({caption:t.menuReviewChange,event:"reviewchange"}):a.push({caption:t.menuReview,event:"review"})))}return g&&a.push({caption:t.menuOpenLink,event:"openlink"}),Common.SharedSettings.get("phone")&&a.length>2&&(o=a.slice(2),a=a.slice(0,2),a.push({caption:t.menuMore,event:"showActionSheet"})),{itemsIcon:n,items:a}},onCoAuthoringDisconnect:function(){this.isDisconnected=!0},textGuest:"Guest",textCancel:"Cancel",textColumns:"Columns",textRows:"Rows",menuCut:"Cut",menuCopy:"Copy",menuPaste:"Paste",menuEdit:"Edit",menuDelete:"Delete",menuAddLink:"Add Link",menuOpenLink:"Open Link",menuMore:"More",sheetCancel:"Cancel",menuReview:"Review",menuMerge:"Merge Cells",menuSplit:"Split Cell",menuDeleteTable:"Delete Table",menuReviewChange:"Review Change"}}(),DE.Controllers.DocumentHolder||{}))}),define("text!documenteditor/mobile/app/template/Settings.template",[],function(){return'<div id="settings-root-view"><div class="navbar"><div class="navbar-inner"><div class="center sliding"><%= scope.textSettings %></div><div class="right"><% if (phone) { %><a href="#" class="link close-popup"><%= scope.textDone %></a><% } %></div></div></div><div class="pages"><div class="page" data-page="settings-root-view"><div class="page-content"><div class="list-block"><ul> <% if (phone) { %> <li><a id="settings-search" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-search"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFind %></div></div></div></a></li> <% } %> <li><div id="settings-readermode" class="item-content"><div class="item-media"><i class="icon icon-reader"></i></div><div class="item-inner"><div class="item-title"><%= scope.textReader %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li> <% if (orthography) { %> <li><a id="settings-orthography" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-spellcheck"></i></div><div class="item-inner"><div class="item-title">Проверка правописания</div></div></div></a></li> <% } %> <% if(width < 360) {%> <li><div id="settings-collaboration" class="item-content" style="display: none;"><div class="item-media"><i class="icon icon-collaboration"></i></div><div class="item-inner"><div class="item-title"><%= scope.textCollaboration %></div></div></div></li> <% } %> <li><a id="settings-document" class="item-link" data-page="#settings-document-view"><div class="item-content"><div class="item-media"><i class="icon icon-doc-setup"></i></div><div class="item-inner"><div class="item-title"><%= scope.textDocumentSettings %></div></div></div></a></li><li><a id="settings-advanced" class="item-link" data-page="#settings-advanced-view"><div class="item-content"><div class="item-media"><i class="icon icon-app-settings"></i></div><div class="item-inner"><div class="item-title"><%= scope.textAdvancedSettings %></div></div></div></a></li><li><a id="settings-download-as" class="item-link" data-page="#settings-download-view"><div class="item-content"><div class="item-media"><i class="icon icon-download"></i></div><div class="item-inner"><div class="item-title"><%= scope.textDownload %></div></div></div></a></li><li><a id="settings-download" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-download"></i></div><div class="item-inner"><div class="item-title"><%= scope.textDownload %></div></div></div></a></li><li><a id="settings-print" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-print"></i></div><div class="item-inner"><div class="item-title"><%= scope.textPrint %></div></div></div></a></li><li><a id="settings-document-info" class="item-link" data-page="#settings-info-view"><div class="item-content"><div class="item-media"><i class="icon icon-info"></i></div><div class="item-inner"><div class="item-title"><%= scope.textDocInfo %></div></div></div></a></li><li><a id="settings-help" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-help"></i></div><div class="item-inner"><div class="item-title"><%= scope.textHelp %></div></div></div></a></li><li><a id="settings-about" class="item-link" data-page="#settings-about-view"><div class="item-content"><div class="item-media"><i class="icon icon-about"></i></div><div class="item-inner"><div class="item-title"><%= scope.textAbout %></div></div></div></a></li></ul></div></div></div></div></div><div id="settings-document-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textDocumentSettings %></div></div></div><div class="pages"><div class="page" data-page="settings-document-view"><div class="page-content"><div class="content-block-title"><%= scope.textOrientation %></div><div class="list-block"><ul><li><label class="label-radio item-content"><input type="radio" name="doc-orientation" value="true"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textPortrait %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="doc-orientation" value="false"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textLandscape %></div></div></label></li></ul></div><div class="content-block-title"><%= scope.textFormat %></div><div class="list-block"><ul><li class="media-item"><a id="settings-document-format" class="item-link item-content" data-page="#settings-document-formats-view"><div class="item-inner"><div class="item-title-row"><div class="item-title"><%= scope.textCustom %></div></div><div class="item-subtitle"><%= scope.textCustomSize %></div></div></a></li><li><a id="margin-settings" class="item-link item-content" data-page="#margins-view"><div class="item-inner"><div class="item-title-row"><div class="item-title"><%= scope.textMargins %></div></div></div></a></li></ul></div><div class="list-block"><ul><li><a id="color-schemes" class="item-link item-content" data-page="#color-schemes-view"><div class="item-inner"><div class="item-title-row"><div class="item-title"><%= scope.textColorSchemes %></div></div></div></a></li></ul></div></div></div></div></div><div id="settings-document-formats-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textDocumentFormats %></div></div></div><div class="pages"><div class="page" data-page="settings-document-formats-view"><div class="page-content"><div class="list-block media-list"><ul></ul></div></div></div></div></div><div id="settings-info-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %> </a></div><div class="center sliding"><%= scope.textDocInfo %></div></div></div><div class="pages"><div class="page" data-page="settings-info-view"><div class="page-content"><div class="content-block-title"><%= scope.textDocTitle %></div><div class="list-block"><ul><li class="item-content"><div class="item-inner"><div id="settings-document-title" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-owner"><%= scope.textOwner %></div><div class="list-block display-owner"><ul><li class="item-content"><div class="item-inner"><div id="settings-document-owner" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-location"><%= scope.textLocation %></div><div class="list-block display-location"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-location" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-uploaded"><%= scope.textUploaded %></div><div class="list-block display-uploaded"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-uploaded" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title"><%= scope.textStatistic %></div><div class="list-block"><ul><li class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textPages %></div><div class="item-after" id="statistic-pages">0</div></div></li><li class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textParagraphs %></div><div class="item-after" id="statistic-paragraphs">0</div></div></li><li class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWords %></div><div class="item-after" id="statistic-words">0</div></div></li><li class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSymbols %></div><div class="item-after" id="statistic-symbols">0</div></div></li><li class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSpaces %></div><div class="item-after" id="statistic-spaces">0</div></div></li></ul></div><div class="content-block-title display-title"><%= scope.textTitle %></div><div class="list-block display-title"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-title" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-subject"><%= scope.textSubject %></div><div class="list-block display-subject"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-subject" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-comment"><%= scope.textComment %></div><div class="list-block display-comment"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-comment" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-last-mode"><%= scope.textLastModified %></div><div class="list-block display-last-mode"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-last-mod" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-mode-by"><%= scope.textLastModifiedBy %></div><div class="list-block display-mode-by"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-mod-by" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-created-date"><%= scope.textCreated %></div><div class="list-block display-created-date"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-date" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-application"><%= scope.textApplication %></div><div class="list-block display-application"><ul><li class="item-content"><div class="item-inner"><div id="settings-doc-application" class="item-title"><%= scope.textLoading %></div></div></li></ul></div><div class="content-block-title display-author"><%= scope.textAuthor %></div><div class="list-block display-author"><ul id="list-creator"><li class="item-content"><div class="item-inner"><div id="settings-doc-author" class="item-title"><%= scope.textLoading %></div></div></li></ul></div></div></div></div></div><div id="settings-download-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %> </a></div><div class="center sliding"><%= scope.textDownload %></div></div></div><div class="pages"><div class="page formats" data-page="settings-download-view"><div class="page-content"><div class="content-block-title"><%= scope.textDownloadAs %></div><div class="list-block"><ul><li><a data-format="65" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-docx"></i></div><div class="item-inner"><div class="item-title">DOCX</div></div></div></a></li><li><a data-format="513" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-pdf"></i></div><div class="item-inner"><div class="item-title">PDF</div></div></div></a></li><li><a data-format="2305" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-pdfa"></i></div><div class="item-inner"><div class="item-title">PDF/A</div></div></div></a></li><li><a data-format="69" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-txt"></i></div><div class="item-inner"><div class="item-title">TXT</div></div></div></a></li><li><a data-format="68" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-rtf"></i></div><div class="item-inner"><div class="item-title">RTF</div></div></div></a></li><li><a data-format="67" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-odt"></i></div><div class="item-inner"><div class="item-title">ODT</div></div></div></a></li><li><a data-format="2051" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-html"></i></div><div class="item-inner"><div class="item-title">HTML</div></div></div></a></li><li><a data-format="76" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-dotx"></i></div><div class="item-inner"><div class="item-title">DOTX</div></div></div></a></li><li><a data-format="79" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-format-ott"></i></div><div class="item-inner"><div class="item-title">OTT</div></div></div></a></li></ul></div></div></div></div></div><div id="settings-history-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %> </a></div><div class="center sliding">Version History</div></div></div><div class="pages"><div class="page" data-page="settings-history-view"><div class="page-content"><div class="content-block-title">Saved versions</div><div class="content-block inset"><div class="content-block-inner"><p>Under construction</p></div></div></div></div></div></div><div id="settings-about-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %> </a></div><div class="center sliding"><%= scope.textAbout %></div></div></div><div class="pages"><div class="page about" data-page="settings-about-view"><div class="page-content"><div class="content-block"><div class="logo" style="display: inline-block; width: 100%; height: 55px;"></div><div id="settings-about-logo" style="margin-top: 20px;display: none;"></div></div><div class="content-block"><h3>DOCUMENT EDITOR</h3><h3><%= scope.textVersion %> <%= prodversion %></h3></div><div class="content-block"><h3 id="settings-about-name" class="vendor"><%= publishername %></h3><p><label><%= scope.textAddress %>:</label><a id="settings-about-address" class="external" href="#"><%= publisheraddr %></a></p><p><label><%= scope.textEmail %>:</label><a id="settings-about-email" class="external" target="_blank" href="mailto:<%= supportemail %>"><%= supportemail %></a></p><p><label><%= scope.textTel %>:</label><a id="settings-about-tel" class="external" target="_blank" href="tel:<%= phonenum %>"><%= phonenum %></a></p><p><a id="settings-about-url" class="external" target="_blank" href="<%= publisherurl %>"><%= printed_url %></a></p><p><label id="settings-about-info" style="display: none;"></label></p></div><div class="content-block" id="settings-about-licensor" style="display: none;"><div class="content-block-inner" style="padding-top:0; padding-bottom: 1px;"></div><p><label><%= scope.textPoweredBy %></label></p><h3 class="vendor"><%= publishername %></h3><p><a class="external" target="_blank" href="<%= publisherurl %>"><%= printed_url %></a></p></div></div></div></div></div><div id="settings-advanced-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textAdvancedSettings %></div></div></div><div class="pages"><div class="page" data-page="settings-advanced-view"><div class="page-content"><div class="content-block-title"><%= scope.textUnitOfMeasurement %></div><div class="list-block"><ul><li><label class="label-radio item-content"><input type="radio" name="unit-of-measurement" value="0"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textCentimeter %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="unit-of-measurement" value="1"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textPoint %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="unit-of-measurement" value="2"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textInch %></div></div></label></li></ul></div><div class="list-block"><ul><div id="settings-spellcheck" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSpellcheck %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></ul></div><div class="list-block"><ul><div id="settings-no-characters" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textNoCharacters %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div><div id="settings-hidden-borders" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textHiddenTableBorders %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></ul></div><div class="content-block-title display-view"><%= scope.textCommentingDisplay %></div><div class="list-block display-view"><ul><div id="settings-display-comments" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textDisplayComments %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div><div id="settings-display-resolved" class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textDisplayResolvedComments %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></ul></div></div></div></div></div><div id="color-schemes-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textColorSchemes %></div></div></div><div class="pages"><div class="page" data-page="color-schemes-view"><div class="page-content"><div id="color-schemes-content" class="list-block"></div></div></div></div></div><div id="margins-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textMargins %></div></div></div><div class="pages"><div class="page" data-page="margins-view"><div class="page-content"><div class="list-block"><ul><li id="document-margin-top"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textTop %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li><li id="document-margin-bottom"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textBottom %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li><li id="document-margin-left"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textLeft %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li><li id="document-margin-right"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textRight %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div></div></div></div></div>'}),define("documenteditor/mobile/app/view/Settings",["text!documenteditor/mobile/app/template/Settings.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.Settings=a.View.extend(i.extend(function(){var a=!1,n=!1,o=!1,s=!1,r=!1,l=!0,c=!0,d=!1,p=!1,u=!1;return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("settingscontainer:show",i.bind(this.initEvents,this)),Common.Gateway.on("opendocument",i.bind(this.loadDocument,this)),this.on("page:show",i.bind(this.updateItemHandlers,this))},initEvents:function(){var e=this;Common.Utils.addScrollIfNeed(".view[data-page=settings-root-view] .pages",".view[data-page=settings-root-view] .page"),e.updateItemHandlers(),e.initControls()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),orthography:Common.SharedSettings.get("sailfish"),scope:this,width:t(window).width(),prodversion:"5.4.2",publishername:"Ascensio System SIA",publisheraddr:"20A-12 Ernesta Birznieka-Upisha street, Riga, Latvia, EU, LV-1050",publisherurl:"https://www.onlyoffice.com/",printed_url:"https://www.onlyoffice.com/".replace(/https?:\/{2}/,"").replace(/\/$/,""),supportemail:"support@onlyoffice.com",phonenum:"+371 660-16425"})),this},setMode:function(e){a=e.isEdit,n=!e.isEdit&&e.canEdit&&e.canRequestEditRights,o=e.canDownload,s=e.canDownloadOrigin,r=!e.isEdit&&e.canReader,d=e.canPrint,p=e.canReview,u=e.isReviewOnly,e.customization&&e.canBrandingExt&&(l=!1!==e.customization.about),e.customization&&(c=!1!==e.customization.help)},rootLayout:function(){if(this.layout){var e=this.layout.find("#settings-root-view");Common.SharedSettings.get("phone");return a?e.find("#settings-search .item-title").text(this.textFindAndReplace):(e.find("#settings-document").hide(),e.find("#color-schemes").hide(),e.find("#settings-spellcheck").hide(),e.find("#settings-orthography").hide()),r?e.find("#settings-readermode input:checkbox").prop("checked",Common.SharedSettings.get("readerMode")):e.find("#settings-readermode").hide(),o||e.find("#settings-download-as").hide(),s||e.find("#settings-download").hide(),l||e.find("#settings-about").hide(),c||e.find("#settings-help").hide(),d||e.find("#settings-print").hide(),p||e.find("#settings-review").hide(),u&&e.find("#settings-review").addClass("disabled"),e.html()}return""},initControls:function(){},updateItemHandlers:function(){var e=[".page[data-page=settings-root-view]",".page[data-page=settings-document-view]",".page[data-page=settings-advanced-view]"].map(function(e){return e+" a.item-link[data-page]"}).join(", ");t(e).single("click",i.bind(this.onItemClick,this))},showPage:function(e,t){var i=DE.getController("Settings").rootView();if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e])}},onItemClick:function(e){var i=t(e.currentTarget),a=i.data("page");a&&a.length>0&&this.showPage(a)},renderPageSizes:function(e,a){var n=t(".page[data-page=settings-document-formats-view]"),o=n.find("ul"),s=[];i.each(e,function(e,t){s.push(i.template(["<li>",'<label class="label-radio item-content">','<input type="radio" name="document-format" value="<%= item.value %>" <% if (index == selectIndex) { %>checked="checked"<% } %> >','<% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>','<div class="item-inner">','<div class="item-title-row">','<div class="item-title"><%= item.caption %></div>',"</div>",'<div class="item-subtitle"><%= parseFloat(Common.Utils.Metric.fnRecalcFromMM(item.value[0]).toFixed(2)) %> <%= Common.Utils.Metric.getCurrentMetricName() %> x <%= parseFloat(Common.Utils.Metric.fnRecalcFromMM(item.value[1]).toFixed(2)) %> <%= Common.Utils.Metric.getCurrentMetricName() %></div>',"</div>","</label>","</li>"].join(""))({android:Framework7.prototype.device.android,item:e,index:t,selectIndex:a}))}),o.html(s.join(""))},loadDocument:function(e){var t={};e.doc&&(t=i.extend(t,e.doc.permissions),t.edit)},textFindAndReplace:"Find and Replace",textSettings:"Settings",textDone:"Done",textFind:"Find",textEditDoc:"Edit Document",textReader:"Reader Mode",textDownload:"Download",textDocInfo:"Document Info",textHelp:"Help",textAbout:"About",textBack:"Back",textDocTitle:"Document title",textLoading:"Loading...",textAuthor:"Author",textCreateDate:"Create date",textStatistic:"Statistic",textPages:"Pages",textParagraphs:"Paragraphs",textWords:"Words",textSymbols:"Symbols",textSpaces:"Spaces",textDownloadAs:"Download As...",textVersion:"Version",textAddress:"address",textEmail:"email",textTel:"tel",textDocumentSettings:"Document Settings",textPortrait:"Portrait",textLandscape:"Landscape",textFormat:"Format",textCustom:"Custom",textCustomSize:"Custom Size",textDocumentFormats:"Document Formats",textOrientation:"Orientation",textPoweredBy:"Powered by",textSpellcheck:"Spell Checking",textPrint:"Print",textReview:"Review",textMargins:"Margins",textTop:"Top",textLeft:"Left",textBottom:"Bottom",textRight:"Right",textAdvancedSettings:"Application Settings",textUnitOfMeasurement:"Unit of Measurement",textCentimeter:"Centimeter",textPoint:"Point",textInch:"Inch",textColorSchemes:"Color Schemes",textNoCharacters:"Nonprinting Characters",textHiddenTableBorders:"Hidden Table Borders",textCollaboration:"Collaboration",textCommentingDisplay:"Commenting Display",textDisplayComments:"Comments",textDisplayResolvedComments:"Resolved Comments",textSubject:"Subject",textTitle:"Title",textComment:"Comment",textOwner:"Owner",textApplication:"Application",textLocation:"Location",textUploaded:"Uploaded",textLastModified:"Last Modified",textLastModifiedBy:"Last Modified By",textCreated:"Created"}}(),DE.Views.Settings||{}))}),define("text!common/mobile/lib/template/Collaboration.template",[],function(){
return'\x3c!-- Root view --\x3e\n<div id="collaboration-root-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="center sliding"><%= scope.textCollaboration %></div>\n            <div class="right sliding close-collaboration"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page" data-page="collaboration-root-view">\n            <div class="page-content">\n                <div class="list-block">\n                    <ul>\n                        <li>\n                            <a id="list-edit-users" class="item-link" data-page="#edit-users-view">\n                                <div class="item-content">\n                                    <div class="item-inner">\n                                        <div class="item-title"><%= scope.textEditUsers %></div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                        <li>\n                            <a id="comments-settings" class="item-link" data-page="#comments-view">\n                                <div class="item-content">\n                                    <div class="item-inner">\n                                        <div class="item-title"><%= scope.textСomments %></div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                        <% if (editor === \'DE\') { %>\n                        <li>\n                            <a id="reviewing-settings" class="item-link" data-page="#reviewing-settings-view">\n                                <div class="item-content">\n                                    <div class="item-inner">\n                                        <div class="item-title"><%= scope.textReviewing %></div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                        <% } %>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Editable Users view --\x3e\n<div id="edit-users-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div>\n            <div class="center sliding"><%= scope.textEditUsers %></div>\n            <div class="right sliding"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page page-change" data-page="edit-users-view">\n            <div class="page-content">\n                <div id="user-list" class="list-block">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Reviewing Settings view --\x3e\n<div id="reviewing-settings-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div>\n            <div class="center sliding"><%= scope.textReviewing %></div>\n            <div class="right sliding"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page" data-page="reviewing-settings-view">\n            <div class="page-content">\n                <div class="list-block">\n                    <ul>\n                        <li>\n                            <div id="settings-review" class="item-content">\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textReview %></div>\n                                    <div class="item-after">\n                                        <label class="label-switch">\n                                            <input type="checkbox">\n                                            <div class="checkbox"></div>\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <a id="display-mode-settings" class="item-link" data-page="#display-mode-view">\n                                <div class="item-content">\n                                    <div class="item-inner">\n                                        <div class="item-title"><%= scope.textDisplayMode %></div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                        <li>\n                            <a id="change-settings" class="item-link" data-page="#change-view">\n                                <div class="item-content">\n                                    <div class="item-inner">\n                                        <div class="item-title"><%= scope.textChange %></div>\n                                    </div>\n                                </div>\n                            </a>\n                        </li>\n                        <li>\n                            <div id="settings-accept-all" class="item-content">\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textAcceptAllChanges %></div>\n                                </div>\n                            </div>\n                        </li>\n                        <li>\n                            <div id="settings-reject-all" class="item-content">\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textRejectAllChanges %></div>\n                                </div>\n                            </div>\n                        </li>\n\n                    </ul>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Display Mode view --\x3e\n<div id="display-mode-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div>\n            <div class="center sliding"><%= scope.textDisplayMode %></div>\n            <div class="right sliding"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page" data-page="display-mode-view">\n            <div class="page-content">\n                <div class="list-block">\n                    <ul>\n                        <li>\n                            <label class="label-radio item-content">\n                                <input type="radio" name="doc-orientation" value="markup">\n                                <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textMarkup %></div>\n                                </div>\n                            </label>\n                        </li>\n                        <li>\n                            <label class="label-radio item-content">\n                                <input type="radio" name="doc-orientation" value="final">\n                                <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textFinal %></div>\n                                </div>\n                            </label>\n                        </li>\n                        <li>\n                            <label class="label-radio item-content">\n                                <input type="radio" name="doc-orientation" value="original">\n                                <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>\n                                <div class="item-inner">\n                                    <div class="item-title"><%= scope.textOriginal %></div>\n                                </div>\n                            </label>\n                        </li>\n                    </ul>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Change view --\x3e\n<div id="change-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div>\n            <div class="center sliding"><%= scope.textChange %></div>\n            <div class="right sliding"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page page-change" data-page="change-view">\n            <div class="page-content">\n                <div class="content-block block-btn">\n                <span class="next-prev">\n                <a href="#" id="btn-prev-change" class="link icon-only"><i class="icon icon-prev-change"></i></a>\n                <a href="#" id="btn-next-change" class="link icon-only"><i class="icon icon-next-change"></i></a>\n                </span>\n                    <span class="right-buttons">\n                <a href="#" id="btn-goto-change" class="link icon-only" style="display: none;"><i class="icon icon-goto"></i></a>\n                <span class="accept-reject">\n                <a href="#" id="btn-accept-change" class="link icon-only"><i class="icon icon-accept"></i></a>\n                <a href="#" id="btn-reject-change" class="link icon-only"><i class="icon icon-reject"></i></a>\n                </span>\n                </span>\n                </div>\n                <div id="current-change" class="content-block block-description">\n                    <p id="user-name"></p>\n                    <p id="date-change"></p>\n                    <p id="text-change"></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\x3c!-- Comments view --\x3e\n<div id="comments-view">\n    <div class="navbar">\n        <div class="navbar-inner">\n            <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div>\n            <div class="center sliding"><%= scope.textСomments %></div>\n            <div class="right sliding"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div>\n        </div>\n    </div>\n    <div class="pages">\n        <div class="page page-comments" data-page="comments-view">\n            <div class="page-content">\n                <div class="list-block">\n                    <ul id="comments-list"></ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),void 0===Common)var Common={};if(Common.Views=Common.Views||{},define("common/mobile/lib/view/Collaboration",["text!common/mobile/lib/template/Collaboration.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";Common.Views.Collaboration=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("collaborationcontainer:show",i.bind(this.initEvents,this)),this.on("page:show",i.bind(this.updateItemHandlers,this))},initEvents:function(){var e=this;Common.Utils.addScrollIfNeed(".view[data-page=collaboration-root-view] .pages",".view[data-page=collaboration-root-view] .page"),e.updateItemHandlers()},initControls:function(){},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),orthography:Common.SharedSettings.get("sailfish"),scope:this,editor:window.DE?"DE":window.PE?"PE":"SSE"})),this},updateItemHandlers:function(){var e=[".page[data-page=collaboration-root-view]",".page[data-page=reviewing-settings-view]"].map(function(e){return e+" a.item-link[data-page]"}).join(", ");t(e).single("click",i.bind(this.onItemClick,this))},onItemClick:function(e){var i=t(e.currentTarget),a=i.data("page");a&&a.length>0&&this.showPage(a)},rootLayout:function(){if(this.layout){var e=this.layout.find("#collaboration-root-view");Common.SharedSettings.get("phone");return e.html()}return""},showPage:function(e,t){var i=window.DE?DE:window.PE?PE:SSE,a=i.getController("Common.Controllers.Collaboration").rootView();if(a&&this.layout){var n=this.layout.find(e);Framework7.prototype.device.android&&n.find(".page").append(n.find(".navbar")),a.router.load({content:n.html(),animatePages:!1!==t}),this.fireEvent("page:show",[this,e])}},renderComments:function(e){var a=t(".page-comments .page-content");if(e){t("#no-comments").length>0&&t("#no-comments").remove();var n=t("#comments-list"),o=[];i.each(e,function(e){var t=['<li class="comment item-content">','<div class="item-inner">','<p class="user-name"><%= item.username %></p>','<p class="comment-date"><%= item.date %></p>',"<% if(item.quote) {%>",'<p class="comment-quote" data-id="<%= item.uid %>"><%= item.quote %></p>',"<% } %>",'<p class="comment-text"><%= item.comment %></p>',"<% if(replys > 0) {%>",'<ul class="list-reply">',"<% _.each(item.replys, function (reply) { %>",'<li class="reply-item">','<p class="user-name"><%= reply.username %></p>','<p class="reply-date"><%= reply.date %></p>','<p class="reply-text"><%= reply.reply %></p>',"</li>","<% }); %>","</ul>","<% } %>","</div>","</li>"].join("");o.push(i.template(t)({android:Framework7.prototype.device.android,item:e,replys:e.replys.length}))}),n.html(o)}else{t(".comment").length>0&&t(".comment").remove();var s='<div id="no-comments" style="text-align: center; margin-top: 35px;">'+this.textNoComments+"</div>";a.append(i.template(s))}},textCollaboration:"Collaboration",textReviewing:"Review","textСomments":"Сomments",textBack:"Back",textReview:"Track Changes",textAcceptAllChanges:"Accept All Changes",textRejectAllChanges:"Reject All Changes",textDisplayMode:"Display Mode",textMarkup:"Markup",textFinal:"Final",textOriginal:"Original",textChange:"Review Change",textEditUsers:"Users",textNoComments:"This document doesn't contain comments"}}(),Common.Views.Collaboration||{}))}),void 0===Common)var Common={};if(Common.Controllers=Common.Controllers||{},define("common/mobile/lib/controller/Collaboration",["core","jquery","underscore","backbone","common/mobile/lib/view/Collaboration"],function(e,t,i,a){"use strict";Common.Controllers.Collaboration=a.Controller.extend(i.extend(function(){var e,a,n,o,s=[],r=window.DE?"DE":window.PE?"PE":"SSE",l="markup",c=[],d=[];return{models:[],collections:[],views:["Common.Views.Collaboration"],initialize:function(){var e=this;e.addListeners({"Common.Views.Collaboration":{"page:show":e.onPageShow}}),Common.NotificationCenter.on("comments:filterchange",i.bind(this.onFilterChange,this))},setApi:function(e){this.api=e,this.api.asc_registerCallback("asc_onAuthParticipantsChanged",i.bind(this.onChangeEditUsers,this)),this.api.asc_registerCallback("asc_onParticipantsChanged",i.bind(this.onChangeEditUsers,this)),this.api.asc_registerCallback("asc_onAddComment",i.bind(this.onApiAddComment,this)),this.api.asc_registerCallback("asc_onAddComments",i.bind(this.onApiAddComments,this)),this.api.asc_registerCallback("asc_onChangeCommentData",i.bind(this.onApiChangeCommentData,this)),this.api.asc_registerCallback("asc_onRemoveComment",i.bind(this.onApiRemoveComment,this)),"DE"===r&&this.api.asc_registerCallback("asc_onShowRevisionsChange",i.bind(this.changeReview,this))},onLaunch:function(){this.createView("Common.Views.Collaboration").render()},setMode:function(e){return this.appConfig=e,a=e.user.id,"DE"===r&&(o=e.fileKey),this},showModal:function(){var a,n=this,o=(Framework7.prototype.device.android,window.DE?DE:window.PE?PE:SSE),s=o.getController("Editor").getView("Editor").f7View;if(uiApp.closeModal(),Common.SharedSettings.get("phone")?(a=$$(uiApp.pickerModal('<div class="picker-modal settings container-collaboration"><div class="view collaboration-root-view navbar-through">'+this.getView("Common.Views.Collaboration").rootLayout()+"</div></div>")).on("opened",function(){i.isFunction(n.api.asc_OnShowContextMenu)&&n.api.asc_OnShowContextMenu()}).on("close",function(e){s.showNavbar()}).on("closed",function(){i.isFunction(n.api.asc_OnHideContextMenu)&&n.api.asc_OnHideContextMenu()}),s.hideNavbar()):a=uiApp.popover('<div class="popover settings container-collaboration"><div class="popover-angle"></div><div class="popover-inner"><div class="content-block"><div class="view popover-view collaboration-root-view navbar-through">'+this.getView("Common.Views.Collaboration").rootLayout()+"</div></div></div></div>",$$("#toolbar-collaboration")),!0===Framework7.prototype.device.android&&($$(".view.collaboration-root-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.collaboration-root-view .navbar").prependTo(".view.collaboration-root-view > .pages > .page")),e=uiApp.addView(".collaboration-root-view",{dynamicNavbar:!0,domCache:!0}),!Common.SharedSettings.get("phone")){this.picker=$$(a);var r=t(".modal-overlay");$$(this.picker).on("opened",function(){r.on("removeClass",function(){r.hasClass("modal-overlay-visible")||r.addClass("modal-overlay-visible")})}).on("close",function(){r.off("removeClass"),r.removeClass("modal-overlay-visible")})}Common.NotificationCenter.trigger("collaborationcontainer:show"),this.onPageShow(this.getView("Common.Views.Collaboration")),o.getController("Toolbar").getView("Toolbar").hideSearch()},rootView:function(){return e},onPageShow:function(e,i){var a=this;"#reviewing-settings-view"==i?(a.initReviewingSettingsView(),Common.Utils.addScrollIfNeed(".page[data-page=reviewing-settings-view]",".page[data-page=reviewing-settings-view] .page-content")):"#display-mode-view"==i?(a.initDisplayMode(),Common.Utils.addScrollIfNeed(".page[data-page=display-mode-view]",".page[data-page=display-mode-view] .page-content")):"#change-view"==i?(a.initChange(),Common.Utils.addScrollIfNeed(".page[data-page=change-view]",".page[data-page=change-view] .page-content")):"#edit-users-view"==i?(a.initEditUsers(),Common.Utils.addScrollIfNeed(".page[data-page=edit-users-view]",".page[data-page=edit-users-view] .page-content")):"#comments-view"==i?(a.initComments(),Common.Utils.addScrollIfNeed(".page[data-page=comments-view]",".page[data-page=comments-view] .page-content")):"DE"!==r||this.appConfig.canReview||n||t("#reviewing-settings").hide()},onChangeEditUsers:function(e){s=e},initEditUsers:function(){var e=[];i.each(s,function(t){var i=t.asc_getUserName().split(" "),n=i[0].substring(0,1).toUpperCase();if(i.length>1&&(n+=i[i.length-1].substring(0,1).toUpperCase()),!t.asc_getView()){var o={color:t.asc_getColor(),id:t.asc_getId(),idOriginal:t.asc_getIdOriginal(),name:t.asc_getUserName(),view:t.asc_getView(),initial:n};t.asc_getIdOriginal()==a?e.unshift(o):e.push(o)}});var n=i.chain(e).groupBy("idOriginal").value(),o=i.template(["<%  _.each(users, function (user) { %>",'<li id="<%= user[0].id %>" class="<% if (user[0].view) {%> viewmode <% } %> item-content"><div class="user-name item-inner"><div class="color" style="background-color: <%= user[0].color %>;"><%= user[0].initial %></div><label><%= user[0].name %></label><% if (user.length>1) { %><label class="length"> (<%= user.length %>)</label><% } %></div></li>',"<% }); %>"].join("")),r=i.template('<div class="item-content"><div class="item-inner">'+this.textEditUser+"</div></div><ul>"+o({users:n})+"</ul>");t("#user-list").html(r())},initReviewingSettingsView:function(){var e=this;t("#settings-review input:checkbox").attr("checked",this.appConfig.isReviewOnly||Common.localStorage.getBool("de-mobile-track-changes-"+(o||""))),t("#settings-review input:checkbox").single("change",i.bind(e.onTrackChanges,e)),t("#settings-accept-all").single("click",i.bind(e.onAcceptAllClick,e)),t("#settings-reject-all").single("click",i.bind(e.onRejectAllClick,e)),this.appConfig.isReviewOnly||"final"==l||"original"==l?(t("#settings-accept-all").addClass("disabled"),t("#settings-reject-all").addClass("disabled"),t("#settings-review").addClass("disabled")):(t("#settings-accept-all").removeClass("disabled"),t("#settings-reject-all").removeClass("disabled"),t("#settings-review").removeClass("disabled")),this.appConfig.canReview||(t("#settings-review").hide(),t("#settings-accept-all").hide(),t("#settings-reject-all").hide())},onTrackChanges:function(e){var i=t(e.currentTarget),a=i.is(":checked");if(this.appConfig.isReviewOnly)i.attr("checked",!0);else{this.api.asc_SetTrackRevisions(a);var n=window.DE?"de":window.PE?"pe":"sse";Common.localStorage.setItem(n+"-mobile-track-changes-"+(o||""),a?1:0)}},onAcceptAllClick:function(){this.api&&this.api.asc_AcceptAllChanges()},onRejectAllClick:function(){this.api&&this.api.asc_RejectAllChanges()},initDisplayMode:function(){var e=this;t("input:radio").single("change",i.bind(e.onReviewViewClick,e));var a=l;null==a||"markup"===a?t('input[value="markup"]').attr("checked",!0):"final"===a?t('input[value="final"]').attr("checked",!0):"original"===a&&t('input[value="original"]').attr("checked",!0)},getDisplayMode:function(){return l},setCanViewReview:function(e){n=e},onReviewViewClick:function(e){var i=t(e.currentTarget).val();this.turnDisplayMode(i),!this.appConfig.canReview&&Common.localStorage.setItem("de-view-review-mode",i)},turnDisplayMode:function(e,t){l=e.toLocaleLowerCase(),this.api&&("final"===l?this.api.asc_BeginViewModeInReview(!0):"original"===l?this.api.asc_BeginViewModeInReview(!1):this.api.asc_EndViewModeInReview()),!t&&this.initReviewingSettingsView(),DE.getController("Toolbar").setDisplayMode(l)},initChange:function(){var e=!1;0==c.length&&this.api.asc_GetNextRevisionsChange(),0==c.length?t("#current-change").css("display","none"):(t("#current-change #date-change").html(c[0].date),t("#current-change #user-name").html(c[0].user),t("#current-change #text-change").html(c[0].changetext),e=c[0].goto),e?t("#btn-goto-change").show():t("#btn-goto-change").hide(),t("#btn-prev-change").single("click",i.bind(this.onPrevChange,this)),t("#btn-next-change").single("click",i.bind(this.onNextChange,this)),t("#btn-accept-change").single("click",i.bind(this.onAcceptCurrentChange,this)),t("#btn-reject-change").single("click",i.bind(this.onRejectCurrentChange,this)),t("#btn-goto-change").single("click",i.bind(this.onGotoNextChange,this)),this.appConfig.isReviewOnly&&(t("#btn-accept-change").remove(),t("#btn-reject-change").remove(),0!=c.length&&c[0].editable&&(t(".accept-reject").html('<div id="btn-delete-change"><i class="icon icon-delete-change"></i></div>'),t("#btn-delete-change").single("click",i.bind(this.onDeleteChange,this)))),"final"!=l&&"original"!=l||(t("#btn-accept-change").addClass("disabled"),t("#btn-reject-change").addClass("disabled"),t("#btn-prev-change").addClass("disabled"),t("#btn-next-change").addClass("disabled")),this.appConfig.canReview||(t("#btn-accept-change").addClass("disabled"),t("#btn-reject-change").addClass("disabled"))},onPrevChange:function(){this.api.asc_GetPrevRevisionsChange()},onNextChange:function(){this.api.asc_GetNextRevisionsChange()},onAcceptCurrentChange:function(){var e=this;this.api&&(this.api.asc_AcceptChanges(d[0]),setTimeout(function(){e.api.asc_GetNextRevisionsChange()},10))},onRejectCurrentChange:function(){var e=this;this.api&&(this.api.asc_RejectChanges(d[0]),setTimeout(function(){e.api.asc_GetNextRevisionsChange()},10))},updateInfoChange:function(){t("[data-page=change-view]").length>0&&(0==c.length?(t("#current-change #date-change").empty(),t("#current-change #user-name").empty(),t("#current-change #text-change").empty(),t("#current-change").hide(),t("#btn-goto-change").hide(),t("#btn-delete-change").hide()):(t("#current-change").show(),this.initChange()))},changeReview:function(e){if(e&&e.length>0){var t=this,n=[];i.each(e,function(e){var o="",s="",r=e.get_Value(),l=e.get_MoveType();switch(e.get_Type()){case Asc.c_oAscRevisionsChangeType.TextAdd:o=l==Asc.c_oAscRevisionsMove.NoMove?t.textInserted:t.textParaMoveTo,"object"==typeof r?i.each(r,function(e){if("string"==typeof e)o+=" "+Common.Utils.String.htmlEncode(e);else switch(e){case 0:o+=" &lt;"+t.textImage+"&gt;";break;case 1:o+=" &lt;"+t.textShape+"&gt;";break;case 2:o+=" &lt;"+t.textChart+"&gt;";break;case 3:o+=" &lt;"+t.textEquation+"&gt;"}}):"string"==typeof r&&(o+=" "+Common.Utils.String.htmlEncode(r));break;case Asc.c_oAscRevisionsChangeType.TextRem:o=l==Asc.c_oAscRevisionsMove.NoMove?t.textDeleted:e.is_MovedDown()?t.textParaMoveFromDown:t.textParaMoveFromUp,"object"==typeof r?i.each(r,function(e){if("string"==typeof e)o+=" "+Common.Utils.String.htmlEncode(e);else switch(e){case 0:o+=" &lt;"+t.textImage+"&gt;";break;case 1:o+=" &lt;"+t.textShape+"&gt;";break;case 2:o+=" &lt;"+t.textChart+"&gt;";break;case 3:o+=" &lt;"+t.textEquation+"&gt;"}}):"string"==typeof r&&(o+=" "+Common.Utils.String.htmlEncode(r));break;case Asc.c_oAscRevisionsChangeType.ParaAdd:o=t.textParaInserted;break;case Asc.c_oAscRevisionsChangeType.ParaRem:o=t.textParaDeleted;break;case Asc.c_oAscRevisionsChangeType.TextPr:o="<b>"+t.textFormatted,void 0!==r.Get_Bold()&&(s+=(r.Get_Bold()?"":t.textNot)+t.textBold+", "),void 0!==r.Get_Italic()&&(s+=(r.Get_Italic()?"":t.textNot)+t.textItalic+", "),void 0!==r.Get_Underline()&&(s+=(r.Get_Underline()?"":t.textNot)+t.textUnderline+", "),void 0!==r.Get_Strikeout()&&(s+=(r.Get_Strikeout()?"":t.textNot)+t.textStrikeout+", "),void 0!==r.Get_DStrikeout()&&(s+=(r.Get_DStrikeout()?"":t.textNot)+t.textDStrikeout+", "),void 0!==r.Get_Caps()&&(s+=(r.Get_Caps()?"":t.textNot)+t.textCaps+", "),void 0!==r.Get_SmallCaps()&&(s+=(r.Get_SmallCaps()?"":t.textNot)+t.textSmallCaps+", "),void 0!==r.Get_VertAlign()&&(s+=(1==r.Get_VertAlign()?t.textSuperScript:2==r.Get_VertAlign()?t.textSubScript:t.textBaseline)+", "),void 0!==r.Get_Color()&&(s+=t.textColor+", "),void 0!==r.Get_Highlight()&&(s+=t.textHighlight+", "),void 0!==r.Get_Shd()&&(s+=t.textShd+", "),void 0!==r.Get_FontFamily()&&(s+=r.Get_FontFamily()+", "),void 0!==r.Get_FontSize()&&(s+=r.Get_FontSize()+", "),void 0!==r.Get_Spacing()&&(s+=t.textSpacing+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_Spacing()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),void 0!==r.Get_Position()&&(s+=t.textPosition+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_Position()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),void 0!==r.Get_Lang()&&(s+=Common.util.LanguageInfo.getLocalLanguageName(r.Get_Lang())[1]+", "),i.isEmpty(s)||(o+=": ",s=s.substring(0,s.length-2)),o+="</b>",o+=s;break;case Asc.c_oAscRevisionsChangeType.ParaPr:if(o="<b>"+t.textParaFormatted,r.Get_ContextualSpacing()&&(s+=(r.Get_ContextualSpacing()?t.textContextual:t.textNoContextual)+", "),void 0!==r.Get_IndLeft()&&(s+=t.textIndentLeft+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_IndLeft()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),void 0!==r.Get_IndRight()&&(s+=t.textIndentRight+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_IndRight()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),void 0!==r.Get_IndFirstLine()&&(s+=t.textFirstLine+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_IndFirstLine()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),void 0!==r.Get_Jc())switch(r.Get_Jc()){case 0:s+=t.textRight+", ";break;case 1:s+=t.textLeft+", ";break;case 2:s+=t.textCenter+", ";break;case 3:s+=t.textJustify+", "}if(void 0!==r.Get_KeepLines()&&(s+=(r.Get_KeepLines()?t.textKeepLines:t.textNoKeepLines)+", "),r.Get_KeepNext()&&(s+=(r.Get_KeepNext()?t.textKeepNext:t.textNoKeepNext)+", "),r.Get_PageBreakBefore()&&(s+=(r.Get_PageBreakBefore()?t.textBreakBefore:t.textNoBreakBefore)+", "),void 0!==r.Get_SpacingLineRule()&&void 0!==r.Get_SpacingLine()&&(s+=t.textLineSpacing,s+=(r.Get_SpacingLineRule()==c_paragraphLinerule.LINERULE_LEAST?t.textAtLeast:r.Get_SpacingLineRule()==c_paragraphLinerule.LINERULE_AUTO?t.textMultiple:t.textExact)+" ",s+=(r.Get_SpacingLineRule()==c_paragraphLinerule.LINERULE_AUTO?r.Get_SpacingLine():Common.Utils.Metric.fnRecalcFromMM(r.Get_SpacingLine()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName())+", "),r.Get_SpacingBeforeAutoSpacing()?s+=t.textSpacingBefore+" "+t.textAuto+", ":void 0!==r.Get_SpacingBefore()&&(s+=t.textSpacingBefore+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_SpacingBefore()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),r.Get_SpacingAfterAutoSpacing()?s+=t.textSpacingAfter+" "+t.textAuto+", ":void 0!==r.Get_SpacingAfter()&&(s+=t.textSpacingAfter+" "+Common.Utils.Metric.fnRecalcFromMM(r.Get_SpacingAfter()).toFixed(2)+" "+Common.Utils.Metric.getCurrentMetricName()+", "),r.Get_WidowControl()&&(s+=(r.Get_WidowControl()?t.textWidow:t.textNoWidow)+", "),void 0!==r.Get_Tabs()&&(s+=s+=t.textTabs+", "),void 0!==r.Get_NumPr()&&(s+=s+=t.textNum+", "),void 0!==r.Get_PStyle()){var c=t.api.asc_GetStyleNameById(r.Get_PStyle());i.isEmpty(c)||(s+=c+", ")}i.isEmpty(s)||(o+=": ",s=s.substring(0,s.length-2)),o+="</b>",o+=s;break;case Asc.c_oAscRevisionsChangeType.TablePr:o=t.textTableChanged;break;case Asc.c_oAscRevisionsChangeType.RowsAdd:o=t.textTableRowsAdd;break;case Asc.c_oAscRevisionsChangeType.RowsRem:o=t.textTableRowsDel}var d=""==e.get_DateTime()?new Date:new Date(e.get_DateTime()),p=e.get_UserName(),u=e.get_MoveType()==Asc.c_oAscRevisionsMove.MoveTo||e.get_MoveType()==Asc.c_oAscRevisionsMove.MoveFrom;d=t.dateToLocaleTimeString(d);var m=e.get_UserId()==a;n.push({date:d,user:p,changetext:o,goto:u,editable:m})}),c=n,d=e}else c=[],d=[];this.updateInfoChange()},dateToLocaleTimeString:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+function(e){var t=e.getHours(),i=e.getMinutes(),a=t>=12?"pm":"am";return t%=12,t=t||12,i=i<10?"0"+i:i,t+":"+i+" "+a}(e)},onDeleteChange:function(){this.api&&this.api.asc_RejectChanges(d[0])},onGotoNextChange:function(){this.api&&this.api.asc_FollowRevisionMove(d[0])},groupCollectionComments:[],collectionComments:[],groupCollectionFilter:[],filter:[],initComments:function(){this.getView("Common.Views.Collaboration").renderComments(0!==this.groupCollectionFilter.length?this.groupCollectionFilter:0!==this.collectionComments.length&&this.collectionComments),t(".comment-quote").single("click",i.bind(this.onSelectComment,this))},readSDKReplies:function(e){var t=0,a=[],n=null,o=e.asc_getRepliesCount();if(o)for(t=0;t<o;++t){n=e.asc_getReply(t).asc_getOnlyOfficeTime()?new Date(this.stringOOToLocalDate(e.asc_getReply(t).asc_getOnlyOfficeTime())):""==e.asc_getReply(t).asc_getTime()?new Date:new Date(this.stringUtcToLocalDate(e.asc_getReply(t).asc_getTime()));var r=i.findWhere(s,{idOriginal:e.asc_getReply(t).asc_getUserId()});a.push({userid:e.asc_getReply(t).asc_getUserId(),username:e.asc_getReply(t).asc_getUserName(),usercolor:r?r.asc_getColor():null,date:this.dateToLocaleTimeString(n),reply:e.asc_getReply(t).asc_getText(),time:n.getTime()})}return a},
readSDKComment:function(e,t){var a=t.asc_getOnlyOfficeTime()?new Date(this.stringOOToLocalDate(t.asc_getOnlyOfficeTime())):""==t.asc_getTime()?new Date:new Date(this.stringUtcToLocalDate(t.asc_getTime())),n=i.findWhere(s,{idOriginal:t.asc_getUserId()}),o=e.substr(0,e.lastIndexOf("_")+1).match(/^(doc|sheet[0-9_]+)_/),r={uid:e,userid:t.asc_getUserId(),username:t.asc_getUserName(),usercolor:n?n.asc_getColor():null,date:this.dateToLocaleTimeString(a),quote:t.asc_getQuoteText(),comment:t.asc_getText(),resolved:t.asc_getSolved(),unattached:!i.isUndefined(t.asc_getDocumentFlag)&&t.asc_getDocumentFlag(),time:a.getTime(),replys:[],groupName:o&&o.length>1?o[1]:null};if(r){var l=this.readSDKReplies(t);l.length&&(r.replys=l)}return r},onApiChangeCommentData:function(e,a){var n=this,o=0,r=null,l=null,c=0,d=null,p=i.findWhere(n.collectionComments,{uid:e})||this.findCommentInGroup(e);if(p){r=a.asc_getOnlyOfficeTime()?new Date(this.stringOOToLocalDate(a.asc_getOnlyOfficeTime())):""==a.asc_getTime()?new Date:new Date(this.stringUtcToLocalDate(a.asc_getTime()));var u=i.findWhere(s,{idOriginal:a.asc_getUserId()});for(p.comment=a.asc_getText(),p.userid=a.asc_getUserId(),p.username=a.asc_getUserName(),p.usercolor=u?u.asc_getColor():null,p.resolved=a.asc_getSolved(),p.quote=a.asc_getQuoteText(),p.time=r.getTime(),p.date=n.dateToLocaleTimeString(r),l=i.clone(p.replys),l.length=0,c=a.asc_getRepliesCount(),o=0;o<c;++o)d=a.asc_getReply(o).asc_getOnlyOfficeTime()?new Date(this.stringOOToLocalDate(a.asc_getReply(o).asc_getOnlyOfficeTime())):""==a.asc_getReply(o).asc_getTime()?new Date:new Date(this.stringUtcToLocalDate(a.asc_getReply(o).asc_getTime())),u=i.findWhere(s,{idOriginal:a.asc_getReply(o).asc_getUserId()}),l.push({userid:a.asc_getReply(o).asc_getUserId(),username:a.asc_getReply(o).asc_getUserName(),usercolor:u?u.asc_getColor():null,date:n.dateToLocaleTimeString(d),reply:a.asc_getReply(o).asc_getText(),time:d.getTime()});p.replys=l,t(".page-comments").length>0&&this.initComments()}},onApiAddComment:function(e,i){var a=this.readSDKComment(e,i);a&&(a.groupName?this.addCommentToGroupCollection(a):this.collectionComments.push(a)),t(".page-comments").length>0&&this.initComments()},onApiAddComments:function(e){for(var i=0;i<e.length;++i){var a=this.readSDKComment(e[i].asc_getId(),e[i]);a.groupName?this.addCommentToGroupCollection(a):this.collectionComments.push(a)}t(".page-comments").length>0&&this.initComments()},stringOOToLocalDate:function(e){return"string"==typeof e?parseInt(e):0},stringUtcToLocalDate:function(e){return"string"==typeof e?parseInt(e)+this.timeZoneOffsetInMs:0},addCommentToGroupCollection:function(e){var t=e.groupName;this.groupCollectionComments[t]||(this.groupCollectionComments[t]=[]),this.groupCollectionComments[t].push(e),-1!=this.filter.indexOf(t)&&this.groupCollectionFilter.push(e)},findCommentInGroup:function(e){for(var t in this.groupCollectionComments){var a=this.groupCollectionComments[t],n=i.findWhere(a,{uid:e});if(n)return n}},onApiRemoveComment:function(e){function a(e,t){if(e instanceof Array){var i=e.indexOf(t);-1!=i&&e.splice(i,1)}}if(this.groupCollectionComments)for(var n in this.groupCollectionComments){var o=this.groupCollectionComments[n],s=i.findWhere(o,{uid:e});s&&(a(this.groupCollectionComments[n],s),-1!=this.filter.indexOf(n)&&a(this.groupCollectionFilter,s))}if(this.collectionComments.length>0){var s=i.findWhere(this.collectionComments,{uid:e});s&&a(this.collectionComments,s)}t(".page-comments").length>0&&this.initComments()},onFilterChange:function(e){if(e){var t=this,i=[];this.filter=e,e.forEach(function(e){t.groupCollectionComments[e]||(t.groupCollectionComments[e]=[]),i=i.concat(t.groupCollectionComments[e])}),this.groupCollectionFilter=i}},onSelectComment:function(e){var i=t(e.currentTarget).data("id");this.api.asc_selectComment(i)},textInserted:"<b>Inserted:</b>",textDeleted:"<b>Deleted:</b>",textParaInserted:"<b>Paragraph Inserted</b> ",textParaDeleted:"<b>Paragraph Deleted</b> ",textFormatted:"Formatted",textParaFormatted:"<b>Paragraph Formatted</b>",textNot:"Not ",textBold:"Bold",textItalic:"Italic",textStrikeout:"Strikeout",textUnderline:"Underline",textColor:"Font color",textBaseline:"Baseline",textSuperScript:"Superscript",textSubScript:"Subscript",textHighlight:"Highlight color",textSpacing:"Spacing",textDStrikeout:"Double strikeout",textCaps:"All caps",textSmallCaps:"Small caps",textPosition:"Position",textShd:"Background color",textContextual:"Don't add interval between paragraphs of the same style",textNoContextual:"Add interval between paragraphs of the same style",textIndentLeft:"Indent left",textIndentRight:"Indent right",textFirstLine:"First line",textRight:"Align right",textLeft:"Align left",textCenter:"Align center",textJustify:"Align justify",textBreakBefore:"Page break before",textKeepNext:"Keep with next",textKeepLines:"Keep lines together",textNoBreakBefore:"No page break before",textNoKeepNext:"Don't keep with next",textNoKeepLines:"Don't keep lines together",textLineSpacing:"Line Spacing: ",textMultiple:"multiple",textAtLeast:"at least",textExact:"exactly",textSpacingBefore:"Spacing before",textSpacingAfter:"Spacing after",textAuto:"auto",textWidow:"Widow control",textNoWidow:"No widow control",textTabs:"Change tabs",textNum:"Change numbering",textEquation:"Equation",textImage:"Image",textChart:"Chart",textShape:"Shape",textTableChanged:"<b>Table Settings Changed</b>",textTableRowsAdd:"<b>Table Rows Added<b/>",textTableRowsDel:"<b>Table Rows Deleted<b/>",textParaMoveTo:"<b>Moved:</b>",textParaMoveFromUp:"<b>Moved Up:</b>",textParaMoveFromDown:"<b>Moved Down:</b>",textEditUser:"Document is currently being edited by several users."}}(),Common.Controllers.Collaboration||{}))}),define("documenteditor/mobile/app/controller/Settings",["core","jquery","underscore","backbone","documenteditor/mobile/app/view/Settings","common/mobile/lib/controller/Collaboration"],function(e,t,i,a){"use strict";DE.Controllers.Settings=a.Controller.extend(i.extend(function(){var e,a,n,o,s,r,l,c,d=!1,p=0,u=[0,0],m=Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.cm),h=[{caption:"US Letter",subtitle:Common.Utils.String.format("21,59{0} x 27,94{0}",m),value:[215.9,279.4]},{caption:"US Legal",subtitle:Common.Utils.String.format("21,59{0} x 35,56{0}",m),value:[215.9,355.6]},{caption:"A4",subtitle:Common.Utils.String.format("21{0} x 29,7{0}",m),value:[210,297]},{caption:"A5",subtitle:Common.Utils.String.format("14,8{0} x 21{0}",m),value:[148,210]},{caption:"B5",subtitle:Common.Utils.String.format("17,6{0} x 25{0}",m),value:[176,250]},{caption:"Envelope #10",subtitle:Common.Utils.String.format("10,48{0} x 24,13{0}",m),value:[104.8,241.3]},{caption:"Envelope DL",subtitle:Common.Utils.String.format("11{0} x 22{0}",m),value:[110,220]},{caption:"Tabloid",subtitle:Common.Utils.String.format("27,94{0} x 43,18{0}",m),value:[279.4,431.8]},{caption:"A3",subtitle:Common.Utils.String.format("29,7{0} x 42{0}",m),value:[297,420]},{caption:"Tabloid Oversize",subtitle:Common.Utils.String.format("30,48{0} x 45,71{0}",m),value:[304.8,457.1]},{caption:"ROC 16K",subtitle:Common.Utils.String.format("19,68{0} x 27,3{0}",m),value:[196.8,273]},{caption:"Envelope Choukei 3",subtitle:Common.Utils.String.format("11,99{0} x 23,49{0}",m),value:[119.9,234.9]},{caption:"Super B/A3",subtitle:Common.Utils.String.format("33,02{0} x 48,25{0}",m),value:[330.2,482.5]},{caption:"A0",subtitle:Common.Utils.String.format("84,1{0} x 118,9{0}",m),value:[841,1189]},{caption:"A1",subtitle:Common.Utils.String.format("59,4{0} x 84,1{0}",m),value:[594,841]},{caption:"A2",subtitle:Common.Utils.String.format("42{0} x 59,4{0}",m),value:[420,594]},{caption:"A6",subtitle:Common.Utils.String.format("10,5{0} x 14,8{0}",m),value:[105,148]}],g=!1,v=!1,f=Common.Utils.Metric.getCurrentMetricName();return{models:[],collections:[],views:["Settings"],initialize:function(){var e=this;Common.SharedSettings.set("readerMode",!1),Common.NotificationCenter.on("settingscontainer:show",i.bind(this.initEvents,this)),e.maxMarginsW=e.maxMarginsH=0,e.localSectionProps=null,e.addListeners({Settings:{"page:show":e.onPageShow}}),uiApp.onPageAfterBack("margin-view",function(t){e.applyPageMarginsIfNeed()})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onGetDocInfoStart",i.bind(t.onApiGetDocInfoStart,t)),t.api.asc_registerCallback("asc_onGetDocInfoStop",i.bind(t.onApiGetDocInfoEnd,t)),t.api.asc_registerCallback("asc_onDocInfo",i.bind(t.onApiDocInfo,t)),t.api.asc_registerCallback("asc_onGetDocInfoEnd",i.bind(t.onApiGetDocInfoEnd,t)),t.api.asc_registerCallback("asc_onDocumentName",i.bind(t.onApiDocumentName,t)),t.api.asc_registerCallback("asc_onDocSize",i.bind(t.onApiPageSize,t)),t.api.asc_registerCallback("asc_onPageOrient",i.bind(t.onApiPageOrient,t)),t.api.asc_registerCallback("asc_onSendThemeColorSchemes",i.bind(t.onSendThemeColorSchemes,t))},onLaunch:function(){this.createView("Settings").render()},setMode:function(e){this.getView("Settings").setMode(e),e.canBranding&&(s=e.customization),g=e.canReview,v=e.isReviewOnly,r=e.fileKey,c=e.isEdit},initEvents:function(){},rootView:function(){return e},showModal:function(){uiApp.closeModal(),o=Common.SharedSettings.get("phone")?uiApp.popup('<div class="popup settings container-settings"><div class="content-block"><div class="view settings-root-view navbar-through">'+this.getView("Settings").rootLayout()+"</div></div></div>"):uiApp.popover('<div class="popover settings container-settings"><div class="popover-angle"></div><div class="popover-inner"><div class="content-block"><div class="view popover-view settings-root-view navbar-through">'+this.getView("Settings").rootLayout()+"</div></div></div></div>",$$("#toolbar-settings")),!0===Framework7.prototype.device.android&&($$(".view.settings-root-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.settings-root-view .navbar").prependTo(".view.settings-root-view > .pages > .page")),e=uiApp.addView(".settings-root-view",{dynamicNavbar:!0,domCache:!0}),Common.NotificationCenter.trigger("settingscontainer:show"),this.onPageShow(this.getView("Settings"))},hideModal:function(){o&&uiApp.closeModal(o)},onPageShow:function(e,a){var n=this;if("#settings-document-view"==a)n.initPageDocumentSettings(),Common.Utils.addScrollIfNeed(".page[data-page=settings-document-view]",".page[data-page=settings-document-view] .page-content");else if("#settings-document-formats-view"==a)n.getView("Settings").renderPageSizes(h,p),t(".page[data-page=settings-document-formats-view] input:radio[name=document-format]").single("change",i.bind(n.onFormatChange,n)),Common.Utils.addScrollIfNeed(".page[data-page=settings-document-formats-view]",".page[data-page=settings-document-formats-view] .page-content");else if("#settings-download-view"==a)t(o).find(".formats a").single("click",i.bind(n.onSaveFormat,n)),Common.Utils.addScrollIfNeed(".page[data-page=settings-download-view]",".page[data-page=settings-download-view] .page-content");else if("#settings-info-view"==a)n.initPageInfo(),Common.Utils.addScrollIfNeed(".page[data-page=settings-info-view]",".page[data-page=settings-info-view] .page-content");else if("#settings-about-view"==a)n.setLicInfo(s),Common.Utils.addScrollIfNeed(".page[data-page=settings-about-view]",".page[data-page=settings-about-view] .page-content");else if("#settings-advanced-view"==a){n.initPageAdvancedSettings(),t("#settings-spellcheck input:checkbox").attr("checked",Common.localStorage.getBool("de-mobile-spellcheck",!1)),t("#settings-spellcheck input:checkbox").single("change",i.bind(n.onSpellcheck,n)),t("#settings-no-characters input:checkbox").attr("checked","true"==Common.localStorage.getItem("de-mobile-no-characters")),t("#settings-no-characters input:checkbox").single("change",i.bind(n.onNoCharacters,n)),t("#settings-hidden-borders input:checkbox").attr("checked","true"==Common.localStorage.getItem("de-mobile-hidden-borders")),t("#settings-hidden-borders input:checkbox").single("change",i.bind(n.onShowTableEmptyLine,n)),t("#settings-orthography").single("click",i.bind(n.onOrthographyCheck,n));var r=Common.localStorage.getBool("de-settings-livecomment",!0);t("#settings-display-comments input:checkbox").attr("checked",r),t("#settings-display-comments input:checkbox").single("change",i.bind(n.onChangeDisplayComments,n));var l=Common.localStorage.getBool("de-settings-resolvedcomment",!0);r||(t("#settings-display-resolved").addClass("disabled"),l=!1),t("#settings-display-resolved input:checkbox").attr("checked",l),t("#settings-display-resolved input:checkbox").single("change",i.bind(n.onChangeDisplayResolved,n)),Common.Utils.addScrollIfNeed(".page[data-page=settings-advanced-view]",".page[data-page=settings-advanced-view] .page-content")}else if("#color-schemes-view"==a)n.initPageColorSchemes(),Common.Utils.addScrollIfNeed(".page[data-page=color-schemes-view]",".page[data-page=color-schemes-view] .page-content");else if("#margins-view"==a)n.initPageMargin(),Common.Utils.addScrollIfNeed(".page[data-page=margin-view]",".page[data-page=margin-view] .page-content");else{t("#settings-readermode input:checkbox").attr("checked",Common.SharedSettings.get("readerMode")),t("#settings-search").single("click",i.bind(n.onSearch,n)),t("#settings-readermode input:checkbox").single("change",i.bind(n.onReaderMode,n)),t("#settings-help").single("click",i.bind(n.onShowHelp,n)),t("#settings-download").single("click",i.bind(n.onDownloadOrigin,n)),t("#settings-print").single("click",i.bind(n.onPrint,n)),t("#settings-collaboration").single("click",i.bind(n.clickCollaboration,n));var c=DE.getController("Common.Controllers.Collaboration").getDisplayMode();"final"!=c&&"original"!=c||t("#settings-document").addClass("disabled");var d=DE.getController("Main").returnUserCount();d>0&&t("#settings-collaboration").show()}},onChangeDisplayComments:function(e){var i=t(e.currentTarget).is(":checked");if(i){var a=Common.localStorage.getBool("de-settings-resolvedcomment");this.api.asc_showComments(a),t("#settings-display-resolved").removeClass("disabled")}else this.api.asc_hideComments(),t("#settings-display-resolved input").prop("checked",!1),Common.localStorage.setBool("de-settings-resolvedcomment",!1),t("#settings-display-resolved").addClass("disabled");Common.localStorage.setBool("de-settings-livecomment",i)},onChangeDisplayResolved:function(e){if(Common.localStorage.getBool("de-settings-livecomment")){var i=t(e.currentTarget).is(":checked");this.api&&this.api.asc_showComments(i),Common.localStorage.setBool("de-settings-resolvedcomment",i)}},clickCollaboration:function(){DE.getController("Common.Controllers.Collaboration").showModal()},onNoCharacters:function(e){var i=this,a=t(e.currentTarget),n=a.is(":checked");Common.localStorage.setItem("de-mobile-no-characters",n),i.api.put_ShowParaMarks(n)},onShowTableEmptyLine:function(e){var i=this,a=t(e.currentTarget),n=a.is(":checked");Common.localStorage.setItem("de-mobile-hidden-borders",n),i.api.put_ShowTableEmptyLine(n)},initPageMargin:function(){var e=this;if(f=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),e.localSectionProps=e.api.asc_GetSectionProps(),e.localSectionProps){e.maxMarginsH=e.localSectionProps.get_H()-26,e.maxMarginsW=e.localSectionProps.get_W()-127;var a=parseFloat(Common.Utils.Metric.fnRecalcFromMM(e.localSectionProps.get_TopMargin()).toFixed(2)),n=parseFloat(Common.Utils.Metric.fnRecalcFromMM(e.localSectionProps.get_BottomMargin()).toFixed(2)),o=parseFloat(Common.Utils.Metric.fnRecalcFromMM(e.localSectionProps.get_LeftMargin()).toFixed(2)),s=parseFloat(Common.Utils.Metric.fnRecalcFromMM(e.localSectionProps.get_RightMargin()).toFixed(2));t("#document-margin-top .item-after label").text(a+" "+f),t("#document-margin-bottom .item-after label").text(n+" "+f),t("#document-margin-left .item-after label").text(o+" "+f),t("#document-margin-right .item-after label").text(s+" "+f)}i.each(["top","left","bottom","right"],function(a){t(Common.Utils.String.format("#document-margin-{0} .button",a)).single("click",i.bind(e.onPageMarginsChange,e,a))})},initPageColorSchemes:function(){t("#color-schemes-content").html(l),t(".color-schemes-menu").on("click",i.bind(this.onColorSchemaClick,this))},onSendThemeColorSchemes:function(e){l="",i.each(e,function(e,t){var i=e.get_colors();l=l+"<a class='color-schemes-menu item-link no-indicator'><input type='hidden' value='"+t+"'><div class='item-content'><div class='item-inner'><span class='color-schema-block'>";for(var a=2;a<7;a++){var n="#"+Common.Utils.ThemeColor.getHexColor(i[a].get_r(),i[a].get_g(),i[a].get_b());l=l+"<span class='color' style='background: "+n+";'></span>"}l=l+"</span><span class='text'>"+e.get_name()+"</span></div></div></a>"},this)},onColorSchemaClick:function(e){if(this.api){var i=t(e.currentTarget).children("input").val();this.api.ChangeColorScheme(i)}},initPageAdvancedSettings:function(){var e=this,a=t(".page[data-page=settings-advanced-view] input:radio[name=unit-of-measurement]");a.single("change",i.bind(e.unitMeasurementChange,e));var n=Common.localStorage.getItem("de-mobile-settings-unit");n=null!==n?parseInt(n):Common.Utils.Metric.getDefaultMetric(),a.val([n]);var o=DE.getController("Common.Controllers.Collaboration").getDisplayMode();"final"!=o&&"original"!=o||(t("#settings-no-characters").addClass("disabled"),t("#settings-hidden-borders").addClass("disabled")),c||t(".page[data-page=settings-advanced-view] .page-content > :not(.display-view)").hide()},initPageDocumentSettings:function(){var e=this,a=t(".page[data-page=settings-document-view] input:radio[name=doc-orientation]"),n=t("#settings-document-format");a.val([d]),a.single("change",i.bind(e.onOrientationChange,e)),n.find(".item-title").text(h[p].caption);var o=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),s=parseFloat(Common.Utils.Metric.fnRecalcFromMM(h[p].value[0]).toFixed(2)),r=parseFloat(Common.Utils.Metric.fnRecalcFromMM(h[p].value[1]).toFixed(2)),l=s+" "+o+" x "+r+" "+o;n.find(".item-subtitle").text(l)},initPageInfo:function(){var e=this;if(e.api){e.api.startGetDocInfo();var i=Common.SharedSettings.get("document")||{},a=i.info||{};i.title?t("#settings-document-title").html(i.title):t(".display-document-title").remove();var n=a.owner||a.author;n?t("#settings-document-owner").html(n):t(".display-owner").remove(),n=a.uploaded||a.created,n?t("#settings-doc-uploaded").html(n):t(".display-uploaded").remove(),a.folder?t("#settings-doc-location").html(a.folder):t(".display-location").remove();var o=this.api?this.api.asc_getAppProps():null;if(o){var s=(o.asc_getApplication()||"")+" "+(o.asc_getAppVersion()||"");s?t("#settings-doc-application").html(s):t(".display-application").remove()}var r=this.api?this.api.asc_getCoreProps():null;if(r){n=r.asc_getTitle(),n?t("#settings-doc-title").html(n):t(".display-title").remove(),n=r.asc_getSubject(),n?t("#settings-doc-subject").html(n):t(".display-subject").remove(),n=r.asc_getDescription(),n?t("#settings-doc-comment").html(n):t(".display-comment").remove(),n=r.asc_getModified(),n?t("#settings-doc-last-mod").html(n.toLocaleString()):t(".display-last-mode").remove(),n=r.asc_getLastModifiedBy(),n?t("#settings-doc-mod-by").html(n):t(".display-mode-by").remove(),n=r.asc_getCreated(),n?t("#settings-doc-date").html(n.toLocaleString()):t(".display-created-date").remove(),n=r.asc_getCreator();var l="";n&&n.split(/\s*[,;]\s*/).forEach(function(e){l=l+"<li class='item-content'><div class='item-inner'><div class='item-title'>"+e+"</div></div></li>"}),l?t("#list-creator").html(l):t(".display-author").remove()}}},setLicInfo:function(e){if(e&&"object"==typeof e&&"object"==typeof e.customer){t(".page[data-page=settings-about-view] .logo").hide(),t("#settings-about-tel").parent().hide(),t("#settings-about-licensor").show();var i=e.customer,a=i.name;if(a&&a.length?t("#settings-about-name").text(a):t("#settings-about-name").hide(),a=i.address,a&&a.length?t("#settings-about-address").text(a):t("#settings-about-address").parent().hide(),(a=i.mail)&&a.length?t("#settings-about-email").attr("href","mailto:"+a).text(a):t("#settings-about-email").parent().hide(),(a=i.www)&&a.length){var n=/^https?:\/{2}/i.test(a)?"":"http://";t("#settings-about-url").attr("href",n+a).text(a)}else t("#settings-about-url").hide();(a=i.info)&&a.length&&t("#settings-about-info").show().text(a),(a=i.logo)&&a.length&&t("#settings-about-logo").show().html('<img src="'+a+'" style="max-width:216px; max-height: 35px;" />')}},applyPageMarginsIfNeed:function(){var e=this,t=e.api.asc_GetSectionProps(),a=i.reduce([t.get_TopMargin(),t.get_LeftMargin(),t.get_RightMargin(),t.get_BottomMargin()],function(e,t){return e+t},0),n=i.reduce([e.localSectionProps.get_TopMargin(),e.localSectionProps.get_LeftMargin(),e.localSectionProps.get_RightMargin(),e.localSectionProps.get_BottomMargin()],function(e,t){return e+t},0);Math.abs(a-n)>.01&&e.api.asc_SetSectionProps(e.localSectionProps)},onSearch:function(e){var t=DE.getController("Toolbar").getView("Toolbar");t&&t.showSearch(),this.hideModal()},onReaderMode:function(e){var t=this;Common.SharedSettings.set("readerMode",!Common.SharedSettings.get("readerMode")),t.api&&t.api.ChangeReaderMode(),Common.SharedSettings.get("phone")&&i.defer(function(){t.hideModal()},1e3),Common.NotificationCenter.trigger("readermode:change",Common.SharedSettings.get("readerMode"))},onSpellcheck:function(e){var i=t(e.currentTarget),a=i.is(":checked");Common.localStorage.setItem("de-mobile-spellcheck",a?1:0),this.api&&this.api.asc_setSpellCheck(a)},onOrthographyCheck:function(e){this.hideModal(),this.api&&this.api.asc_pluginRun("asc.{B631E142-E40B-4B4C-90B9-2D00222A286E}",0)},onShowHelp:function(){var e="https://helpcenter.onlyoffice.com";"/"!==e.charAt(e.length-1)&&(e+="/"),Common.SharedSettings.get("sailfish")?e+="mobile-applications/documents/sailfish/index.aspx":Common.SharedSettings.get("android")?e+="mobile-applications/documents/android/index.aspx":e+="mobile-applications/documents/index.aspx",window.open(e,"_blank"),this.hideModal()},onSaveFormat:function(e){var a=this,n=t(e.currentTarget).data("format");n&&(n==Asc.c_oAscFileType.TXT||n==Asc.c_oAscFileType.RTF?i.defer(function(){uiApp.confirm(n===Asc.c_oAscFileType.TXT?a.warnDownloadAs:a.warnDownloadAsRTF,a.notcriticalErrorTitle,function(){n==Asc.c_oAscFileType.TXT?Common.NotificationCenter.trigger("download:advanced",Asc.c_oAscAdvancedOptionsID.TXT,a.api.asc_getAdvancedOptions(),2,new Asc.asc_CDownloadOptions(n)):a.api.asc_DownloadAs(new Asc.asc_CDownloadOptions(n))})}):i.defer(function(){a.api.asc_DownloadAs(new Asc.asc_CDownloadOptions(n))}),a.hideModal())},onDownloadOrigin:function(e){var t=this;i.defer(function(){t.api.asc_DownloadOrigin()}),t.hideModal()},onPrint:function(e){var t=this;i.defer(function(){t.api.asc_Print()}),t.hideModal()},onFormatChange:function(e){var a=this,n=t(e.currentTarget).val(),o=n.split(",");i.delay(function(){a.api.change_DocSize(parseFloat(o[0]),parseFloat(o[1]))},300)},onOrientationChange:function(e){var a=this,n=t(e.currentTarget).val();i.delay(function(){a.api.change_PageOrient("true"===n)},300)},unitMeasurementChange:function(e){var i=t(e.currentTarget).val();i=null!==i?parseInt(i):Common.Utils.Metric.getDefaultMetric(),Common.Utils.Metric.setCurrentMetric(i),Common.localStorage.setItem("de-mobile-settings-unit",i),this.api.asc_SetDocumentUnits(i==Common.Utils.Metric.c_MetricUnits.inch?Asc.c_oAscDocumentUnits.Inch:i==Common.Utils.Metric.c_MetricUnits.pt?Asc.c_oAscDocumentUnits.Point:Asc.c_oAscDocumentUnits.Millimeter)},onPageMarginsChange:function(e,i){var a,n=this,o=t(i.currentTarget),s=(Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.cm),null);switch(a=Common.Utils.Metric.getCurrentMetric()==Common.Utils.Metric.c_MetricUnits.pt?1:.1,a=Common.Utils.Metric.fnRecalcToMM(a),e){case"left":s=n.localSectionProps.get_LeftMargin();break;case"top":s=n.localSectionProps.get_TopMargin();break;case"right":s=n.localSectionProps.get_RightMargin();break;case"bottom":s=n.localSectionProps.get_BottomMargin()}switch(s=o.hasClass("decrement")?Math.max(0,s-a):Math.min("left"==e||"right"==e?n.maxMarginsW:n.maxMarginsH,s+a),e){case"left":n.localSectionProps.put_LeftMargin(s);break;case"top":n.localSectionProps.put_TopMargin(s);break;case"right":n.localSectionProps.put_RightMargin(s);break;case"bottom":n.localSectionProps.put_BottomMargin(s)}var r=parseFloat(Common.Utils.Metric.fnRecalcFromMM(s).toFixed(2));t(Common.Utils.String.format("#document-margin-{0} .item-after label",e)).text(r+" "+f),n.applyPageMarginsIfNeed()},onApiGetDocInfoStart:function(){var e=this;a=!0,n={PageCount:0,WordsCount:0,ParagraphCount:0,SymbolsCount:0,SymbolsWSCount:0},i.defer(function(){a&&(t("#statistic-pages").html(e.txtLoading),t("#statistic-words").html(e.txtLoading),t("#statistic-paragraphs").html(e.txtLoading),t("#statistic-symbols").html(e.txtLoading),t("#statistic-spaces").html(e.txtLoading))})},onApiGetDocInfoEnd:function(){a=!1,t("#statistic-pages").html(n.PageCount),t("#statistic-words").html(n.WordsCount),t("#statistic-paragraphs").html(n.ParagraphCount),t("#statistic-symbols").html(n.SymbolsCount),t("#statistic-spaces").html(n.SymbolsWSCount)},onApiDocInfo:function(e){e&&(e.get_PageCount()>-1&&(n.PageCount=e.get_PageCount()),e.get_WordsCount()>-1&&(n.WordsCount=e.get_WordsCount()),e.get_ParagraphCount()>-1&&(n.ParagraphCount=e.get_ParagraphCount()),e.get_SymbolsCount()>-1&&(n.SymbolsCount=e.get_SymbolsCount()),e.get_SymbolsWSCount()>-1&&(n.SymbolsWSCount=e.get_SymbolsWSCount()))},onApiDocumentName:function(e){t("#settings-document-title").html(e||"-")},onApiPageSize:function(e,t){if(!d){var a=e;e=t,t=a}(Math.abs(u[0]-e)>.1||Math.abs(u[1]-t)>.1)&&(u=[e,t],i.find(h,function(i,a){Math.abs(i.value[0]-e)<.1&&Math.abs(i.value[1]-t)<.1&&(p=a)},this)),this.initPageDocumentSettings()},onApiPageOrient:function(e){d=e},unknownText:"Unknown",txtLoading:"Loading...",notcriticalErrorTitle:"Warning",warnDownloadAs:"If you continue saving in this format all features except the text will be lost.<br>Are you sure you want to continue?",warnDownloadAsRTF:"If you continue saving in this format some of the formatting might be lost.<br>Are you sure you want to continue?"}}(),DE.Controllers.Settings||{}))}),define("documenteditor/mobile/app/controller/edit/EditContainer",["core","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Controllers.EditContainer=a.Controller.extend(i.extend(function(){var e=[],a=1;return{models:[],collections:[],views:[],initialize:function(){},setApi:function(e){this.api=e,this.api.asc_registerCallback("asc_onFocusObject",i.bind(this.onApiFocusObject,this))},onLaunch:function(){},showModal:function(){var e=this;DE.getController("Editor").getView("Editor").f7View,Framework7.prototype.device.android;$$(".container-edit.modal-in").length>0||(uiApp.closeModal(),e._showByStack(Common.SharedSettings.get("phone")),DE.getController("Toolbar").getView("Toolbar").hideSearch())},hideModal:function(){this.picker&&uiApp.closeModal(this.picker)},_emptyEditController:function(){return{caption:this.textSettings,layout:'<div class="content-block inset"><div class="content-block-inner"> <p>Select object to edit</p></div></div>'}},_layoutEditorsByStack:function(){var t=this,n=[];return e.length<1?n.push(t._emptyEditController()):(i.contains(e,"text")&&n.push({caption:t.textText,id:"edit-text",layout:DE.getController("EditText").getView("EditText").rootLayout()}),i.contains(e,"paragraph")&&n.push({caption:t.textParagraph,id:"edit-paragraph",layout:DE.getController("EditParagraph").getView("EditParagraph").rootLayout()}),i.contains(e,"table")&&n.push({caption:t.textTable,id:"edit-table",layout:DE.getController("EditTable").getView("EditTable").rootLayout()}),i.contains(e,"header")&&n.push({caption:2==a?t.textFooter:t.textHeader,id:"edit-header",layout:DE.getController("EditHeader").getView("EditHeader").rootLayout()}),i.contains(e,"shape")&&n.push({caption:t.textShape,id:"edit-shape",layout:DE.getController("EditShape").getView("EditShape").rootLayout()}),i.contains(e,"image")&&n.push({caption:t.textImage,id:"edit-image",layout:DE.getController("EditImage").getView("EditImage").rootLayout()}),i.contains(e,"chart")&&n.push({caption:t.textChart,id:"edit-chart",layout:DE.getController("EditChart").getView("EditChart").rootLayout()}),i.contains(e,"hyperlink")&&n.push({caption:t.textHyperlink,id:"edit-link",layout:DE.getController("EditHyperlink").getView("EditHyperlink").rootLayout()})),n},_showByStack:function(e){var a=this,n=DE.getController("Editor").getView("Editor").f7View,o=!0===Framework7.prototype.device.android,s=a._layoutEditorsByStack();if(!($$(".container-edit.modal-in").length>0)){var r=t('<div class="navbar"><div data-page="index" class="navbar-inner"><div class="center sliding categories"></div>'+(e?'<div class="right sliding"><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a></div>':"")+"</div></div>");s.length<2?r.find(".center").removeClass("categories").html(s[0].caption):o?(r.find(".center").append('<div class="toolbar tabbar"><div data-page="index" class="toolbar-inner"></div></div>'),i.each(s,function(e,t){r.find(".toolbar-inner").append('<a href="#'+e.id+'" class="tab-link '+(t<1?"active":"")+'">'+e.caption+"</a>")}),r.find(".toolbar-inner").append('<span class="tab-link-highlight" style="width: '+100/s.length+'%;"></span>')):(r.find(".center").append('<div class="buttons-row"></div>'),i.each(s,function(e,t){r.find(".buttons-row").append('<a href="#'+e.id+'" class="tab-link button '+(t<1?"active":"")+'">'+e.caption+"</a>")}));var l=t('<div class="pages"><div class="page" data-page="index"><div class="page-content"><div class="tabs-animated-wrap"><div class="tabs"></div></div></div></div></div>');if(i.each(s,function(e,t){l.find(".tabs").append('<div id="'+e.id+'" class="tab view '+(t<1?"active":"")+'"><div class="pages"><div class="page no-navbar"><div class="page-content">'+e.layout+"</div></div></div></div>")}),e)a.picker=$$(uiApp.pickerModal('<div class="picker-modal settings container-edit"><div class="view edit-root-view navbar-through">'+r.prop("outerHTML")+l.prop("outerHTML")+"</div></div>")).on("opened",function(){i.isFunction(a.api.asc_OnShowContextMenu)&&a.api.asc_OnShowContextMenu()}).on("close",function(e){n.showNavbar()}).on("closed",function(){i.isFunction(a.api.asc_OnHideContextMenu)&&a.api.asc_OnHideContextMenu()}),n.hideNavbar();else{a.picker=uiApp.popover('<div class="popover settings container-edit"><div class="popover-angle"></div><div class="popover-inner"><div class="content-block"><div class="view popover-view edit-root-view navbar-through">'+r.prop("outerHTML")+l.prop("outerHTML")+"</div></div></div>",$$("#toolbar-edit"));var c=t(".modal-overlay");$$(a.picker).on("opened",function(){c.on("removeClass",function(){c.hasClass("modal-overlay-visible")||c.addClass("modal-overlay-visible")}),i.isFunction(a.api.asc_OnShowContextMenu)&&a.api.asc_OnShowContextMenu()}).on("close",function(){c.off("removeClass"),c.removeClass("modal-overlay-visible")}).on("closed",function(){i.isFunction(a.api.asc_OnHideContextMenu)&&a.api.asc_OnHideContextMenu()})}t(".container-edit .tab").single("show",function(e){Common.NotificationCenter.trigger("editcategory:show",e)}),o&&($$(".view.edit-root-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.edit-root-view .navbar").prependTo(".view.edit-root-view > .pages > .page")),a.rootView=uiApp.addView(".edit-root-view",{dynamicNavbar:!0,domCache:!0}),Common.NotificationCenter.trigger("editcontainer:show")}},onApiFocusObject:function(t){e=[],i.each(t,function(t){var i=t.get_ObjectType()
;Asc.c_oAscTypeSelectElement.Paragraph==i?e.push("text","paragraph"):Asc.c_oAscTypeSelectElement.Table==i?e.push("table"):Asc.c_oAscTypeSelectElement.Image==i?t.get_ObjectValue().get_ChartProperties()?e.push("chart"):t.get_ObjectValue().get_ShapeProperties()?e.push("shape"):e.push("image"):Asc.c_oAscTypeSelectElement.Hyperlink==i?e.push("hyperlink"):Asc.c_oAscTypeSelectElement.Header==i&&(e.push("header"),a=t.get_ObjectValue().get_Type())}),e.indexOf("chart")>-1&&(e=i.without(e,"shape")),e=i.uniq(e)},textSettings:"Settings",textText:"Text",textParagraph:"Paragraph",textTable:"Table",textShape:"Shape",textImage:"Image",textChart:"Chart",textHyperlink:"Hyperlink",textHeader:"Header",textFooter:"Footer"}}(),DE.Controllers.EditContainer||{}))}),define("text!documenteditor/mobile/app/template/EditText.template",[],function(){return'<div id="edit-text-root"><div class="list-block"><ul><li><a id="font-fonts" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textFonts %></div><div class="item-after" style="color: #000;"><span></span><span style="margin-left: 5px;"></span></div></div></div></a></li><li><div class="item-content buttons"><div class="item-inner"><div class="row"><a id="font-bold" class="button"><b><%= scope.textCharacterBold %></b></a><a id="font-italic" class="button"><i><%= scope.textCharacterItalic %></i></a><a id="font-underline" class="button" style="text-decoration: underline;"><%= scope.textCharacterUnderline %></a><a id="font-strikethrough" class="button" style="text-decoration: line-through"><%= scope.textCharacterStrikethrough %></a></div></div></div></li><li><a id="font-color" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-text-color"><span class="color-preview"></span></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textFontColor %></div> <% if (android) { %><div class="item-after"><div class="color-preview"></div></div><% } %> </div></div></a></li><li><a id="font-background" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-text-selection"><span class="color-preview"></span></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textHighlightColor %></div> <% if (android) { %><div class="item-after"><div class="color-preview"></div></div><% } %> </div></div></a></li><li><a id="font-additional" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-text-additional"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textAdditionalFormat %></div></div></div></a></li></ul></div><div class="list-block"><ul><li><div id="paragraph-align" class="item-content buttons"><div class="item-inner"><div class="row"><a id="font-left" class="button no-ripple"><i class="icon icon-text-align-left"></i></a> <a id="font-center" class="button no-ripple"><i class="icon icon-text-align-center"></i></a> <a id="font-right" class="button no-ripple"><i class="icon icon-text-align-right"></i></a> <a id="font-just" class="button no-ripple"><i class="icon icon-text-align-jast"></i></a></div></div></div></li><li><div class="item-content buttons"><div class="item-inner"><div class="row"><a id="font-moveleft" class="button no-ripple"><i class="icon icon-de-indent"></i></a> <a id="font-moveright" class="button no-ripple"><i class="icon icon-in-indent"></i></a></div></div></div></li><li><a id="font-bullets" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-bullets"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textBullets %></div></div></div></a></li><li><a id="font-numbers" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-numbers"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textNumbers %></div></div></div></a></li><li><a id="font-line-spacing" class="item-link"><div class="item-content"> <% if (!android) { %><div class="item-media"><i class="icon icon-linespacing"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textLineSpacing %></div></div></div></a></li></ul></div></div><div id="edit-text-fonts"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textFonts %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-text-font-page"><div class="page-content"><div class="list-block"><ul><li id="font-size"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSize %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div><div class="content-block-title"><%= scope.textFonts %></div><div id="font-list" class="list-block virtual-list"></div></div></div></div><div id="edit-text-color"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textFontColors %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-text-font-color"><div class="page-content"><div class="list-block" style="<% if (!android) { %>margin-bottom: -36px;<% } %>"><ul><li><a id="font-color-auto" class="item-link no-indicator"><div class="item-content"><div class="item-media"><div style="width:22px; height: 22px; background-color: #000;"></div></div><div class="item-inner"><div class="item-title"><%= scope.textAutomatic %></div></div></div></a></li></ul></div></div></div></div><div id="edit-text-background"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textHighlightColors %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-text-font-background"><div class="page-content"></div></div></div><div id="edit-text-additional"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textAdditional %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" id="page-text-additional" data-page="edit-text-additional"><div class="page-content"><div class="list-block" id="text-additional"><ul><li><label class="label-radio item-content"><input type="radio" name="text-strikethrough" value="strikethrough"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textStrikethrough %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="text-strikethrough" value="double-strikethrough"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textDblStrikethrough %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="text-script" value="superscript"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textDblSuperscript %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="text-script" value="subscript"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textSubscript %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="text-caps" value="small"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textSmallCaps %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="text-caps" value="all"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title"><%= scope.textAllCaps %></div></div></label></li></ul></div><div class="list-block"><ul><li id="letter-spacing" id="letter-spacing"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textLetterSpacing %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div></div></div></div><div id="edit-text-linespacing"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textLineSpacing %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" id="page-text-linespacing" data-page="edit-text-additional"><div class="page-content"><div class="list-block"><ul><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="1"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">1.0</div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="1.15"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">1.15</div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="1.5"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">1.5</div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="2"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">2.0</div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="2.5"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">2.5</div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="line-spacing" value="3"> <% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %> <div class="item-inner"><div class="item-title">3.0</div></div></label></li></ul></div></div></div></div><div id="edit-text-bullets"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textBullets %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" id="page-text-bullets"><div class="page-content dataview bullets"> <% _.each(bullets, function(row) { %> <ul class="row"> <% _.each(row, function(bullet) { %> <li data-type="<%= bullet.type %>"> <% if (bullet.thumb.length < 1) { %> <div class="thumb" style="position: relative;"><label><%= scope.textNone %></label></div> <% } else { %> <div class="thumb" style="background-image:url(\'../mobile/resources/img/bullets/<%= bullet.thumb %>\')"></div> <% } %> </li> <% }); %> </ul> <% }); %> </div></div></div><div id="edit-text-numbers"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textNumbers %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" id="page-text-numbers"><div class="page-content dataview numbers"> <% _.each(numbers, function(row) { %> <ul class="row"> <% _.each(row, function(number) { %> <li data-type="<%= number.type %>"> <% if (number.thumb.length < 1) { %> <div class="thumb" style="position: relative;"><label><%= scope.textNone %></label></div> <% } else { %> <div class="thumb" style="background-image:url(\'../mobile/resources/img/numbers/<%= number.thumb %>\')"></div> <% } %> </li> <% }); %> </ul> <% }); %> </div></div></div>'}),void 0===Common)var Common={};Common.UI=Common.UI||{},define("common/mobile/lib/component/ThemeColorPalette",["jquery","underscore","backbone"],function(e,t,i){"use strict";Common.UI.ThemeColorPalette=i.View.extend(t.extend({options:{dynamiccolors:10,standardcolors:10,themecolors:10,effects:5,allowReselect:!0,transparent:!1,value:"000000",cls:"",style:""},template:t.template(["<% var me = this; %>",'<div class="list-block color-palette <%= me.options.cls %>" style="<%= me.options.style %>">',"<ul>",'<li class="theme-colors">','<div style="padding: 15px 0 0 15px;"><%= me.textThemeColors %></div>','<div class="item-content">','<div class="item-inner">',"<% _.each(themeColors, function(row) { %>",'<div class="row">',"<% _.each(row, function(effect) { %>",'<a data-effectid="<%=effect.effectId%>" data-effectvalue="<%=effect.effectValue%>" data-color="<%=effect.color%>" style="background:#<%=effect.color%>"></a>',"<% }); %>","</div>","<% }); %>","</div>","</div>","</li>",'<li class="standart-colors">','<div style="padding: 15px 0 0 15px;"><%= me.textStandartColors %></div>','<div class="item-content">','<div class="item-inner">',"<% _.each(standartColors, function(color, index) { %>","<% if (0 == index && me.options.transparent) { %>",'<a data-color="transparent" class="transparent"></a>',"<% } else { %>",'<a data-color="<%=color%>" style="background:#<%=color%>"></a>',"<% } %>","<% }); %>","</div>","</div>","</li>","</ul>","</div>"].join("")),initialize:function(i){var a=this,n=e(a.el);a.options=t({}).extend(a.options,i),a.render(),n.find(".color-palette a").on("click",t.bind(a.onColorClick,a))},render:function(){var i=this,a=[],n=-1,o=Common.Utils.ThemeColor.getStandartColors();if(!(e(i.el).find(".list-block.color-palette").length>0))return t.each(Common.Utils.ThemeColor.getEffectColors(),function(e,t){0==t%i.options.themecolors&&(a.push([]),n++),a[n].push(e)}),e(i.el).append(i.template({themeColors:a,standartColors:o})),i},isColor:function(e){return"string"==typeof e&&/[0-9A-Fa-f]{6}/.test(e)},isTransparent:function(e){return"string"==typeof e&&"transparent"==e},isEffect:function(e){return"object"==typeof e&&void 0!==e.effectId},onColorClick:function(t){var i=this,a=e(i.el),n=e(t.currentTarget);a.find(".color-palette a").removeClass("active"),n.addClass("active");var o=n.data("color").toString(),s=n.data("effectid");i.currentColor=o,s&&(i.currentColor={color:o,effectId:s}),i.trigger("select",i,i.currentColor)},select:function(i){var a=this,n=e(a.el);i!=a.currentColor&&(a.currentColor=i,a.clearSelection(),t.isObject(i)?t.isUndefined(i.effectId)?t.isUndefined(i.effectValue)||n.find("a[data-effectvalue="+i.effectValue+"][data-color="+i.color+"]").addClass("active"):n.find("a[data-effectid="+i.effectId+"]").addClass("active"):(/#?[a-fA-F0-9]{6}/.test(i)&&(i=/#?([a-fA-F0-9]{6})/.exec(i)[1]),/^[a-fA-F0-9]{6}|transparent$/.test(i)||t.indexOf(Common.Utils.ThemeColor.getStandartColors(),i)>-1?n.find(".standart-colors a[data-color="+i+"]").addClass("active"):n.find(".custom-colors a[data-color="+i+"]").addClass("active")))},clearSelection:function(){e(this.el).find(".color-palette a").removeClass("active")},textThemeColors:"Theme Colors",textStandartColors:"Standard Colors"},Common.UI.ThemeColorPalette||{}))}),define("documenteditor/mobile/app/view/edit/EditText",["text!documenteditor/mobile/app/template/EditText.template","jquery","underscore","backbone","common/mobile/lib/component/ThemeColorPalette"],function(e,t,i,a){"use strict";DE.Views.EditText=a.View.extend(i.extend(function(){var a,n,o=[[{type:-1,thumb:""},{type:1,thumb:"bullet-01.png"},{type:2,thumb:"bullet-02.png"},{type:3,thumb:"bullet-03.png"}],[{type:4,thumb:"bullet-04.png"},{type:5,thumb:"bullet-05.png"},{type:6,thumb:"bullet-06.png"},{type:7,thumb:"bullet-07.png"}]],s=[[{type:-1,thumb:""},{type:4,thumb:"number-01.png"},{type:5,thumb:"number-02.png"},{type:6,thumb:"number-03.png"}],[{type:1,thumb:"number-04.png"},{type:2,thumb:"number-05.png"},{type:3,thumb:"number-06.png"},{type:7,thumb:"number-07.png"}]];return{template:i.template(e),events:{},initialize:function(){n=DE.getController("EditText"),Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){var e=this;t("#font-fonts").single("click",i.bind(e.showFonts,e)),t("#font-color").single("click",i.bind(e.showFontColor,e)),t("#font-background").single("click",i.bind(e.showBackgroundColor,e)),t("#font-additional").single("click",i.bind(e.showAdditional,e)),t("#font-line-spacing").single("click",i.bind(e.showLineSpacing,e)),t("#font-bullets").single("click",i.bind(e.showBullets,e)),t("#font-numbers").single("click",i.bind(e.showNumbers,e)),Common.Utils.addScrollIfNeed("#edit-text .pages","#edit-text .page"),e.initControls()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this,bullets:o,numbers:s})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-text-root").html():""},initControls:function(){},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e])}},showFonts:function(){this.showPage("#edit-text-fonts");var e=this,o=t('<div><li><label class="label-radio item-content"><input type="radio" name="font-name" value="{{name}}">'+(Framework7.prototype.device.android?'<div class="item-media"><i class="icon icon-form-radio"></i></div>':"")+'<div class="item-inner"><div class="item-title" style="font-family: \'{{name}}\';">{{name}}</div></div></label></li></div>');a=uiApp.virtualList("#font-list.virtual-list",{items:DE.getController("EditText").getFonts(),template:o.html(),onItemsAfterInsert:function(a,o){var s=n.getFontInfo();t("#font-list input[name=font-name]").val([s.name]),t("#font-list li").single("click",i.buffered(function(t){e.fireEvent("font:click",[e,t])},100))}}),Common.Utils.addScrollIfNeed(".page[data-page=edit-text-font-page]",".page[data-page=edit-text-font-page] .page-content")},showFontColor:function(){this.showPage("#edit-text-color",!0),this.paletteTextColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-text-font-color] .page-content")}),Common.Utils.addScrollIfNeed(".page[data-page=edit-text-font-color]",".page[data-page=edit-text-font-color] .page-content"),this.fireEvent("page:show",[this,"#edit-text-color"])},showBackgroundColor:function(){this.showPage("#edit-text-background",!0),this.paletteBackgroundColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-text-font-background] .page-content"),transparent:!0}),Common.Utils.addScrollIfNeed(".page[data-page=edit-text-font-background]",".page[data-page=edit-text-font-background] .page-content"),this.fireEvent("page:show",[this,"#edit-text-background"])},showAdditional:function(){this.showPage("#edit-text-additional"),Common.Utils.addScrollIfNeed(".page[data-page=edit-text-additional]",".page[data-page=edit-text-additional] .page-content")},showLineSpacing:function(){this.showPage("#edit-text-linespacing"),Common.Utils.addScrollIfNeed("#page-text-linespacing","#page-text-linespacing .page-content")},showBullets:function(){this.showPage("#edit-text-bullets")},showNumbers:function(){this.showPage("#edit-text-numbers")},textFonts:"Fonts",textFontColor:"Font Color",textHighlightColor:"Highlight Color",textAdditionalFormat:"Additional Formatting",textBack:"Back",textSize:"Size",textFontColors:"Font Colors",textAutomatic:"Automatic",textHighlightColors:"Highlight Colors",textAdditional:"Additional",textStrikethrough:"Strikethrough",textDblStrikethrough:"Double Strikethrough",textDblSuperscript:"Superscript",textSubscript:"Subscript",textSmallCaps:"Small Caps",textAllCaps:"All Caps",textLetterSpacing:"Letter Spacing",textLineSpacing:"Line Spacing",textBullets:"Bullets",textNone:"None",textNumbers:"Numbers",textCharacterBold:"B",textCharacterItalic:"I",textCharacterUnderline:"U",textCharacterStrikethrough:"S"}}(),DE.Views.EditText||{}))}),define("documenteditor/mobile/app/controller/edit/EditText",["core","documenteditor/mobile/app/view/edit/EditText","jquery","underscore","backbone","common/mobile/lib/component/ThemeColorPalette"],function(e,t,i,a,n){"use strict";DE.Controllers.EditText=n.Controller.extend(a.extend(function(){function e(e,i){a.each(e,function(e){var i=e.asc_getFontId();t.push({id:i,name:e.asc_getFontName(),imgidx:e.asc_getFontThumbnail(),type:e.asc_getFontType()})}),Common.NotificationCenter.trigger("fonts:load",t,i)}var t=[],n=[],o=void 0,s={};return{models:[],collections:[],views:["EditText"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),this.addListeners({EditText:{"page:show":this.onPageShow,"font:click":this.onFontClick}})},setApi:function(t){var i=this;i.api=t,i.api.asc_registerCallback("asc_onInitEditorFonts",a.bind(e,i)),i.api.asc_registerCallback("asc_onFocusObject",a.bind(i.onApiFocusObject,i)),i.api.asc_registerCallback("asc_onFontFamily",a.bind(i.onApiChangeFont,i)),i.api.asc_registerCallback("asc_onFontSize",a.bind(i.onApiFontSize,i)),i.api.asc_registerCallback("asc_onBold",a.bind(i.onApiBold,i)),i.api.asc_registerCallback("asc_onItalic",a.bind(i.onApiItalic,i)),i.api.asc_registerCallback("asc_onUnderline",a.bind(i.onApiUnderline,i)),i.api.asc_registerCallback("asc_onStrikeout",a.bind(i.onApiStrikeout,i)),i.api.asc_registerCallback("asc_onVerticalAlign",a.bind(i.onApiVerticalAlign,i)),i.api.asc_registerCallback("asc_onListType",a.bind(i.onApiBullets,i)),i.api.asc_registerCallback("asc_onPrAlign",a.bind(i.onApiParagraphAlign,i)),i.api.asc_registerCallback("asc_onTextColor",a.bind(i.onApiTextColor,i)),i.api.asc_registerCallback("asc_onParaSpacingLine",a.bind(i.onApiLineSpacing,i)),i.api.asc_registerCallback("asc_onTextShd",a.bind(i.onApiTextShd,i))},onLaunch:function(){this.createView("EditText").render()},initEvents:function(){var e=this;i("#font-bold").single("click",a.bind(e.onBold,e)),i("#font-italic").single("click",a.bind(e.onItalic,e)),i("#font-underline").single("click",a.bind(e.onUnderline,e)),i("#font-strikethrough").single("click",a.bind(e.onStrikethrough,e)),i("#paragraph-align .button").single("click",a.bind(e.onParagraphAlign,e)),i("#font-moveleft, #font-moveright").single("click",a.bind(e.onParagraphMove,e)),e.initSettings()},onPageShow:function(e,t){var n=this,o=n.getView("EditText").paletteTextColor,s=n.getView("EditText").paletteBackgroundColor;i("#text-additional li").single("click",a.buffered(n.onAdditional,100,n)),i("#page-text-linespacing li").single("click",a.buffered(n.onLineSpacing,100,n)),i("#font-size .button").single("click",a.bind(n.onFontSize,n)),i("#letter-spacing .button").single("click",a.bind(n.onLetterSpacing,n)),i(".dataview.bullets li").single("click",a.buffered(n.onBullet,100,n)),i(".dataview.numbers li").single("click",a.buffered(n.onNumber,100,n)),i("#font-color-auto").single("click",a.bind(n.onTextColorAuto,n)),o&&o.on("select",a.bind(n.onTextColor,n)),s&&s.on("select",a.bind(n.onBackgroundColor,n)),n.initSettings(t)},initSettings:function(e){var t=this;if(t.api&&t.api.UpdateInterfaceState(),o){var a=i("#text-additional input[name=text-strikethrough]"),n=i("#text-additional input[name=text-caps]");o.get_Strikeout()&&a.val(["strikethrough"]).prop("prevValue","strikethrough"),o.get_DStrikeout()&&a.val(["double-strikethrough"]).prop("prevValue","double-strikethrough"),o.get_SmallCaps()&&n.val(["small"]).prop("prevValue","small"),o.get_AllCaps()&&n.val(["all"]).prop("prevValue","all"),s.letterSpacing=Common.Utils.Metric.fnRecalcFromMM(o.get_TextSpacing()),i("#letter-spacing .item-after label").text(s.letterSpacing+" "+Common.Utils.Metric.getCurrentMetricName())}},getFonts:function(){return t},getStack:function(){return n},getFontInfo:function(){return s},getParagraph:function(){return o},onBold:function(e){var t=this._toggleButton(e);this.api&&this.api.put_TextPrBold(t)},onItalic:function(e){var t=this._toggleButton(e);this.api&&this.api.put_TextPrItalic(t)},onUnderline:function(e){var t=this._toggleButton(e);this.api&&this.api.put_TextPrUnderline(t)},onStrikethrough:function(e){var t=this._toggleButton(e);this.api&&this.api.put_TextPrStrikeout(t)},onParagraphAlign:function(e){var t=i(e.currentTarget);if(t){var a=t.attr("id"),n=1;"font-just"==a?n=3:"font-right"==a?n=0:"font-center"==a&&(n=2),i("#paragraph-align .button").removeClass("active"),t.addClass("active"),this.api.put_PrAlign(n)}},onParagraphMove:function(e){var t=i(e.currentTarget);if(t&&this.api){"font-moveleft"==t.attr("id")?this.api.DecreaseIndent():this.api.IncreaseIndent()}},onAdditionalStrikethrough:function(e){var t=e.prop("value"),i=e.prop("checked");"strikethrough"==t?this.api.put_TextPrStrikeout(i):this.api.put_TextPrDStrikeout(i)},onAdditionalScript:function(e){var t=e.prop("value"),i=e.prop("checked");"superscript"==t?this.api.put_TextPrBaseline(i?1:0):this.api.put_TextPrBaseline(i?2:0)},onAdditionalCaps:function(e){var t=e.prop("value"),i=e.prop("checked"),a=new Asc.asc_CParagraphProperty;"small"==t?(a.put_AllCaps(!1),a.put_SmallCaps(i)):(a.put_AllCaps(i),a.put_SmallCaps(!1)),this.api.paraApply(a)},onAdditional:function(e){var t=this,a=i(e.currentTarget).find("input"),n=a.prop("prevValue");n==a.prop("value")?(a.prop("checked",!1),n=null):(a.prop("checked",!0),n=a.prop("value")),i('#page-text-additional input[name="'+a.prop("name")+'"]').prop("prevValue",n);var o=a.prop("name");"text-strikethrough"==o?t.onAdditionalStrikethrough(a):"text-script"==o?t.onAdditionalScript(a):"text-caps"==o&&t.onAdditionalCaps(a)},onLineSpacing:function(e){var t=i(e.currentTarget).find("input");if(t&&this.api){var a=parseFloat(t.prop("value"));this.api.put_PrLineSpacing(1,a)}},onFontClick:function(e,t){var a=i(t.currentTarget).find("input");a&&this.api.put_TextPrFontName(a.prop("value"))},onFontSize:function(e){var t=i(e.currentTarget),n=s.size;t.hasClass("decrement")?a.isUndefined(n)?this.api.FontSizeOut():n=Math.max(1,--n):a.isUndefined(n)?this.api.FontSizeIn():n=Math.min(100,++n),a.isUndefined(n)||this.api.put_TextPrFontSize(n)},onLetterSpacing:function(e){var t=i(e.currentTarget),a=s.letterSpacing;a=t.hasClass("decrement")?Math.max(-100,--a):Math.min(100,++a),s.letterSpacing=a,i("#letter-spacing .item-after label").text(a+" "+Common.Utils.Metric.getCurrentMetricName());var n=new Asc.asc_CParagraphProperty;n.put_TextSpacing(Common.Utils.Metric.fnRecalcToMM(a)),this.api.paraApply(n)},onBullet:function(e){var t=i(e.currentTarget),a=t.data("type");i(".dataview.bullets li").removeClass("active"),t.addClass("active"),this.api.put_ListType(0,parseInt(a))},onNumber:function(e){var t=i(e.currentTarget),a=t.data("type");i(".dataview.numbers li").removeClass("active"),t.addClass("active"),this.api.put_ListType(1,parseInt(a))},onTextColorAuto:function(e){var t=this,i=t.getView("EditText").paletteTextColor;i&&i.clearSelection(),this.api&&this.api.put_TextColor(Common.Utils.ThemeColor.getRgbColor("000000"))},onTextColor:function(e,t){this.api&&this.api.put_TextColor(Common.Utils.ThemeColor.getRgbColor(t))},onBackgroundColor:function(e,t){this.api&&("transparent"==t?this.api.put_ParagraphShade(!1):this.api.put_ParagraphShade(!0,Common.Utils.ThemeColor.getRgbColor(t)))},onApiFocusObject:function(e){n=e;var t=[];if(a.each(n,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Paragraph&&t.push(e)}),t.length>0){var i=t[t.length-1];o=i.get_ObjectValue()}else o=void 0},onApiChangeFont:function(e){var t=(a.isFunction(e.get_Name)?e.get_Name():e.asc_getName())||this.textFonts;s.name=t,i("#font-fonts .item-title").html(t)},onApiFontSize:function(e){s.size=e;var t=s.size;t=a.isUndefined(t)?this.textAuto:t+" "+this.textPt,i("#font-fonts .item-after span:first-child").html(t),i("#font-size .item-after label").html(t)},onApiBold:function(e){i("#font-bold").toggleClass("active",e)},onApiItalic:function(e){i("#font-italic").toggleClass("active",e)},onApiUnderline:function(e){i("#font-underline").toggleClass("active",e)},onApiStrikeout:function(e){i("#font-strikethrough").toggleClass("active",e)},onApiBullets:function(e){var t=e.get_ListType(),a=e.get_ListSubType();switch(t){case 0:i(".dataview.bullets li[data-type="+a+"]").addClass("active");break;case 1:i(".dataview.numbers li[data-type="+a+"]").addClass("active")}},onApiParagraphAlign:function(e){i("#font-right").toggleClass("active",0===e),i("#font-left").toggleClass("active",1===e),i("#font-center").toggleClass("active",2===e),i("#font-just").toggleClass("active",3===e)},onApiVerticalAlign:function(e){var t;1==e&&(t="superscript"),2==e&&(t="subscript"),a.isUndefined(t)||i("#text-additional input[name=text-script]").val([t]).prop("prevValue",t)},onApiTextColor:function(e){var t=this;if(e.get_auto())i("#font-color .color-preview").css("background-color","#000");else{var n,o=t.getView("EditText").paletteTextColor;e&&(n=e.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(e.get_r(),e.get_g(),e.get_b()),effectValue:e.get_value()}:Common.Utils.ThemeColor.getHexColor(e.get_r(),e.get_g(),e.get_b()),i("#font-color .color-preview").css("background-color","#"+(a.isObject(n)?n.color:n))),o&&o.select(n)}},onApiLineSpacing:function(e){var t=null===e.get_Line()||null===e.get_LineRule()||1!=e.get_LineRule()?-1:e.get_Line();i("#page-text-linespacing input").val([t])},onApiTextShd:function(e){var t,n=e.get_Color();t=n.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(n.get_r(),n.get_g(),n.get_b()),effectValue:n.get_value()
}:Common.Utils.ThemeColor.getHexColor(n.get_r(),n.get_g(),n.get_b()),i("#font-background .color-preview").css("background-color","#"+(a.isObject(t)?t.color:t));var o=this.getView("EditText").paletteBackgroundColor;o&&o.select(t)},_toggleButton:function(e){return i(e.currentTarget).toggleClass("active").hasClass("active")},textFonts:"Fonts",textAuto:"Auto",textPt:"pt"}}(),DE.Controllers.EditText||{}))}),define("text!documenteditor/mobile/app/template/EditParagraph.template",[],function(){return'<div id="edit-paragraph-root"><div class="list-block"><ul><li><a id="paragraph-background" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textBackground %></div><div class="item-after"><div class="color-preview"></div></div></div></div></a></li></ul></div><div class="list-block"><ul><li><a id="paragraph-advanced" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textAdvSettings %></div></div></div></a></li></ul></div><div class="content-block-title"><%= scope.textPrgStyles %></div><div id="paragraph-list" class="list-block"><ul></ul></div></div><div id="edit-paragraph-color"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textBackground %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-paragraph-color"><div class="page-content"></div></div></div><div id="edit-paragraph-advanced"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textAdvanced %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-paragraph-advanced"><div class="page-content"><div class="content-block-title"><%= scope.textFromText %></div><div class="list-block"><ul><li id="paragraph-distance-before"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textBefore %></div><div class="item-after splitter"> <% if (!android) { %><label><%= scope.textAuto %></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label><%= scope.textAuto %></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li><li id="paragraph-distance-after"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textAfter %></div><div class="item-after splitter"> <% if (!android) { %><label><%= scope.textAuto %></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label><%= scope.textAuto %></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li><li id="paragraph-spin-first-line"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textFirstLine %></div><div class="item-after splitter"> <% if (!android) { %><label><%= scope.textAuto %></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label><%= scope.textAuto %></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div><div class="list-block"><ul><li id="paragraph-space"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSpaceBetween %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="list-block"><ul><li id="paragraph-page-break"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textPageBreak %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="paragraph-page-orphan"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textOrphan %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="paragraph-page-keeptogether"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textKeepLines %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="paragraph-page-keepnext"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textKeepNext %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div></div></div></div>'}),define("documenteditor/mobile/app/view/edit/EditParagraph",["text!documenteditor/mobile/app/template/EditParagraph.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditParagraph=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){var e=this;t("#paragraph-background").single("click",i.bind(e.showColors,e)),t("#paragraph-advanced").single("click",i.bind(e.showAdvanced,e)),e.renderStyles(),DE.getController("EditParagraph").initSettings(),Common.Utils.addScrollIfNeed("#edit-paragraph .pages","#edit-paragraph .page")},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-paragraph-root").html():""},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e])}},renderStyles:function(){var e=this,a=DE.getController("EditParagraph").getThumbSize(),n=t("#paragraph-list ul"),o=i.template('<li><label class="label-radio item-content"><input type="radio" name="paragraph-style" value="<%= name %>">'+(Framework7.prototype.device.android?'<div class="item-media"><i class="icon icon-form-radio"></i></div>':"")+'<div class="item-inner">'+'<div data-name="<%= name %>" class="item-title style" style="background-image: url(<%= image %>); width:{0}px; height:{1}px; background-size:{0}px {1}px; background-repeat: no-repeat;"></div>'.format(a.width,a.height)+"</div></label></li>");i.each(DE.getController("EditParagraph").getStyles(),function(a){t(o(a)).appendTo(n).on("click",i.buffered(function(t){e.fireEvent("style:click",[e,t])},100))})},showColors:function(){this.showPage("#edit-paragraph-color",!0),this.paletteBackgroundColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-paragraph-color] .page-content"),transparent:!0}),Common.Utils.addScrollIfNeed(".page[data-page=edit-paragraph-color]",".page[data-page=edit-paragraph-color] .page-content"),this.fireEvent("page:show",[this,"#edit-paragraph-color"])},showAdvanced:function(){this.showPage("#edit-paragraph-advanced"),Common.Utils.addScrollIfNeed(".page[data-page=edit-paragraph-advanced]",".page[data-page=edit-paragraph-advanced] .page-content")},textBackground:"Background",textAdvSettings:"Advanced settings",textPrgStyles:"Paragraph styles",textBack:"Back",textAdvanced:"Advanced",textFromText:"Distance from Text",textBefore:"Before",textAuto:"Auto",textFirstLine:"First Line",textAfter:"After",textSpaceBetween:"Space Between Paragraphs",textPageBreak:"Page Break Before",textOrphan:"Orphan Control",textKeepLines:"Keep Lines Together",textKeepNext:"Keep with Next"}}(),DE.Views.EditParagraph||{}))}),define("documenteditor/mobile/app/controller/edit/EditParagraph",["core","documenteditor/mobile/app/view/edit/EditParagraph","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditParagraph=n.Controller.extend(a.extend(function(){var e,t,n=[],o={},s=void 0,r=void 0,l=[],c=Common.Utils.Metric.getCurrentMetricName();return{models:[],collections:[],views:["EditParagraph"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",a.bind(this.categoryShow,this)),this.addListeners({EditParagraph:{"page:show":this.onPageShow,"style:click":this.onStyleClick}})},setApi:function(e){var t=this;t.api=e,t.api.asc_setParagraphStylesSizes(330,38),t.api.asc_registerCallback("asc_onInitEditorStyles",a.bind(t.onApiInitEditorStyles,t)),t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t)),t.api.asc_registerCallback("asc_onParaStyleName",a.bind(t.onApiParagraphStyleChange,t))},onLaunch:function(){this.createView("EditParagraph").render()},initEvents:function(){this.initSettings()},categoryShow:function(e){var t=i(e.currentTarget);t&&"edit-paragraph"===t.prop("id")&&this.initSettings()},onPageShow:function(){var e=this,t=e.getView("EditParagraph").paletteBackgroundColor;i("#paragraph-distance-before .button").single("click",a.bind(e.onDistanceBefore,e)),i("#paragraph-distance-after .button").single("click",a.bind(e.onDistanceAfter,e)),i("#paragraph-spin-first-line .button").single("click",a.bind(e.onSpinFirstLine,e)),i("#paragraph-space input:checkbox").single("change",a.bind(e.onSpaceBetween,e)),i("#paragraph-page-break input:checkbox").single("change",a.bind(e.onBreakBefore,e)),i("#paragraph-page-orphan input:checkbox").single("change",a.bind(e.onOrphan,e)),i("#paragraph-page-keeptogether input:checkbox").single("change",a.bind(e.onKeepTogether,e)),i("#paragraph-page-keepnext input:checkbox").single("change",a.bind(e.onKeepNext,e)),t&&t.on("select",a.bind(e.onBackgroundColor,e)),e.initSettings()},initSettings:function(){var e=this;c=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric());var n=e.api.getSelectedElements();if(n&&a.isArray(n))for(var l=n.length-1;l>=0;l--)if(Asc.c_oAscTypeSelectElement.Paragraph==n[l].get_ObjectType()){r=n[l].get_ObjectValue();break}if(r){null!==r.get_Ind()&&void 0!==r.get_Ind()||r.get_Ind().put_FirstLine(0);var d=parseFloat(Common.Utils.Metric.fnRecalcFromMM(r.get_Ind().get_FirstLine()).toFixed(2));i("#paragraph-spin-first-line .item-after label").text(d+" "+c)}if(s){o.spaceBefore=s.get_Spacing().get_Before()<0?s.get_Spacing().get_Before():Common.Utils.Metric.fnRecalcFromMM(s.get_Spacing().get_Before()),o.spaceAfter=s.get_Spacing().get_After()<0?s.get_Spacing().get_After():Common.Utils.Metric.fnRecalcFromMM(s.get_Spacing().get_After());var p=parseFloat(o.spaceBefore.toFixed(2)),u=parseFloat(o.spaceAfter.toFixed(2));i("#paragraph-distance-before .item-after label").text(o.spaceBefore<0?"Auto":p+" "+c),i("#paragraph-distance-after .item-after label").text(o.spaceAfter<0?"Auto":u+" "+c),i("#paragraph-space input:checkbox").prop("checked",s.get_ContextualSpacing()),i("#paragraph-page-break input:checkbox").prop("checked",s.get_PageBreakBefore()),i("#paragraph-page-orphan input:checkbox").prop("checked",s.get_WidowControl()),i("#paragraph-page-keeptogether input:checkbox").prop("checked",s.get_KeepLines()),i("#paragraph-page-keepnext input:checkbox").prop("checked",s.get_KeepNext());var m=s.get_Shade(),h="transparent";if(!a.isNull(m)&&!a.isUndefined(m)&&m.get_Value()===Asc.c_oAscShdClear){var g=m.get_Color();g&&(h=g.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(g.get_r(),g.get_g(),g.get_b()),effectValue:g.get_value()}:Common.Utils.ThemeColor.getHexColor(g.get_r(),g.get_g(),g.get_b()))}i("#paragraph-background .color-preview").css("background-color","transparent"===h?h:"#"+(a.isObject(h)?h.color:h));var v=e.getView("EditParagraph").paletteBackgroundColor;v&&v.select(h),i("#paragraph-list input[name=paragraph-style]").val([t])}},onStyleClick:function(e,t){var a=i(t.currentTarget).find("input");a&&this.api.put_Style(a.prop("value"))},getStyles:function(){return l||[]},getThumbSize:function(){return e||{width:0,height:0}},onBackgroundColor:function(e,t){var n=this;if(i("#paragraph-background .color-preview").css("background-color","transparent"===t?t:"#"+(a.isObject(t)?t.color:t)),n.api){var o=new Asc.asc_CParagraphProperty;o.put_Shade(new Asc.asc_CParagraphShd),"transparent"==t?o.get_Shade().put_Value(Asc.c_oAscShdNil):(o.get_Shade().put_Value(Asc.c_oAscShdClear),o.get_Shade().put_Color(Common.Utils.ThemeColor.getRgbColor(t))),n.api.paraApply(o)}},onDistanceBefore:function(e){var t,a,n=i(e.currentTarget),s=o.spaceBefore;t=Common.Utils.Metric.getCurrentMetric()==Common.Utils.Metric.c_MetricUnits.pt?1:.01,a=Common.Utils.Metric.fnRecalcFromMM(558.8),s=n.hasClass("decrement")?Math.max(-1,s-t):Math.min(a,s+t);var r=parseFloat(s.toFixed(2));o.spaceBefore=s,i("#paragraph-distance-before .item-after label").text(o.spaceBefore<0?"Auto":r+" "+c),this.api.put_LineSpacingBeforeAfter(0,o.spaceBefore<0?-1:Common.Utils.Metric.fnRecalcToMM(o.spaceBefore))},onDistanceAfter:function(e){var t,a,n=i(e.currentTarget),s=o.spaceAfter;t=Common.Utils.Metric.getCurrentMetric()==Common.Utils.Metric.c_MetricUnits.pt?1:.01,a=Common.Utils.Metric.fnRecalcFromMM(558.8),s=n.hasClass("decrement")?Math.max(-1,s-t):Math.min(a,s+t);var r=parseFloat(s.toFixed(2));o.spaceAfter=s,i("#paragraph-distance-after .item-after label").text(o.spaceAfter<0?"Auto":r+" "+c),this.api.put_LineSpacingBeforeAfter(1,o.spaceAfter<0?-1:Common.Utils.Metric.fnRecalcToMM(o.spaceAfter))},onSpinFirstLine:function(e){var t,a,n,o=i(e.currentTarget),s=r.get_Ind().get_FirstLine();s=Common.Utils.Metric.fnRecalcFromMM(s),t=Common.Utils.Metric.getCurrentMetric()==Common.Utils.Metric.c_MetricUnits.pt?1:.1,a=Common.Utils.Metric.fnRecalcFromMM(-558.7),n=Common.Utils.Metric.fnRecalcFromMM(558.7),s=o.hasClass("decrement")?Math.max(a,s-t):Math.min(n,s+t);var l=parseFloat(s.toFixed(2));i("#paragraph-spin-first-line .item-after label").text(l+" "+c),s=Common.Utils.Metric.fnRecalcToMM(s);var d=new Asc.asc_CParagraphProperty;r.get_Ind().put_FirstLine(s),d.get_Ind().put_FirstLine(s),this.api.paraApply(d)},onSpaceBetween:function(e){var t=i(e.currentTarget);this.api.put_AddSpaceBetweenPrg(t.is(":checked"))},onBreakBefore:function(e){var t=i(e.currentTarget),a=new Asc.asc_CParagraphProperty;a.put_PageBreakBefore(t.is(":checked")),this.api.paraApply(a)},onOrphan:function(e){var t=i(e.currentTarget),a=new Asc.asc_CParagraphProperty;a.put_WidowControl(t.is(":checked")),this.api.paraApply(a)},onKeepTogether:function(e){var t=i(e.currentTarget),a=new Asc.asc_CParagraphProperty;a.put_KeepLines(t.is(":checked")),this.api.paraApply(a)},onKeepNext:function(e){var t=i(e.currentTarget),a=new Asc.asc_CParagraphProperty;a.put_KeepNext(t.is(":checked")),this.api.paraApply(a)},onApiFocusObject:function(e){n=e;var t=[];if(a.each(n,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Paragraph&&t.push(e)}),t.length>0){var i=t[t.length-1];s=i.get_ObjectValue()}else s=void 0},onApiInitEditorStyles:function(t){window.styles_loaded=!1,t.length<1||(l=[],e={width:t.STYLE_THUMBNAIL_WIDTH,height:t.STYLE_THUMBNAIL_HEIGHT},a.each(t.get_MergedStyles(),function(e){l.push({image:e.asc_getImage(),name:e.get_Name()})}),window.styles_loaded=!0)},onApiParagraphStyleChange:function(e){t=e,i("#paragraph-list input[name=paragraph-style]").val([t])}}}(),DE.Controllers.EditParagraph||{}))}),define("text!documenteditor/mobile/app/template/EditHeader.template",[],function(){return'<div id="edit-header-root"><div class="list-block"><ul><li id="header-diff-first"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textDiffFirst %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="header-diff-odd"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textDiffOdd %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="header-same-as"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textSameAs %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title"><%= scope.textPageNumbering %></div><div class="list-block"><ul><li id="header-numbering-continue"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textPrev %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="header-numbering-start"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textFrom %></div><div class="item-after splitter"> <% if (!android) { %><label></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div></div>'}),define("documenteditor/mobile/app/view/edit/EditHeader",["text!documenteditor/mobile/app/template/EditHeader.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditHeader=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){DE.getController("EditHeader").initSettings(),Common.Utils.addScrollIfNeed("#edit-header .pages","#edit-header .page")},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-header-root").html():""},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e])}},textDiffFirst:"Different first page",textDiffOdd:"Different odd and even pages",textSameAs:"Link to Previous",textPageNumbering:"Page Numbering",textPrev:"Continue from previous section",textFrom:"Start at"}}(),DE.Views.EditHeader||{}))}),define("documenteditor/mobile/app/controller/edit/EditHeader",["core","documenteditor/mobile/app/view/edit/EditHeader","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditHeader=n.Controller.extend(a.extend(function(){var e=[],t=void 0,n=1;return{models:[],collections:[],views:["EditHeader"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",a.bind(this.categoryShow,this)),this.addListeners({EditHeader:{"page:show":this.onPageShow}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t))},onLaunch:function(){this.createView("EditHeader").render()},initEvents:function(){var e=this;i("#header-diff-first input:checkbox").single("change",a.bind(e.onDiffFirst,e)),i("#header-diff-odd input:checkbox").single("change",a.bind(e.onDiffOdd,e)),i("#header-same-as input:checkbox").single("change",a.bind(e.onSameAs,e)),i("#header-numbering-continue input:checkbox").single("change",a.bind(e.onNumberingContinue,e)),i("#header-numbering-start .button").single("click",a.bind(e.onStartAt,e)),e.initSettings()},categoryShow:function(e){var t=i(e.currentTarget);t&&"edit-header"===t.prop("id")&&this.initSettings()},onPageShow:function(){this.initSettings()},initSettings:function(){if(t){i("#header-diff-first input:checkbox").prop("checked",t.get_DifferentFirst()),i("#header-diff-odd input:checkbox").prop("checked",t.get_DifferentEvenOdd());var e=t.get_LinkToPrevious();i("#header-same-as input:checkbox").prop("checked",!!e),i("#header-same-as").toggleClass("disabled",null===e),e=t.get_StartPageNumber(),i("#header-numbering-continue input:checkbox").prop("checked",e<0),i("#header-numbering-start").toggleClass("disabled",e<0),e>=0&&(n=e),i("#header-numbering-start .item-after label").text(n)}},onDiffFirst:function(e){var t=i(e.currentTarget);this.api.HeadersAndFooters_DifferentFirstPage(t.is(":checked"))},onDiffOdd:function(e){var t=i(e.currentTarget);this.api.HeadersAndFooters_DifferentOddandEvenPage(t.is(":checked"))},onSameAs:function(e){var t=i(e.currentTarget);this.api.HeadersAndFooters_LinkToPrevious(t.is(":checked"))},onNumberingContinue:function(e){var t=i(e.currentTarget);i("#header-numbering-start").toggleClass("disabled",t.is(":checked")),this.api.asc_SetSectionStartPage(t.is(":checked")?-1:n)},onStartAt:function(e){var t=i(e.currentTarget),a=n;a=t.hasClass("decrement")?Math.max(1,--a):Math.min(2147483646,++a),n=a,i("#header-numbering-start .item-after label").text(a),this.api.asc_SetSectionStartPage(a)},onApiFocusObject:function(i){e=i;var n=[];if(a.each(e,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Header&&n.push(e)}),n.length>0){var o=n[n.length-1];t=o.get_ObjectValue()}else t=void 0}}}(),DE.Controllers.EditHeader||{}))}),define("text!documenteditor/mobile/app/template/EditTable.template",[],function(){
return'<div id="edit-table-root"><div class="list-block"><ul><li id="table-insert"><div class="item-content buttons"><div class="item-inner"><div class="row"><a id="insert-column-left" class="button no-ripple"><i class="icon icon-table-add-column-left"></i></a> <a id="insert-column-right" class="button no-ripple"><i class="icon icon-table-add-column-right"></i></a> <a id="insert-row-above" class="button no-ripple"><i class="icon icon-table-add-row-above"></i></a> <a id="insert-row-below" class="button no-ripple"><i class="icon icon-table-add-row-below"></i></a></div></div></div></li><li id="table-remove"><div class="item-content buttons"><div class="item-inner"><div class="row"><a id="remove-column" class="button no-ripple"><i class="icon icon-table-remove-column"></i></a> <a id="remove-row" class="button no-ripple"><i class="icon icon-table-remove-row"></i></a></div></div></div></li><li> <% if (!android) { %> <a id="table-remove-all" class="item-link list-button" style="text-align: center; color: #f00"><%= scope.textRemoveTable %></a> <% } %> </li></ul> <% if (android) { %> <a id="table-remove-all" class="button button-raised button-fill" style="margin: 20px 16px; background-color: #f44336;"><%= scope.textRemoveTable %></a> <% } %> </div><div class="list-block"><ul><li><a id="table-options" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textTableOptions %></div></div></div></a></li><li><a id="table-style" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textStyle %></div></div></div></a></li><li><a id="table-wrap" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWrap %></div></div></div></a></li></ul></div></div><div id="edit-table-wrap"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textWrap %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" id="edit-tablewrap-page" data-page="edit-table-wrap"><div class="page-content"><div class="list-block" id="table-wrap-type"><ul><li><label class="label-radio item-content"><input type="radio" name="table-wrap" value="inline"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-table-inline"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInline %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="table-wrap" value="flow"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-table-flow"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textFlow %></div></div></label></li></ul></div><div class="list-block"><ul><li id="table-move-text"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWithText %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title flow"><%= scope.textFromText %></div><div class="list-block flow" style="margin-bottom: 40px;"><ul><li id="table-distance"><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="200" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li></ul></div><div class="content-block-title inline"><%= scope.textAlign %></div><div class="list-block inline" style="margin-bottom: 40px;"><ul><li id="table-align"><div class="item-content buttons"><div class="item-inner"><div class="row"><a id="table-align-left" class="button no-ripple"><i class="icon icon-block-align-left"></i></a> <a id="table-align-center" class="button no-ripple"><i class="icon icon-block-align-center"></i></a> <a id="table-align-right" class="button no-ripple"><i class="icon icon-block-align-right"></i></a></div></div></div></li></ul></div></div></div></div><div id="edit-table-options"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textOptions %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-table-wrap"><div class="page-content"><div class="list-block"><ul><li id="table-option-repeatasheader"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textRepeatHeader %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="table-option-resizetofit"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textResizeFit %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title"><%= scope.textCellMargins %></div><div class="list-block" style="margin-bottom: 40px;"><ul><li id="table-options-margins"><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="150" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li></ul></div></div></div></div><div id="edit-table-style"><div class="navbar"><div class="navbar-inner edit-table-style" data-page="edit-table-style"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding categories"> <% if (android) { %> <div class="toolbar tabbar"><div data-page="index" class="toolbar-inner"><a href="#tab-table-style" data-type="style" class="tab-link active"><%= scope.textStyle %></a><a href="#tab-table-fill" data-type="fill" class="tab-link"><%= scope.textFill %></a><a href="#tab-table-border" data-type="border" class="tab-link"><%= scope.textBorder %></a></div></div> <% } else { %> <div class="buttons-row"><a href="#tab-table-style" data-type="style" class="tab-link button active"><%= scope.textStyle %></a><a href="#tab-table-fill" data-type="fill" class="tab-link button"><%= scope.textFill %></a><a href="#tab-table-border" data-type="border" class="tab-link button"><%= scope.textBorder %></a></div> <% } %> </div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-table-style"><div class="tabs-animated-wrap"><div class="tabs"><div id="tab-table-style" class="page-content tab active"><div class="list-block"><ul><li id="edit-table-styles"><div class="item-content"><div class="item-inner"></div></div></li></ul></div><div class="list-block" style="margin-bottom: 40px;"><ul><li><a id="edit-table-style-options" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textStyleOptions %></div></div></div></a></li></ul></div></div><div id="tab-table-fill" class="page-content tab"></div><div id="tab-table-border" class="page-content tab"><div class="list-block"><ul><li id="edit-table-bordersize"><div style="padding: 15px 0 0 15px;"><%= scope.textSize %></div><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="7" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li><li><a id="edit-table-bordercolor" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textColor %></div><div class="item-after"><div class="color-preview"></div></div></div></div></a></li><li id="edit-table-bordertypes"><div class="item-content buttons" style="-webkit-flex-flow: row wrap;justify-content: space-around;"><div class="item-inner" style="margin: 20px 0;"><div class="row"><a class="button no-ripple" style="min-width:0;" data-type="lrtbcm"><i class="icon icon-table-borders-all"></i></a> <a class="button no-ripple" style="min-width:0;" data-type=""><i class="icon icon-table-borders-none"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="cm"><i class="icon icon-table-borders-inner"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="lrtb"><i class="icon icon-table-borders-outer"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="l"><i class="icon icon-table-borders-left"></i></a></div></div><div class="item-inner" style="margin: 0 0 20px;"><div class="row"><a class="button no-ripple" style="min-width:0;" data-type="c"><i class="icon icon-table-borders-center"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="r"><i class="icon icon-table-borders-right"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="t"><i class="icon icon-table-borders-top"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="m"><i class="icon icon-table-borders-middle"></i></a> <a class="button no-ripple" style="min-width:0;" data-type="b"><i class="icon icon-table-borders-bottom"></i></a></div></div></div></li></ul></div></div></div></div></div></div><div id="edit-table-style-options-view"><div class="navbar"><div class="navbar-inner" data-page="edit-table-style-options"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textOptions %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-table-style-options"><div class="page-content"><div class="list-block"><ul><li id="table-options-header-row"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textHeaderRow %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="table-options-total-row"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textTotalRow %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="table-options-banded-row"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textBandedRow %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="list-block"><ul><li id="table-options-first-column"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textFirstColumn %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="table-options-last-column"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textLastColumn %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="table-options-banded-column"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textBandedColumn %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div></div></div></div><div id="edit-table-border-color-view"><div class="navbar"><div class="navbar-inner" data-page="edit-table-border-color"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textColor %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-table-border-color"><div class="page-content"></div></div></div>'}),define("documenteditor/mobile/app/view/edit/EditTable",["text!documenteditor/mobile/app/template/EditTable.template","jquery","underscore","backbone","common/mobile/lib/component/ThemeColorPalette"],function(e,t,i,a){"use strict";DE.Views.EditTable=a.View.extend(i.extend(function(){var a=[];return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",i.bind(this.categoryShow,this))},initEvents:function(){var e=this;t("#table-wrap").single("click",i.bind(e.showTableWrap,e)),t("#table-style").single("click",i.bind(e.showTableStyle,e)),t("#table-options").single("click",i.bind(e.showTableOptions,e)),t("#edit-table-style-options").single("click",i.bind(e.showTableStyleOptions,e)),t("#edit-table-bordercolor").single("click",i.bind(e.showBorderColor,e)),t(".edit-table-style .categories a").single("click",i.bind(e.showStyleCategory,e)),Common.Utils.addScrollIfNeed("#edit-table .pages","#edit-table .page"),e.initControls(),e.renderStyles()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-table-root").html():""},initControls:function(){},updateStyles:function(e){a=e,this.renderStyles()},renderStyles:function(){var e=t("#edit-table-styles .item-inner");if(e.length>0){var n=parseInt(e.width()/70),o=-1,s=[];i.each(a,function(e,t){0==t%n&&(s.push([]),o++),s[o].push(e)});var r=i.template(['<div class="dataview table-styles" style="width: 100%;">',"<% _.each(styles, function(row) { %>",'<div class="row">',"<% _.each(row, function(style) { %>",'<div data-type="<%= style.templateId %>">','<img src="<%= style.imageUrl %>">',"</div>","<% }); %>","</div>","<% }); %>","</div>"].join(""))({styles:s});e.html(r)}},categoryShow:function(e){},showStyleCategory:function(e){t(".page[data-page=edit-table-style] .list-block.inputs-list").removeClass("inputs-list"),"fill"==t(e.currentTarget).data("type")&&this.fireEvent("page:show",[this,"#edit-table-style"])},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e]),this.initEvents()}},showTableWrap:function(){this.showPage("#edit-table-wrap")},showTableStyle:function(){this.showPage("#edit-table-style",!0),this.paletteFillColor=new Common.UI.ThemeColorPalette({el:t("#tab-table-fill"),transparent:!0}),this.fireEvent("page:show",[this,"#edit-table-style"])},showBorderColor:function(){this.showPage("#edit-table-border-color-view",!0),this.paletteBorderColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-table-border-color] .page-content")}),this.fireEvent("page:show",[this,"#edit-table-border-color-view"])},showTableOptions:function(){this.showPage("#edit-table-options")},showTableStyleOptions:function(){this.showPage("#edit-table-style-options-view")},textRemoveTable:"Remove Table",textTableOptions:"Table Options",textStyle:"Style",textWrap:"Wrap",textBack:"Back",textInline:"Inline",textFlow:"Flow",textWithText:"Move with Text",textFromText:"Distance from Text",textAlign:"Align",textOptions:"Options",textRepeatHeader:"Repeat as Header Row",textResizeFit:"Resize to Fit Content",textCellMargins:"Cell Margins",textFill:"Fill",textBorder:"Border",textStyleOptions:"Style Options",textSize:"Size",textColor:"Color",textHeaderRow:"Header Row",textTotalRow:"Total Row",textBandedRow:"Banded Row",textFirstColumn:"First Column",textLastColumn:"Last Column",textBandedColumn:"Banded Column"}}(),DE.Views.EditTable||{}))}),define("documenteditor/mobile/app/controller/edit/EditTable",["core","documenteditor/mobile/app/view/edit/EditTable","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditTable=n.Controller.extend(a.extend(function(){var e=[],t=Common.Utils.Metric.getCurrentMetricName(),n=void 0,o={},s=void 0,r="000000",l=.5,c={TABLE_WRAP_NONE:0,TABLE_WRAP_PARALLEL:1},d={TABLE_ALIGN_LEFT:0,TABLE_ALIGN_CENTER:1,TABLE_ALIGN_RIGHT:2},p=function(){var e=[0,.5,1,1.5,2.25,3,4.5,6];return{sizeByIndex:function(t){return t<1?e[0]:t>e.length-1?e[e.length-1]:e[t]},indexSizeByValue:function(t){var i=0;return a.each(e,function(e,a){Math.abs(e-t)<.25&&(i=a)}),i},sizeByValue:function(t){return e[this.indexSizeByValue(t)]}}}();return{models:[],collections:[],views:["EditTable"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),this.addListeners({EditTable:{"page:show":this.onPageShow}});var e=this;uiApp.onPageBack("edit-table-style-options",function(t){i(".dataview.table-styles .row div").single("click",a.bind(e.onStyleClick,e)),e.initSettings("#edit-table-style")})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t)),t.api.asc_registerCallback("asc_onInitTableTemplates",a.bind(t.onApiInitTemplates,t))},onLaunch:function(){this.createView("EditTable").render()},initEvents:function(){var e=this;i("#table-remove-all").single("click",a.bind(function(){e.api.remTable(),e._closeIfNeed()},e)),i("#insert-column-left").single("click",a.bind(function(){e.api.addColumnLeft(),e._closeIfNeed()},e)),i("#insert-column-right").single("click",a.bind(function(){e.api.addColumnRight(),e._closeIfNeed()},e)),i("#insert-row-above").single("click",a.bind(function(){e.api.addRowAbove(),e._closeIfNeed()},e)),i("#insert-row-below").single("click",a.bind(function(){e.api.addRowBelow(),e._closeIfNeed()},e)),i("#remove-column").single("click",a.bind(function(){e.api.remColumn(),e._closeIfNeed()},e)),i("#remove-row").single("click",a.bind(function(){e.api.remRow(),e._closeIfNeed()},e)),e.initSettings()},onPageShow:function(e,t){var n=this,o=n.getView("EditTable").paletteFillColor,s=n.getView("EditTable").paletteBorderColor;i("#table-wrap-type li").single("click",a.buffered(n.onWrapType,100,n)),i("#table-move-text input:checkbox").single("change",a.bind(n.onWrapMoveText,n)),i("#table-distance input").single("change touchend",a.buffered(n.onWrapDistance,100,n)),i("#table-distance input").single("input",a.bind(n.onWrapDistanceChanging,n)),i("#table-align-left").single("click",a.bind(n.onWrapAlign,n,d.TABLE_ALIGN_LEFT)),i("#table-align-center").single("click",a.bind(n.onWrapAlign,n,d.TABLE_ALIGN_CENTER)),i("#table-align-right").single("click",a.bind(n.onWrapAlign,n,d.TABLE_ALIGN_RIGHT)),i("#table-option-repeatasheader input:checkbox").single("change",a.bind(n.onOptionRepeat,n)),i("#table-option-resizetofit input:checkbox").single("change",a.bind(n.onOptionResize,n)),i("#table-options-margins input").single("change touchend",a.buffered(n.onOptionMargin,100,n)),i("#table-options-margins input").single("input",a.bind(n.onOptionMarginChanging,n)),i("#table-options-header-row input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,0)),i("#table-options-total-row input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,1)),i("#table-options-banded-row input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,2)),i("#table-options-first-column input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,3)),i("#table-options-last-column input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,4)),i("#table-options-banded-column input:checkbox").single("change",a.bind(n.onCheckTemplateChange,n,5)),i("#edit-table-bordertypes a").single("click",a.bind(n.onBorderTypeClick,n)),i(".dataview.table-styles .row div").single("click",a.bind(n.onStyleClick,n)),i("#edit-table-bordersize input").single("change touchend",a.buffered(n.onBorderSize,100,n)),i("#edit-table-bordersize input").single("input",a.bind(n.onBorderSizeChanging,n)),o&&o.on("select",a.bind(n.onFillColor,n)),s&&s.on("select",a.bind(n.onBorderColor,n)),n.initSettings(t)},initSettings:function(e){var i=this;t=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),n&&("#edit-table-wrap"==e?(i._initWrappView(),Common.Utils.addScrollIfNeed(".page[data-page=edit-table-wrap]",".page[data-page=edit-table-wrap] .page-content")):"#edit-table-style"==e||"#edit-table-border-color-view"==e?(i._initStyleView(),"#edit-table-border-color-view"==e?Common.Utils.addScrollIfNeed(".page[data-page=edit-table-border-color]",".page[data-page=edit-table-border-color] .page-content"):Common.Utils.addScrollIfNeed(".page[data-page=edit-table-style]",".page[data-page=edit-table-style] .page-content"),Common.Utils.addScrollIfNeed("#tab-table-border .list-block","#tab-table-border .list-block ul"),Common.Utils.addScrollIfNeed("#tab-table-fill .list-block","#tab-table-fill .list-block ul"),Common.Utils.addScrollIfNeed("#tab-table-style .list-block","#tab-table-style .list-block ul")):"#edit-table-options"==e?(Common.Utils.addScrollIfNeed(".page[data-page=edit-table-wrap]",".page[data-page=edit-table-wrap] .page-content"),i._initTableOptionsView()):"#edit-table-style-options-view"==e&&(Common.Utils.addScrollIfNeed(".page[data-page=edit-table-style-options]",".page[data-page=edit-table-style-options] .page-content"),i._initStyleOptionsView()))},_initStyleOptionsView:function(){i("#table-options-header-row input").prop("checked",o.get_FirstRow()),i("#table-options-total-row input").prop("checked",o.get_LastRow()),i("#table-options-banded-row input").prop("checked",o.get_BandHor()),i("#table-options-first-column input").prop("checked",o.get_FirstCol()),i("#table-options-last-column input").prop("checked",o.get_LastCol()),i("#table-options-banded-column input").prop("checked",o.get_BandVer())},_initTableOptionsView:function(){i("#table-option-repeatasheader input").prop("checked",!!n.get_RowsInHeader()),null===n.get_RowsInHeader()?i("#table-option-repeatasheader").addClass("disabled"):i("#table-option-repeatasheader").removeClass("disabled"),i("#table-option-resizetofit input").prop("checked",n.get_TableLayout()==Asc.c_oAscTableLayout.AutoFit);var e=n.get_CellMargins();if(e){var a=Common.Utils.Metric.fnRecalcFromMM(e.get_Left());i("#table-options-margins input").val(a),i("#table-options-margins .item-after").text(a+" "+t)}},_initWrappView:function(){var e=this,a=n.get_TableWrap()==c.TABLE_WRAP_NONE?"inline":"flow";i("#table-wrap-type input").val([a]),e._uiTransformByWrap(a),i("#table-move-text input").prop("checked",n.get_PositionV()&&n.get_PositionV().get_RelativeFrom()==Asc.c_oAscVAnchor.Text);var o=n.get_TableAlignment();i("#table-align-left").toggleClass("active",o==d.TABLE_ALIGN_LEFT),i("#table-align-center").toggleClass("active",o==d.TABLE_ALIGN_CENTER),i("#table-align-right").toggleClass("active",o==d.TABLE_ALIGN_RIGHT);var s=n.get_TablePaddings();if(s){var r=Common.Utils.Metric.fnRecalcFromMM(s.get_Top());i("#table-distance input").val(r),i("#table-distance .item-after").text(r+" "+t)}},_initStyleView:function(){var e=this,t=n.get_TableStyle();i("#edit-table-styles .table-styles div").removeClass("active"),i("#edit-table-styles .table-styles div[data-type="+t+"]").addClass("active");var o=n.get_CellsBackground(),s="transparent";if(o&&0==o.get_Value()){var c=o.get_Color();c&&(s=c.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(c.get_r(),c.get_g(),c.get_b()),effectValue:c.get_value()}:Common.Utils.ThemeColor.getHexColor(c.get_r(),c.get_g(),c.get_b()))}var d=e.getView("EditTable").paletteFillColor;d&&d.select(s),i("#edit-table-bordersize input").val([p.indexSizeByValue(l)]),i("#edit-table-bordersize .item-after").text(p.sizeByValue(l)+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt));var u=e.getView("EditTable").paletteBorderColor;u&&u.select(r),i("#edit-table-bordercolor .color-preview").css("background-color","transparent"==r?r:"#"+(a.isObject(r)?r.color:r))},_updateBordersStyle:function(e){s=new Asc.CBorders;var t=s,i=""!=e;(e.indexOf("l")>-1||!i)&&(null!==t.get_Left()&&void 0!==t.get_Left()||t.put_Left(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_Left(),i)),(e.indexOf("t")>-1||!i)&&(null!==t.get_Top()&&void 0!==t.get_Top()||t.put_Top(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_Top(),i)),(e.indexOf("r")>-1||!i)&&(null!==t.get_Right()&&void 0!==t.get_Right()||t.put_Right(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_Right(),i)),(e.indexOf("b")>-1||!i)&&(null!==t.get_Bottom()&&void 0!==t.get_Bottom()||t.put_Bottom(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_Bottom(),i)),(e.indexOf("c")>-1||!i)&&(null!==t.get_InsideV()&&void 0!==t.get_InsideV()||t.put_InsideV(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_InsideV(),i)),(e.indexOf("m")>-1||!i)&&(null!==t.get_InsideH()&&void 0!==t.get_InsideH()||t.put_InsideH(new Asc.asc_CTextBorder),this._updateBorderStyle(t.get_InsideH(),i))},_updateBorderStyle:function(e,t){if(a.isNull(e)&&(e=new Asc.asc_CTextBorder),t&&l>0){var i=parseFloat(l);e.put_Value(1),e.put_Size(25.4*i/72);var n=Common.Utils.ThemeColor.getRgbColor(r);e.put_Color(n)}else e.put_Value(0)},getTable:function(){return n},onWrapType:function(e){var t=this,a=i(e.currentTarget).find("input"),n=a.val();t._uiTransformByWrap(n);var o=new Asc.CTableProp;"inline"==n?o.put_TableWrap(c.TABLE_WRAP_NONE):o.put_TableWrap(c.TABLE_WRAP_PARALLEL),t.api.tblApply(o)},onWrapMoveText:function(e){var t=this,a=i(e.currentTarget),o=a.is(":checked"),s=new Asc.CTableProp,r=new Asc.CTablePositionV;r.put_UseAlign(!1),r.put_RelativeFrom(o?Asc.c_oAscVAnchor.Text:Asc.c_oAscVAnchor.Page),r.put_Value(n.get_Value_Y(o?Asc.c_oAscVAnchor.Text:Asc.c_oAscVAnchor.Page)),s.put_PositionV(r),t.api.tblApply(s)},onWrapDistance:function(e){var a=this,n=i(e.currentTarget),o=n.val(),s=new Asc.CTableProp,r=new Asc.asc_CPaddings;i("#table-distance .item-after").text(o+" "+t),o=Common.Utils.Metric.fnRecalcToMM(parseInt(o)),r.put_Top(o),r.put_Right(o),r.put_Bottom(o),r.put_Left(o),s.put_TablePaddings(r),a.api.tblApply(s)},onWrapDistanceChanging:function(e){var a=i(e.currentTarget);i("#table-distance .item-after").text(a.val()+" "+t)},onWrapAlign:function(e,t){var a=this,n=i(t.currentTarget),o=new Asc.CTableProp;i("#table-align .button").removeClass("active"),n.addClass("active"),o.put_TableAlignment(e),a.api.tblApply(o)},onOptionRepeat:function(e){var t=this,a=i(e.currentTarget),n=new Asc.CTableProp;n.put_RowsInHeader(a.is(":checked")),t.api.tblApply(n)},onOptionResize:function(e){var t=this,a=i(e.currentTarget),n=new Asc.CTableProp;n.put_TableLayout(a.is(":checked")?Asc.c_oAscTableLayout.AutoFit:Asc.c_oAscTableLayout.Fixed),t.api.tblApply(n)},onOptionMargin:function(e){var a=this,n=i(e.currentTarget),o=n.val(),s=new Asc.CTableProp,r=new Asc.CMargins;i("#table-options-margins .item-after").text(o+" "+t),o=Common.Utils.Metric.fnRecalcToMM(o),r.put_Top(o),r.put_Right(o),r.put_Bottom(o),r.put_Left(o),r.put_Flag(2),s.put_CellMargins(r),a.api.tblApply(s)},onOptionMarginChanging:function(e){var a=i(e.currentTarget);i("#table-options-margins .item-after").text(a.val()+" "+t)},onCheckTemplateChange:function(e,t){if(this.api){var a=new Asc.CTableProp;switch(e){case 0:o.put_FirstRow(i("#table-options-header-row input").is(":checked"));break;case 1:o.put_LastRow(i("#table-options-total-row input").is(":checked"));break;case 2:o.put_BandHor(i("#table-options-banded-row input").is(":checked"));break;case 3:o.put_FirstCol(i("#table-options-first-column input").is(":checked"));break;case 4:o.put_LastCol(i("#table-options-last-column input").is(":checked"));break;case 5:o.put_BandVer(i("#table-options-banded-column input").is(":checked"))}a.put_TableLook(o),this.api.tblApply(a)}},onBorderTypeClick:function(e){var t=this,n=i(e.currentTarget),o=n.data("type");if(this._updateBordersStyle(o),t.api){var r=new Asc.CTableProp;s=a.isUndefined(s)?new Asc.CBorders:s,r.put_CellBorders(s),r.put_CellSelect(!0),t.api.tblApply(r)}},onFillColor:function(e,t){if(this.api){var i=new Asc.CTableProp,a=new Asc.CBackground;i.put_CellsBackground(a),"transparent"==t?a.put_Value(1):(a.put_Value(0),a.put_Color(Common.Utils.ThemeColor.getRgbColor(t))),i.put_CellSelect(!0),this.api.tblApply(i)}},onBorderColor:function(e,t){r=t,i("#edit-table-bordercolor .color-preview").css("background-color","transparent"==t?t:"#"+(a.isObject(t)?t.color:t))},onStyleClick:function(e){var t=this,a=i(e.currentTarget),n=a.data("type"),o=new Asc.CTableProp;i("#edit-table-styles .table-styles div").removeClass("active"),a.addClass("active"),o.put_TableStyle(n),t.api.tblApply(o)},onBorderSize:function(e){var t=i(e.currentTarget),a=t.val();l=p.sizeByIndex(parseInt(a))},onBorderSizeChanging:function(e){var t=i(e.currentTarget);i("#edit-table-bordersize .item-after").text(p.sizeByIndex(t.val())+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt))},onApiFocusObject:function(t){e=t;var i=[];if(a.each(e,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Table&&i.push(e)}),i.length>0){var s=i[i.length-1];n=s.get_ObjectValue(),o=n.get_TableLook()}else n=void 0},onApiInitTemplates:function(e){var t=[];a.each(e,function(e){t.push({imageUrl:e.asc_getImage(),templateId:e.asc_getId()})}),this.getView("EditTable").updateStyles(t)},_closeIfNeed:function(){this._isTableInStack()||DE.getController("EditContainer").hideModal()},_isTableInStack:function(){var t=!1;return a.some(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Table)return t=!0,!0}),t},_uiTransformByWrap:function(e){"inline"==e?(i("#edit-tablewrap-page .inline").show(),i("#edit-tablewrap-page .flow").hide(),i("#table-move-text").addClass("disabled")):(i("#edit-tablewrap-page .inline").hide(),i("#edit-tablewrap-page .flow").show(),i("#table-move-text").removeClass("disabled"))}}}(),DE.Controllers.EditTable||{}))}),define("text!documenteditor/mobile/app/template/EditImage.template",[],function(){
return'<div id="edit-image-root"><div class="list-block"><ul><li><a id="image-wrap" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWrap %></div></div></div></a></li><li><a id="image-replace" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textReplace %></div></div></div></a></li><li><a id="image-reorder" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textReorder %></div></div></div></a></li></ul></div><div class="list-block"><ul><li> <% if (android) { %> <a id="image-default" class="button button-raised button-fill" style="margin: 20px 16px;"><%= scope.textDefault %></a> <% } else { %> <a id="image-default" class="item-link list-button" style="text-align: center;"><%= scope.textDefault %></a> <% } %> </li><li> <% if (android) { %> <a id="image-remove" class="button button-raised button-fill" style="margin: 20px 16px; background-color: #f44336;"><%= scope.textRemove %></a> <% } else { %> <a id="image-remove" class="item-link list-button" style="text-align: center; color: #f00"><%= scope.textRemove %></a> <% } %> </li></ul></div></div><div id="edit-image-reorder-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textReorder %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page image-reorder"><div class="page-content"><div class="list-block"><ul><li><a data-type="all-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-foreground"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToForeground %></div></div></div></a></li><li><a data-type="all-down" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-background"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToBackground %></div></div></div></a></li><li><a data-type="move-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-forward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textForward %></div></div></div></a></li><li><a data-type="move-down" class="item-link no-indicator"><div data-type="move-down" class="item-content"><div class="item-media"><i class="icon icon-move-backward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textBackward %></div></div></div></a></li></ul></div></div></div></div><div id="edit-image-wrap-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textWrap %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page image-wrap"><div class="page-content"><div class="list-block image-wrap-types"><ul><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="inline"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-inline"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInline %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="square"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-inline"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textSquare %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="tight"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-tight"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTight %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="through"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-through"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textThrough %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="top-bottom"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-top-bottom"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTopBottom %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="infront"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-infront"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInFront %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="image-wrap" value="behind"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-behind"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textBehind %></div></div></label></li></ul></div><div class="content-block-title align"><%= scope.textAlign %></div><div class="list-block align"><ul><li id="edit-image-align"><div class="item-content buttons"><div class="item-inner"><div class="row"><a data-type="left" class="button no-ripple"><i class="icon icon-text-align-left"></i></a> <a data-type="center" class="button no-ripple"><i class="icon icon-text-align-center"></i></a> <a data-type="right" class="button no-ripple"><i class="icon icon-text-align-right"></i></a></div></div></div></li></ul></div><div class="list-block inline"><ul><li id="edit-image-movetext"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textMoveText %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="edit-image-overlap"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textOverlap %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title distance"><%= scope.textDistanceText %></div><div class="list-block distance" style="margin-bottom: 40px;"><ul><li id="table-distance"><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="200" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li></ul></div></div></div></div><div id="edit-image-replace-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textReplace %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page"><div class="page-content"><div class="list-block"><ul><li><a id="edit-image-file" class="item-link no-indicator no-fastclick"><div class="item-content"><div class="item-media"><i class="icon icon-image-library"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFromLibrary %></div></div></div></a></li><li><a id="edit-image-url" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-link"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFromURL %></div></div></div></a></li></ul></div></div></div></div><div id="edit-image-url-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textLinkSettings %></div></div></div><div class="page edit-image-url-link"><div class="page-content"><div class="content-block-title"><%= scope.textAddress %></div><div class="list-block"><ul><li><div class="item-content"><div class="item-inner"><div class="item-input"><input type="url" placeholder="<%= scope.textImageURL %>"></div></div></div></li></ul></div><div class="list-block disabled buttons"> <% if (android) { %> <a href="#" class="button button-fill button-raised" style="margin: 20px 16px;"><%= scope.textReplaceImg %></a> <% } else { %> <ul><li><a href="#" class="list-button item-link"><%= scope.textReplaceImg %></a></li></ul> <% } %> </div></div></div></div>'}),define("documenteditor/mobile/app/view/edit/EditImage",["text!documenteditor/mobile/app/template/EditImage.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditImage=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",i.bind(this.categoryShow,this))},initEvents:function(){var e=this;t("#image-wrap").single("click",i.bind(e.showWrap,e)),t("#image-replace").single("click",i.bind(e.showReplace,e)),t("#image-reorder").single("click",i.bind(e.showReorder,e)),t("#edit-image-url").single("click",i.bind(e.showEditUrl,e)),Common.Utils.addScrollIfNeed("#edit-image .pages","#edit-image .page"),e.initControls()},categoryShow:function(e){},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-image-root").html():""},initControls:function(){},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e]),this.initEvents()}},showWrap:function(){this.showPage("#edit-image-wrap-view"),t(".image-wrap .list-block.inputs-list").removeClass("inputs-list"),Common.Utils.addScrollIfNeed(".page.image-wrap",".page.image-wrap .page-content")},showReplace:function(){this.showPage("#edit-image-replace-view")},showReorder:function(){this.showPage("#edit-image-reorder-view"),Common.Utils.addScrollIfNeed(".page.image-reorder",".page.image-reorder .page-content")},showEditUrl:function(){this.showPage("#edit-image-url-view"),t('.edit-image-url-link input[type="url"]').single("input",i.bind(function(e){t(".edit-image-url-link .buttons").toggleClass("disabled",i.isEmpty(t(e.currentTarget).val()))},this)),i.delay(function(){t('.edit-image-url-link input[type="url"]').focus()},1e3),Common.Utils.addScrollIfNeed(".page.edit-image-url-link",".page.edit-image-url-link .page-content")},textWrap:"Wrap",textReplace:"Replace",textReorder:"Reorder",textDefault:"Default Size",textRemove:"Remove Image",textBack:"Back",textToForeground:"Bring to Foreground",textToBackground:"Send to Background",textForward:"Move Forward",textBackward:"Move Backward",textInline:"Inline",textSquare:"Square",textTight:"Tight",textThrough:"Through",textTopBottom:"Top and Bottom",textInFront:"In Front",textBehind:"Behind",textAlign:"Align",textMoveText:"Move with Text",textOverlap:"Allow Overlap",textDistanceText:"Distance from Text",textFromLibrary:"Picture from Library",textFromURL:"Picture from URL",textLinkSettings:"Link Settings",textAddress:"Address",textImageURL:"Image URL",textReplaceImg:"Replace Image"}}(),DE.Views.EditImage||{}))}),define("documenteditor/mobile/app/controller/edit/EditImage",["core","documenteditor/mobile/app/view/edit/EditImage","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditImage=n.Controller.extend(a.extend(function(){var e=[],t=void 0,n=Common.Utils.Metric.getCurrentMetricName(),o=function(){var e=[{ui:"inline",sdk:Asc.c_oAscWrapStyle2.Inline},{ui:"square",sdk:Asc.c_oAscWrapStyle2.Square},{ui:"tight",sdk:Asc.c_oAscWrapStyle2.Tight},{ui:"through",sdk:Asc.c_oAscWrapStyle2.Through},{ui:"top-bottom",sdk:Asc.c_oAscWrapStyle2.TopAndBottom},{ui:"behind",sdk:Asc.c_oAscWrapStyle2.Behind},{ui:"infront",sdk:Asc.c_oAscWrapStyle2.InFront}];return{sdkToUi:function(t){var i=e.filter(function(e){return e.sdk===t})[0];return i?i.ui:""},uiToSdk:function(t){var i=e.filter(function(e){return e.ui===t})[0];return i?i.sdk:0}}}();return{models:[],collections:[],views:["EditImage"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),this.addListeners({EditImage:{"page:show":this.onPageShow}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t))},onLaunch:function(){this.createView("EditImage").render()},initEvents:function(){var e=this;i("#image-default").single("click",a.bind(e.onDefaulSize,e)),i("#image-remove").single("click",a.bind(e.onRemoveImage,e)),e.initSettings()},onPageShow:function(e,t){var n=this;i(".image-wrap .image-wrap-types li").single("click",a.buffered(n.onWrapType,100,n)),i(".image-wrap .align a").single("click",a.bind(n.onAlign,n)),i("#edit-image-movetext input").single("change",a.bind(n.onMoveText,n)),i("#edit-image-overlap input").single("change",a.bind(n.onOverlap,n)),i(".image-wrap .distance input").single("change touchend",a.buffered(n.onWrapDistance,100,n)),i(".image-wrap .distance input").single("input",a.bind(n.onWrapDistanceChanging,n)),i("#edit-image-file").single("click",a.bind(n.onReplaceByFile,n)),i(".edit-image-url-link .button, .edit-image-url-link .list-button").single("click",a.bind(n.onReplaceByUrl,n)),i(".image-reorder a").single("click",a.bind(n.onReorder,n)),n.initSettings(t)},initSettings:function(e){var i=this;n=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),t&&"#edit-image-wrap-view"==e&&i._initWrapView()},_initWrapView:function(){var e=this,a=t.get_WrappingStyle(),s=i(".image-wrap input"),r=o.sdkToUi(a);s.val([r]),e._uiTransformByWrap(r);var l=t.get_PositionH().get_Align();i(".image-wrap .align a[data-type=left]").toggleClass("active",l==Asc.c_oAscAlignH.Left),i(".image-wrap .align a[data-type=center]").toggleClass("active",l==Asc.c_oAscAlignH.Center),i(".image-wrap .align a[data-type=right]").toggleClass("active",l==Asc.c_oAscAlignH.Right),i("#edit-image-movetext input").prop("checked",t.get_PositionV().get_RelativeFrom()==Asc.c_oAscRelativeFromV.Paragraph),i("#edit-image-overlap input").prop("checked",t.get_AllowOverlap());var c=t.get_Paddings();if(c){var d=Common.Utils.Metric.fnRecalcFromMM(c.get_Top());i(".image-wrap .distance input").val(d),i(".image-wrap .distance .item-after").text(d+" "+n)}},getImage:function(){return t},onDefaulSize:function(){var e=this;if(e.api){var t=e.api.get_OriginalSizeImage(),i=new Asc.asc_CImgProperty;i.put_Width(t.get_ImageWidth()),i.put_Height(t.get_ImageHeight()),i.put_ResetCrop(!0),e.api.ImgApply(i)}},onRemoveImage:function(){this.api.asc_Remove(),DE.getController("EditContainer").hideModal()},onWrapType:function(e){var t=this,a=i(e.currentTarget).find("input"),n=a.val(),s=new Asc.asc_CImgProperty;t._uiTransformByWrap(n);var r=o.uiToSdk(n);s.put_WrappingStyle(r),t.api.ImgApply(s)},onAlign:function(e){var t=this,a=i(e.currentTarget),n=a.data("type");i(".image-wrap .align a").removeClass("active"),a.addClass("active");var o=Asc.c_oAscAlignH.Left;"center"==n?o=Asc.c_oAscAlignH.Center:"right"==n&&(o=Asc.c_oAscAlignH.Right);var s=new Asc.asc_CImgProperty;s.put_PositionH(new Asc.CImagePositionH),s.get_PositionH().put_UseAlign(!0),s.get_PositionH().put_Align(o),s.get_PositionH().put_RelativeFrom(Asc.c_oAscRelativeFromH.Page),t.api.ImgApply(s)},onMoveText:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_PositionV(new Asc.CImagePositionV),n.get_PositionV().put_UseAlign(!0),n.get_PositionV().put_RelativeFrom(a.is(":checked")?Asc.c_oAscRelativeFromV.Paragraph:Asc.c_oAscRelativeFromV.Page),t.api.ImgApply(n)},onOverlap:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_AllowOverlap(a.is(":checked")),t.api.ImgApply(n)},onWrapDistance:function(e){var t=this,a=i(e.currentTarget),o=a.val(),s=new Asc.asc_CImgProperty,r=new Asc.asc_CPaddings;i(".image-wrap .distance .item-after").text(o+" "+n),o=Common.Utils.Metric.fnRecalcToMM(parseInt(o)),r.put_Top(o),r.put_Right(o),r.put_Bottom(o),r.put_Left(o),s.put_Paddings(r),t.api.ImgApply(s)},onWrapDistanceChanging:function(e){var t=i(e.currentTarget);i(".image-wrap .distance .item-after").text(t.val()+" "+n)},onReplaceByFile:function(){this.api.ChangeImageFromFile(),DE.getController("EditContainer").hideModal()},onReplaceByUrl:function(){var e=this,t=i(".edit-image-url-link input[type=url]");if(t){var n=t.val().replace(/ /g,"");a.isEmpty(n)?uiApp.alert(e.textEmptyImgUrl):/((^https?)|(^ftp)):\/\/.+/i.test(n)?(DE.getController("EditContainer").hideModal(),a.defer(function(){var t=new Asc.asc_CImgProperty;t.put_ImageUrl(n),e.api.ImgApply(t)})):uiApp.alert(e.txtNotUrl)}},onReorder:function(e){var t=i(e.currentTarget),a=t.data("type"),n=new Asc.asc_CImgProperty;"all-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringToFront):"all-down"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.SendToBack):"move-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringForward):"move-down"==a&&n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringBackward),this.api.ImgApply(n)},onApiFocusObject:function(i){e=i;var n=[];if(a.each(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image){var t=e.get_ObjectValue();t&&a.isNull(t.get_ShapeProperties())&&a.isNull(t.get_ChartProperties())&&n.push(e)}}),n.length>0){var o=n[n.length-1];t=o.get_ObjectValue()}else t=void 0},_uiTransformByWrap:function(e){i(".image-wrap .align")["inline"==e?"hide":"show"](),i(".image-wrap .distance")["inline"==e||"behind"==e||"infront"==e?"hide":"show"](),i("#edit-image-movetext").toggleClass("disabled","inline"==e)},_closeIfNeed:function(){this._isImageInStack()||DE.getController("EditContainer").hideModal()},_isImageInStack:function(){var t=!1;return a.some(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image){var i=e.get_ObjectValue();if(i&&a.isNull(i.get_imageProperties())&&a.isNull(i.get_ChartProperties()))return t=!0,!0}}),t},textEmptyImgUrl:"You need to specify image URL.",txtNotUrl:'This field should be a URL in the format "http://www.example.com"'}}(),DE.Controllers.EditImage||{}))}),define("text!documenteditor/mobile/app/template/EditShape.template",[],function(){return'<div id="edit-shape-root"><div class="list-block"><ul><li><a id="shape-style" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textStyle %></div></div></div></a></li><li><a id="shape-wrap" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWrap %></div></div></div></a></li><li><a id="shape-replace" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textReplace %></div></div></div></a></li><li><a id="shape-reorder" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textReorder %></div></div></div></a></li></ul></div><div class="list-block"><ul><li> <% if (android) { %> <a id="shape-remove" class="button button-raised button-fill" style="margin: 20px 16px; background-color: #f44336;"><%= scope.textRemoveShape %></a> <% } else { %> <a id="shape-remove" class="item-link list-button" style="text-align: center; color: #f00"><%= scope.textRemoveShape %></a> <% } %> </li></ul></div></div><div id="edit-shape-reorder"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textReorder %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page shape-reorder"><div class="page-content"><div class="list-block"><ul><li><a data-type="all-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-foreground"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToForeground %></div></div></div></a></li><li><a data-type="all-down" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-background"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToBackground %></div></div></div></a></li><li><a data-type="move-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-forward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textForward %></div></div></div></a></li><li><a data-type="move-down" class="item-link no-indicator"><div data-type="move-down" class="item-content"><div class="item-media"><i class="icon icon-move-backward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textBackward %></div></div></div></a></li></ul></div></div></div></div><div id="edit-shape-replace"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textReplace %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page shape-replace"><div class="page-content dataview shapes"> <% _.each(shapes, function(row) { %> <ul class="row"> <% _.each(row, function(shape) { %> <li data-type="<%= shape.type %>"><div class="thumb" style="-webkit-mask-image:url(\'../mobile/resources/img/shapes/<%= shape.thumb %>\')"></div></li> <% }); %> </ul> <% }); %> </div></div></div><div id="edit-shape-wrap"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textWrap %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page shape-wrap"><div class="page-content"><div class="list-block shape-wrap-types"><ul><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="inline"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-inline"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInline %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="square"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-square"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textSquare %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="tight"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-tight"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTight %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="through"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-through"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textThrough %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="top-bottom"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-top-bottom"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTopAndBottom %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="infront"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-infront"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInFront %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="shape-wrap" value="behind"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-behind"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textBehind %></div></div></label></li></ul></div><div class="content-block-title align"><%= scope.textAlign %></div><div class="list-block align"><ul><li id="edit-shape-align"><div class="item-content buttons"><div class="item-inner"><div class="row"><a data-type="left" class="button no-ripple"><i class="icon icon-text-align-left"></i></a> <a data-type="center" class="button no-ripple"><i class="icon icon-text-align-center"></i></a> <a data-type="right" class="button no-ripple"><i class="icon icon-text-align-right"></i></a></div></div></div></li></ul></div><div class="list-block inline"><ul><li id="edit-shape-movetext"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWithText %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="edit-shape-overlap"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textOverlap %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title distance"><%= scope.textFromText %></div><div class="list-block distance" style="margin-bottom: 40px;"><ul><li id="table-distance"><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="200" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li></ul></div></div></div></div><div id="edit-shape-style"><div class="navbar"><div class="navbar-inner edit-shape-style" data-page="edit-shape-style"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding categories"> <% if (android) { %> <div class="toolbar tabbar"><div data-page="index" class="toolbar-inner"><a href="#tab-shape-fill" data-type="fill" class="tab-link active"><%= scope.textFill %></a><a href="#tab-shape-border" data-type="border" class="tab-link"><%= scope.textBorder %></a><a href="#tab-shape-effects" data-type="effects" class="tab-link"><%= scope.textEffects %></a></div></div> <% } else { %> <div class="buttons-row"><a href="#tab-shape-fill" data-type="fill" class="tab-link button active"><%= scope.textFill %></a><a href="#tab-shape-border" data-type="border" class="tab-link button"><%= scope.textBorder %></a><a href="#tab-shape-effects" data-type="effects" class="tab-link button"><%= scope.textEffects %></a></div> <% } %> </div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-shape-style"><div class="tabs-animated-wrap"><div class="tabs"><div id="tab-shape-fill" class="page-content tab active"></div><div id="tab-shape-border" class="page-content tab"><div class="list-block"><ul><li id="edit-shape-bordersize"><div style="padding: 15px 0 0 15px;"><%= scope.textSize %></div><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="7" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li><li><a id="edit-shape-bordercolor" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textColor %></div><div class="item-after"><div class="color-preview"></div></div></div></div></a></li></ul></div></div><div id="tab-shape-effects" class="page-content tab"><div class="list-block"><ul><li id="edit-shape-effect"><div style="padding: 15px 0 0 15px;"><%= scope.textOpacity %></div><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="100" value="0" step="1"></div></div><div class="item-after value">0 %</div></div></div></li></ul></div></div></div></div></div></div><div id="edit-shape-style-nofill"><div class="navbar"><div class="navbar-inner edit-shape-style" data-page="edit-shape-style"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textBorder %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-shape-style"><div class="page-content"><div class="list-block"><ul><li id="edit-shape-bordersize"><div style="padding: 15px 0 0 15px;"><%= scope.textSize %></div><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="7" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li><li><a id="edit-shape-bordercolor" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textColor %></div><div class="item-after"><div class="color-preview"></div></div></div></div></a></li></ul></div></div></div></div><div id="edit-shape-border-color-view"><div class="navbar"><div class="navbar-inner" data-page="edit-shape-border-color"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textColor %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-shape-border-color"><div class="page-content"></div></div></div>'}),
define("documenteditor/mobile/app/view/edit/EditShape",["text!documenteditor/mobile/app/template/EditShape.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditShape=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",i.bind(this.categoryShow,this)),this.isShapeCanFill=!0},initEvents:function(){var e=this;t("#shape-style").single("click",i.bind(e.showStyle,e)),t("#shape-wrap").single("click",i.bind(e.showWrap,e)),t("#shape-replace").single("click",i.bind(e.showReplace,e)),t("#shape-reorder").single("click",i.bind(e.showReorder,e)),t("#edit-shape-bordercolor").single("click",i.bind(e.showBorderColor,e)),t(".edit-shape-style .categories a").single("click",i.bind(e.showStyleCategory,e)),Common.Utils.addScrollIfNeed("#edit-shape .pages","#edit-shape .page"),e.initControls()},categoryShow:function(e){},render:function(){var e=Common.SharedSettings.get("shapes").slice();return e.splice(0,1),this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),shapes:e,scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-shape-root").html():""},initControls:function(){},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e]),this.initEvents()}},showStyleCategory:function(e){t(".page[data-page=edit-shape-style] .list-block.inputs-list").removeClass("inputs-list")},showStyle:function(){var e=this.isShapeCanFill?"#edit-shape-style":"#edit-shape-style-nofill";this.showPage(e,!0),this.isShapeCanFill||this.showStyleCategory(),this.paletteFillColor=new Common.UI.ThemeColorPalette({el:t("#tab-shape-fill"),transparent:!0}),this.fireEvent("page:show",[this,e])},showWrap:function(){this.showPage("#edit-shape-wrap"),Common.Utils.addScrollIfNeed(".page.shape-wrap",".page.shape-wrap .page-content")},showReplace:function(){this.showPage("#edit-shape-replace"),Common.Utils.addScrollIfNeed(".page.shape-replace",".page.shape-replace .page-content")},showReorder:function(){this.showPage("#edit-shape-reorder"),Common.Utils.addScrollIfNeed(".page.shape-reorder",".page.shape-reorder .page-content")},showBorderColor:function(){var e="#edit-shape-border-color-view";this.showPage(e,!0),this.paletteBorderColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-shape-border-color] .page-content")}),this.fireEvent("page:show",[this,e])},textStyle:"Style",textWrap:"Wrap",textReplace:"Replace",textReorder:"Reorder",textRemoveShape:"Remove Shape",textBack:"Back",textToForeground:"Bring to Foreground",textToBackground:"Send to Background",textForward:"Move Forward",textBackward:"Move Backward",textInline:"Inline",textSquare:"Square",textTight:"Tight",textThrough:"Through",textTopAndBottom:"Top and Bottom",textInFront:"In Front",textBehind:"Behind",textAlign:"Align",textWithText:"Move with Text",textOverlap:"Allow Overlap",textFromText:"Distance from Text",textFill:"Fill",textBorder:"Border",textEffects:"Effects",textSize:"Size",textColor:"Color",textOpacity:"Opacity"}}(),DE.Views.EditShape||{}))}),define("documenteditor/mobile/app/controller/edit/EditShape",["core","documenteditor/mobile/app/view/edit/EditShape","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditShape=n.Controller.extend(a.extend(function(){var e=[],t=void 0,n=Common.Utils.Metric.getCurrentMetricName(),o="transparent",s=function(){var e=[{ui:"inline",sdk:Asc.c_oAscWrapStyle2.Inline},{ui:"square",sdk:Asc.c_oAscWrapStyle2.Square},{ui:"tight",sdk:Asc.c_oAscWrapStyle2.Tight},{ui:"through",sdk:Asc.c_oAscWrapStyle2.Through},{ui:"top-bottom",sdk:Asc.c_oAscWrapStyle2.TopAndBottom},{ui:"behind",sdk:Asc.c_oAscWrapStyle2.Behind},{ui:"infront",sdk:Asc.c_oAscWrapStyle2.InFront}];return{sdkToUi:function(t){var i=e.filter(function(e){return e.sdk===t})[0];return i?i.ui:""},uiToSdk:function(t){var i=e.filter(function(e){return e.ui===t})[0];return i?i.sdk:0}}}(),r=function(){var e=[0,.5,1,1.5,2.25,3,4.5,6];return{sizeByIndex:function(t){return t<1?e[0]:t>e.length-1?e[e.length-1]:e[t]},indexSizeByValue:function(t){var i=0;return a.each(e,function(e,a){Math.abs(e-t)<.25&&(i=a)}),i},sizeByValue:function(t){return e[this.indexSizeByValue(t)]}}}();return{models:[],collections:[],views:["EditShape"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),this.addListeners({EditShape:{"page:show":this.onPageShow}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t))},onLaunch:function(){this.createView("EditShape").render()},initEvents:function(){var e=this;i("#shape-remove").single("click",a.bind(e.onRemoveShape,e)),e.initSettings()},onPageShow:function(e,t){var n=this;i(".shape-reorder a").single("click",a.bind(n.onReorder,n)),i(".shape-replace li").single("click",a.buffered(n.onReplace,100,n)),i(".shape-wrap .shape-wrap-types li").single("click",a.buffered(n.onWrapType,100,n)),i(".shape-wrap .align a").single("click",a.bind(n.onAlign,n)),i("#edit-shape-movetext input").single("change",a.bind(n.onMoveText,n)),i("#edit-shape-overlap input").single("change",a.bind(n.onOverlap,n)),i(".shape-wrap .distance input").single("change touchend",a.buffered(n.onWrapDistance,100,n)),i(".shape-wrap .distance input").single("input",a.bind(n.onWrapDistanceChanging,n)),i("#edit-shape-bordersize input").single("change touchend",a.buffered(n.onBorderSize,100,n)),i("#edit-shape-bordersize input").single("input",a.bind(n.onBorderSizeChanging,n)),i("#edit-shape-effect input").single("change touchend",a.buffered(n.onOpacity,100,n)),i("#edit-shape-effect input").single("input",a.bind(n.onOpacityChanging,n)),n.initSettings(t)},initSettings:function(e){var i=this;n=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),t&&("#edit-shape-wrap"==e?i._initWrapView():"#edit-shape-style"==e||"#edit-shape-style-nofill"==e||"#edit-shape-border-color-view"==e?i._initStyleView():i.getView("EditShape").isShapeCanFill=t.get_ShapeProperties().get_CanFill())},_initWrapView:function(){var e=this,a=t.get_WrappingStyle(),o=i(".shape-wrap input"),r=s.sdkToUi(a);o.val([r]),e._uiTransformByWrap(r);var l=t.get_PositionH().get_Align();i(".shape-wrap .align a[data-type=left]").toggleClass("active",l==Asc.c_oAscAlignH.Left),i(".shape-wrap .align a[data-type=center]").toggleClass("active",l==Asc.c_oAscAlignH.Center),i(".shape-wrap .align a[data-type=right]").toggleClass("active",l==Asc.c_oAscAlignH.Right),i("#edit-shape-movetext input").prop("checked",t.get_PositionV().get_RelativeFrom()==Asc.c_oAscRelativeFromV.Paragraph),i("#edit-shape-overlap input").prop("checked",t.get_AllowOverlap());var c=t.get_Paddings();if(c){var d=Common.Utils.Metric.fnRecalcFromMM(c.get_Top());i(".shape-wrap .distance input").val(d),i(".shape-wrap .distance .item-after").text(d+" "+n)}},_initStyleView:function(){var e=this,n=t.get_ShapeProperties(),o=e.getView("EditShape").paletteFillColor,s=e.getView("EditShape").paletteBorderColor,l=72*n.get_stroke().get_width()/25.4,c=n.get_stroke().get_type();i("#edit-shape-bordersize input").val([c==Asc.c_oAscStrokeType.STROKE_NONE?0:r.indexSizeByValue(l)]),i("#edit-shape-bordersize .item-after").text((c==Asc.c_oAscStrokeType.STROKE_NONE?0:r.sizeByValue(l))+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt)),i("#edit-shape-effect input").val([n.get_fill().asc_getTransparent()?n.get_fill().asc_getTransparent()/2.55:100]),i("#edit-shape-effect .item-after").text(i("#edit-shape-effect input").val()+" %"),o&&o.on("select",a.bind(e.onFillColor,e)),s&&s.on("select",a.bind(e.onBorderColor,e));var d,p,u=n.get_fill(),m=u.get_type();p="transparent",m==Asc.c_oAscFill.FILL_TYPE_SOLID&&(u=u.get_fill(),(d=u.get_color())&&(p=d.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(d.get_r(),d.get_g(),d.get_b()),effectValue:d.get_value()}:Common.Utils.ThemeColor.getHexColor(d.get_r(),d.get_g(),d.get_b()))),o&&o.select(p),e._initBorderColorView()},_initBorderColorView:function(){if(t){var e=this,n=e.getView("EditShape").paletteBorderColor,s=t.get_ShapeProperties().get_stroke(),r="transparent";if(s&&s.get_type()==Asc.c_oAscStrokeType.STROKE_COLOR){var l=s.get_color();l&&(r=l.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(l.get_r(),l.get_g(),l.get_b()),effectValue:l.get_value()}:Common.Utils.ThemeColor.getHexColor(l.get_r(),l.get_g(),l.get_b()))}o=r,n&&n.select(r),i("#edit-shape-bordercolor .color-preview").css("background-color","transparent"==r?r:"#"+(a.isObject(r)?r.color:r))}},getShape:function(){return t},onRemoveShape:function(){this.api.asc_Remove(),DE.getController("EditContainer").hideModal()},onReorder:function(e){var t=i(e.currentTarget),a=t.data("type"),n=new Asc.asc_CImgProperty;"all-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringToFront):"all-down"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.SendToBack):"move-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringForward):"move-down"==a&&n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringBackward),this.api.ImgApply(n)},onReplace:function(e){var t=i(e.currentTarget),a=t.data("type");this.api.ChangeShapeType(a)},onWrapType:function(e){var t=this,a=i(e.currentTarget).find("input"),n=a.val(),o=new Asc.asc_CImgProperty;t._uiTransformByWrap(n);var r=s.uiToSdk(n);o.put_WrappingStyle(r),t.api.ImgApply(o)},onAlign:function(e){var t=this,a=i(e.currentTarget),n=a.data("type");i(".shape-wrap .align a").removeClass("active"),a.addClass("active");var o=Asc.c_oAscAlignH.Left;"center"==n?o=Asc.c_oAscAlignH.Center:"right"==n&&(o=Asc.c_oAscAlignH.Right);var s=new Asc.asc_CImgProperty;s.put_PositionH(new Asc.CImagePositionH),s.get_PositionH().put_UseAlign(!0),s.get_PositionH().put_Align(o),s.get_PositionH().put_RelativeFrom(Asc.c_oAscRelativeFromH.Page),t.api.ImgApply(s)},onMoveText:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_PositionV(new Asc.CImagePositionV),n.get_PositionV().put_UseAlign(!0),n.get_PositionV().put_RelativeFrom(a.is(":checked")?Asc.c_oAscRelativeFromV.Paragraph:Asc.c_oAscRelativeFromV.Page),t.api.ImgApply(n)},onOverlap:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_AllowOverlap(a.is(":checked")),t.api.ImgApply(n)},onWrapDistance:function(e){var t=this,a=i(e.currentTarget),o=a.val(),s=new Asc.asc_CImgProperty,r=new Asc.asc_CPaddings;i(".shape-wrap .distance .item-after").text(o+" "+n),o=Common.Utils.Metric.fnRecalcToMM(parseInt(o)),r.put_Top(o),r.put_Right(o),r.put_Bottom(o),r.put_Left(o),s.put_Paddings(r),t.api.ImgApply(s)},onWrapDistanceChanging:function(e){var t=i(e.currentTarget);i(".shape-wrap .distance .item-after").text(t.val()+" "+n)},onBorderSize:function(e){var t=this,a=i(e.currentTarget),n=a.val(),s=new Asc.asc_CImgProperty,l=new Asc.asc_CShapeProperty,c=new Asc.asc_CStroke;n=r.sizeByIndex(parseInt(n)),n<.01?c.put_type(Asc.c_oAscStrokeType.STROKE_NONE):(c.put_type(Asc.c_oAscStrokeType.STROKE_COLOR),"transparent"==o?c.put_color(Common.Utils.ThemeColor.getRgbColor({color:"000000",effectId:29})):c.put_color(Common.Utils.ThemeColor.getRgbColor(Common.Utils.ThemeColor.colorValue2EffectId(o))),c.put_width(25.4*n/72)),l.put_stroke(c),s.put_ShapeProperties(l),t.api.ImgApply(s),t._initBorderColorView()},onBorderSizeChanging:function(e){var t=i(e.currentTarget);i("#edit-shape-bordersize .item-after").text(r.sizeByIndex(t.val())+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt))},onOpacity:function(e){var t=this,a=i(e.currentTarget),n=a.val(),o=new Asc.asc_CImgProperty,s=new Asc.asc_CShapeFill,r=new Asc.asc_CShapeProperty;s.put_transparent(parseInt(2.55*n)),r.put_fill(s),o.put_ShapeProperties(r),t.api.ImgApply(o)},onOpacityChanging:function(e){var t=i(e.currentTarget);i("#edit-shape-effect .item-after").text(t.val()+" %")},onFillColor:function(e,i){var a=this;t.get_ShapeProperties();if(a.api){var n=new Asc.asc_CImgProperty,o=new Asc.asc_CShapeProperty,s=new Asc.asc_CShapeFill;"transparent"==i?(s.put_type(Asc.c_oAscFill.FILL_TYPE_NOFILL),s.put_fill(null)):(s.put_type(Asc.c_oAscFill.FILL_TYPE_SOLID),s.put_fill(new Asc.asc_CFillSolid),s.get_fill().put_color(Common.Utils.ThemeColor.getRgbColor(i))),o.put_fill(s),n.put_ShapeProperties(o),a.api.ImgApply(n)}},onBorderColor:function(e,n){var s=this,r=t.get_ShapeProperties();if(i("#edit-shape-bordercolor .color-preview").css("background-color","transparent"==n?n:"#"+(a.isObject(n)?n.color:n)),o=n,s.api&&r&&r.get_stroke().get_type()==Asc.c_oAscStrokeType.STROKE_COLOR){var l=new Asc.asc_CImgProperty,c=new Asc.asc_CShapeProperty,d=new Asc.asc_CStroke;r.get_stroke().get_width()<.01?d.put_type(Asc.c_oAscStrokeType.STROKE_NONE):(d.put_type(Asc.c_oAscStrokeType.STROKE_COLOR),d.put_color(Common.Utils.ThemeColor.getRgbColor(n)),d.put_width(r.get_stroke().get_width()),d.asc_putPrstDash(r.get_stroke().asc_getPrstDash())),c.put_stroke(d),l.put_ShapeProperties(c),s.api.ImgApply(l)}},onApiFocusObject:function(i){e=i;var n=[];if(a.each(e,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image&&e.get_ObjectValue()&&e.get_ObjectValue().get_ShapeProperties()&&n.push(e)}),n.length>0){var o=n[n.length-1];t=o.get_ObjectValue(),this.getView("EditShape").isShapeCanFill=t.get_ShapeProperties().get_CanFill()}else t=void 0},_uiTransformByWrap:function(e){i(".shape-wrap .align")["inline"==e?"hide":"show"](),i(".shape-wrap .distance")["behind"==e||"infront"==e?"hide":"show"](),i("#edit-shape-movetext").toggleClass("disabled","inline"==e)},_closeIfNeed:function(){this._isShapeInStack()||DE.getController("EditContainer").hideModal()},_isShapeInStack:function(){var t=!1;return a.some(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image&&e.get_ObjectValue()&&e.get_ObjectValue().get_ShapeProperties())return t=!0,!0}),t}}}(),DE.Controllers.EditShape||{}))}),define("text!documenteditor/mobile/app/template/EditChart.template",[],function(){return'<div id="edit-chart-root"><div class="list-block"><ul><li><a id="chart-style" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textStyle %></div></div></div></a></li><li><a id="chart-wrap" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textWrap %></div></div></div></a></li><li><a id="chart-reorder" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textReorder %></div></div></div></a></li></ul></div><div class="list-block"> <% if (!android) { %> <ul><li><a id="chart-remove" class="item-link list-button" style="text-align: center; color: #f00"><%= scope.textRemoveChart %></a></li></ul> <% } else { %> <a id="chart-remove" class="button button-raised button-fill" style="margin: 20px 16px; background-color: #f44336;"><%= scope.textRemoveChart %></a> <% } %> </div></div><div id="edit-chart-reorder"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textReorder %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page chart-reorder"><div class="page-content"><div class="list-block"><ul><li><a data-type="all-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-foreground"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToForeground %></div></div></div></a></li><li><a data-type="all-down" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-background"></i></div><div class="item-inner"><div class="item-title"><%= scope.textToBackground %></div></div></div></a></li><li><a data-type="move-up" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-move-forward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textForward %></div></div></div></a></li><li><a data-type="move-down" class="item-link no-indicator"><div data-type="move-down" class="item-content"><div class="item-media"><i class="icon icon-move-backward"></i></div><div class="item-inner"><div class="item-title"><%= scope.textBackward %></div></div></div></a></li></ul></div></div></div></div><div id="edit-chart-wrap"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textWrap %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page chart-wrap"><div class="page-content"><div class="list-block chart-wrap-types"><ul><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="inline"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-inline"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInline %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="square"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-square"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textSquare %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="tight"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-tight"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTight %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="through"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-through"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textThrough %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="top-bottom"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-top-bottom"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textTopBottom %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="infront"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-infront"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textInFront %></div></div></label></li><li><label class="label-radio item-content"><input type="radio" name="chart-wrap" value="behind"> <% if (android) { %> <div class="item-media"><i class="icon icon-form-radio"></i></div> <% } else { %> <div class="item-media"><i class="icon icon-wrap-behind"></i></div> <% } %> <div class="item-inner"><div class="item-title"><%= scope.textBehind %></div></div></label></li></ul></div><div class="content-block-title align"><%= scope.textAlign %></div><div class="list-block align"><ul><li id="edit-chart-align"><div class="item-content buttons"><div class="item-inner"><div class="row"><a data-type="left" class="button no-ripple"><i class="icon icon-text-align-left"></i></a> <a data-type="center" class="button no-ripple"><i class="icon icon-text-align-center"></i></a> <a data-type="right" class="button no-ripple"><i class="icon icon-text-align-right"></i></a></div></div></div></li></ul></div><div class="list-block inline"><ul><li id="edit-chart-movetext"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textMoveText %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li><li id="edit-chart-overlap"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textOverlap %></div><div class="item-after"><label class="label-switch"><input type="checkbox"><div class="checkbox"></div></label></div></div></div></li></ul></div><div class="content-block-title distance"><%= scope.textDistanceText %></div><div class="list-block distance" style="margin-bottom: 40px;"><ul><li id="table-distance"><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="200" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li></ul></div></div></div></div><div id="edit-chart-style"><div class="navbar"><div class="navbar-inner edit-chart-style" data-page="edit-chart-style"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding categories"> <% if (android) { %> <div class="toolbar tabbar"><div data-page="index" class="toolbar-inner"><a href="#tab-chart-type" data-type="type" class="tab-link active"><%= scope.textType %></a><a href="#tab-chart-style" data-type="style" class="tab-link"><%= scope.textStyle %></a><a href="#tab-chart-fill" data-type="fill" class="tab-link"><%= scope.textFill %></a><a href="#tab-chart-border" data-type="border" class="tab-link"><%= scope.textBorder %></a></div></div> <% } else { %> <div class="buttons-row"><a href="#tab-chart-type" data-type="type" class="tab-link button active"><%= scope.textType %></a><a href="#tab-chart-style" data-type="style" class="tab-link button"><%= scope.textStyle %></a><a href="#tab-chart-fill" data-type="fill" class="tab-link button"><%= scope.textFill %></a><a href="#tab-chart-border" data-type="border" class="tab-link button"><%= scope.textBorder %></a></div> <% } %> </div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-chart-style"><div class="tabs-animated-wrap"><div class="tabs"><div id="tab-chart-type" class="page-content tab active dataview chart-types"> <% _.each(types, function(row) { %> <ul class="row"> <% _.each(row, function(type) { %> <li data-type="<%= type.type %>"><div class="thumb" style="background-image:url(\'../mobile/resources/img/charts/<%= type.thumb %>\')"></div></li> <% }); %> </ul> <% }); %> </div><div id="tab-chart-style" class="page-content tab dataview chart-styles"></div><div id="tab-chart-fill" class="page-content tab"></div><div id="tab-chart-border" class="page-content tab"><div class="list-block"><ul><li id="edit-chart-bordersize"><div style="padding: 15px 0 0 15px;"><%= scope.textSize %></div><div class="item-content"><div class="item-inner"><div class="item-input"><div class="range-slider"><input type="range" min="0" max="7" value="0" step="1"></div></div><div class="item-after value">0 pt</div></div></div></li><li><a id="edit-chart-bordercolor" class="item-link"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textColor %></div><div class="item-after"><div class="color-preview"></div></div></div></div></a></li></ul></div></div></div></div></div></div><div id="edit-chart-border-color-view"><div class="navbar"><div class="navbar-inner" data-page="edit-chart-border-color"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textColor %></div><div class="right"><% if (phone) { %><a href="#" class="link icon-only close-picker"><i class="icon icon-expand-down"></i></a><% } %></div></div></div><div class="page" data-page="edit-chart-border-color"><div class="page-content"></div></div></div>'}),define("documenteditor/mobile/app/view/edit/EditChart",["text!documenteditor/mobile/app/template/EditChart.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditChart=a.View.extend(i.extend(function(){var a=[],n=[{type:Asc.c_oAscChartTypeSettings.barNormal,thumb:"chart-03.png"},{type:Asc.c_oAscChartTypeSettings.barStacked,thumb:"chart-02.png"},{type:Asc.c_oAscChartTypeSettings.barStackedPer,thumb:"chart-01.png"},{type:Asc.c_oAscChartTypeSettings.lineNormal,thumb:"chart-06.png"},{type:Asc.c_oAscChartTypeSettings.lineStacked,thumb:"chart-05.png"},{type:Asc.c_oAscChartTypeSettings.lineStackedPer,thumb:"chart-04.png"},{type:Asc.c_oAscChartTypeSettings.hBarNormal,thumb:"chart-09.png"},{type:Asc.c_oAscChartTypeSettings.hBarStacked,thumb:"chart-08.png"},{type:Asc.c_oAscChartTypeSettings.hBarStackedPer,thumb:"chart-07.png"},{type:Asc.c_oAscChartTypeSettings.areaNormal,thumb:"chart-12.png"},{type:Asc.c_oAscChartTypeSettings.areaStacked,thumb:"chart-11.png"},{type:Asc.c_oAscChartTypeSettings.areaStackedPer,thumb:"chart-10.png"},{type:Asc.c_oAscChartTypeSettings.pie,thumb:"chart-13.png"},{type:Asc.c_oAscChartTypeSettings.doughnut,thumb:"chart-14.png"},{type:Asc.c_oAscChartTypeSettings.pie3d,thumb:"chart-22.png"},{type:Asc.c_oAscChartTypeSettings.scatter,thumb:"chart-15.png"},{type:Asc.c_oAscChartTypeSettings.stock,thumb:"chart-16.png"},{type:Asc.c_oAscChartTypeSettings.line3d,thumb:"chart-21.png"},{type:Asc.c_oAscChartTypeSettings.barNormal3d,thumb:"chart-17.png"},{type:Asc.c_oAscChartTypeSettings.barStacked3d,thumb:"chart-18.png"},{type:Asc.c_oAscChartTypeSettings.barStackedPer3d,thumb:"chart-19.png"},{type:Asc.c_oAscChartTypeSettings.hBarNormal3d,thumb:"chart-25.png"},{type:Asc.c_oAscChartTypeSettings.hBarStacked3d,thumb:"chart-24.png"},{type:Asc.c_oAscChartTypeSettings.hBarStackedPer3d,thumb:"chart-23.png"},{type:Asc.c_oAscChartTypeSettings.barNormal3dPerspective,thumb:"chart-20.png"}];return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",i.bind(this.categoryShow,this)),Common.NotificationCenter.on("chartstyles:load",i.bind(this.onStylesLoad,this))},initEvents:function(){var e=this;t("#chart-style").single("click",i.bind(e.showStyle,e)),t("#chart-wrap").single("click",i.bind(e.showWrap,e)),t("#chart-reorder").single("click",i.bind(e.showReorder,e)),t("#edit-chart-bordercolor").single("click",i.bind(e.showBorderColor,e)),t(".edit-chart-style .categories a").single("click",i.bind(e.showStyleCategory,e)),Common.Utils.addScrollIfNeed("#edit-chart .pages","#edit-chart .page"),e.initControls(),e.renderStyles()},categoryShow:function(e){},onStylesLoad:function(){a=Common.SharedSettings.get("chartstyles"),this.renderStyles()},render:function(){var e=i.chain(n).groupBy(function(e,t){return Math.floor(t/3)}).toArray().value();return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),types:e,scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-chart-root").html():""},initControls:function(){},showPage:function(e,t){var i=DE.getController("EditContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html()}),!0!==t&&this.fireEvent("page:show",[this,e]),this.initEvents()}},showStyleCategory:function(e){t(".page[data-page=edit-chart-style] .list-block.inputs-list").removeClass("inputs-list")},renderStyles:function(){var e=t("#tab-chart-style");if(e.length>0){var n=parseInt(e.width()/70),o=-1,s=[];i.each(a,function(e,t){0==t%n&&(s.push([]),o++),s[o].push(e)});var r=i.template(["<% _.each(styles, function(row) { %>",'<ul class="row">',"<% _.each(row, function(style) { %>",'<li data-type="<%= style.asc_getName() %>">','<img src="<%= style.asc_getImage() %>" width="50px" height="50px">',"</li>","<% }); %>","</ul>","<% }); %>"].join(""))({styles:s});e.html(r)}},showStyle:function(){this.showPage("#edit-chart-style",!0),this.paletteFillColor=new Common.UI.ThemeColorPalette({el:t("#tab-chart-fill"),transparent:!0}),this.fireEvent("page:show",[this,"#edit-chart-style"])},showWrap:function(){this.showPage("#edit-chart-wrap"),Common.Utils.addScrollIfNeed(".page.chart-wrap",".page.chart-wrap .page-content")},showReorder:function(){this.showPage("#edit-chart-reorder"),Common.Utils.addScrollIfNeed(".page.chart-reorder",".page.chart-reorder .page-content")},showBorderColor:function(){var e="#edit-chart-border-color-view";this.showPage(e,!0),this.paletteBorderColor=new Common.UI.ThemeColorPalette({el:t(".page[data-page=edit-chart-border-color] .page-content")}),this.fireEvent("page:show",[this,e])},textStyle:"Style",textWrap:"Wrap",textReorder:"Reorder",textRemoveChart:"Remove Chart",textBack:"Back",textToForeground:"Bring to Foreground",textToBackground:"Send to Background",textForward:"Move Forward",textBackward:"Move Backward",textInline:"Inline",textSquare:"Square",textTight:"Tight",textThrough:"Through",textTopBottom:"Top and Bottom",textInFront:"In Front",textBehind:"Behind",textAlign:"Align",textMoveText:"Move with Text",textOverlap:"Allow Overlap",textDistanceText:"Distance from Text",textType:"Type",textFill:"Fill",textBorder:"Border",textSize:"Size",textColor:"Color"}}(),DE.Views.EditChart||{}))}),define("documenteditor/mobile/app/controller/edit/EditChart",["core","documenteditor/mobile/app/view/edit/EditChart","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.EditChart=n.Controller.extend(a.extend(function(){var e=[],t=void 0,n=void 0,o=Common.Utils.Metric.getCurrentMetricName(),s="transparent",r=function(){var e=[{ui:"inline",sdk:Asc.c_oAscWrapStyle2.Inline},{ui:"square",sdk:Asc.c_oAscWrapStyle2.Square},{ui:"tight",sdk:Asc.c_oAscWrapStyle2.Tight},{ui:"through",sdk:Asc.c_oAscWrapStyle2.Through},{ui:"top-bottom",sdk:Asc.c_oAscWrapStyle2.TopAndBottom},{ui:"behind",sdk:Asc.c_oAscWrapStyle2.Behind},{ui:"infront",sdk:Asc.c_oAscWrapStyle2.InFront}];return{sdkToUi:function(t){var i=e.filter(function(e){return e.sdk===t})[0];return i?i.ui:""},uiToSdk:function(t){var i=e.filter(function(e){return e.ui===t})[0];return i?i.sdk:0}}}(),l=function(){var e=[0,.5,1,1.5,2.25,3,4.5,6];return{sizeByIndex:function(t){return t<1?e[0]:t>e.length-1?e[e.length-1]:e[t]},indexSizeByValue:function(t){var i=0;return a.each(e,function(e,a){Math.abs(e-t)<.25&&(i=a)}),i},sizeByValue:function(t){return e[this.indexSizeByValue(t)]}}}();return{models:[],collections:[],views:["EditChart"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",a.bind(this.initEvents,this)),this.addListeners({EditChart:{"page:show":this.onPageShow}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",a.bind(t.onApiFocusObject,t)),t.api.asc_registerCallback("asc_onUpdateChartStyles",a.bind(t.onApiUpdateChartStyles,t))},onLaunch:function(){this.createView("EditChart").render()},initEvents:function(){var e=this;i("#chart-remove").single("click",a.bind(e.onRemoveChart,e)),e.initSettings()},
onPageShow:function(e,t){var n=this;i(".chart-reorder a").single("click",a.bind(n.onReorder,n)),i(".chart-replace li").single("click",a.buffered(n.onReplace,100,n)),i(".chart-wrap .chart-wrap-types li").single("click",a.buffered(n.onWrapType,100,n)),i(".chart-wrap .align a").single("click",a.bind(n.onAlign,n)),i("#edit-chart-movetext input").single("change",a.bind(n.onMoveText,n)),i("#edit-chart-overlap input").single("change",a.bind(n.onOverlap,n)),i(".chart-wrap .distance input").single("change touchend",a.buffered(n.onWrapDistance,100,n)),i(".chart-wrap .distance input").single("input",a.bind(n.onWrapDistanceChanging,n)),i("#edit-chart-bordersize input").single("change touchend",a.buffered(n.onBorderSize,100,n)),i("#edit-chart-bordersize input").single("input",a.bind(n.onBorderSizeChanging,n)),i("#tab-chart-type li").single("click",a.buffered(n.onType,100,n)),n.initSettings(t)},initSettings:function(e){var i=this;o=Common.Utils.Metric.getMetricName(Common.Utils.Metric.getCurrentMetric()),t&&("#edit-chart-wrap"==e?i._initWrapView():"#edit-chart-style"==e?(i._updateChartStyles(i.api.asc_getChartPreviews(t.get_ChartProperties().getType())),i._initStyleView()):"#edit-chart-border-color-view"==e&&i._initStyleView())},_initWrapView:function(){var e=this,a=t.get_WrappingStyle(),n=i(".chart-wrap input"),s=r.sdkToUi(a);n.val([s]),e._uiTransformByWrap(s);var l=t.get_PositionH().get_Align();i(".chart-wrap .align a[data-type=left]").toggleClass("active",l==Asc.c_oAscAlignH.Left),i(".chart-wrap .align a[data-type=center]").toggleClass("active",l==Asc.c_oAscAlignH.Center),i(".chart-wrap .align a[data-type=right]").toggleClass("active",l==Asc.c_oAscAlignH.Right),i("#edit-chart-movetext input").prop("checked",t.get_PositionV().get_RelativeFrom()==Asc.c_oAscRelativeFromV.Paragraph),i("#edit-chart-overlap input").prop("checked",t.get_AllowOverlap());var c=t.get_Paddings();if(c){var d=Common.Utils.Metric.fnRecalcFromMM(c.get_Top());i(".chart-wrap .distance input").val(d),i(".chart-wrap .distance .item-after").text(d+" "+o)}},_initStyleView:function(e){var o=this,s=t.get_ChartProperties(),r=n.get_ShapeProperties(),c=o.getView("EditChart").paletteFillColor,d=o.getView("EditChart").paletteBorderColor,p=s.getType();i(".chart-types li").removeClass("active"),i(".chart-types li[data-type="+p+"]").addClass("active");var u=72*r.get_stroke().get_width()/25.4,m=r.get_stroke().get_type();i("#edit-chart-bordersize input").val([m==Asc.c_oAscStrokeType.STROKE_NONE?0:l.indexSizeByValue(u)]),i("#edit-chart-bordersize .item-after").text((m==Asc.c_oAscStrokeType.STROKE_NONE?0:l.sizeByValue(u))+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt)),c&&c.on("select",a.bind(o.onFillColor,o)),d&&d.on("select",a.bind(o.onBorderColor,o));var h,g,v=r.get_fill(),f=v.get_type();g="transparent",f==Asc.c_oAscFill.FILL_TYPE_SOLID&&(v=v.get_fill(),(h=v.get_color())&&(g=h.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(h.get_r(),h.get_g(),h.get_b()),effectValue:h.get_value()}:Common.Utils.ThemeColor.getHexColor(h.get_r(),h.get_g(),h.get_b()))),c&&c.select(g),o._initBorderColorView()},_initBorderColorView:function(){if(n){var e=this,t=e.getView("EditChart").paletteBorderColor,o=n.get_ShapeProperties().get_stroke(),r="transparent";if(o&&o.get_type()==Asc.c_oAscStrokeType.STROKE_COLOR){var l=o.get_color();l&&(r=l.get_type()==Asc.c_oAscColor.COLOR_TYPE_SCHEME?{color:Common.Utils.ThemeColor.getHexColor(l.get_r(),l.get_g(),l.get_b()),effectValue:l.get_value()}:Common.Utils.ThemeColor.getHexColor(l.get_r(),l.get_g(),l.get_b()))}s=r,t&&t.select(r),i("#edit-chart-bordercolor .color-preview").css("background-color","transparent"==r?r:"#"+(a.isObject(r)?r.color:r))}},getChart:function(){return t},onType:function(e){var a=this,n=i(e.currentTarget),o=n.data("type"),s=new Asc.asc_CImgProperty,r=t.get_ChartProperties();r.changeType(o),s.put_ChartProperties(r),a.api.ImgApply(s),i(".chart-types li").removeClass("active"),n.addClass("active"),a._updateChartStyles(a.api.asc_getChartPreviews(r.getType()))},onStyle:function(e){var a=this,n=i(e.currentTarget),o=n.data("type"),s=new Asc.asc_CImgProperty,r=t.get_ChartProperties();r.putStyle(o),s.put_ChartProperties(r),a.api.ImgApply(s)},onRemoveChart:function(){this.api.asc_Remove(),DE.getController("EditContainer").hideModal()},onReorder:function(e){var t=i(e.currentTarget),a=t.data("type"),n=new Asc.asc_CImgProperty;"all-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringToFront):"all-down"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.SendToBack):"move-up"==a?n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringForward):"move-down"==a&&n.put_ChangeLevel(Asc.c_oAscChangeLevel.BringBackward),this.api.ImgApply(n)},onWrapType:function(e){var t=this,a=i(e.currentTarget).find("input"),n=a.val(),o=new Asc.asc_CImgProperty;t._uiTransformByWrap(n);var s=r.uiToSdk(n);o.put_WrappingStyle(s),t.api.ImgApply(o)},onAlign:function(e){var t=this,a=i(e.currentTarget),n=a.data("type");i(".chart-wrap .align a").removeClass("active"),a.addClass("active");var o=Asc.c_oAscAlignH.Left;"center"==n?o=Asc.c_oAscAlignH.Center:"right"==n&&(o=Asc.c_oAscAlignH.Right);var s=new Asc.asc_CImgProperty;s.put_PositionH(new Asc.CImagePositionH),s.get_PositionH().put_UseAlign(!0),s.get_PositionH().put_Align(o),s.get_PositionH().put_RelativeFrom(Asc.c_oAscRelativeFromH.Page),t.api.ImgApply(s)},onMoveText:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_PositionV(new Asc.CImagePositionV),n.get_PositionV().put_UseAlign(!0),n.get_PositionV().put_RelativeFrom(a.is(":checked")?Asc.c_oAscRelativeFromV.Paragraph:Asc.c_oAscRelativeFromV.Page),t.api.ImgApply(n)},onOverlap:function(e){var t=this,a=i(e.currentTarget),n=new Asc.asc_CImgProperty;n.put_AllowOverlap(a.is(":checked")),t.api.ImgApply(n)},onWrapDistance:function(e){var t=this,a=i(e.currentTarget),n=a.val(),s=new Asc.asc_CImgProperty,r=new Asc.asc_CPaddings;i(".chart-wrap .distance .item-after").text(n+" "+o),n=Common.Utils.Metric.fnRecalcToMM(parseInt(n)),r.put_Top(n),r.put_Right(n),r.put_Bottom(n),r.put_Left(n),s.put_Paddings(r),t.api.ImgApply(s)},onWrapDistanceChanging:function(e){var t=i(e.currentTarget);i(".chart-wrap .distance .item-after").text(t.val()+" "+o)},onBorderSize:function(e){var t=this,a=i(e.currentTarget),n=a.val(),o=new Asc.asc_CImgProperty,r=new Asc.asc_CShapeProperty,c=new Asc.asc_CStroke;n=l.sizeByIndex(parseInt(n)),n<.01?c.put_type(Asc.c_oAscStrokeType.STROKE_NONE):(c.put_type(Asc.c_oAscStrokeType.STROKE_COLOR),"transparent"==s?c.put_color(Common.Utils.ThemeColor.getRgbColor({color:"000000",effectId:29})):c.put_color(Common.Utils.ThemeColor.getRgbColor(Common.Utils.ThemeColor.colorValue2EffectId(s))),c.put_width(25.4*n/72)),r.put_stroke(c),o.put_ShapeProperties(r),t.api.ImgApply(o),t._initBorderColorView()},onBorderSizeChanging:function(e){var t=i(e.currentTarget);i("#edit-chart-bordersize .item-after").text(l.sizeByIndex(t.val())+" "+Common.Utils.Metric.getMetricName(Common.Utils.Metric.c_MetricUnits.pt))},onFillColor:function(e,t){var i=this;if(i.api){var a=new Asc.asc_CImgProperty,n=new Asc.asc_CShapeProperty,o=new Asc.asc_CShapeFill;"transparent"==t?(o.put_type(Asc.c_oAscFill.FILL_TYPE_NOFILL),o.put_fill(null)):(o.put_type(Asc.c_oAscFill.FILL_TYPE_SOLID),o.put_fill(new Asc.asc_CFillSolid),o.get_fill().put_color(Common.Utils.ThemeColor.getRgbColor(t))),n.put_fill(o),a.put_ShapeProperties(n),i.api.ImgApply(a)}},onBorderColor:function(e,t){var o=this,r=n.get_ShapeProperties();if(i("#edit-chart-bordercolor .color-preview").css("background-color","transparent"==t?t:"#"+(a.isObject(t)?t.color:t)),s=t,o.api&&r&&r.get_stroke().get_type()==Asc.c_oAscStrokeType.STROKE_COLOR){var l=new Asc.asc_CImgProperty,c=new Asc.asc_CShapeProperty,d=new Asc.asc_CStroke;r.get_stroke().get_width()<.01?d.put_type(Asc.c_oAscStrokeType.STROKE_NONE):(d.put_type(Asc.c_oAscStrokeType.STROKE_COLOR),d.put_color(Common.Utils.ThemeColor.getRgbColor(t)),d.put_width(r.get_stroke().get_width()),d.asc_putPrstDash(r.get_stroke().asc_getPrstDash())),c.put_stroke(d),l.put_ShapeProperties(c),o.api.ImgApply(l)}},onApiFocusObject:function(i){e=i;var o=[],s=[];a.each(e,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image&&(e.get_ObjectValue()&&e.get_ObjectValue().get_ChartProperties()&&o.push(e),e.get_ObjectValue()&&e.get_ObjectValue().get_ShapeProperties()&&s.push(e))});var r=function(e){if(e.length>0){return e[e.length-1].get_ObjectValue()}};t=r(o),n=r(s)},onApiUpdateChartStyles:function(){this.api&&t&&t.get_ChartProperties()&&this._updateChartStyles(this.api.asc_getChartPreviews(t.get_ChartProperties().getType()))},_updateChartStyles:function(e){Common.SharedSettings.set("chartstyles",e),Common.NotificationCenter.trigger("chartstyles:load",e),i("#tab-chart-style li").single("click",a.bind(this.onStyle,this))},_uiTransformByWrap:function(e){i(".chart-wrap .align")["inline"==e?"hide":"show"](),i(".chart-wrap .distance")["behind"==e||"infront"==e?"hide":"show"](),i("#edit-chart-movetext").toggleClass("disabled","inline"==e)},_closeIfNeed:function(){this._isChartInStack()||DE.getController("EditContainer").hideModal()},_isChartInStack:function(){var t=!1;return a.some(e,function(e){if(e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Image&&e.get_ObjectValue()&&e.get_ObjectValue().get_ChartProperties())return t=!0,!0}),t}}}(),DE.Controllers.EditChart||{}))}),define("text!documenteditor/mobile/app/template/EditHyperlink.template",[],function(){return'<div id="edit-link-root"><div class="list-block"><ul><li><div id="edit-link-url" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textLink %></div><div class="item-input"><input type="url" placeholder="<%= scope.textLink %>"></div></div></div></li><li><div id="edit-link-display" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textDisplay %></div><div class="item-input"><input type="text" placeholder="<%= scope.textDisplay %>"></div></div></div></li><li><div id="edit-link-tip" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textTip %></div><div class="item-input"><input type="text" placeholder="<%= scope.textTip %>"></div></div></div></li></ul></div><div class="list-block"> <% if (android) { %> <a href="#" id="edit-link-edit" class="button button-raised button-fill disabled" style="margin: 20px 16px;"><%= scope.textEdit %></a><a href="#" id="edit-link-remove" class="button button-raised button-fill" style="margin: 20px 16px; background-color: #f44336;"><%= scope.textRemove %></a> <% } else { %> <ul><li><a href="#" id="edit-link-edit" class="list-button item-link disabled" style="text-align: center;"><%= scope.textEdit %></a></li><li><a href="#" id="edit-link-remove" class="list-button item-link" style="text-align: center; color: #f00"><%= scope.textRemove %></a></li></ul> <% } %> </div></div>'}),define("documenteditor/mobile/app/view/edit/EditHyperlink",["text!documenteditor/mobile/app/template/EditHyperlink.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.EditHyperlink=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("editcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("editcategory:show",i.bind(this.categoryShow,this))},initEvents:function(){t("#edit-link-url input[type=url]").single("input",i.bind(function(e){t("#edit-link-edit").toggleClass("disabled",i.isEmpty(t(e.currentTarget).val()))},this)),Common.Utils.addScrollIfNeed("#edit-link .pages","#edit-link .page")},categoryShow:function(e){},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#edit-link-root").html():""},textLink:"Link",textDisplay:"Display",textTip:"Screen Tip",textEdit:"Edit Link",textRemove:"Remove Link"}}(),DE.Views.EditHyperlink||{}))}),define("documenteditor/mobile/app/controller/edit/EditHyperlink",["core","documenteditor/mobile/app/view/edit/EditHyperlink"],function(e){"use strict";DE.Controllers.EditHyperlink=Backbone.Controller.extend(_.extend(function(){var e=[],t=void 0;return{models:[],collections:[],views:["EditHyperlink"],initialize:function(){Common.NotificationCenter.on("editcontainer:show",_.bind(this.initEvents,this))},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onFocusObject",_.bind(t.onApiFocusObject,t))},onLaunch:function(){this.createView("EditHyperlink").render()},initEvents:function(){var e=this;$("#edit-link-edit").single("click",_.bind(e.onEditLink,e)),$("#edit-link-remove").single("click",_.bind(e.onRemoveLink,e)),e.initSettings()},initSettings:function(){t&&(t.get_Value()?$("#edit-link-url input").val([t.get_Value().replace(new RegExp(" ","g"),"%20")]):$("#edit-link-url input").val(""),_.isNull(t.get_Text())||$("#edit-link-display input").val([t.get_Text()]),$("#edit-link-tip input").val([t.get_ToolTip()]),$("#edit-link-edit").toggleClass("disabled",_.isEmpty($("#edit-link-url input").val())))},onEditLink:function(){var e=this,i=$("#edit-link-url input").val(),a=$("#edit-link-display input").val(),n=$("#edit-link-tip input").val(),o=e.api.asc_getUrlType($.trim(i)),s=2==o;if(o<1)return void uiApp.alert(e.txtNotUrl);i=i.replace(/^\s+|\s+$/g,""),/(((^https?)|(^ftp)):\/\/)|(^mailto:)/i.test(i)||(i=(s?"mailto:":"http://")+i),i=i.replace(new RegExp("%20","g")," ");var r=new Asc.CHyperlinkProperty;r.put_Value(i),r.put_Text(_.isEmpty(a)?i:a),r.put_ToolTip(n),t&&r.put_InternalHyperlink(t.get_InternalHyperlink()),e.api.change_Hyperlink(r),DE.getController("EditContainer").hideModal()},onRemoveLink:function(){this.api&&this.api.remove_Hyperlink(t),DE.getController("EditContainer").hideModal()},onApiFocusObject:function(i){e=i;var a=[];if(_.each(e,function(e){e.get_ObjectType()==Asc.c_oAscTypeSelectElement.Hyperlink&&a.push(e)}),a.length>0){var n=a[a.length-1];t=n.get_ObjectValue()}else t=void 0},_closeIfNeed:function(){this._isImageInStack()||DE.getController("EditContainer").hideModal()},textEmptyImgUrl:"You need to specify image URL.",txtNotUrl:'This field should be a URL in the format "http://www.example.com"'}}(),DE.Controllers.EditHyperlink||{}))}),define("documenteditor/mobile/app/controller/add/AddContainer",["core"],function(e){"use strict";DE.Controllers.AddContainer=Backbone.Controller.extend(_.extend(function(){return{models:[],collections:[],views:[],initialize:function(){},setApi:function(e){this.api=e},onLaunch:function(){},showModal:function(){var e=this;$$(".container-add.modal-in").length>0||(uiApp.closeModal(),e._showByStack(Common.SharedSettings.get("phone")),DE.getController("Toolbar").getView("Toolbar").hideSearch())},hideModal:function(){this.picker&&uiApp.closeModal(this.picker)},_layoutEditorsByStack:function(){var e=this,t=[];return t.push({caption:e.textTable,id:"add-table",layout:DE.getController("AddTable").getView("AddTable").rootLayout()}),t.push({caption:e.textShape,id:"add-shape",layout:DE.getController("AddShape").getView("AddShape").rootLayout()}),t.push({caption:e.textImage,id:"add-image",layout:DE.getController("AddImage").getView("AddImage").rootLayout()}),t.push({caption:e.textOther,id:"add-other",layout:DE.getController("AddOther").getView("AddOther").rootLayout()}),t},_showByStack:function(e){var t=this,i=!0===Framework7.prototype.device.android,a=t._layoutEditorsByStack();if(!($$(".container-add.modal-in").length>0)){var n=$('<div class="navbar"><div data-page="index" class="navbar-inner"><div class="center sliding categories"></div>'+(e?'<div class="right sliding"><a href="#" class="link icon-only close-popup"><i class="icon icon-expand-down"></i></a></div>':"")+"</div></div>");i?(n.find(".center").append('<div class="toolbar tabbar"><div data-page="index" class="toolbar-inner"></div></div>'),_.each(a,function(e,t){n.find(".toolbar-inner").append('<a href="#'+e.id+'" class="tab-link '+(t<1?"active":"")+'">'+e.caption+"</a>")}),n.find(".toolbar-inner").append('<span class="tab-link-highlight" style="width: '+100/a.length+'%;"></span>')):(n.find(".center").append('<div class="buttons-row"></div>'),_.each(a,function(e,t){n.find(".buttons-row").append('<a href="#'+e.id+'" class="tab-link button '+(t<1?"active":"")+'">'+e.caption+"</a>")}));var o=$('<div class="pages"><div class="page" data-page="index"><div class="page-content"><div class="tabs-animated-wrap"><div class="tabs"></div></div></div></div></div>');if(_.each(a,function(e,t){o.find(".tabs").append('<div id="'+e.id+'" class="tab view '+(t<1?"active":"")+'"><div class="pages"><div class="page no-navbar"><div class="page-content">'+e.layout+"</div></div></div></div>")}),e)t.picker=$$(uiApp.popup('<div class="popup settings container-add"><div class="view add-root-view navbar-through">'+n.prop("outerHTML")+o.prop("outerHTML")+"</div></div>"));else{t.picker=uiApp.popover('<div class="popover settings container-add"><div class="popover-angle"></div><div class="popover-inner"><div class="content-block"><div class="view popover-view add-root-view navbar-through">'+n.prop("outerHTML")+o.prop("outerHTML")+"</div></div></div>",$$("#toolbar-add"));var s=$(".modal-overlay");$$(t.picker).on("opened",function(){s.on("removeClass",function(){s.hasClass("modal-overlay-visible")||s.addClass("modal-overlay-visible")})}).on("close",function(){s.off("removeClass"),s.removeClass("modal-overlay-visible")})}i&&($$(".view.add-root-view.navbar-through").removeClass("navbar-through").addClass("navbar-fixed"),$$(".view.add-root-view .navbar").prependTo(".view.add-root-view > .pages > .page")),t.rootView=uiApp.addView(".add-root-view",{dynamicNavbar:!0}),Common.NotificationCenter.trigger("addcontainer:show")}},textTable:"Table",textShape:"Shape",textImage:"Image",textOther:"Other"}}(),DE.Controllers.AddContainer||{}))}),define("text!documenteditor/mobile/app/template/AddTable.template",[],function(){return'<div id="add-table-root"><div class="page-content dataview table-styles"><ul class="row"> <% _.each(styles, function(style) { %> <li data-type="<%= style.templateId %>"><img src="<%= style.imageUrl %>"></li> <% }); %> </ul></div></div>'}),define("documenteditor/mobile/app/view/add/AddTable",["text!documenteditor/mobile/app/template/AddTable.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.AddTable=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("addcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){this.initControls()},render:function(){this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),styles:DE.getController("AddTable").getStyles()}));var e=t(".container-add .table-styles");return e&&e.replaceWith(this.layout.find("#add-table-root").html()),this.fireEvent("view:render",this),this},rootLayout:function(){return this.layout?this.layout.find("#add-table-root").html():""},initControls:function(){}}}(),DE.Views.AddTable||{}))}),define("documenteditor/mobile/app/controller/add/AddTable",["core","documenteditor/mobile/app/view/add/AddTable","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.AddTable=n.Controller.extend(a.extend(function(){var e=[],t=!1;return{models:[],collections:[],views:["AddTable"],initialize:function(){Common.NotificationCenter.on("addcontainer:show",a.bind(this.initEvents,this)),this.addListeners({AddTable:{"view:render":this.onViewRender}})},setApi:function(e){var t=this;t.api=e,t.api.asc_registerCallback("asc_onInitTableTemplates",a.bind(t.onApiInitTemplates,t))},onLaunch:function(){this.createView("AddTable").render()},initEvents:function(){var n=this;t||(t=!0,e=[],n.api.asc_GetDefaultTableStyles()),i("#add-table li").single("click",a.buffered(this.onStyleClick,100,this))},onViewRender:function(){i("#add-table li").single("click",a.buffered(this.onStyleClick,100,this))},onStyleClick:function(e){var t=this,a=i(e.currentTarget),n=a.data("type");if(!(i(".modal.modal-in").length>0)&&(DE.getController("AddContainer").hideModal(),a)){var o,s=uiApp.modal({title:t.textTableSize,text:"",afterText:'<div class="content-block"><div class="row no-gutter" style="text-align: center;"><div class="col-50">'+t.textColumns+'</div><div class="col-50">'+t.textRows+'</div></div><div id="picker-table-size"></div></div>',buttons:[{text:t.textCancel},{text:"OK",bold:!0,onClick:function(){var e=o.value;if(t.api){t.api.put_Table(parseInt(e[0]),parseInt(e[1]));var i=new Asc.CTableProp;i.put_TableStyle(n),t.api.tblApply(i)}}}]});o=uiApp.picker({container:"#picker-table-size",toolbar:!1,rotateEffect:!0,value:[3,3],cols:[{textAlign:"center",width:"100%",values:[1,2,3,4,5,6,7,8,9,10]},{textAlign:"center",width:"100%",values:[1,2,3,4,5,6,7,8,9,10]}]}),$$(s).css({marginTop:-Math.round($$(s).outerHeight()/2)+"px"})}},getStyles:function(){return e},onApiInitTemplates:function(t){e.length<1&&(a.each(t,function(t){e.push({imageUrl:t.asc_getImage(),templateId:t.asc_getId()})}),this.getView("AddTable").render())},textTableSize:"Table Size",textColumns:"Columns",textRows:"Rows",textCancel:"Cancel"}}(),DE.Controllers.AddTable||{}))}),define("text!documenteditor/mobile/app/template/AddShape.template",[],function(){return'<div id="add-shapes-root"><div class="page-content dataview shapes"> <% _.each(shapes, function(row) { %> <ul class="row"> <% _.each(row, function(shape) { %> <li data-type="<%= shape.type %>"><div class="thumb" style="-webkit-mask-image:url(\'../mobile/resources/img/shapes/<%= shape.thumb %>\')"></div></li> <% }); %> </ul> <% }); %> </div></div>'}),define("documenteditor/mobile/app/view/add/AddShape",["text!documenteditor/mobile/app/template/AddShape.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.AddShape=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("addcontainer:show",i.bind(this.initEvents,this)),Common.NotificationCenter.on("shapes:load",i.bind(this.render,this))},initEvents:function(){this.initControls()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),shapes:Common.SharedSettings.get("shapes")})),this},rootLayout:function(){return this.layout?this.layout.find("#add-shapes-root").html():""},initControls:function(){}}}(),DE.Views.AddShape||{}))}),define("documenteditor/mobile/app/controller/add/AddShape",["core","documenteditor/mobile/app/view/add/AddShape","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.AddShape=n.Controller.extend(a.extend(function(){var e=[];return{models:[],collections:[],views:["AddShape"],initialize:function(){Common.NotificationCenter.on("addcontainer:show",a.bind(this.initEvents,this)),e=[{title:"Text",thumb:"shape-01.svg",type:"textRect"},{title:"Line",thumb:"shape-02.svg",type:"line"},{title:"Line with arrow",thumb:"shape-03.svg",type:"lineWithArrow"},{title:"Line with two arrows",thumb:"shape-04.svg",type:"lineWithTwoArrows"},{title:"Rect",thumb:"shape-05.svg",type:"rect"},{title:"Hexagon",thumb:"shape-06.svg",type:"hexagon"},{title:"Round rect",thumb:"shape-07.svg",type:"roundRect"},{title:"Ellipse",thumb:"shape-08.svg",type:"ellipse"},{title:"Triangle",thumb:"shape-09.svg",type:"triangle"},{title:"Triangle",thumb:"shape-10.svg",type:"rtTriangle"},{title:"Trapezoid",thumb:"shape-11.svg",type:"trapezoid"},{title:"Diamond",thumb:"shape-12.svg",type:"diamond"},{title:"Right arrow",thumb:"shape-13.svg",type:"rightArrow"},{title:"Left-right arrow",thumb:"shape-14.svg",type:"leftRightArrow"},{title:"Left arrow callout",thumb:"shape-15.svg",type:"leftArrow"},{title:"Right arrow callout",thumb:"shape-16.svg",type:"bentUpArrow"},{title:"Flow chart off page connector",thumb:"shape-17.svg",type:"flowChartOffpageConnector"},{title:"Heart",thumb:"shape-18.svg",type:"heart"},{title:"Math minus",thumb:"shape-19.svg",type:"mathMinus"},{title:"Math plus",thumb:"shape-20.svg",type:"mathPlus"},{title:"Parallelogram",thumb:"shape-21.svg",type:"parallelogram"},{title:"Wedge rect callout",thumb:"shape-22.svg",type:"wedgeRectCallout"},{title:"Wedge ellipse callout",thumb:"shape-23.svg",type:"wedgeEllipseCallout"},{title:"Cloud callout",thumb:"shape-24.svg",type:"cloudCallout"}];var t=a.chain(e).groupBy(function(e,t){return Math.floor(t/4)}).toArray().value();Common.SharedSettings.set("shapes",t),Common.NotificationCenter.trigger("shapes:load",t)},setApi:function(e){this.api=e},onLaunch:function(){this.createView("AddShape").render()},initEvents:function(){var e=this;i("#add-shape li").single("click",a.buffered(e.onShapeClick,300,e))},onShapeClick:function(e){var t=this,a=i(e.currentTarget);a&&t.api&&t.api.AddShapeOnCurrentPage(a.data("type")),DE.getController("AddContainer").hideModal()},getStyles:function(){return e}}}(),DE.Controllers.AddShape||{}))}),define("text!documenteditor/mobile/app/template/AddImage.template",[],function(){return'<div id="addimage-root-view"><div class="list-block"><ul><li><a id="add-image-file" class="item-link no-indicator no-fastclick"><div class="item-content"><div class="item-media"><i class="icon icon-image-library"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFromLibrary %></div></div></div></a></li><li><a id="add-image-url" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-link"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFromURL %></div></div></div></a></li></ul></div></div><div id="addimage-url-view"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textLinkSettings %></div></div></div><div class="page" id="addimage-url"><div class="page-content"> <% if (!android) { %><div class="content-block-title"><%= scope.textAddress %></div><% } %> <div class="list-block"><ul><li><div id="addimage-link-url" class="item-content"><div class="item-inner"> <% if (android) { %><div class="item-title label"><%= scope.textAddress %></div><% } %> <div class="item-input"><input type="url" placeholder="<%= scope.textImageURL %>"></div></div></div></li></ul></div><div class="list-block disabled" id="addimage-insert"> <% if (android) { %> <a href="#" class="button button-fill button-raised" style="margin: 20px 16px;"><%= scope.textInsertImage %></a> <% } else { %> <ul><li><a href="#" class="list-button item-link"><%= scope.textInsertImage %></a></li></ul> <% } %> </div></div></div></div>'}),define("documenteditor/mobile/app/view/add/AddImage",["text!documenteditor/mobile/app/template/AddImage.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.AddImage=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("addcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){var e=this;t("#add-image-url").single("click",i.bind(e.showImageUrl,e)),e.initControls()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#addimage-root-view").html():""},initControls:function(){},showPage:function(e){var t=DE.getController("AddContainer").rootView;if(t&&this.layout){var i=this.layout.find(e);Framework7.prototype.device.android&&i.find(".page").append(i.find(".navbar")),t.router.load({content:i.html()}),this.fireEvent("page:show",this)}},showImageUrl:function(){this.showPage("#addimage-url-view")},textFromLibrary:"Picture from Library",textFromURL:"Picture from URL",textBack:"Back",textLinkSettings:"Link Settings",textAddress:"Address",textImageURL:"Image URL",textInsertImage:"Insert Image"}}(),DE.Views.AddImage||{}))}),define("documenteditor/mobile/app/controller/add/AddImage",["core","documenteditor/mobile/app/view/add/AddImage","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.AddImage=n.Controller.extend(a.extend(function(){return{models:[],collections:[],views:["AddImage"],initialize:function(){Common.NotificationCenter.on("addcontainer:show",a.bind(this.initEvents,this)),this.addListeners({AddImage:{"page:show":this.onPageShow}})},setApi:function(e){this.api=e},onLaunch:function(){this.createView("AddImage").render()},initEvents:function(){var e=this;i("#add-image-file").single("click",a.bind(e.onInsertByFile,e))},onPageShow:function(){var e=this;i("#addimage-insert a").single("click",a.buffered(e.onInsertByUrl,100,e)),i("#addimage-url input[type=url]").single("input",a.bind(e.onUrlChange,e)),a.delay(function(){i("#addimage-link-url input[type=url]").focus()},1e3)},onInsertByFile:function(e){DE.getController("AddContainer").hideModal(),this.api&&this.api.asc_addImage()},onUrlChange:function(e){i("#addimage-insert").toggleClass("disabled",a.isEmpty(i(e.currentTarget).val()))},onInsertByUrl:function(e){var t=this,n=i("#addimage-link-url input[type=url]");if(n){var o=n.val().replace(/ /g,"");a.isEmpty(o)?uiApp.alert(t.textEmptyImgUrl):/((^https?)|(^ftp)):\/\/.+/i.test(o)?(DE.getController("AddContainer").hideModal(),a.defer(function(){t.api.AddImageUrl(o)})):uiApp.alert(t.txtNotUrl)}},textEmptyImgUrl:"You need to specify image URL.",txtNotUrl:'This field should be a URL in the format "http://www.example.com"'}}(),DE.Controllers.AddImage||{}))}),define("text!documenteditor/mobile/app/template/AddOther.template",[],function(){
return'<div id="addother-root-view"><div class="list-block"><ul><li><a id="add-other-pagebreak" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-pagebreak"></i></div><div class="item-inner"><div class="item-title"><%= scope.textPageBreak %></div></div></div></a></li><li><a id="add-other-columnbreak" class="item-link no-indicator"><div class="item-content"><div class="item-media"><i class="icon icon-stringbreak"></i></div><div class="item-inner"><div class="item-title"><%= scope.textColumnBreak %></div></div></div></a></li><li><a id="add-other-section" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-sectionbreak"></i></div><div class="item-inner"><div class="item-title"><%= scope.textSectionBreak %></div></div></div></a></li><li><a id="add-other-link" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-link"></i></div><div class="item-inner"><div class="item-title"><%= scope.textLink %></div></div></div></a></li><li><a id="add-other-pagenumber" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-pagenumber"></i></div><div class="item-inner"><div class="item-title"><%= scope.textPageNumber %></div></div></div></a></li><li><a id="add-other-footnote" class="item-link"><div class="item-content"><div class="item-media"><i class="icon icon-footnote"></i></div><div class="item-inner"><div class="item-title"><%= scope.textFootnote %></div></div></div></a></li></ul></div></div><div id="addother-sectionbreak"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textSectionBreak %></div></div></div><div class="page" data-page="addother-sectionbreak"><div class="page-content"><div class="list-block"><ul><li><a data-type="next" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textNextPage %></div></div></div></a></li><li><a data-type="continuous" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textContPage %></div></div></div></a></li><li><a data-type="even" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textEvenPage %></div></div></div></a></li><li><a data-type="odd" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textOddPage %></div></div></div></a></li></ul></div></div></div></div><div id="addother-link"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textAddLink %></div></div></div><div class="page" data-page="addother-link"><div class="page-content"><div class="list-block"><ul><li><div id="add-link-url" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textLink %></div><div class="item-input"><input type="url" placeholder="<%= scope.textLink %>"></div></div></div></li><li><div id="add-link-display" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textDisplay %></div><div class="item-input"><input type="text" placeholder="<%= scope.textDisplay %>"></div></div></div></li><li><div id="add-link-tip" class="item-content"><div class="item-inner"><div class="item-title label"><%= scope.textTip %></div><div class="item-input"><input type="text" placeholder="<%= scope.textTip %>"></div></div></div></li></ul></div><div class="list-block disabled" id="add-link-insert"> <% if (android) { %> <a href="#" class="button button-fill button-raised" style="margin: 20px 16px;"><%= scope.textInsert %></a> <% } else { %> <ul><li><a href="#" class="list-button item-link"><%= scope.textInsert %></a></li></ul> <% } %> </div></div></div></div><div id="addother-pagenumber"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textPosition %></div></div></div><div class="page" data-page="addother-pagenumber"><div class="page-content"><div class="list-block"><ul><li><a data-type="lt" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textLeftTop %></div></div></div></a></li><li><a data-type="ct" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textCenterTop %></div></div></div></a></li><li><a data-type="rt" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textRightTop %></div></div></div></a></li><li><a data-type="lb" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textLeftBottom %></div></div></div></a></li><li><a data-type="cb" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textCenterBottom %></div></div></div></a></li><li><a data-type="rb" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textRightBottom %></div></div></div></a></li><li><a data-type="current" class="item-link no-indicator"><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textCurrentPos %></div></div></div></a></li></ul></div></div></div></div><div id="addother-insert-footnote"><div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><% if (!android) { %><span><%= scope.textBack %></span><% } %></a></div><div class="center sliding"><%= scope.textInsertFootnote %></div></div></div><div class="page" data-page="addother-insert-footnote"><div class="page-content"><div class="content-block-title"><%= scope.textFormat %></div><div id="list-format-footnote" class="list-block"><ul></ul></div><div id="start-at-footnote" class="list-block"><ul><li><div class="item-content"><div class="item-inner"><div class="item-title"><%= scope.textStartFrom %></div><div class="item-after splitter"> <% if (!android) { %><label><%= scope.textAuto %></label><% } %> <p class="buttons-row"><span class="button decrement no-ripple"><% if (android) { %><i class="icon icon-expand-down"></i><% } else { %>-<% } %></span> <% if (android) { %><label><%= scope.textAuto %></label><% } %> <span class="button increment no-ripple"><% if (android) { %><i class="icon icon-expand-up"></i><% } else { %>+<% } %></span></p></div></div></div></li></ul></div><div class="content-block-title"><%= scope.textLocation %></div><div id="position-footnote" class="list-block"><ul></ul></div><div class="list-block" id="footnote-insert"> <% if (android) { %> <a href="#" class="button button-fill button-raised" style="margin: 20px 16px;"><%= scope.textInsertFootnote %></a> <% } else { %> <ul><li><a href="#" class="list-button item-link"><%= scope.textInsertFootnote %></a></li></ul> <% } %> </div></div></div></div>'}),define("documenteditor/mobile/app/view/add/AddOther",["text!documenteditor/mobile/app/template/AddOther.template","jquery","underscore","backbone"],function(e,t,i,a){"use strict";DE.Views.AddOther=a.View.extend(i.extend(function(){return{template:i.template(e),events:{},initialize:function(){Common.NotificationCenter.on("addcontainer:show",i.bind(this.initEvents,this))},initEvents:function(){var e=this;t("#add-other-section").single("click",i.bind(e.showSectionBreak,e)),t("#add-other-link").single("click",i.bind(e.showLink,e)),t("#add-other-pagenumber").single("click",i.bind(e.showPagePosition,e)),t("#add-other-footnote").single("click",i.bind(e.showPageFootnote,e)),e.initControls()},render:function(){return this.layout=t("<div/>").append(this.template({android:Common.SharedSettings.get("android"),phone:Common.SharedSettings.get("phone"),scope:this})),this},rootLayout:function(){return this.layout?this.layout.find("#addother-root-view").html():""},initControls:function(){},showPage:function(e,t){var i=DE.getController("AddContainer").rootView;if(i&&this.layout){var a=this.layout.find(e);Framework7.prototype.device.android&&a.find(".page").append(a.find(".navbar")),i.router.load({content:a.html(),animatePages:!1!==t}),this.fireEvent("page:show",[this,e])}},showSectionBreak:function(){this.showPage("#addother-sectionbreak")},showLink:function(e){this.showPage("#addother-link",e),t(".page[data-page=addother-link] input[type=url]").single("input",i.bind(function(e){t("#add-link-insert").toggleClass("disabled",i.isEmpty(t("#add-link-url input").val()))},this)),i.delay(function(){t(".page[data-page=addother-link] input[type=url]").focus()},1e3)},showPagePosition:function(){this.showPage("#addother-pagenumber")},showPageFootnote:function(){this.showPage("#addother-insert-footnote")},renderNumFormat:function(e,a){var n=t("#list-format-footnote ul"),o=[];i.each(e,function(e){var t=["<li>",'<label class="label-radio item-content">','<input type="radio" name="doc-footnote-format" data-value="<%= item.value %>" <% if (item.value == select) { %>checked="checked"<% } %> >','<% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>','<div class="item-inner">','<div class="item-title"><%= item.text %></div>',"</div>","</label>","</li>"].join("");o.push(i.template(t)({android:Framework7.prototype.device.android,item:e,select:a}))}),n.html(o)},renderFootnotePos:function(e,a){var n=t("#position-footnote ul"),o=[];i.each(e,function(e){var t=["<li>",'<label class="label-radio item-content">','<input type="radio" name="doc-footnote-pos" data-value="<%= item.value%>" <% if (item.value == select) { %>checked="checked"<% } %> >','<% if (android) { %><div class="item-media"><i class="icon icon-form-radio"></i></div><% } %>','<div class="item-inner">','<div class="item-title"><%= item.displayValue %></div>',"</div>","</label>","</li>"].join("");o.push(i.template(t)({android:Framework7.prototype.device.android,item:e,select:a}))}),n.html(o)},textPageBreak:"Page Break",textSectionBreak:"Section Break",textColumnBreak:"Column Break",textLink:"Link",textPageNumber:"Page Number",textBack:"Back",textAddLink:"Add Link",textDisplay:"Display",textTip:"Screen Tip",textInsert:"Insert",textPosition:"Position",textLeftTop:"Left Top",textCenterTop:"Center Top",textRightTop:"Right Top",textLeftBottom:"Left Bottom",textCenterBottom:"Center Bottom",textRightBottom:"Right Bottom",textCurrentPos:"Current Position",textNextPage:"Next Page",textContPage:"Continuous Page",textEvenPage:"Even Page",textOddPage:"Odd Page",textFootnote:"Footnote",textInsertFootnote:"Insert Footnote",textFormat:"Format",textStartFrom:"Start At",textLocation:"Location"}}(),DE.Views.AddOther||{}))}),define("documenteditor/mobile/app/controller/add/AddOther",["core","documenteditor/mobile/app/view/add/AddOther","jquery","underscore","backbone"],function(e,t,i,a,n){"use strict";DE.Controllers.AddOther=n.Controller.extend(a.extend(function(){var e={PAGE_NUM_POSITION_TOP:1,PAGE_NUM_POSITION_BOTTOM:2,PAGE_NUM_POSITION_RIGHT:0,PAGE_NUM_POSITION_LEFT:1,PAGE_NUM_POSITION_CENTER:2};return{models:[],collections:[],views:["AddOther"],initialize:function(){Common.NotificationCenter.on("addcontainer:show",a.bind(this.initEvents,this)),this.addListeners({AddOther:{"page:show":this.onPageShow}}),this.toCustomFormat,this.fromCustomFormat},setApi:function(e){this.api=e},onLaunch:function(){this.createView("AddOther").render()},initEvents:function(){var e=this;i("#add-other-pagebreak").single("click",a.bind(e.onPageBreak,e)),i("#add-other-columnbreak").single("click",a.bind(e.onColumnBreak,e))},onPageShow:function(e,t){var n=this;i(".page[data-page=addother-sectionbreak] li a").single("click",a.buffered(n.onInsertSectionBreak,100,n)),i(".page[data-page=addother-pagenumber] li a").single("click",a.buffered(n.onInsertPageNumber,100,n)),i("#add-link-insert").single("click",a.buffered(n.onInsertLink,100,n)),"#addother-link"==t?i("#addother-link-view")&&a.defer(function(){var e=n.api.can_AddHyperlink();i("#add-link-display input").val(a.isString(e)?e:"")}):"#addother-insert-footnote"==t&&n.initInsertFootnote()},initInsertFootnote:function(){var e=this,t=[{text:"1, 2, 3,...",value:Asc.c_oAscNumberingFormat.Decimal},{text:"a, b, c,...",value:Asc.c_oAscNumberingFormat.LowerLetter},{text:"A, B, C,...",value:Asc.c_oAscNumberingFormat.UpperLetter},{text:"i, ii, iii,...",value:Asc.c_oAscNumberingFormat.LowerRoman},{text:"I, II, III,...",value:Asc.c_oAscNumberingFormat.UpperRoman}],n=[{value:Asc.c_oAscFootnotePos.PageBottom,displayValue:this.textBottomOfPage},{value:Asc.c_oAscFootnotePos.BeneathText,displayValue:this.textBelowText}],o=e.api.asc_GetFootnoteProps(),s=o.get_NumFormat(),r=o.get_Pos();e.onFormatFootnoteChange(s);var l=e.getView("AddOther");l.renderNumFormat(t,s),l.renderFootnotePos(n,r),i("#start-at-footnote .button").single("click",a.bind(e.onStartAt,e)),i(".page[data-page=addother-insert-footnote] input:radio[name=doc-footnote-format]").single("change",a.bind(e.onFormatFootnoteChange,e)),i("#footnote-insert").single("click",a.bind(this.onClickInsertFootnote,this))},onClickInsertFootnote:function(){var e,t=this,a=i('input[name="doc-footnote-format"]:checked').data("value"),n=i("#start-at-footnote .item-after label").text(),o=i('input[name="doc-footnote-pos"]:checked').data("value"),s=new Asc.CAscFootnotePr;e=t.fromCustomFormat?parseInt(t.fromCustomFormat(n)):t.api.asc_GetFootnoteProps().get_NumStart(),s.put_Pos(o),s.put_NumFormat(a),s.put_NumStart(e),s.put_NumRestart(Asc.c_oAscFootnoteRestart.Continuous),t.api&&(t.api.asc_SetFootnoteProps(s,!1),setTimeout(function(){t.api.asc_AddFootnote()},1),DE.getController("AddContainer").hideModal())},onFormatFootnoteChange:function(e){var t,a=this,n=e.currentTarget?i(e.currentTarget).data("value"):e,o=i("#start-at-footnote .item-after label");switch(t=e.currentTarget?a.fromCustomFormat(o.text()):a.api.asc_GetFootnoteProps().get_NumStart(),n){case Asc.c_oAscNumberingFormat.UpperRoman:a.toCustomFormat=a._10toRome,a.fromCustomFormat=a._Rometo10;break;case Asc.c_oAscNumberingFormat.LowerRoman:a.toCustomFormat=function(e){return a._10toRome(e).toLocaleLowerCase()},a.fromCustomFormat=function(e){return a._Rometo10(e.toLocaleUpperCase())};break;case Asc.c_oAscNumberingFormat.UpperLetter:a.toCustomFormat=a._10toS,a.fromCustomFormat=a._Sto10;break;case Asc.c_oAscNumberingFormat.LowerLetter:a.toCustomFormat=function(e){return a._10toS(e).toLocaleLowerCase()},a.fromCustomFormat=function(e){return a._Sto10(e.toLocaleUpperCase())};break;default:a.toCustomFormat=function(e){return e},a.fromCustomFormat=function(e){return e}}var s=a.toCustomFormat(t);o.text(s)},onStartAt:function(e){var t,a=i(e.currentTarget),n=i("#start-at-footnote .item-after label").text(),o=this;t=o.fromCustomFormat?parseInt(o.fromCustomFormat(n)):o.api.asc_GetFootnoteProps().get_NumStart(),t=a.hasClass("decrement")?Math.max(1,t-1):Math.min(16383,t+1);var s=o.toCustomFormat(t);i("#start-at-footnote .item-after label").text(s)},onInsertLink:function(e){var t=this,n=i("#add-link-url input").val(),o=i("#add-link-display input").val(),s=i("#add-link-tip input").val(),r=t.api.asc_getUrlType(i.trim(n)),l=2==r;if(r<1)return void uiApp.alert(t.txtNotUrl);n=n.replace(/^\s+|\s+$/g,""),/(((^https?)|(^ftp)):\/\/)|(^mailto:)/i.test(n)||(n=(l?"mailto:":"http://")+n),n=n.replace(new RegExp("%20","g")," ");var c=new Asc.CHyperlinkProperty;c.put_Value(n),c.put_Text(a.isEmpty(o)?n:o),c.put_ToolTip(s),t.api.add_Hyperlink(c),DE.getController("AddContainer").hideModal()},onPageBreak:function(e){this.api&&this.api.put_AddPageBreak(),DE.getController("AddContainer").hideModal()},onColumnBreak:function(){this.api&&this.api.put_AddColumnBreak(),DE.getController("AddContainer").hideModal()},onInsertSectionBreak:function(e){var t=i(e.currentTarget);if(t&&this.api){var a,n=t.data("type");"next"==n?a=Asc.c_oAscSectionBreakType.NextPage:"continuous"==n?a=Asc.c_oAscSectionBreakType.Continuous:"even"==n?a=Asc.c_oAscSectionBreakType.EvenPage:"odd"==n&&(a=Asc.c_oAscSectionBreakType.OddPage),this.api.add_SectionBreak(a)}DE.getController("AddContainer").hideModal()},onInsertPageNumber:function(t){var a=i(t.currentTarget);if(a&&this.api){var n=-1,o=a.data("type");2==o.length?(n={},"l"==o[0]?n.subtype=e.PAGE_NUM_POSITION_LEFT:"c"==o[0]?n.subtype=e.PAGE_NUM_POSITION_CENTER:"r"==o[0]&&(n.subtype=e.PAGE_NUM_POSITION_RIGHT),"t"==o[1]?n.type=e.PAGE_NUM_POSITION_TOP:"b"==o[1]&&(n.type=e.PAGE_NUM_POSITION_BOTTOM),this.api.put_PageNum(n.type,n.subtype)):this.api.put_PageNum(n)}DE.getController("AddContainer").hideModal()},_10toS:function(e){e=parseInt(e);for(var t=Math.ceil(e/26),i=String.fromCharCode((e-1)%26+"A".charCodeAt(0)),a="",n=0;n<t;n++)a+=i;return a},_Sto10:function(e){if(e.length<1||new RegExp("[^"+e.charAt(0)+"]").test(e)||!/[A-Z]/.test(e))return 1;var t=e.length-1,i=e.charCodeAt(0)-"A".charCodeAt(0)+1;return i+=26*t},_10toRome:function(e){e=parseInt(e);for(var t="",i=[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]],a=i[0][1],n=Math.floor(e/a),o=0,s=0;s<n;s++)t+=i[o][0];for(e-=n*a,o++;e>0;)a=i[o][1],n=e-a,n>=0?(t+=i[o][0],e=n):o++;return t},_Rometo10:function(e){if(!/[IVXLCDM]/.test(e)||e.length<1)return 1;for(var t={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},i=e.length-1,a=t[e.charAt(i)],n=a,o=i-1;o>=0;o--){var s=t[e.charAt(o)];if(s<n){if(n/s>10)return 1;s*=-1}a+=s}return a},txtNotUrl:'This field should be a URL in the format "http://www.example.com"',textBottomOfPage:"Bottom Of Page",textBelowText:"Below Text"}}(),DE.Controllers.AddOther||{}))});var reqerr;require.config({baseUrl:"../../",paths:{jquery:"../vendor/jquery/jquery",underscore:"../vendor/underscore/underscore",backbone:"../vendor/backbone/backbone",framework7:"../vendor/framework7/js/framework7",text:"../vendor/requirejs-text/text",xregexp:"../vendor/xregexp/xregexp-all-min",sockjs:"../vendor/sockjs/sockjs.min",jszip:"../vendor/jszip/jszip.min",jsziputils:"../vendor/jszip-utils/jszip-utils.min",allfonts:"../../sdkjs/common/AllFonts",sdk:"../../sdkjs/word/sdk-all-min",api:"api/documents/api",core:"common/main/lib/core/application",extendes:"common/mobile/utils/extendes",notification:"common/main/lib/core/NotificationCenter",localstorage:"common/main/lib/util/LocalStorage",analytics:"common/Analytics",gateway:"common/Gateway",locale:"common/locale",irregularstack:"common/IrregularStack",sharedsettings:"common/mobile/utils/SharedSettings"},shim:{framework7:{exports:"Framework7"},underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},core:{deps:["backbone","notification","irregularstack","sharedsettings"]},extendes:{deps:["underscore","jquery","framework7"]},sdk:{deps:["jquery","underscore","allfonts","xregexp","sockjs","jszip","jsziputils"]},gateway:{deps:["jquery"]},analytics:{deps:["jquery"]}}}),require(["backbone","framework7","core","underscore","extendes","sdk","api","analytics","gateway","locale"],function(e,t,i){e.history.start();var a=new e.Application({nameSpace:"DE",autoCreate:!1,controllers:["Common.Controllers.Plugins","Editor","Toolbar","Search","Main","DocumentHolder","Settings","EditContainer","EditText","EditParagraph","EditHeader","EditTable","EditImage","EditShape","EditChart","EditHyperlink","AddContainer","AddTable","AddShape","AddImage","AddOther","Common.Controllers.Collaboration"]}),n=t.prototype.device;window.uiApp=new t({modalTitle:"ONLYOFFICE",tapHold:!0,material:n.android,onAjaxStart:function(e){uiApp.showIndicator()},onAjaxComplete:function(e){uiApp.hideIndicator()}}),window.$$=Dom7,function(e,t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)}("resources/css/app-"+(n.android?"material":"ios")+".css"),Common.Locale.apply(function(){require(["common/main/lib/util/LocalStorage","common/main/lib/util/utils","common/mobile/lib/controller/Plugins","documenteditor/mobile/app/controller/Editor","documenteditor/mobile/app/controller/Toolbar","documenteditor/mobile/app/controller/Search","documenteditor/mobile/app/controller/Main","documenteditor/mobile/app/controller/DocumentHolder","documenteditor/mobile/app/controller/Settings","documenteditor/mobile/app/controller/edit/EditContainer","documenteditor/mobile/app/controller/edit/EditText","documenteditor/mobile/app/controller/edit/EditParagraph","documenteditor/mobile/app/controller/edit/EditHeader","documenteditor/mobile/app/controller/edit/EditTable","documenteditor/mobile/app/controller/edit/EditImage","documenteditor/mobile/app/controller/edit/EditShape","documenteditor/mobile/app/controller/edit/EditChart","documenteditor/mobile/app/controller/edit/EditHyperlink","documenteditor/mobile/app/controller/add/AddContainer","documenteditor/mobile/app/controller/add/AddTable","documenteditor/mobile/app/controller/add/AddShape","documenteditor/mobile/app/controller/add/AddImage","documenteditor/mobile/app/controller/add/AddOther","common/mobile/lib/controller/Collaboration"],function(){a.start()})})},function(e){"timeout"==e.requireType&&!reqerr&&window.requireTimeourError&&(reqerr=window.requireTimeourError(),window.alert(reqerr),window.location.reload())}),define("../apps/documenteditor/mobile/app.js",function(){});